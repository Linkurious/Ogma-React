var Nz=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ait=Nz((mit,Wd)=>{function Rz(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Fz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rL={exports:{}},Jm={},oL={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=Symbol.for("react.element"),Oz=Symbol.for("react.portal"),Dz=Symbol.for("react.fragment"),zz=Symbol.for("react.strict_mode"),Bz=Symbol.for("react.profiler"),Uz=Symbol.for("react.provider"),$z=Symbol.for("react.context"),jz=Symbol.for("react.forward_ref"),Gz=Symbol.for("react.suspense"),Vz=Symbol.for("react.memo"),Hz=Symbol.for("react.lazy"),hS=Symbol.iterator;function Wz(t){return t===null||typeof t!="object"?null:(t=hS&&t[hS]||t["@@iterator"],typeof t=="function"?t:null)}var aL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lL=Object.assign,uL={};function Du(t,e,n){this.props=t,this.context=e,this.refs=uL,this.updater=n||aL}Du.prototype.isReactComponent={};Du.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Du.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dL(){}dL.prototype=Du.prototype;function Fx(t,e,n){this.props=t,this.context=e,this.refs=uL,this.updater=n||aL}var Ox=Fx.prototype=new dL;Ox.constructor=Fx;lL(Ox,Du.prototype);Ox.isPureReactComponent=!0;var cS=Array.isArray,hL=Object.prototype.hasOwnProperty,Dx={current:null},cL={key:!0,ref:!0,__self:!0,__source:!0};function gL(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)hL.call(e,i)&&!cL.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Qh,type:t,key:r,ref:o,props:s,_owner:Dx.current}}function Xz(t,e){return{$$typeof:Qh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qh}function Zz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gS=/\/+/g;function y_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zz(""+t.key):e.toString(36)}function tf(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qh:case Oz:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+y_(o,0):i,cS(s)?(n="",t!=null&&(n=t.replace(gS,"$&/")+"/"),tf(s,e,n,"",function(d){return d})):s!=null&&(zx(s)&&(s=Xz(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gS,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",cS(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+y_(r,a);o+=tf(r,e,n,l,s)}else if(l=Wz(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+y_(r,a++),o+=tf(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nc(t,e,n){if(t==null)return t;var i=[],s=0;return tf(t,i,"","",function(r){return e.call(n,r,s++)}),i}function Yz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Li={current:null},ef={transition:null},qz={ReactCurrentDispatcher:Li,ReactCurrentBatchConfig:ef,ReactCurrentOwner:Dx};function fL(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Nc,forEach:function(t,e,n){Nc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nc(t,function(){e++}),e},toArray:function(t){return Nc(t,function(e){return e})||[]},only:function(t){if(!zx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Du;pe.Fragment=Dz;pe.Profiler=Bz;pe.PureComponent=Fx;pe.StrictMode=zz;pe.Suspense=Gz;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qz;pe.act=fL;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=lL({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Dx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hL.call(e,l)&&!cL.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];i.children=a}return{$$typeof:Qh,type:t.type,key:s,ref:r,props:i,_owner:o}};pe.createContext=function(t){return t={$$typeof:$z,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uz,_context:t},t.Consumer=t};pe.createElement=gL;pe.createFactory=function(t){var e=gL.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:jz,render:t}};pe.isValidElement=zx;pe.lazy=function(t){return{$$typeof:Hz,_payload:{_status:-1,_result:t},_init:Yz}};pe.memo=function(t,e){return{$$typeof:Vz,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=ef.transition;ef.transition={};try{t()}finally{ef.transition=e}};pe.unstable_act=fL;pe.useCallback=function(t,e){return Li.current.useCallback(t,e)};pe.useContext=function(t){return Li.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Li.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Li.current.useEffect(t,e)};pe.useId=function(){return Li.current.useId()};pe.useImperativeHandle=function(t,e,n){return Li.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Li.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Li.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Li.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Li.current.useReducer(t,e,n)};pe.useRef=function(t){return Li.current.useRef(t)};pe.useState=function(t){return Li.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Li.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Li.current.useTransition()};pe.version="18.3.1";oL.exports=pe;var $=oL.exports;const Lo=qm($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jz=$,Kz=Symbol.for("react.element"),Qz=Symbol.for("react.fragment"),tB=Object.prototype.hasOwnProperty,eB=Jz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nB={key:!0,ref:!0,__self:!0,__source:!0};function mL(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)tB.call(e,i)&&!nB.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:Kz,type:t,key:r,ref:o,props:s,_owner:eB.current}}Jm.Fragment=Qz;Jm.jsx=mL;Jm.jsxs=mL;rL.exports=Jm;var Q=rL.exports,pL={exports:{}},is={},_L={exports:{}},yL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var Z=U.length;U.push(K);t:for(;0<Z;){var rt=Z-1>>>1,vt=U[rt];if(0<s(vt,K))U[rt]=K,U[Z]=vt,Z=rt;else break t}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],Z=U.pop();if(Z!==K){U[0]=Z;t:for(var rt=0,vt=U.length,St=vt>>>1;rt<St;){var ut=2*(rt+1)-1,_t=U[ut],Rt=ut+1,Gt=U[Rt];if(0>s(_t,Z))Rt<vt&&0>s(Gt,_t)?(U[rt]=Gt,U[Rt]=Z,rt=Rt):(U[rt]=_t,U[ut]=Z,rt=ut);else if(Rt<vt&&0>s(Gt,Z))U[rt]=Gt,U[Rt]=Z,rt=Rt;else break t}}return K}function s(U,K){var Z=U.sortIndex-K.sortIndex;return Z!==0?Z:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,c=null,g=3,m=!1,_=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var K=n(d);K!==null;){if(K.callback===null)i(d);else if(K.startTime<=U)i(d),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(d)}}function S(U){if(p=!1,E(U),!_)if(n(l)!==null)_=!0,N(A);else{var K=n(d);K!==null&&W(S,K.startTime-U)}}function A(U,K){_=!1,p&&(p=!1,x(k),k=-1),m=!0;var Z=g;try{for(E(K),c=n(l);c!==null&&(!(c.expirationTime>K)||U&&!M());){var rt=c.callback;if(typeof rt=="function"){c.callback=null,g=c.priorityLevel;var vt=rt(c.expirationTime<=K);K=t.unstable_now(),typeof vt=="function"?c.callback=vt:c===n(l)&&i(l),E(K)}else i(l);c=n(l)}if(c!==null)var St=!0;else{var ut=n(d);ut!==null&&W(S,ut.startTime-K),St=!1}return St}finally{c=null,g=Z,m=!1}}var T=!1,P=null,k=-1,I=5,R=-1;function M(){return!(t.unstable_now()-R<I)}function z(){if(P!==null){var U=t.unstable_now();R=U;var K=!0;try{K=P(!0,U)}finally{K?j():(T=!1,P=null)}}else T=!1}var j;if(typeof b=="function")j=function(){b(z)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,O=X.port2;X.port1.onmessage=z,j=function(){O.postMessage(null)}}else j=function(){v(z,0)};function N(U){P=U,T||(T=!0,j())}function W(U,K){k=v(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,N(A))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var Z=g;g=K;try{return U()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=g;g=U;try{return K()}finally{g=Z}},t.unstable_scheduleCallback=function(U,K,Z){var rt=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?rt+Z:rt):Z=rt,U){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Z+vt,U={id:h++,callback:K,priorityLevel:U,startTime:Z,expirationTime:vt,sortIndex:-1},Z>rt?(U.sortIndex=Z,e(d,U),n(l)===null&&U===n(d)&&(p?(x(k),k=-1):p=!0,W(S,Z-rt))):(U.sortIndex=vt,e(l,U),_||m||(_=!0,N(A))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var K=g;return function(){var Z=g;g=K;try{return U.apply(this,arguments)}finally{g=Z}}}})(yL);_L.exports=yL;var iB=_L.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sB=$,es=iB;function Mt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vL=new Set,mh={};function Ka(t,e){fu(t,e),fu(t+"Capture",e)}function fu(t,e){for(mh[t]=e,t=0;t<e.length;t++)vL.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i0=Object.prototype.hasOwnProperty,rB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fS={},mS={};function oB(t){return i0.call(mS,t)?!0:i0.call(fS,t)?!1:rB.test(t)?mS[t]=!0:(fS[t]=!0,!1)}function aB(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lB(t,e,n,i){if(e===null||typeof e>"u"||aB(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pi(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ti[t]=new Pi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ti[e]=new Pi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ti[t]=new Pi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ti[t]=new Pi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ti[t]=new Pi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ti[t]=new Pi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ti[t]=new Pi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ti[t]=new Pi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ti[t]=new Pi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bx=/[\-:]([a-z])/g;function Ux(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bx,Ux);ti[e]=new Pi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bx,Ux);ti[e]=new Pi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bx,Ux);ti[e]=new Pi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ti[t]=new Pi(t,1,!1,t.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ti[t]=new Pi(t,1,!1,t.toLowerCase(),null,!0,!0)});function $x(t,e,n,i){var s=ti.hasOwnProperty(e)?ti[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lB(e,n,s,i)&&(n=null),i||s===null?oB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qr=sB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Fl=Symbol.for("react.portal"),Ol=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),s0=Symbol.for("react.profiler"),xL=Symbol.for("react.provider"),bL=Symbol.for("react.context"),Gx=Symbol.for("react.forward_ref"),r0=Symbol.for("react.suspense"),o0=Symbol.for("react.suspense_list"),Vx=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),EL=Symbol.for("react.offscreen"),pS=Symbol.iterator;function Ku(t){return t===null||typeof t!="object"?null:(t=pS&&t[pS]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,v_;function Sd(t){if(v_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);v_=e&&e[1]||""}return`
`+v_+t}var x_=!1;function b_(t,e){if(!t||x_)return"";x_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{x_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sd(t):""}function uB(t){switch(t.tag){case 5:return Sd(t.type);case 16:return Sd("Lazy");case 13:return Sd("Suspense");case 19:return Sd("SuspenseList");case 0:case 2:case 15:return t=b_(t.type,!1),t;case 11:return t=b_(t.type.render,!1),t;case 1:return t=b_(t.type,!0),t;default:return""}}function a0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ol:return"Fragment";case Fl:return"Portal";case s0:return"Profiler";case jx:return"StrictMode";case r0:return"Suspense";case o0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bL:return(t.displayName||"Context")+".Consumer";case xL:return(t._context.displayName||"Context")+".Provider";case Gx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vx:return e=t.displayName||null,e!==null?e:a0(t.type)||"Memo";case Eo:e=t._payload,t=t._init;try{return a0(t(e))}catch{}}return null}function dB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a0(e);case 8:return e===jx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hB(t){var e=SL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fc(t){t._valueTracker||(t._valueTracker=hB(t))}function wL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=SL(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Of(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l0(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _S(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Zo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AL(t,e){e=e.checked,e!=null&&$x(t,"checked",e,!1)}function u0(t,e){AL(t,e);var n=Zo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?d0(t,e.type,n):e.hasOwnProperty("defaultValue")&&d0(t,e.type,Zo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function d0(t,e,n){(e!=="number"||Of(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wd=Array.isArray;function iu(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function h0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Mt(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Mt(92));if(wd(n)){if(1<n.length)throw Error(Mt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zo(n)}}function TL(t,e){var n=Zo(e.value),i=Zo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function xS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function c0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oc,LL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oc=Oc||document.createElement("div"),Oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ph(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cB=["Webkit","ms","Moz","O"];Object.keys(Xd).forEach(function(t){cB.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xd[e]=Xd[t]})});function PL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xd.hasOwnProperty(t)&&Xd[t]?(""+e).trim():e+"px"}function kL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=PL(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var gB=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g0(t,e){if(e){if(gB[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Mt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Mt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Mt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Mt(62))}}function f0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m0=null;function Hx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var p0=null,su=null,ru=null;function bS(t){if(t=nc(t)){if(typeof p0!="function")throw Error(Mt(280));var e=t.stateNode;e&&(e=np(e),p0(t.stateNode,t.type,e))}}function IL(t){su?ru?ru.push(t):ru=[t]:su=t}function ML(){if(su){var t=su,e=ru;if(ru=su=null,bS(t),e)for(t=0;t<e.length;t++)bS(e[t])}}function NL(t,e){return t(e)}function RL(){}var E_=!1;function FL(t,e,n){if(E_)return t(e,n);E_=!0;try{return NL(t,e,n)}finally{E_=!1,(su!==null||ru!==null)&&(RL(),ML())}}function _h(t,e){var n=t.stateNode;if(n===null)return null;var i=np(n);if(i===null)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Mt(231,e,typeof n));return n}var _0=!1;if(Hr)try{var Qu={};Object.defineProperty(Qu,"passive",{get:function(){_0=!0}}),window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{_0=!1}function fB(t,e,n,i,s,r,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Zd=!1,Df=null,zf=!1,y0=null,mB={onError:function(t){Zd=!0,Df=t}};function pB(t,e,n,i,s,r,o,a,l){Zd=!1,Df=null,fB.apply(mB,arguments)}function _B(t,e,n,i,s,r,o,a,l){if(pB.apply(this,arguments),Zd){if(Zd){var d=Df;Zd=!1,Df=null}else throw Error(Mt(198));zf||(zf=!0,y0=d)}}function Qa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ES(t){if(Qa(t)!==t)throw Error(Mt(188))}function yB(t){var e=t.alternate;if(!e){if(e=Qa(t),e===null)throw Error(Mt(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return ES(s),t;if(r===i)return ES(s),e;r=r.sibling}throw Error(Mt(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(Mt(189))}}if(n.alternate!==i)throw Error(Mt(190))}if(n.tag!==3)throw Error(Mt(188));return n.stateNode.current===n?t:e}function DL(t){return t=yB(t),t!==null?zL(t):null}function zL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zL(t);if(e!==null)return e;t=t.sibling}return null}var BL=es.unstable_scheduleCallback,SS=es.unstable_cancelCallback,vB=es.unstable_shouldYield,xB=es.unstable_requestPaint,Sn=es.unstable_now,bB=es.unstable_getCurrentPriorityLevel,Wx=es.unstable_ImmediatePriority,UL=es.unstable_UserBlockingPriority,Bf=es.unstable_NormalPriority,EB=es.unstable_LowPriority,$L=es.unstable_IdlePriority,Km=null,cr=null;function SB(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Km,t,void 0,(t.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:TB,wB=Math.log,AB=Math.LN2;function TB(t){return t>>>=0,t===0?32:31-(wB(t)/AB|0)|0}var Dc=64,zc=4194304;function Ad(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uf(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ad(a):(r&=o,r!==0&&(i=Ad(r)))}else o=n&~s,o!==0?i=Ad(o):r!==0&&(i=Ad(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Us(e),s=1<<n,i|=t[n],e&=~s;return i}function CB(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LB(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Us(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=CB(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function v0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jL(){var t=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),t}function S_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Us(e),t[e]=n}function PB(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Us(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function Xx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Us(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Re=0;function GL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VL,Zx,HL,WL,XL,x0=!1,Bc=[],zo=null,Bo=null,Uo=null,yh=new Map,vh=new Map,To=[],kB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wS(t,e){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":yh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(e.pointerId)}}function td(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=nc(e),e!==null&&Zx(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IB(t,e,n,i,s){switch(e){case"focusin":return zo=td(zo,t,e,n,i,s),!0;case"dragenter":return Bo=td(Bo,t,e,n,i,s),!0;case"mouseover":return Uo=td(Uo,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return yh.set(r,td(yh.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,vh.set(r,td(vh.get(r)||null,t,e,n,i,s)),!0}return!1}function ZL(t){var e=ba(t.target);if(e!==null){var n=Qa(e);if(n!==null){if(e=n.tag,e===13){if(e=OL(n),e!==null){t.blockedOn=e,XL(t.priority,function(){HL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=b0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);m0=i,n.target.dispatchEvent(i),m0=null}else return e=nc(n),e!==null&&Zx(e),t.blockedOn=n,!1;e.shift()}return!0}function AS(t,e,n){nf(t)&&n.delete(e)}function MB(){x0=!1,zo!==null&&nf(zo)&&(zo=null),Bo!==null&&nf(Bo)&&(Bo=null),Uo!==null&&nf(Uo)&&(Uo=null),yh.forEach(AS),vh.forEach(AS)}function ed(t,e){t.blockedOn===e&&(t.blockedOn=null,x0||(x0=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,MB)))}function xh(t){function e(s){return ed(s,t)}if(0<Bc.length){ed(Bc[0],t);for(var n=1;n<Bc.length;n++){var i=Bc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zo!==null&&ed(zo,t),Bo!==null&&ed(Bo,t),Uo!==null&&ed(Uo,t),yh.forEach(e),vh.forEach(e),n=0;n<To.length;n++)i=To[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<To.length&&(n=To[0],n.blockedOn===null);)ZL(n),n.blockedOn===null&&To.shift()}var ou=Qr.ReactCurrentBatchConfig,$f=!0;function NB(t,e,n,i){var s=Re,r=ou.transition;ou.transition=null;try{Re=1,Yx(t,e,n,i)}finally{Re=s,ou.transition=r}}function RB(t,e,n,i){var s=Re,r=ou.transition;ou.transition=null;try{Re=4,Yx(t,e,n,i)}finally{Re=s,ou.transition=r}}function Yx(t,e,n,i){if($f){var s=b0(t,e,n,i);if(s===null)N_(t,e,i,jf,n),wS(t,i);else if(IB(s,t,e,n,i))i.stopPropagation();else if(wS(t,i),e&4&&-1<kB.indexOf(t)){for(;s!==null;){var r=nc(s);if(r!==null&&VL(r),r=b0(t,e,n,i),r===null&&N_(t,e,i,jf,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else N_(t,e,i,null,n)}}var jf=null;function b0(t,e,n,i){if(jf=null,t=Hx(i),t=ba(t),t!==null)if(e=Qa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jf=t,null}function YL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bB()){case Wx:return 1;case UL:return 4;case Bf:case EB:return 16;case $L:return 536870912;default:return 16}default:return 16}}var Po=null,qx=null,sf=null;function qL(){if(sf)return sf;var t,e=qx,n=e.length,i,s="value"in Po?Po.value:Po.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return sf=s.slice(t,1<i?1-i:void 0)}function rf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function TS(){return!1}function ss(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Uc:TS,this.isPropagationStopped=TS,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=ss(zu),ec=dn({},zu,{view:0,detail:0}),FB=ss(ec),w_,A_,nd,Qm=dn({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nd&&(nd&&t.type==="mousemove"?(w_=t.screenX-nd.screenX,A_=t.screenY-nd.screenY):A_=w_=0,nd=t),w_)},movementY:function(t){return"movementY"in t?t.movementY:A_}}),CS=ss(Qm),OB=dn({},Qm,{dataTransfer:0}),DB=ss(OB),zB=dn({},ec,{relatedTarget:0}),T_=ss(zB),BB=dn({},zu,{animationName:0,elapsedTime:0,pseudoElement:0}),UB=ss(BB),$B=dn({},zu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jB=ss($B),GB=dn({},zu,{data:0}),LS=ss(GB),VB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WB[t])?!!e[t]:!1}function Kx(){return XB}var ZB=dn({},ec,{key:function(t){if(t.key){var e=VB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kx,charCode:function(t){return t.type==="keypress"?rf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YB=ss(ZB),qB=dn({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PS=ss(qB),JB=dn({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kx}),KB=ss(JB),QB=dn({},zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),t3=ss(QB),e3=dn({},Qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),n3=ss(e3),i3=[9,13,27,32],Qx=Hr&&"CompositionEvent"in window,Yd=null;Hr&&"documentMode"in document&&(Yd=document.documentMode);var s3=Hr&&"TextEvent"in window&&!Yd,JL=Hr&&(!Qx||Yd&&8<Yd&&11>=Yd),kS=" ",IS=!1;function KL(t,e){switch(t){case"keyup":return i3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dl=!1;function r3(t,e){switch(t){case"compositionend":return QL(e);case"keypress":return e.which!==32?null:(IS=!0,kS);case"textInput":return t=e.data,t===kS&&IS?null:t;default:return null}}function o3(t,e){if(Dl)return t==="compositionend"||!Qx&&KL(t,e)?(t=qL(),sf=qx=Po=null,Dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JL&&e.locale!=="ko"?null:e.data;default:return null}}var a3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a3[t.type]:e==="textarea"}function tP(t,e,n,i){IL(i),e=Gf(e,"onChange"),0<e.length&&(n=new Jx("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qd=null,bh=null;function l3(t){hP(t,0)}function tp(t){var e=Ul(t);if(wL(e))return t}function u3(t,e){if(t==="change")return e}var eP=!1;if(Hr){var C_;if(Hr){var L_="oninput"in document;if(!L_){var NS=document.createElement("div");NS.setAttribute("oninput","return;"),L_=typeof NS.oninput=="function"}C_=L_}else C_=!1;eP=C_&&(!document.documentMode||9<document.documentMode)}function RS(){qd&&(qd.detachEvent("onpropertychange",nP),bh=qd=null)}function nP(t){if(t.propertyName==="value"&&tp(bh)){var e=[];tP(e,bh,t,Hx(t)),FL(l3,e)}}function d3(t,e,n){t==="focusin"?(RS(),qd=e,bh=n,qd.attachEvent("onpropertychange",nP)):t==="focusout"&&RS()}function h3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tp(bh)}function c3(t,e){if(t==="click")return tp(e)}function g3(t,e){if(t==="input"||t==="change")return tp(e)}function f3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var js=typeof Object.is=="function"?Object.is:f3;function Eh(t,e){if(js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!i0.call(e,s)||!js(t[s],e[s]))return!1}return!0}function FS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OS(t,e){var n=FS(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=FS(n)}}function iP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sP(){for(var t=window,e=Of();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Of(t.document)}return e}function tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function m3(t){var e=sP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iP(n.ownerDocument.documentElement,n)){if(i!==null&&tb(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=OS(n,r);var o=OS(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p3=Hr&&"documentMode"in document&&11>=document.documentMode,zl=null,E0=null,Jd=null,S0=!1;function DS(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;S0||zl==null||zl!==Of(i)||(i=zl,"selectionStart"in i&&tb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jd&&Eh(Jd,i)||(Jd=i,i=Gf(E0,"onSelect"),0<i.length&&(e=new Jx("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=zl)))}function $c(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bl={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},P_={},rP={};Hr&&(rP=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function ep(t){if(P_[t])return P_[t];if(!Bl[t])return t;var e=Bl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rP)return P_[t]=e[n];return t}var oP=ep("animationend"),aP=ep("animationiteration"),lP=ep("animationstart"),uP=ep("transitionend"),dP=new Map,zS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function na(t,e){dP.set(t,e),Ka(e,[t])}for(var k_=0;k_<zS.length;k_++){var I_=zS[k_],_3=I_.toLowerCase(),y3=I_[0].toUpperCase()+I_.slice(1);na(_3,"on"+y3)}na(oP,"onAnimationEnd");na(aP,"onAnimationIteration");na(lP,"onAnimationStart");na("dblclick","onDoubleClick");na("focusin","onFocus");na("focusout","onBlur");na(uP,"onTransitionEnd");fu("onMouseEnter",["mouseout","mouseover"]);fu("onMouseLeave",["mouseout","mouseover"]);fu("onPointerEnter",["pointerout","pointerover"]);fu("onPointerLeave",["pointerout","pointerover"]);Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function BS(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,_B(i,e,void 0,t),t.currentTarget=null}function hP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;t:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;BS(s,a,d),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;BS(s,a,d),r=l}}}if(zf)throw t=y0,zf=!1,y0=null,t}function He(t,e){var n=e[L0];n===void 0&&(n=e[L0]=new Set);var i=t+"__bubble";n.has(i)||(cP(e,t,2,!1),n.add(i))}function M_(t,e,n){var i=0;e&&(i|=4),cP(n,t,i,e)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Sh(t){if(!t[jc]){t[jc]=!0,vL.forEach(function(n){n!=="selectionchange"&&(v3.has(n)||M_(n,!1,t),M_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jc]||(e[jc]=!0,M_("selectionchange",!1,e))}}function cP(t,e,n,i){switch(YL(e)){case 1:var s=NB;break;case 4:s=RB;break;default:s=Yx}n=s.bind(null,e,n,t),s=void 0,!_0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function N_(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ba(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}FL(function(){var d=r,h=Hx(n),c=[];t:{var g=dP.get(t);if(g!==void 0){var m=Jx,_=t;switch(t){case"keypress":if(rf(n)===0)break t;case"keydown":case"keyup":m=YB;break;case"focusin":_="focus",m=T_;break;case"focusout":_="blur",m=T_;break;case"beforeblur":case"afterblur":m=T_;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=CS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=DB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=KB;break;case oP:case aP:case lP:m=UB;break;case uP:m=t3;break;case"scroll":m=FB;break;case"wheel":m=n3;break;case"copy":case"cut":case"paste":m=jB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=PS}var p=(e&4)!==0,v=!p&&t==="scroll",x=p?g!==null?g+"Capture":null:g;p=[];for(var b=d,E;b!==null;){E=b;var S=E.stateNode;if(E.tag===5&&S!==null&&(E=S,x!==null&&(S=_h(b,x),S!=null&&p.push(wh(b,S,E)))),v)break;b=b.return}0<p.length&&(g=new m(g,_,null,n,h),c.push({event:g,listeners:p}))}}if(!(e&7)){t:{if(g=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",g&&n!==m0&&(_=n.relatedTarget||n.fromElement)&&(ba(_)||_[Wr]))break t;if((m||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?ba(_):null,_!==null&&(v=Qa(_),_!==v||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(p=CS,S="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(p=PS,S="onPointerLeave",x="onPointerEnter",b="pointer"),v=m==null?g:Ul(m),E=_==null?g:Ul(_),g=new p(S,b+"leave",m,n,h),g.target=v,g.relatedTarget=E,S=null,ba(h)===d&&(p=new p(x,b+"enter",_,n,h),p.target=E,p.relatedTarget=v,S=p),v=S,m&&_)e:{for(p=m,x=_,b=0,E=p;E;E=vl(E))b++;for(E=0,S=x;S;S=vl(S))E++;for(;0<b-E;)p=vl(p),b--;for(;0<E-b;)x=vl(x),E--;for(;b--;){if(p===x||x!==null&&p===x.alternate)break e;p=vl(p),x=vl(x)}p=null}else p=null;m!==null&&US(c,g,m,p,!1),_!==null&&v!==null&&US(c,v,_,p,!0)}}t:{if(g=d?Ul(d):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var A=u3;else if(MS(g))if(eP)A=g3;else{A=h3;var T=d3}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(A=c3);if(A&&(A=A(t,d))){tP(c,A,n,h);break t}T&&T(t,g,d),t==="focusout"&&(T=g._wrapperState)&&T.controlled&&g.type==="number"&&d0(g,"number",g.value)}switch(T=d?Ul(d):window,t){case"focusin":(MS(T)||T.contentEditable==="true")&&(zl=T,E0=d,Jd=null);break;case"focusout":Jd=E0=zl=null;break;case"mousedown":S0=!0;break;case"contextmenu":case"mouseup":case"dragend":S0=!1,DS(c,n,h);break;case"selectionchange":if(p3)break;case"keydown":case"keyup":DS(c,n,h)}var P;if(Qx)t:{switch(t){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else Dl?KL(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(JL&&n.locale!=="ko"&&(Dl||k!=="onCompositionStart"?k==="onCompositionEnd"&&Dl&&(P=qL()):(Po=h,qx="value"in Po?Po.value:Po.textContent,Dl=!0)),T=Gf(d,k),0<T.length&&(k=new LS(k,t,null,n,h),c.push({event:k,listeners:T}),P?k.data=P:(P=QL(n),P!==null&&(k.data=P)))),(P=s3?r3(t,n):o3(t,n))&&(d=Gf(d,"onBeforeInput"),0<d.length&&(h=new LS("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:d}),h.data=P))}hP(c,e)})}function wh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gf(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=_h(t,n),r!=null&&i.unshift(wh(t,r,s)),r=_h(t,e),r!=null&&i.push(wh(t,r,s))),t=t.return}return i}function vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function US(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&d!==null&&(a=d,s?(l=_h(n,r),l!=null&&o.unshift(wh(n,l,a))):s||(l=_h(n,r),l!=null&&o.push(wh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var x3=/\r\n?/g,b3=/\u0000|\uFFFD/g;function $S(t){return(typeof t=="string"?t:""+t).replace(x3,`
`).replace(b3,"")}function Gc(t,e,n){if(e=$S(e),$S(t)!==e&&n)throw Error(Mt(425))}function Vf(){}var w0=null,A0=null;function T0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C0=typeof setTimeout=="function"?setTimeout:void 0,E3=typeof clearTimeout=="function"?clearTimeout:void 0,jS=typeof Promise=="function"?Promise:void 0,S3=typeof queueMicrotask=="function"?queueMicrotask:typeof jS<"u"?function(t){return jS.resolve(null).then(t).catch(w3)}:C0;function w3(t){setTimeout(function(){throw t})}function R_(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),xh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);xh(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bu=Math.random().toString(36).slice(2),or="__reactFiber$"+Bu,Ah="__reactProps$"+Bu,Wr="__reactContainer$"+Bu,L0="__reactEvents$"+Bu,A3="__reactListeners$"+Bu,T3="__reactHandles$"+Bu;function ba(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=GS(t);t!==null;){if(n=t[or])return n;t=GS(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[or]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Mt(33))}function np(t){return t[Ah]||null}var P0=[],$l=-1;function ia(t){return{current:t}}function Je(t){0>$l||(t.current=P0[$l],P0[$l]=null,$l--)}function $e(t,e){$l++,P0[$l]=t.current,t.current=e}var Yo={},gi=ia(Yo),$i=ia(!1),Ua=Yo;function mu(t,e){var n=t.type.contextTypes;if(!n)return Yo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ji(t){return t=t.childContextTypes,t!=null}function Hf(){Je($i),Je(gi)}function VS(t,e,n){if(gi.current!==Yo)throw Error(Mt(168));$e(gi,e),$e($i,n)}function gP(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Mt(108,dB(t)||"Unknown",s));return dn({},n,i)}function Wf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yo,Ua=gi.current,$e(gi,t),$e($i,$i.current),!0}function HS(t,e,n){var i=t.stateNode;if(!i)throw Error(Mt(169));n?(t=gP(t,e,Ua),i.__reactInternalMemoizedMergedChildContext=t,Je($i),Je(gi),$e(gi,t)):Je($i),$e($i,n)}var Nr=null,ip=!1,F_=!1;function fP(t){Nr===null?Nr=[t]:Nr.push(t)}function C3(t){ip=!0,fP(t)}function sa(){if(!F_&&Nr!==null){F_=!0;var t=0,e=Re;try{var n=Nr;for(Re=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Nr=null,ip=!1}catch(s){throw Nr!==null&&(Nr=Nr.slice(t+1)),BL(Wx,sa),s}finally{Re=e,F_=!1}}return null}var jl=[],Gl=0,Xf=null,Zf=0,ms=[],ps=0,$a=null,Fr=1,Or="";function ga(t,e){jl[Gl++]=Zf,jl[Gl++]=Xf,Xf=t,Zf=e}function mP(t,e,n){ms[ps++]=Fr,ms[ps++]=Or,ms[ps++]=$a,$a=t;var i=Fr;t=Or;var s=32-Us(i)-1;i&=~(1<<s),n+=1;var r=32-Us(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Fr=1<<32-Us(e)+s|n<<s|i,Or=r+t}else Fr=1<<r|n<<s|i,Or=t}function eb(t){t.return!==null&&(ga(t,1),mP(t,1,0))}function nb(t){for(;t===Xf;)Xf=jl[--Gl],jl[Gl]=null,Zf=jl[--Gl],jl[Gl]=null;for(;t===$a;)$a=ms[--ps],ms[ps]=null,Or=ms[--ps],ms[ps]=null,Fr=ms[--ps],ms[ps]=null}var ts=null,Qi=null,tn=!1,Ds=null;function pP(t,e){var n=_s(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function WS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Qi=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$a!==null?{id:Fr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_s(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Qi=null,!0):!1;default:return!1}}function k0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function I0(t){if(tn){var e=Qi;if(e){var n=e;if(!WS(t,e)){if(k0(t))throw Error(Mt(418));e=$o(n.nextSibling);var i=ts;e&&WS(t,e)?pP(i,n):(t.flags=t.flags&-4097|2,tn=!1,ts=t)}}else{if(k0(t))throw Error(Mt(418));t.flags=t.flags&-4097|2,tn=!1,ts=t}}}function XS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Vc(t){if(t!==ts)return!1;if(!tn)return XS(t),tn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!T0(t.type,t.memoizedProps)),e&&(e=Qi)){if(k0(t))throw _P(),Error(Mt(418));for(;e;)pP(t,e),e=$o(e.nextSibling)}if(XS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Mt(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qi=$o(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qi=null}}else Qi=ts?$o(t.stateNode.nextSibling):null;return!0}function _P(){for(var t=Qi;t;)t=$o(t.nextSibling)}function pu(){Qi=ts=null,tn=!1}function ib(t){Ds===null?Ds=[t]:Ds.push(t)}var L3=Qr.ReactCurrentBatchConfig;function id(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Mt(309));var i=n.stateNode}if(!i)throw Error(Mt(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(Mt(284));if(!n._owner)throw Error(Mt(290,t))}return t}function Hc(t,e){throw t=Object.prototype.toString.call(e),Error(Mt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ZS(t){var e=t._init;return e(t._payload)}function yP(t){function e(x,b){if(t){var E=x.deletions;E===null?(x.deletions=[b],x.flags|=16):E.push(b)}}function n(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function i(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=Ho(x,b),x.index=0,x.sibling=null,x}function r(x,b,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<b?(x.flags|=2,b):E):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,b,E,S){return b===null||b.tag!==6?(b=j_(E,x.mode,S),b.return=x,b):(b=s(b,E),b.return=x,b)}function l(x,b,E,S){var A=E.type;return A===Ol?h(x,b,E.props.children,S,E.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Eo&&ZS(A)===b.type)?(S=s(b,E.props),S.ref=id(x,b,E),S.return=x,S):(S=cf(E.type,E.key,E.props,null,x.mode,S),S.ref=id(x,b,E),S.return=x,S)}function d(x,b,E,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=G_(E,x.mode,S),b.return=x,b):(b=s(b,E.children||[]),b.return=x,b)}function h(x,b,E,S,A){return b===null||b.tag!==7?(b=Fa(E,x.mode,S,A),b.return=x,b):(b=s(b,E),b.return=x,b)}function c(x,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=j_(""+b,x.mode,E),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rc:return E=cf(b.type,b.key,b.props,null,x.mode,E),E.ref=id(x,null,b),E.return=x,E;case Fl:return b=G_(b,x.mode,E),b.return=x,b;case Eo:var S=b._init;return c(x,S(b._payload),E)}if(wd(b)||Ku(b))return b=Fa(b,x.mode,E,null),b.return=x,b;Hc(x,b)}return null}function g(x,b,E,S){var A=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:a(x,b,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:return E.key===A?l(x,b,E,S):null;case Fl:return E.key===A?d(x,b,E,S):null;case Eo:return A=E._init,g(x,b,A(E._payload),S)}if(wd(E)||Ku(E))return A!==null?null:h(x,b,E,S,null);Hc(x,E)}return null}function m(x,b,E,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(E)||null,a(b,x,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:return x=x.get(S.key===null?E:S.key)||null,l(b,x,S,A);case Fl:return x=x.get(S.key===null?E:S.key)||null,d(b,x,S,A);case Eo:var T=S._init;return m(x,b,E,T(S._payload),A)}if(wd(S)||Ku(S))return x=x.get(E)||null,h(b,x,S,A,null);Hc(b,S)}return null}function _(x,b,E,S){for(var A=null,T=null,P=b,k=b=0,I=null;P!==null&&k<E.length;k++){P.index>k?(I=P,P=null):I=P.sibling;var R=g(x,P,E[k],S);if(R===null){P===null&&(P=I);break}t&&P&&R.alternate===null&&e(x,P),b=r(R,b,k),T===null?A=R:T.sibling=R,T=R,P=I}if(k===E.length)return n(x,P),tn&&ga(x,k),A;if(P===null){for(;k<E.length;k++)P=c(x,E[k],S),P!==null&&(b=r(P,b,k),T===null?A=P:T.sibling=P,T=P);return tn&&ga(x,k),A}for(P=i(x,P);k<E.length;k++)I=m(P,x,k,E[k],S),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?k:I.key),b=r(I,b,k),T===null?A=I:T.sibling=I,T=I);return t&&P.forEach(function(M){return e(x,M)}),tn&&ga(x,k),A}function p(x,b,E,S){var A=Ku(E);if(typeof A!="function")throw Error(Mt(150));if(E=A.call(E),E==null)throw Error(Mt(151));for(var T=A=null,P=b,k=b=0,I=null,R=E.next();P!==null&&!R.done;k++,R=E.next()){P.index>k?(I=P,P=null):I=P.sibling;var M=g(x,P,R.value,S);if(M===null){P===null&&(P=I);break}t&&P&&M.alternate===null&&e(x,P),b=r(M,b,k),T===null?A=M:T.sibling=M,T=M,P=I}if(R.done)return n(x,P),tn&&ga(x,k),A;if(P===null){for(;!R.done;k++,R=E.next())R=c(x,R.value,S),R!==null&&(b=r(R,b,k),T===null?A=R:T.sibling=R,T=R);return tn&&ga(x,k),A}for(P=i(x,P);!R.done;k++,R=E.next())R=m(P,x,k,R.value,S),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?k:R.key),b=r(R,b,k),T===null?A=R:T.sibling=R,T=R);return t&&P.forEach(function(z){return e(x,z)}),tn&&ga(x,k),A}function v(x,b,E,S){if(typeof E=="object"&&E!==null&&E.type===Ol&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:t:{for(var A=E.key,T=b;T!==null;){if(T.key===A){if(A=E.type,A===Ol){if(T.tag===7){n(x,T.sibling),b=s(T,E.props.children),b.return=x,x=b;break t}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Eo&&ZS(A)===T.type){n(x,T.sibling),b=s(T,E.props),b.ref=id(x,T,E),b.return=x,x=b;break t}n(x,T);break}else e(x,T);T=T.sibling}E.type===Ol?(b=Fa(E.props.children,x.mode,S,E.key),b.return=x,x=b):(S=cf(E.type,E.key,E.props,null,x.mode,S),S.ref=id(x,b,E),S.return=x,x=S)}return o(x);case Fl:t:{for(T=E.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(x,b.sibling),b=s(b,E.children||[]),b.return=x,x=b;break t}else{n(x,b);break}else e(x,b);b=b.sibling}b=G_(E,x.mode,S),b.return=x,x=b}return o(x);case Eo:return T=E._init,v(x,b,T(E._payload),S)}if(wd(E))return _(x,b,E,S);if(Ku(E))return p(x,b,E,S);Hc(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(x,b.sibling),b=s(b,E),b.return=x,x=b):(n(x,b),b=j_(E,x.mode,S),b.return=x,x=b),o(x)):n(x,b)}return v}var _u=yP(!0),vP=yP(!1),Yf=ia(null),qf=null,Vl=null,sb=null;function rb(){sb=Vl=qf=null}function ob(t){var e=Yf.current;Je(Yf),t._currentValue=e}function M0(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function au(t,e){qf=t,sb=Vl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ui=!0),t.firstContext=null)}function bs(t){var e=t._currentValue;if(sb!==t)if(t={context:t,memoizedValue:e,next:null},Vl===null){if(qf===null)throw Error(Mt(308));Vl=t,qf.dependencies={lanes:0,firstContext:t}}else Vl=Vl.next=t;return e}var Ea=null;function ab(t){Ea===null?Ea=[t]:Ea.push(t)}function xP(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,ab(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xr(t,i)}function Xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var So=!1;function lb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Se&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Xr(t,n)}return s=i.interleaved,s===null?(e.next=e,ab(i)):(e.next=s.next,s.next=e),i.interleaved=e,Xr(t,n)}function of(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xx(t,n)}}function YS(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jf(t,e,n,i){var s=t.updateQueue;So=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?r=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(r!==null){var c=s.baseState;o=0,h=d=l=null,a=r;do{var g=a.lane,m=a.eventTime;if((i&g)===g){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var _=t,p=a;switch(g=e,m=n,p.tag){case 1:if(_=p.payload,typeof _=="function"){c=_.call(m,c,g);break t}c=_;break t;case 3:_.flags=_.flags&-65537|128;case 0:if(_=p.payload,g=typeof _=="function"?_.call(m,c,g):_,g==null)break t;c=dn({},c,g);break t;case 2:So=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else m={eventTime:m,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=m,l=c):h=h.next=m,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(l=c),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ga|=o,t.lanes=o,t.memoizedState=c}}function qS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Mt(191,s));s.call(i)}}}var ic={},gr=ia(ic),Th=ia(ic),Ch=ia(ic);function Sa(t){if(t===ic)throw Error(Mt(174));return t}function ub(t,e){switch($e(Ch,e),$e(Th,t),$e(gr,ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:c0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=c0(e,t)}Je(gr),$e(gr,e)}function yu(){Je(gr),Je(Th),Je(Ch)}function EP(t){Sa(Ch.current);var e=Sa(gr.current),n=c0(e,t.type);e!==n&&($e(Th,t),$e(gr,n))}function db(t){Th.current===t&&(Je(gr),Je(Th))}var ln=ia(0);function Kf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var O_=[];function hb(){for(var t=0;t<O_.length;t++)O_[t]._workInProgressVersionPrimary=null;O_.length=0}var af=Qr.ReactCurrentDispatcher,D_=Qr.ReactCurrentBatchConfig,ja=0,un=null,Rn=null,jn=null,Qf=!1,Kd=!1,Lh=0,P3=0;function ri(){throw Error(Mt(321))}function cb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!js(t[n],e[n]))return!1;return!0}function gb(t,e,n,i,s,r){if(ja=r,un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,af.current=t===null||t.memoizedState===null?N3:R3,t=n(i,s),Kd){r=0;do{if(Kd=!1,Lh=0,25<=r)throw Error(Mt(301));r+=1,jn=Rn=null,e.updateQueue=null,af.current=F3,t=n(i,s)}while(Kd)}if(af.current=tm,e=Rn!==null&&Rn.next!==null,ja=0,jn=Rn=un=null,Qf=!1,e)throw Error(Mt(300));return t}function fb(){var t=Lh!==0;return Lh=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?un.memoizedState=jn=t:jn=jn.next=t,jn}function Es(){if(Rn===null){var t=un.alternate;t=t!==null?t.memoizedState:null}else t=Rn.next;var e=jn===null?un.memoizedState:jn.next;if(e!==null)jn=e,Rn=t;else{if(t===null)throw Error(Mt(310));Rn=t,t={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},jn===null?un.memoizedState=jn=t:jn=jn.next=t}return jn}function Ph(t,e){return typeof e=="function"?e(t):e}function z_(t){var e=Es(),n=e.queue;if(n===null)throw Error(Mt(311));n.lastRenderedReducer=t;var i=Rn,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,d=r;do{var h=d.lane;if((ja&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var c={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=c,o=i):l=l.next=c,un.lanes|=h,Ga|=h}d=d.next}while(d!==null&&d!==r);l===null?o=i:l.next=a,js(i,e.memoizedState)||(Ui=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,un.lanes|=r,Ga|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function B_(t){var e=Es(),n=e.queue;if(n===null)throw Error(Mt(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);js(r,e.memoizedState)||(Ui=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function SP(){}function wP(t,e){var n=un,i=Es(),s=e(),r=!js(i.memoizedState,s);if(r&&(i.memoizedState=s,Ui=!0),i=i.queue,mb(CP.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||jn!==null&&jn.memoizedState.tag&1){if(n.flags|=2048,kh(9,TP.bind(null,n,i,s,e),void 0,null),Vn===null)throw Error(Mt(349));ja&30||AP(n,e,s)}return s}function AP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TP(t,e,n,i){e.value=n,e.getSnapshot=i,LP(e)&&PP(t)}function CP(t,e,n){return n(function(){LP(e)&&PP(t)})}function LP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!js(t,n)}catch{return!0}}function PP(t){var e=Xr(t,1);e!==null&&$s(e,t,1,-1)}function JS(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ph,lastRenderedState:t},e.queue=t,t=t.dispatch=M3.bind(null,un,t),[e.memoizedState,t]}function kh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function kP(){return Es().memoizedState}function lf(t,e,n,i){var s=ir();un.flags|=t,s.memoizedState=kh(1|e,n,void 0,i===void 0?null:i)}function sp(t,e,n,i){var s=Es();i=i===void 0?null:i;var r=void 0;if(Rn!==null){var o=Rn.memoizedState;if(r=o.destroy,i!==null&&cb(i,o.deps)){s.memoizedState=kh(e,n,r,i);return}}un.flags|=t,s.memoizedState=kh(1|e,n,r,i)}function KS(t,e){return lf(8390656,8,t,e)}function mb(t,e){return sp(2048,8,t,e)}function IP(t,e){return sp(4,2,t,e)}function MP(t,e){return sp(4,4,t,e)}function NP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RP(t,e,n){return n=n!=null?n.concat([t]):null,sp(4,4,NP.bind(null,e,t),n)}function pb(){}function FP(t,e){var n=Es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function OP(t,e){var n=Es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cb(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function DP(t,e,n){return ja&21?(js(n,e)||(n=jL(),un.lanes|=n,Ga|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ui=!0),t.memoizedState=n)}function k3(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var i=D_.transition;D_.transition={};try{t(!1),e()}finally{Re=n,D_.transition=i}}function zP(){return Es().memoizedState}function I3(t,e,n){var i=Vo(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BP(t))UP(e,n);else if(n=xP(t,e,n,i),n!==null){var s=Ci();$s(n,t,i,s),$P(n,e,i)}}function M3(t,e,n){var i=Vo(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BP(t))UP(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,js(a,o)){var l=e.interleaved;l===null?(s.next=s,ab(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=xP(t,e,s,i),n!==null&&(s=Ci(),$s(n,t,i,s),$P(n,e,i))}}function BP(t){var e=t.alternate;return t===un||e!==null&&e===un}function UP(t,e){Kd=Qf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $P(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xx(t,n)}}var tm={readContext:bs,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},N3={readContext:bs,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:bs,useEffect:KS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lf(4194308,4,NP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lf(4194308,4,t,e)},useInsertionEffect:function(t,e){return lf(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ir();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=I3.bind(null,un,t),[i.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:JS,useDebugValue:pb,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=JS(!1),e=t[0];return t=k3.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=un,s=ir();if(tn){if(n===void 0)throw Error(Mt(407));n=n()}else{if(n=e(),Vn===null)throw Error(Mt(349));ja&30||AP(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,KS(CP.bind(null,i,r,t),[t]),i.flags|=2048,kh(9,TP.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=ir(),e=Vn.identifierPrefix;if(tn){var n=Or,i=Fr;n=(i&~(1<<32-Us(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R3={readContext:bs,useCallback:FP,useContext:bs,useEffect:mb,useImperativeHandle:RP,useInsertionEffect:IP,useLayoutEffect:MP,useMemo:OP,useReducer:z_,useRef:kP,useState:function(){return z_(Ph)},useDebugValue:pb,useDeferredValue:function(t){var e=Es();return DP(e,Rn.memoizedState,t)},useTransition:function(){var t=z_(Ph)[0],e=Es().memoizedState;return[t,e]},useMutableSource:SP,useSyncExternalStore:wP,useId:zP,unstable_isNewReconciler:!1},F3={readContext:bs,useCallback:FP,useContext:bs,useEffect:mb,useImperativeHandle:RP,useInsertionEffect:IP,useLayoutEffect:MP,useMemo:OP,useReducer:B_,useRef:kP,useState:function(){return B_(Ph)},useDebugValue:pb,useDeferredValue:function(t){var e=Es();return Rn===null?e.memoizedState=t:DP(e,Rn.memoizedState,t)},useTransition:function(){var t=B_(Ph)[0],e=Es().memoizedState;return[t,e]},useMutableSource:SP,useSyncExternalStore:wP,useId:zP,unstable_isNewReconciler:!1};function Rs(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function N0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rp={isMounted:function(t){return(t=t._reactInternals)?Qa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ci(),s=Vo(t),r=Br(i,s);r.payload=e,n!=null&&(r.callback=n),e=jo(t,r,s),e!==null&&($s(e,t,s,i),of(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ci(),s=Vo(t),r=Br(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=jo(t,r,s),e!==null&&($s(e,t,s,i),of(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ci(),i=Vo(t),s=Br(n,i);s.tag=2,e!=null&&(s.callback=e),e=jo(t,s,i),e!==null&&($s(e,t,i,n),of(e,t,i))}};function QS(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Eh(n,i)||!Eh(s,r):!0}function jP(t,e,n){var i=!1,s=Yo,r=e.contextType;return typeof r=="object"&&r!==null?r=bs(r):(s=ji(e)?Ua:gi.current,i=e.contextTypes,r=(i=i!=null)?mu(t,s):Yo),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function tw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&rp.enqueueReplaceState(e,e.state,null)}function R0(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lb(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=bs(r):(r=ji(e)?Ua:gi.current,s.context=mu(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(N0(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rp.enqueueReplaceState(s,s.state,null),Jf(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vu(t,e){try{var n="",i=e;do n+=uB(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function U_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function F0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O3=typeof WeakMap=="function"?WeakMap:Map;function GP(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){nm||(nm=!0,H0=i),F0(t,e)},n}function VP(t,e,n){n=Br(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){F0(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){F0(t,e),typeof i!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ew(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new O3;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=q3.bind(null,t,e,n),e.then(t,t))}function nw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iw(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,jo(n,e,1))),n.lanes|=1),t)}var D3=Qr.ReactCurrentOwner,Ui=!1;function Ei(t,e,n,i){e.child=t===null?vP(e,null,n,i):_u(e,t.child,n,i)}function sw(t,e,n,i,s){n=n.render;var r=e.ref;return au(e,s),i=gb(t,e,n,i,r,s),n=fb(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zr(t,e,s)):(tn&&n&&eb(e),e.flags|=1,Ei(t,e,i,s),e.child)}function rw(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!wb(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,HP(t,e,r,i,s)):(t=cf(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Eh,n(o,i)&&t.ref===e.ref)return Zr(t,e,s)}return e.flags|=1,t=Ho(r,i),t.ref=e.ref,t.return=e,e.child=t}function HP(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Eh(r,i)&&t.ref===e.ref)if(Ui=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Ui=!0);else return e.lanes=t.lanes,Zr(t,e,s)}return O0(t,e,n,i,s)}function WP(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Wl,Zi),Zi|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Wl,Zi),Zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,$e(Wl,Zi),Zi|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,$e(Wl,Zi),Zi|=i;return Ei(t,e,s,n),e.child}function XP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function O0(t,e,n,i,s){var r=ji(n)?Ua:gi.current;return r=mu(e,r),au(e,s),n=gb(t,e,n,i,r,s),i=fb(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zr(t,e,s)):(tn&&i&&eb(e),e.flags|=1,Ei(t,e,n,s),e.child)}function ow(t,e,n,i,s){if(ji(n)){var r=!0;Wf(e)}else r=!1;if(au(e,s),e.stateNode===null)uf(t,e),jP(e,n,i),R0(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=bs(d):(d=ji(n)?Ua:gi.current,d=mu(e,d));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==d)&&tw(e,o,i,d),So=!1;var g=e.memoizedState;o.state=g,Jf(e,i,o,s),l=e.memoizedState,a!==i||g!==l||$i.current||So?(typeof h=="function"&&(N0(e,n,h,i),l=e.memoizedState),(a=So||QS(e,n,a,i,g,l,d))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=d,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,bP(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Rs(e.type,a),o.props=d,c=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bs(l):(l=ji(n)?Ua:gi.current,l=mu(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||g!==l)&&tw(e,o,i,l),So=!1,g=e.memoizedState,o.state=g,Jf(e,i,o,s);var _=e.memoizedState;a!==c||g!==_||$i.current||So?(typeof m=="function"&&(N0(e,n,m,i),_=e.memoizedState),(d=So||QS(e,n,d,i,g,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return D0(t,e,n,i,r,s)}function D0(t,e,n,i,s,r){XP(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&HS(e,n,!1),Zr(t,e,r);i=e.stateNode,D3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=_u(e,t.child,null,r),e.child=_u(e,null,a,r)):Ei(t,e,a,r),e.memoizedState=i.state,s&&HS(e,n,!0),e.child}function ZP(t){var e=t.stateNode;e.pendingContext?VS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VS(t,e.context,!1),ub(t,e.containerInfo)}function aw(t,e,n,i,s){return pu(),ib(s),e.flags|=256,Ei(t,e,n,i),e.child}var z0={dehydrated:null,treeContext:null,retryLane:0};function B0(t){return{baseLanes:t,cachePool:null,transitions:null}}function YP(t,e,n){var i=e.pendingProps,s=ln.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(ln,s&1),t===null)return I0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=lp(o,i,0,null),t=Fa(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=B0(n),e.memoizedState=z0,t):_b(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return z3(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ho(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Ho(a,r):(r=Fa(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?B0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=z0,i}return r=t.child,t=r.sibling,i=Ho(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function _b(t,e){return e=lp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,i){return i!==null&&ib(i),_u(e,t.child,null,n),t=_b(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z3(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=U_(Error(Mt(422))),Wc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=lp({mode:"visible",children:i.children},s,0,null),r=Fa(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&_u(e,t.child,null,o),e.child.memoizedState=B0(o),e.memoizedState=z0,r);if(!(e.mode&1))return Wc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(Mt(419)),i=U_(r,i,void 0),Wc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ui||a){if(i=Vn,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Xr(t,s),$s(i,t,s,-1))}return Sb(),i=U_(Error(Mt(421))),Wc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=J3.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Qi=$o(s.nextSibling),ts=e,tn=!0,Ds=null,t!==null&&(ms[ps++]=Fr,ms[ps++]=Or,ms[ps++]=$a,Fr=t.id,Or=t.overflow,$a=e),e=_b(e,i.children),e.flags|=4096,e)}function lw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),M0(t.return,e,n)}function $_(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function qP(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Ei(t,e,i.children,n),i=ln.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lw(t,n,e);else if(t.tag===19)lw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(ln,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$_(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$_(e,!0,n,null,r);break;case"together":$_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ga|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Mt(153));if(e.child!==null){for(t=e.child,n=Ho(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ho(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B3(t,e,n){switch(e.tag){case 3:ZP(e),pu();break;case 5:EP(e);break;case 1:ji(e.type)&&Wf(e);break;case 4:ub(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;$e(Yf,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(ln,ln.current&1),e.flags|=128,null):n&e.child.childLanes?YP(t,e,n):($e(ln,ln.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);$e(ln,ln.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return qP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(ln,ln.current),i)break;return null;case 22:case 23:return e.lanes=0,WP(t,e,n)}return Zr(t,e,n)}var JP,U0,KP,QP;JP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};U0=function(){};KP=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Sa(gr.current);var r=null;switch(n){case"input":s=l0(t,s),i=l0(t,i),r=[];break;case"select":s=dn({},s,{value:void 0}),i=dn({},i,{value:void 0}),r=[];break;case"textarea":s=h0(t,s),i=h0(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vf)}g0(n,i);var o;n=null;for(d in s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mh.hasOwnProperty(d)?r||(r=[]):(r=r||[]).push(d,null));for(d in i){var l=i[d];if(a=s!=null?s[d]:void 0,i.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mh.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&He("scroll",t),r||a===l||(r=[])):(r=r||[]).push(d,l))}n&&(r=r||[]).push("style",n);var d=r;(e.updateQueue=d)&&(e.flags|=4)}};QP=function(t,e,n,i){n!==i&&(e.flags|=4)};function sd(t,e){if(!tn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function U3(t,e,n){var i=e.pendingProps;switch(nb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return ji(e.type)&&Hf(),oi(e),null;case 3:return i=e.stateNode,yu(),Je($i),Je(gi),hb(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ds!==null&&(Z0(Ds),Ds=null))),U0(t,e),oi(e),null;case 5:db(e);var s=Sa(Ch.current);if(n=e.type,t!==null&&e.stateNode!=null)KP(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Mt(166));return oi(e),null}if(t=Sa(gr.current),Vc(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[or]=e,i[Ah]=r,t=(e.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(s=0;s<Td.length;s++)He(Td[s],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":_S(i,r),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},He("invalid",i);break;case"textarea":vS(i,r),He("invalid",i)}g0(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Gc(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Gc(i.textContent,a,t),s=["children",""+a]):mh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",i)}switch(n){case"input":Fc(i),yS(i,r,!0);break;case"textarea":Fc(i),xS(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Vf)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[or]=e,t[Ah]=i,JP(t,e,!1,!1),e.stateNode=t;t:{switch(o=f0(n,i),n){case"dialog":He("cancel",t),He("close",t),s=i;break;case"iframe":case"object":case"embed":He("load",t),s=i;break;case"video":case"audio":for(s=0;s<Td.length;s++)He(Td[s],t);s=i;break;case"source":He("error",t),s=i;break;case"img":case"image":case"link":He("error",t),He("load",t),s=i;break;case"details":He("toggle",t),s=i;break;case"input":_S(t,i),s=l0(t,i),He("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=dn({},i,{value:void 0}),He("invalid",t);break;case"textarea":vS(t,i),s=h0(t,i),He("invalid",t);break;default:s=i}g0(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?kL(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LL(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ph(t,l):typeof l=="number"&&ph(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(mh.hasOwnProperty(r)?l!=null&&r==="onScroll"&&He("scroll",t):l!=null&&$x(t,r,l,o))}switch(n){case"input":Fc(t),yS(t,i,!1);break;case"textarea":Fc(t),xS(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Zo(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?iu(t,!!i.multiple,r,!1):i.defaultValue!=null&&iu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)QP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Mt(166));if(n=Sa(Ch.current),Sa(gr.current),Vc(e)){if(i=e.stateNode,n=e.memoizedProps,i[or]=e,(r=i.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Gc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gc(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[or]=e,e.stateNode=i}return oi(e),null;case 13:if(Je(ln),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tn&&Qi!==null&&e.mode&1&&!(e.flags&128))_P(),pu(),e.flags|=98560,r=!1;else if(r=Vc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(Mt(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Mt(317));r[or]=e}else pu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),r=!1}else Ds!==null&&(Z0(Ds),Ds=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ln.current&1?Fn===0&&(Fn=3):Sb())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return yu(),U0(t,e),t===null&&Sh(e.stateNode.containerInfo),oi(e),null;case 10:return ob(e.type._context),oi(e),null;case 17:return ji(e.type)&&Hf(),oi(e),null;case 19:if(Je(ln),r=e.memoizedState,r===null)return oi(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)sd(r,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kf(t),o!==null){for(e.flags|=128,sd(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(ln,ln.current&1|2),e.child}t=t.sibling}r.tail!==null&&Sn()>xu&&(e.flags|=128,i=!0,sd(r,!1),e.lanes=4194304)}else{if(!i)if(t=Kf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sd(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!tn)return oi(e),null}else 2*Sn()-r.renderingStartTime>xu&&n!==1073741824&&(e.flags|=128,i=!0,sd(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Sn(),e.sibling=null,n=ln.current,$e(ln,i?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return Eb(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zi&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Mt(156,e.tag))}function $3(t,e){switch(nb(e),e.tag){case 1:return ji(e.type)&&Hf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yu(),Je($i),Je(gi),hb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return db(e),null;case 13:if(Je(ln),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Mt(340));pu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(ln),null;case 4:return yu(),null;case 10:return ob(e.type._context),null;case 22:case 23:return Eb(),null;case 24:return null;default:return null}}var Xc=!1,hi=!1,j3=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Hl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){mn(t,e,i)}else n.current=null}function $0(t,e,n){try{n()}catch(i){mn(t,e,i)}}var uw=!1;function G3(t,e){if(w0=$f,t=sP(),tb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,d=0,h=0,c=t,g=null;e:for(;;){for(var m;c!==n||s!==0&&c.nodeType!==3||(a=o+s),c!==r||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(m=c.firstChild)!==null;)g=c,c=m;for(;;){if(c===t)break e;if(g===n&&++d===s&&(a=o),g===r&&++h===i&&(l=o),(m=c.nextSibling)!==null)break;c=g,g=c.parentNode}c=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(A0={focusedElem:t,selectionRange:n},$f=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){e=jt;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var p=_.memoizedProps,v=_.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:Rs(e.type,p),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Mt(163))}}catch(S){mn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}return _=uw,uw=!1,_}function Qd(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&$0(e,n,r)}s=s.next}while(s!==i)}}function op(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function j0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tk(t){var e=t.alternate;e!==null&&(t.alternate=null,tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Ah],delete e[L0],delete e[A3],delete e[T3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ek(t){return t.tag===5||t.tag===3||t.tag===4}function dw(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||ek(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function G0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vf));else if(i!==4&&(t=t.child,t!==null))for(G0(t,e,n),t=t.sibling;t!==null;)G0(t,e,n),t=t.sibling}function V0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(V0(t,e,n),t=t.sibling;t!==null;)V0(t,e,n),t=t.sibling}var Yn=null,Fs=!1;function go(t,e,n){for(n=n.child;n!==null;)nk(t,e,n),n=n.sibling}function nk(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Km,n)}catch{}switch(n.tag){case 5:hi||Hl(n,e);case 6:var i=Yn,s=Fs;Yn=null,go(t,e,n),Yn=i,Fs=s,Yn!==null&&(Fs?(t=Yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(Fs?(t=Yn,n=n.stateNode,t.nodeType===8?R_(t.parentNode,n):t.nodeType===1&&R_(t,n),xh(t)):R_(Yn,n.stateNode));break;case 4:i=Yn,s=Fs,Yn=n.stateNode.containerInfo,Fs=!0,go(t,e,n),Yn=i,Fs=s;break;case 0:case 11:case 14:case 15:if(!hi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&$0(n,e,o),s=s.next}while(s!==i)}go(t,e,n);break;case 1:if(!hi&&(Hl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){mn(n,e,a)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(hi=(i=hi)||n.memoizedState!==null,go(t,e,n),hi=i):go(t,e,n);break;default:go(t,e,n)}}function hw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new j3),e.forEach(function(i){var s=K3.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Is(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;t:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,Fs=!1;break t;case 3:Yn=a.stateNode.containerInfo,Fs=!0;break t;case 4:Yn=a.stateNode.containerInfo,Fs=!0;break t}a=a.return}if(Yn===null)throw Error(Mt(160));nk(r,o,s),Yn=null,Fs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){mn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ik(e,t),e=e.sibling}function ik(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Is(e,t),Ks(t),i&4){try{Qd(3,t,t.return),op(3,t)}catch(p){mn(t,t.return,p)}try{Qd(5,t,t.return)}catch(p){mn(t,t.return,p)}}break;case 1:Is(e,t),Ks(t),i&512&&n!==null&&Hl(n,n.return);break;case 5:if(Is(e,t),Ks(t),i&512&&n!==null&&Hl(n,n.return),t.flags&32){var s=t.stateNode;try{ph(s,"")}catch(p){mn(t,t.return,p)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&AL(s,r),f0(a,o);var d=f0(a,r);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?kL(s,c):h==="dangerouslySetInnerHTML"?LL(s,c):h==="children"?ph(s,c):$x(s,h,c,d)}switch(a){case"input":u0(s,r);break;case"textarea":TL(s,r);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?iu(s,!!r.multiple,m,!1):g!==!!r.multiple&&(r.defaultValue!=null?iu(s,!!r.multiple,r.defaultValue,!0):iu(s,!!r.multiple,r.multiple?[]:"",!1))}s[Ah]=r}catch(p){mn(t,t.return,p)}}break;case 6:if(Is(e,t),Ks(t),i&4){if(t.stateNode===null)throw Error(Mt(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(p){mn(t,t.return,p)}}break;case 3:if(Is(e,t),Ks(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xh(e.containerInfo)}catch(p){mn(t,t.return,p)}break;case 4:Is(e,t),Ks(t);break;case 13:Is(e,t),Ks(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(xb=Sn())),i&4&&hw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(hi=(d=hi)||h,Is(e,t),hi=d):Is(e,t),Ks(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(jt=t,h=t.child;h!==null;){for(c=jt=h;jt!==null;){switch(g=jt,m=g.child,g.tag){case 0:case 11:case 14:case 15:Qd(4,g,g.return);break;case 1:Hl(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){i=g,n=g.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(p){mn(i,n,p)}}break;case 5:Hl(g,g.return);break;case 22:if(g.memoizedState!==null){gw(c);continue}}m!==null?(m.return=g,jt=m):gw(c)}h=h.sibling}t:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{s=c.stateNode,d?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PL("display",o))}catch(p){mn(t,t.return,p)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(p){mn(t,t.return,p)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break t;for(;c.sibling===null;){if(c.return===null||c.return===t)break t;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Is(e,t),Ks(t),i&4&&hw(t);break;case 21:break;default:Is(e,t),Ks(t)}}function Ks(t){var e=t.flags;if(e&2){try{t:{for(var n=t.return;n!==null;){if(ek(n)){var i=n;break t}n=n.return}throw Error(Mt(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ph(s,""),i.flags&=-33);var r=dw(t);V0(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=dw(t);G0(t,a,o);break;default:throw Error(Mt(161))}}catch(l){mn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V3(t,e,n){jt=t,sk(t)}function sk(t,e,n){for(var i=(t.mode&1)!==0;jt!==null;){var s=jt,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Xc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||hi;a=Xc;var d=hi;if(Xc=o,(hi=l)&&!d)for(jt=s;jt!==null;)o=jt,l=o.child,o.tag===22&&o.memoizedState!==null?fw(s):l!==null?(l.return=o,jt=l):fw(s);for(;r!==null;)jt=r,sk(r),r=r.sibling;jt=s,Xc=a,hi=d}cw(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,jt=r):cw(t)}}function cw(t){for(;jt!==null;){var e=jt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hi||op(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!hi)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Rs(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&qS(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&xh(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Mt(163))}hi||e.flags&512&&j0(e)}catch(g){mn(e,e.return,g)}}if(e===t){jt=null;break}if(n=e.sibling,n!==null){n.return=e.return,jt=n;break}jt=e.return}}function gw(t){for(;jt!==null;){var e=jt;if(e===t){jt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,jt=n;break}jt=e.return}}function fw(t){for(;jt!==null;){var e=jt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{op(4,e)}catch(l){mn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){mn(e,s,l)}}var r=e.return;try{j0(e)}catch(l){mn(e,r,l)}break;case 5:var o=e.return;try{j0(e)}catch(l){mn(e,o,l)}}}catch(l){mn(e,e.return,l)}if(e===t){jt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,jt=a;break}jt=e.return}}var H3=Math.ceil,em=Qr.ReactCurrentDispatcher,yb=Qr.ReactCurrentOwner,xs=Qr.ReactCurrentBatchConfig,Se=0,Vn=null,In=null,Kn=0,Zi=0,Wl=ia(0),Fn=0,Ih=null,Ga=0,ap=0,vb=0,th=null,Bi=null,xb=0,xu=1/0,Mr=null,nm=!1,H0=null,Go=null,Zc=!1,ko=null,im=0,eh=0,W0=null,df=-1,hf=0;function Ci(){return Se&6?Sn():df!==-1?df:df=Sn()}function Vo(t){return t.mode&1?Se&2&&Kn!==0?Kn&-Kn:L3.transition!==null?(hf===0&&(hf=jL()),hf):(t=Re,t!==0||(t=window.event,t=t===void 0?16:YL(t.type)),t):1}function $s(t,e,n,i){if(50<eh)throw eh=0,W0=null,Error(Mt(185));tc(t,n,i),(!(Se&2)||t!==Vn)&&(t===Vn&&(!(Se&2)&&(ap|=n),Fn===4&&Co(t,Kn)),Gi(t,i),n===1&&Se===0&&!(e.mode&1)&&(xu=Sn()+500,ip&&sa()))}function Gi(t,e){var n=t.callbackNode;LB(t,e);var i=Uf(t,t===Vn?Kn:0);if(i===0)n!==null&&SS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&SS(n),e===1)t.tag===0?C3(mw.bind(null,t)):fP(mw.bind(null,t)),S3(function(){!(Se&6)&&sa()}),n=null;else{switch(GL(i)){case 1:n=Wx;break;case 4:n=UL;break;case 16:n=Bf;break;case 536870912:n=$L;break;default:n=Bf}n=ck(n,rk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rk(t,e){if(df=-1,hf=0,Se&6)throw Error(Mt(327));var n=t.callbackNode;if(lu()&&t.callbackNode!==n)return null;var i=Uf(t,t===Vn?Kn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=sm(t,i);else{e=i;var s=Se;Se|=2;var r=ak();(Vn!==t||Kn!==e)&&(Mr=null,xu=Sn()+500,Ra(t,e));do try{Z3();break}catch(a){ok(t,a)}while(!0);rb(),em.current=r,Se=s,In!==null?e=0:(Vn=null,Kn=0,e=Fn)}if(e!==0){if(e===2&&(s=v0(t),s!==0&&(i=s,e=X0(t,s))),e===1)throw n=Ih,Ra(t,0),Co(t,i),Gi(t,Sn()),n;if(e===6)Co(t,i);else{if(s=t.current.alternate,!(i&30)&&!W3(s)&&(e=sm(t,i),e===2&&(r=v0(t),r!==0&&(i=r,e=X0(t,r))),e===1))throw n=Ih,Ra(t,0),Co(t,i),Gi(t,Sn()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Mt(345));case 2:fa(t,Bi,Mr);break;case 3:if(Co(t,i),(i&130023424)===i&&(e=xb+500-Sn(),10<e)){if(Uf(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ci(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=C0(fa.bind(null,t,Bi,Mr),e);break}fa(t,Bi,Mr);break;case 4:if(Co(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Us(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Sn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*H3(i/1960))-i,10<i){t.timeoutHandle=C0(fa.bind(null,t,Bi,Mr),i);break}fa(t,Bi,Mr);break;case 5:fa(t,Bi,Mr);break;default:throw Error(Mt(329))}}}return Gi(t,Sn()),t.callbackNode===n?rk.bind(null,t):null}function X0(t,e){var n=th;return t.current.memoizedState.isDehydrated&&(Ra(t,e).flags|=256),t=sm(t,e),t!==2&&(e=Bi,Bi=n,e!==null&&Z0(e)),t}function Z0(t){Bi===null?Bi=t:Bi.push.apply(Bi,t)}function W3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!js(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Co(t,e){for(e&=~vb,e&=~ap,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Us(e),i=1<<n;t[n]=-1,e&=~i}}function mw(t){if(Se&6)throw Error(Mt(327));lu();var e=Uf(t,0);if(!(e&1))return Gi(t,Sn()),null;var n=sm(t,e);if(t.tag!==0&&n===2){var i=v0(t);i!==0&&(e=i,n=X0(t,i))}if(n===1)throw n=Ih,Ra(t,0),Co(t,e),Gi(t,Sn()),n;if(n===6)throw Error(Mt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fa(t,Bi,Mr),Gi(t,Sn()),null}function bb(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(xu=Sn()+500,ip&&sa())}}function Va(t){ko!==null&&ko.tag===0&&!(Se&6)&&lu();var e=Se;Se|=1;var n=xs.transition,i=Re;try{if(xs.transition=null,Re=1,t)return t()}finally{Re=i,xs.transition=n,Se=e,!(Se&6)&&sa()}}function Eb(){Zi=Wl.current,Je(Wl)}function Ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,E3(n)),In!==null)for(n=In.return;n!==null;){var i=n;switch(nb(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Hf();break;case 3:yu(),Je($i),Je(gi),hb();break;case 5:db(i);break;case 4:yu();break;case 13:Je(ln);break;case 19:Je(ln);break;case 10:ob(i.type._context);break;case 22:case 23:Eb()}n=n.return}if(Vn=t,In=t=Ho(t.current,null),Kn=Zi=e,Fn=0,Ih=null,vb=ap=Ga=0,Bi=th=null,Ea!==null){for(e=0;e<Ea.length;e++)if(n=Ea[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}Ea=null}return t}function ok(t,e){do{var n=In;try{if(rb(),af.current=tm,Qf){for(var i=un.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Qf=!1}if(ja=0,jn=Rn=un=null,Kd=!1,Lh=0,yb.current=null,n===null||n.return===null){Fn=1,Ih=e,In=null;break}t:{var r=t,o=n.return,a=n,l=e;if(e=Kn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=nw(o);if(m!==null){m.flags&=-257,iw(m,o,a,r,e),m.mode&1&&ew(r,d,e),e=m,l=d;var _=e.updateQueue;if(_===null){var p=new Set;p.add(l),e.updateQueue=p}else _.add(l);break t}else{if(!(e&1)){ew(r,d,e),Sb();break t}l=Error(Mt(426))}}else if(tn&&a.mode&1){var v=nw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),iw(v,o,a,r,e),ib(vu(l,a));break t}}r=l=vu(l,a),Fn!==4&&(Fn=2),th===null?th=[r]:th.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var x=GP(r,l,e);YS(r,x);break t;case 1:a=l;var b=r.type,E=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Go===null||!Go.has(E)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=VP(r,a,e);YS(r,S);break t}}r=r.return}while(r!==null)}uk(n)}catch(A){e=A,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function ak(){var t=em.current;return em.current=tm,t===null?tm:t}function Sb(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Vn===null||!(Ga&268435455)&&!(ap&268435455)||Co(Vn,Kn)}function sm(t,e){var n=Se;Se|=2;var i=ak();(Vn!==t||Kn!==e)&&(Mr=null,Ra(t,e));do try{X3();break}catch(s){ok(t,s)}while(!0);if(rb(),Se=n,em.current=i,In!==null)throw Error(Mt(261));return Vn=null,Kn=0,Fn}function X3(){for(;In!==null;)lk(In)}function Z3(){for(;In!==null&&!vB();)lk(In)}function lk(t){var e=hk(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,e===null?uk(t):In=e,yb.current=null}function uk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$3(n,e),n!==null){n.flags&=32767,In=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,In=null;return}}else if(n=U3(n,e,Zi),n!==null){In=n;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Fn===0&&(Fn=5)}function fa(t,e,n){var i=Re,s=xs.transition;try{xs.transition=null,Re=1,Y3(t,e,n,i)}finally{xs.transition=s,Re=i}return null}function Y3(t,e,n,i){do lu();while(ko!==null);if(Se&6)throw Error(Mt(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Mt(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(PB(t,r),t===Vn&&(In=Vn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zc||(Zc=!0,ck(Bf,function(){return lu(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=xs.transition,xs.transition=null;var o=Re;Re=1;var a=Se;Se|=4,yb.current=null,G3(t,n),ik(n,t),m3(A0),$f=!!w0,A0=w0=null,t.current=n,V3(n),xB(),Se=a,Re=o,xs.transition=r}else t.current=n;if(Zc&&(Zc=!1,ko=t,im=s),r=t.pendingLanes,r===0&&(Go=null),SB(n.stateNode),Gi(t,Sn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(nm)throw nm=!1,t=H0,H0=null,t;return im&1&&t.tag!==0&&lu(),r=t.pendingLanes,r&1?t===W0?eh++:(eh=0,W0=t):eh=0,sa(),null}function lu(){if(ko!==null){var t=GL(im),e=xs.transition,n=Re;try{if(xs.transition=null,Re=16>t?16:t,ko===null)var i=!1;else{if(t=ko,ko=null,im=0,Se&6)throw Error(Mt(331));var s=Se;for(Se|=4,jt=t.current;jt!==null;){var r=jt,o=r.child;if(jt.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(jt=d;jt!==null;){var h=jt;switch(h.tag){case 0:case 11:case 15:Qd(8,h,r)}var c=h.child;if(c!==null)c.return=h,jt=c;else for(;jt!==null;){h=jt;var g=h.sibling,m=h.return;if(tk(h),h===d){jt=null;break}if(g!==null){g.return=m,jt=g;break}jt=m}}}var _=r.alternate;if(_!==null){var p=_.child;if(p!==null){_.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}jt=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,jt=o;else t:for(;jt!==null;){if(r=jt,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Qd(9,r,r.return)}var x=r.sibling;if(x!==null){x.return=r.return,jt=x;break t}jt=r.return}}var b=t.current;for(jt=b;jt!==null;){o=jt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,jt=E;else t:for(o=b;jt!==null;){if(a=jt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:op(9,a)}}catch(A){mn(a,a.return,A)}if(a===o){jt=null;break t}var S=a.sibling;if(S!==null){S.return=a.return,jt=S;break t}jt=a.return}}if(Se=s,sa(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Km,t)}catch{}i=!0}return i}finally{Re=n,xs.transition=e}}return!1}function pw(t,e,n){e=vu(n,e),e=GP(t,e,1),t=jo(t,e,1),e=Ci(),t!==null&&(tc(t,1,e),Gi(t,e))}function mn(t,e,n){if(t.tag===3)pw(t,t,n);else for(;e!==null;){if(e.tag===3){pw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Go===null||!Go.has(i))){t=vu(n,t),t=VP(e,t,1),e=jo(e,t,1),t=Ci(),e!==null&&(tc(e,1,t),Gi(e,t));break}}e=e.return}}function q3(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ci(),t.pingedLanes|=t.suspendedLanes&n,Vn===t&&(Kn&n)===n&&(Fn===4||Fn===3&&(Kn&130023424)===Kn&&500>Sn()-xb?Ra(t,0):vb|=n),Gi(t,e)}function dk(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var n=Ci();t=Xr(t,e),t!==null&&(tc(t,e,n),Gi(t,n))}function J3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dk(t,n)}function K3(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Mt(314))}i!==null&&i.delete(e),dk(t,n)}var hk;hk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$i.current)Ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ui=!1,B3(t,e,n);Ui=!!(t.flags&131072)}else Ui=!1,tn&&e.flags&1048576&&mP(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;uf(t,e),t=e.pendingProps;var s=mu(e,gi.current);au(e,n),s=gb(null,e,i,t,s,n);var r=fb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(i)?(r=!0,Wf(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lb(e),s.updater=rp,e.stateNode=s,s._reactInternals=e,R0(e,i,t,n),e=D0(null,e,i,!0,r,n)):(e.tag=0,tn&&r&&eb(e),Ei(null,e,s,n),e=e.child),e;case 16:i=e.elementType;t:{switch(uf(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=tU(i),t=Rs(i,t),s){case 0:e=O0(null,e,i,t,n);break t;case 1:e=ow(null,e,i,t,n);break t;case 11:e=sw(null,e,i,t,n);break t;case 14:e=rw(null,e,i,Rs(i.type,t),n);break t}throw Error(Mt(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rs(i,s),O0(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rs(i,s),ow(t,e,i,s,n);case 3:t:{if(ZP(e),t===null)throw Error(Mt(387));i=e.pendingProps,r=e.memoizedState,s=r.element,bP(t,e),Jf(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=vu(Error(Mt(423)),e),e=aw(t,e,i,n,s);break t}else if(i!==s){s=vu(Error(Mt(424)),e),e=aw(t,e,i,n,s);break t}else for(Qi=$o(e.stateNode.containerInfo.firstChild),ts=e,tn=!0,Ds=null,n=vP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pu(),i===s){e=Zr(t,e,n);break t}Ei(t,e,i,n)}e=e.child}return e;case 5:return EP(e),t===null&&I0(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,T0(i,s)?o=null:r!==null&&T0(i,r)&&(e.flags|=32),XP(t,e),Ei(t,e,o,n),e.child;case 6:return t===null&&I0(e),null;case 13:return YP(t,e,n);case 4:return ub(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=_u(e,null,i,n):Ei(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rs(i,s),sw(t,e,i,s,n);case 7:return Ei(t,e,e.pendingProps,n),e.child;case 8:return Ei(t,e,e.pendingProps.children,n),e.child;case 12:return Ei(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,$e(Yf,i._currentValue),i._currentValue=o,r!==null)if(js(r.value,o)){if(r.children===s.children&&!$i.current){e=Zr(t,e,n);break t}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Br(-1,n&-n),l.tag=2;var d=r.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),M0(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Mt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),M0(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ei(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,au(e,n),s=bs(s),i=i(s),e.flags|=1,Ei(t,e,i,n),e.child;case 14:return i=e.type,s=Rs(i,e.pendingProps),s=Rs(i.type,s),rw(t,e,i,s,n);case 15:return HP(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rs(i,s),uf(t,e),e.tag=1,ji(i)?(t=!0,Wf(e)):t=!1,au(e,n),jP(e,i,s),R0(e,i,s,n),D0(null,e,i,!0,t,n);case 19:return qP(t,e,n);case 22:return WP(t,e,n)}throw Error(Mt(156,e.tag))};function ck(t,e){return BL(t,e)}function Q3(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(t,e,n,i){return new Q3(t,e,n,i)}function wb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tU(t){if(typeof t=="function")return wb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gx)return 11;if(t===Vx)return 14}return 2}function Ho(t,e){var n=t.alternate;return n===null?(n=_s(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cf(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")wb(t)&&(o=1);else if(typeof t=="string")o=5;else t:switch(t){case Ol:return Fa(n.children,s,r,e);case jx:o=8,s|=8;break;case s0:return t=_s(12,n,e,s|2),t.elementType=s0,t.lanes=r,t;case r0:return t=_s(13,n,e,s),t.elementType=r0,t.lanes=r,t;case o0:return t=_s(19,n,e,s),t.elementType=o0,t.lanes=r,t;case EL:return lp(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xL:o=10;break t;case bL:o=9;break t;case Gx:o=11;break t;case Vx:o=14;break t;case Eo:o=16,i=null;break t}throw Error(Mt(130,t==null?t:typeof t,""))}return e=_s(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Fa(t,e,n,i){return t=_s(7,t,i,e),t.lanes=n,t}function lp(t,e,n,i){return t=_s(22,t,i,e),t.elementType=EL,t.lanes=n,t.stateNode={isHidden:!1},t}function j_(t,e,n){return t=_s(6,t,null,e),t.lanes=n,t}function G_(t,e,n){return e=_s(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eU(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S_(0),this.expirationTimes=S_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S_(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ab(t,e,n,i,s,r,o,a,l){return t=new eU(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=_s(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lb(r),t}function nU(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fl,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function gk(t){if(!t)return Yo;t=t._reactInternals;t:{if(Qa(t)!==t||t.tag!==1)throw Error(Mt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(Mt(171))}if(t.tag===1){var n=t.type;if(ji(n))return gP(t,n,e)}return e}function fk(t,e,n,i,s,r,o,a,l){return t=Ab(n,i,!0,t,s,r,o,a,l),t.context=gk(null),n=t.current,i=Ci(),s=Vo(n),r=Br(i,s),r.callback=e??null,jo(n,r,s),t.current.lanes=s,tc(t,s,i),Gi(t,i),t}function up(t,e,n,i){var s=e.current,r=Ci(),o=Vo(s);return n=gk(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=jo(s,e,o),t!==null&&($s(t,s,o,r),of(t,s,o)),o}function rm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _w(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tb(t,e){_w(t,e),(t=t.alternate)&&_w(t,e)}function iU(){return null}var mk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cb(t){this._internalRoot=t}dp.prototype.render=Cb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Mt(409));up(t,e,null,null)};dp.prototype.unmount=Cb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){up(null,t,null,null)}),e[Wr]=null}};function dp(t){this._internalRoot=t}dp.prototype.unstable_scheduleHydration=function(t){if(t){var e=WL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<To.length&&e!==0&&e<To[n].priority;n++);To.splice(n,0,t),n===0&&ZL(t)}};function Lb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yw(){}function sU(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var d=rm(o);r.call(d)}}var o=fk(e,i,t,0,null,!1,!1,"",yw);return t._reactRootContainer=o,t[Wr]=o.current,Sh(t.nodeType===8?t.parentNode:t),Va(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var d=rm(l);a.call(d)}}var l=Ab(t,0,!1,null,null,!1,!1,"",yw);return t._reactRootContainer=l,t[Wr]=l.current,Sh(t.nodeType===8?t.parentNode:t),Va(function(){up(e,l,n,i)}),l}function cp(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=rm(o);a.call(l)}}up(e,o,t,s)}else o=sU(n,e,t,s,i);return rm(o)}VL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ad(e.pendingLanes);n!==0&&(Xx(e,n|1),Gi(e,Sn()),!(Se&6)&&(xu=Sn()+500,sa()))}break;case 13:Va(function(){var i=Xr(t,1);if(i!==null){var s=Ci();$s(i,t,1,s)}}),Tb(t,1)}};Zx=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var n=Ci();$s(e,t,134217728,n)}Tb(t,134217728)}};HL=function(t){if(t.tag===13){var e=Vo(t),n=Xr(t,e);if(n!==null){var i=Ci();$s(n,t,e,i)}Tb(t,e)}};WL=function(){return Re};XL=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};p0=function(t,e,n){switch(e){case"input":if(u0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=np(i);if(!s)throw Error(Mt(90));wL(i),u0(i,s)}}}break;case"textarea":TL(t,n);break;case"select":e=n.value,e!=null&&iu(t,!!n.multiple,e,!1)}};NL=bb;RL=Va;var rU={usingClientEntryPoint:!1,Events:[nc,Ul,np,IL,ML,bb]},rd={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oU={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DL(t),t===null?null:t.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||iU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Km=Yc.inject(oU),cr=Yc}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rU;is.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lb(e))throw Error(Mt(200));return nU(t,e,null,n)};is.createRoot=function(t,e){if(!Lb(t))throw Error(Mt(299));var n=!1,i="",s=mk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ab(t,1,!1,null,null,n,!1,i,s),t[Wr]=e.current,Sh(t.nodeType===8?t.parentNode:t),new Cb(e)};is.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Mt(188)):(t=Object.keys(t).join(","),Error(Mt(268,t)));return t=DL(e),t=t===null?null:t.stateNode,t};is.flushSync=function(t){return Va(t)};is.hydrate=function(t,e,n){if(!hp(e))throw Error(Mt(200));return cp(null,t,e,!0,n)};is.hydrateRoot=function(t,e,n){if(!Lb(t))throw Error(Mt(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=mk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fk(e,null,t,1,n??null,s,!1,r,o),t[Wr]=e.current,Sh(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dp(e)};is.render=function(t,e,n){if(!hp(e))throw Error(Mt(200));return cp(null,t,e,!1,n)};is.unmountComponentAtNode=function(t){if(!hp(t))throw Error(Mt(40));return t._reactRootContainer?(Va(function(){cp(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};is.unstable_batchedUpdates=bb;is.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!hp(n))throw Error(Mt(200));if(t==null||t._reactInternals===void 0)throw Error(Mt(38));return cp(t,e,n,!1,i)};is.version="18.3.1-next-f1338f8080-20240426";function pk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pk)}catch(t){console.error(t)}}pk(),pL.exports=is;var Uu=pL.exports;const aU=qm(Uu);var _k,vw=Uu;_k=vw.createRoot,vw.hydrateRoot;var lU=Object.create,gp=Object.defineProperty,uU=Object.defineProperties,dU=Object.getOwnPropertyDescriptor,hU=Object.getOwnPropertyDescriptors,yk=Object.getOwnPropertyNames,xw=Object.getOwnPropertySymbols,cU=Object.getPrototypeOf,vk=Object.prototype.hasOwnProperty,gU=Object.prototype.propertyIsEnumerable,V_=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),fU=t=>{throw TypeError(t)},bw=(t,e,n)=>e in t?gp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wt=(t,e)=>{for(var n in e||(e={}))vk.call(e,n)&&bw(t,n,e[n]);if(xw)for(var n of xw(e))gU.call(e,n)&&bw(t,n,e[n]);return t},ue=(t,e)=>uU(t,hU(e)),xk=(t,e)=>function(){return e||(0,t[yk(t)[0]])((e={exports:{}}).exports,e),e.exports},sc=(t,e)=>{for(var n in e)gp(t,n,{get:e[n],enumerable:!0})},mU=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yk(e))vk.call(t,s)||s===n||gp(t,s,{get:()=>e[s],enumerable:!(i=dU(e,s))||i.enumerable});return t},Pb=(t,e,n)=>(n=t!=null?lU(cU(t)):{},mU(t&&t.__esModule?n:gp(n,"default",{value:t,enumerable:!0}),t)),Ha=(t,e,n)=>new Promise((i,s)=>{var r=l=>{try{a(n.next(l))}catch(d){s(d)}},o=l=>{try{a(n.throw(l))}catch(d){s(d)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);a((n=n.apply(t,e)).next())}),pU=function(t,e){this[0]=t,this[1]=e},_U=t=>{var e,n=t[V_("asyncIterator")],i=!1,s={};return n==null?(n=t[V_("iterator")](),e=r=>s[r]=o=>n[r](o)):(n=n.call(t),e=r=>s[r]=o=>{if(i){if(i=!1,r==="throw")throw o;return o}return i=!0,{done:!1,value:new pU(new Promise(a=>{var l=n[r](o);l instanceof Object||fU("Object expected"),a(l)}),1)}}),s[V_("iterator")]=()=>s,e("next"),"throw"in n?e("throw"):s.throw=r=>{throw r},"return"in n&&e("return"),s},bk=xk({"node_modules/@linkurious/ogma-parsers/dist/ogma-parsers.umd.js"(t,e){var n,i;n=t,i=function(s){/**
* Ogma Parsers
* @description Parsers for Ogma
* @version 0.0.20 (built on Fri Jan 12 2024 15:00:46 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2024. All rights reserved.
* @preserve
*/function r(q,ht,bt){bt=bt||ht,ht in q&&(q.attributes[bt]=q[ht])}function o(q,ht,bt){if(q&&typeof q=="object"){if(Array.isArray(q))return q.forEach(xt=>o(xt,ht,bt));if(function(ct){return ct.type==="vertex"||ct._type==="vertex"||ct.inE||ct.outE||ct._inE||ct._outE}(q)){const xt={};q.properties&&Object.keys(q.properties).forEach(yt=>{xt[yt]=q.properties[yt][0].value});const ct=l(q);ht.push({id:ct,data:{id:q.id+"",categories:[q.label],properties:xt}});for(const yt in q)yt!=="properties"&&o(q[yt],ht,bt);return}if(function(ct){return ct.type==="edge"||ct._type==="edge"||ct.inV||ct.outV||ct._outV||ct._inV}(q)){const xt=l(q);bt.push({id:xt,source:a(q,["inV","_inV"]),target:a(q,["outV","_outV"]),data:{id:xt,type:q.label,properties:q.properties||{}}});for(const ct in q)ct!=="properties"&&o(q[ct],ht,bt);return}Object.keys(q).forEach(xt=>o(q[xt],ht,bt))}}function a(q,ht){for(const bt of ht)if(q[bt])return l(q[bt])}function l(q){if(typeof q=="string"||isFinite(q))return String(q);const ht=q;return String(ht.id||ht._id)}const d=q=>q.charCodeAt(0),h=d(" "),c=d("<"),g=d(">"),m=d('"'),_=d(`
`),p=d("\r"),v=d("/"),x=d("\\"),b=d("a"),E=d("z"),S=d("A"),A=d("Z"),T=d("0"),P=d("9"),k=d(":"),I=-1,R=-2,M=-3,z=-4;function j(q,ht,bt,xt){const ct=xt.length;if(bt-ht!==ct)return!1;for(let yt=0;yt<ct;++yt)if(q[ht+yt]!==xt[yt])return!1;return!0}function X(q,ht,bt,xt){return O(q.tags,ht,bt,xt)}function O(q,ht,bt,xt){const ct=q.length;for(let yt=0;yt<ct;++yt)if(j(ht,bt,xt,q[yt]))return yt;return q.push(ht.slice(bt,xt)),ct}function N(q,ht,bt){let xt=U(ht,bt),ct=ht[xt];if(ct===g||ct===v)return xt;let yt=xt;xt=Z(ht,xt);const Dt=function(Bt,oe,ne,Fe){return O(Bt.attributes,oe,ne,Fe)}(q,ht,yt,xt);for(;ht[xt]!==m;)++xt;for(++xt,yt=xt;(ct=ht[xt])!==m;)ct===x&&++xt,++xt;return q.tokens.push(M,Dt,yt,xt),xt+1}function W(q){return q===h||q===_||q===p}function U(q,ht){for(;W(q[ht]);)++ht;return ht}function K(q){return q>=b&&q<=E||q>=S&&q<=A||q===k||q>=T&&q<=P}function Z(q,ht){for(;K(q[ht]);)++ht;return ht}function rt(q,ht){const bt=["return {","  id: undefined,","  attributes: {","    text: undefined,","    color: undefined,",`    ${q?"radius":"width"}: undefined`,q?"  ,x: undefined":"",q?"  ,y: undefined":"","  },"];q||bt.push("  source: undefined,","  target: undefined,");const xt=Object.keys(ht);xt.length&&bt.push("  data: {");for(let ct=0;ct<xt.length;++ct){const yt=ht[xt[ct]],Dt=yt.title;bt.push(`  "${Dt}": ${yt.default!==void 0?JSON.stringify(yt.default):void 0}${ct===xt.length-1?"":","}`)}return xt.length&&bt.push("}"),bt.push("};"),new Function(bt.join(`
`))}function vt(q){return q.indexOf("\\")===-1||(q=q.replace(/\\"/g,'"')),q}function St(q,ht){let bt=0;for(let xt=0;xt<20;++xt){const ct=bt+q[xt]+ht[xt];bt=+(ct>=10),q[xt]=ct%10}}const ut=new class{constructor(){this._decimalPowerOfTwo=new Uint8Array(20),this._binaryNumber=new Uint8Array(64),this._decimalNumber=new Uint8Array(20)}int64ToString({low:ht,high:bt}){if(ht===0&&bt===0)return"0";(function(Ft,Bt,oe){for(let ne=0;ne<32;++ne)oe[ne]=+!!(Ft&1<<ne);for(let ne=0;ne<32;++ne)oe[ne+32]=+!!(Bt&1<<ne);return oe})(ht,bt,this._binaryNumber),this._decimalNumber.fill(0),this._decimalPowerOfTwo.fill(0),this._decimalPowerOfTwo[0]=1;const xt=this._binaryNumber[63]===1;xt&&function(Ft){for(let Bt=0;Bt<64;++Bt)Ft[Bt]^=1;for(let Bt=0;Bt<64&&!(Ft[Bt]^=1);++Bt);}(this._binaryNumber);for(let Dt=0;Dt<64;++Dt)this._binaryNumber[Dt]&&St(this._decimalNumber,this._decimalPowerOfTwo),St(this._decimalPowerOfTwo,this._decimalPowerOfTwo);const ct=[];let yt=this._decimalNumber.length-1;for(xt&&ct.push("-");!this._decimalNumber[yt];)yt-=1;for(let Dt=yt;Dt>=0;--Dt)ct.push(String(this._decimalNumber[Dt]));return ct.join("")}};function _t(q){return ut.int64ToString(q)}function Rt(q){return typeof q=="object"&&"high"in q&&"low"in q}const Gt=q=>"start"in q&&"end"in q&&"type"in q,Yt=q=>"segments"in q;function Et(q,ht,bt,xt){if(ht)if(Array.isArray(ht))ht.forEach(ct=>Et(q,ct,bt,xt));else if(Yt(ht))(function(yt,Dt,Ft,Bt){Dt.segments.forEach(oe=>{Et(yt,oe.start,Ft,Bt),Et(yt,oe.end,Ft,Bt),Et(yt,oe.relationship,Ft,Bt)})})(q,ht,bt,xt);else if(function(yt){if(typeof yt!="object"||yt===null)throw new Error("Ogma can only retrieve nodes and relationships from Neo4j. Please make sure that your Cypher query returns nodes and edges, not values.");const Dt=Object.keys(yt.properties);for(const Ft of Dt){const Bt=yt.properties[Ft];Rt(Bt)&&(yt.properties[Ft]=_t(Bt))}if(yt.identity!==void 0){if(Rt(yt.identity)&&(yt.identity=_t(yt.identity)),function(Bt){return"start"in Bt&&"end"in Bt}(yt)){const Ft=yt.start.identity||yt.start,Bt=yt.end.identity||yt.end;Rt(Ft)&&(yt.start=_t(Ft)),Rt(Bt)&&(yt.end=_t(Bt))}}else yt.id&&(yt.identity=yt.id)}(ht),Gt(ht))xt.has(ht.identity)||(xt.add(ht.identity),q.edges.push({id:ht.identity,source:ht.start,target:ht.end,data:{neo4jType:ht.type,neo4jProperties:ht.properties}}));else{const ct=ht;bt.has(ct.identity)||(bt.add(ct.identity),q.nodes.push({id:ct.identity,attributes:{},data:{neo4jLabels:ct.labels,neo4jProperties:ct.properties}}))}}const Tt={boolean:q=>q.toLowerCase()==="true",int:parseFloat,long:parseFloat,float:parseFloat,double:parseFloat,string:q=>q};function re(q,ht,bt){const xt=q.getElementsByTagName("data"),ct={};for(let yt=0;yt<xt.length;yt++){const Dt=xt[yt],Ft=Dt.getAttribute("key");if(Ft===null)continue;const Bt=ht[Ft];typeof Bt>"u"?ct[Ft]=Dt.textContent:Dt.textContent&&Dt.textContent.length!==0&&(ct[Bt.name]=Bt.parse(Dt.textContent))}for(const yt in bt)yt in ct||(ct[yt]=bt[yt]);return ct}function Xt(q){return q.color?q.color:q.r&&q.g&&q.b?`rgb(${q.r}, ${q.g}, ${q.b})`:void 0}const se=new Set(["x","y","size","color","r","g","b","label"]);function de(q){const ht={};for(const bt in q)se.has(bt)||q[bt]===void 0||(ht[bt]=q[bt]);return ht}s.gexf=function(ht){if(ht.indexOf("<gexf")===-1)throw new Error("not a GEXF file");const bt=function(et){const tt=new Int32Array(et.length);for(let lt=0,ft=et.length;lt<ft;++lt)tt[lt]=et.charCodeAt(lt);return tt}(ht),xt=function(et,tt){let lt,ft;const dt={tags:[],attributes:[],tokens:[]},st=dt.tokens;let mt=U(et,tt);for(;mt<et.length;){let Ct=et[mt];if(Ct===c){if(mt=U(et,++mt),et[mt]===v)for(st.push(R);et[++mt]!==g;);else{lt=mt,mt=Z(et,lt);const It=X(dt,et,lt,mt);for(st.push(I,It),Ct=et[mt];Ct!==g&&Ct!==v;)mt=N(dt,et,mt),Ct=et[mt];if(Ct===v)for(st.push(R);et[++mt]!==g;);}mt+=1}else{for(lt=mt;et[++mt]!==c;);for(ft=mt-1;W(et[ft]);)--ft;st.push(z,lt,ft+1)}mt=U(et,mt)}return dt}(bt,ht.indexOf("<gexf ")),ct={},yt={};xt.tags.forEach((it,et)=>{const tt=String.fromCharCode.apply(null,it);ct[tt]=et}),xt.attributes.forEach((it,et)=>{const tt=String.fromCharCode.apply(null,it);yt[tt]=et});const Dt=ct.attributes,Ft=ct.attribute,Bt=ct.node,oe=ct.edge,ne=ct.default,Fe=ct["viz:position"],Ve=ct["viz:size"],Me=ct["viz:color"],sn=ct.attvalue,Ke=yt.class,le=yt.id,Pe=yt.type,De=yt.title,ke=yt.label,_e=yt.source,hn=yt.target,Ne=yt.x,Mn=yt.y,Mi=yt.r,ye=yt.g,we=yt.b,rn=yt.a,Nn=yt.value,yn=yt.for,Wn=yt.weight,Ni={float:1,double:1,integer:2,boolean:3,string:4,"list-string":5};let vn=0;const On=xt.tokens,Ri=On.length,Xs=new Array(16);let Oe=0,Cn=0,Ln=0,si=!0;const Vt={},xr={};let ro,xn,Zs="",Cs="",br="",Ie={attributes:{}},Er=0,oo=0,ao=0,ua=1,os="",D=!1,G=!0,B=null,V=null;const J=[],nt=[];let Y=0,ot={};for(;vn<Ri;){const it=On[vn];if(it===I)Cn=Oe,Oe=On[vn+1],Xs[Ln]=Oe,Ln+=1,Oe===Bt?(B||(B=rt(!0,Vt)),Ie=B(),G=!0,ot=Vt):Oe===oe&&(V||(V=rt(!1,xr)),Ie=V(),G=!1,ot=xr),vn+=2;else if(it===R){if(Zs&&Oe===Ft){ot=si?Vt:xr;const et=Ni[Cs];let tt=ro;tt&&(et===1?tt=+tt:et===2?tt=0|+tt:et===3?tt=tt==="true":et===5&&(tt=tt.split(" ").filter(lt=>lt))),ot[Zs]={title:br||Zs,default:tt,type:et},Zs="",br="",Cs="",ro=void 0}else if(Oe===Bt&&Ln===4)D&&Ie.attributes&&(Ie.attributes.color=`rgba(${Er}, ${oo}, ${ao}, ${ua})`,Er=0,oo=0,ao=0,ua=1,D=!1),Ie.id||(Ie.id=++Y),J.push(Ie);else if(Oe===oe&&Ln===4)Ie.id||(Ie.id=++Y),nt.push(Ie);else if(Oe===sn&&Ln===6&&os){const et=(G?Vt:xr)[os];if(et){if(xn===void 0)xn=et.default;else{const tt=et.type;tt&&(tt===1?xn=+xn:tt===2?xn=0|+xn:tt===3?xn=xn==="true":tt===5?xn=xn.split(" ").filter(lt=>lt).map(lt=>vt(lt)):typeof bt=="string"&&(xn=vt(xn)))}Ie.data[ot[os].title]=xn}os="",xn=null}Ln-=1,Oe=Cn,Cn=Xs[Ln-2],vn+=1}else if(it===M){const et=On[vn+1],tt=ht.substring(On[vn+2],On[vn+3]);if(Oe===Dt)et===Ke&&(si=tt!=="edge"&&tt!=="edges");else if(Oe===Ft)et===le?Zs=tt:et===Pe?Cs=tt:et===De&&(br=tt);else if(Oe!==Bt&&Oe!==oe||Ln!==4)if(Oe===Fe&&Ln===5){if(et===Ne)Ie.attributes.x=parseFloat(tt);else if(et===Mn){const lt=parseFloat(tt);Ie.attributes.y=lt===0?lt:-lt}}else Oe===Me&&Ln===5?(D=!0,et===Mi?Er=parseInt(tt):et===ye?oo=parseInt(tt):et===we?ao=parseInt(tt):et===rn&&(ua=parseFloat(tt))):Oe===Ve&&Ln===5?et===Nn&&(G?Ie.attributes.radius=+tt:Ie.attributes.width=+tt):Oe===sn&&Ln===6&&(et===yn||et===le?os=tt:et===Nn&&(xn=tt));else et===le?Ie.id=tt:et===ke?Ie.attributes.text=tt:et===_e?Ie.source=tt:et===hn?Ie.target=tt:et===Wn&&(Ie.attributes.width=+tt);vn+=4}else{if(it!==z)throw new Error(`at index ${vn}: token ${it}`);{const et=ht.substring(On[vn+1],On[vn+2]);Oe===ne&&(ro=et),vn+=3}}}return{nodes:J,edges:nt}},s.graphml=function(ht,bt){if(!bt){if(typeof DOMParser>"u")throw new Error("DOMParser is not available. You need to provide a DOMParser instance as second argument, if you are not in the browser environment");bt=new DOMParser}const xt=bt.parseFromString(ht,"application/xml"),ct=xt.getElementsByTagName("key"),yt=xt.getElementsByTagName("node"),Dt=xt.getElementsByTagName("edge"),{definitions:Ft,defaults:Bt}=function(Me){const sn={graph:{},node:{},edge:{}},Ke={graph:{},node:{},edge:{}};for(let le=0;le<Me.length;le++){const Pe=Me[le],De=Pe.getAttribute("for")||"node",ke=Pe.getAttribute("id"),_e=Pe.getAttribute("attr.name"),hn=Pe.getAttribute("attr.type")||"string",Ne=Pe.getElementsByTagName("default"),Mn=Ne.length!==0?Ne[0].textContent:void 0;sn[De][ke]={name:_e,parse:Tt[hn]},typeof Mn<"u"&&(Ke[De][_e]=Mn)}return{definitions:sn,defaults:Ke}}(ct),oe=[],ne=new Set;for(let Ve=0;Ve<yt.length;Ve++){const Me=yt[Ve],sn=Me.getAttribute("id"),Ke=Me.getAttribute("href")||void 0,le=re(Me,Ft.node,Bt.node);ne.add(sn);const Pe={id:sn,attributes:{x:le.x,y:le.y,radius:le.size,color:Xt(le),text:le.label},data:de(le)};le.x!==void 0&&(Pe.attributes.x=le.x),le.y!==void 0&&(Pe.attributes.y=le.y),le.size!==void 0&&(Pe.attributes.radius=le.size),le.label!==void 0&&(Pe.attributes.text=le.label);const De=Xt(le);De!==void 0&&(Pe.attributes.color=De),Ke!==void 0&&(Pe.data.href=Ke),oe.push(Pe)}const Fe=[];for(let Ve=0;Ve<Dt.length;Ve++){const Me=Dt[Ve],sn=Me.getAttribute("id")||Ve,Ke=Me.getAttribute("source"),le=Me.getAttribute("target"),Pe=Me.getAttribute("xlink:href")||void 0;if(!ne.has(Ke)||!ne.has(le))throw new Error(`Invalid edge: ${Ke} -> ${le}`);const De=re(Me,Ft.edge,Bt.edge),ke={id:sn,source:Ke,target:le,attributes:{},data:de(De)},_e=Xt(De);_e!==void 0&&(ke.attributes.color=_e),Pe!==void 0&&(ke.data.href=Pe),Fe.push(ke)}return{nodes:oe,edges:Fe}},s.janus=function(ht){const bt=[],xt=[];return o(typeof ht=="string"?JSON.parse(ht):ht,bt,xt),{nodes:bt,edges:xt}},s.json=function(ht,bt=xt=>xt){const xt=bt(JSON.parse(ht)),ct=xt.nodes||[],yt=xt.edges||[];for(let Dt=0;Dt<ct.length;Dt++){const Ft=ct[Dt];Ft.attributes||(Ft.attributes={}),typeof Ft.size=="string"&&(Ft.size=+Ft.size),typeof Ft.x=="string"&&(Ft.x=+Ft.x),typeof Ft.y=="string"&&(Ft.y=+Ft.y),r(Ft,"x"),r(Ft,"y"),r(Ft,"size","radius"),r(Ft,"color"),r(Ft,"text")}for(let Dt=0;Dt<yt.length;Dt++){const Ft=yt[Dt];Ft.attributes||(Ft.attributes={}),typeof Ft.size=="string"&&(Ft.size=+Ft.size),r(Ft,"size","width"),r(Ft,"color"),r(Ft,"text")}return{nodes:ct,edges:yt}},s.mtx=q=>{const ht=q.split(`
`).filter(ct=>!ct.startsWith("%")),[bt]=ht[0].split(" ").map(Number),xt=ht.slice(1).map(ct=>ct.split(" ").slice(0,2).map(Number)).filter(ct=>ct.length===2);return{nodes:Array.from({length:Number(bt)},(ct,yt)=>({id:yt})),edges:xt.map(([ct,yt])=>({source:ct%bt,target:yt%bt}))}},s.neo4j=function(ht){let bt=typeof ht=="string"?JSON.parse(ht):ht;const xt={nodes:[],edges:[]},ct=new Set,yt=new Set;return(Dt=>"queryKeys"in Dt&&"values"in Dt)(bt)&&(bt=function(Ft){const Bt=[];return Ft.values.forEach(oe=>{const{nodes:ne=[],relationships:Fe=[],segments:Ve=[]}=oe.adapted,Me=[{segments:Ve,properties:{}}];Bt.push({_fields:[...ne,...Fe,...Me]})}),{records:Bt}}(bt)),bt.records.forEach(({_fields:Dt})=>Dt.forEach(Ft=>Et(xt,Ft,ct,yt))),xt},Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})},typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).ogmaParsers={})}}),yU=xk({"node_modules/@linkurious/ogma-generators/dist/ogma-generators.umd.js"(t,e){var n,i;n=t,i=function(s){/**
* Ogma Generators
* @description Graphs Generators for Ogma
* @version 0.0.13 (built on Tue Nov 14 2023 10:49:46 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2023. All rights reserved.
* @preserve
*/const r=Object.freeze(Object.defineProperty({__proto__:null,configure:({nodes:T=10,edges:P=10,texts:k=!1,scale:I=100}={})=>({nodes:T,edges:P,texts:k,scale:I}),generate:function({nodes:P,scale:k,texts:I,edges:R}){const M=[],z=[];for(let j=0;j<P;j++)M.push({id:j,attributes:{x:Math.random()*k,y:Math.random()*k,text:I?`Node ${j}`:void 0}});for(let j=0;j<R;j++)z.push({id:j,source:Math.random()*P|0,target:Math.random()*P|0,attributes:{text:I?`Edge ${j}`:void 0}});return{nodes:M,edges:z}}},Symbol.toStringTag,{value:"Module"})),o=Object.freeze(Object.defineProperty({__proto__:null,configure:({rows:T=4,columns:P=4,columnDistance:k=20,rowDistance:I=20,xmin:R=0,ymin:M=0}={})=>({rows:T,columns:P,columnDistance:k,rowDistance:I,xmin:R,ymin:M}),generate:function({rows:P,columns:k,columnDistance:I,rowDistance:R,xmin:M,ymin:z}){const j={nodes:[],edges:[]};let X=0;for(let O=0;O<P;++O)for(let N=0;N<k;++N){const W=O*k+N;j.nodes.push({id:W,attributes:{x:M+N*I,y:z+O*R}}),N!==k-1&&(j.edges.push({id:X,source:W,target:O*k+N+1}),X++),O!==P-1&&(j.edges.push({id:X,source:W,target:(O+1)*k+N}),X++)}return j}},Symbol.toStringTag,{value:"Module"})),a=Object.freeze(Object.defineProperty({__proto__:null,configure:({length:T=5,scale:P=100}={})=>({length:T,scale:P}),generate:function({length:P,scale:k}){const I={nodes:[],edges:[]};if(P<=0)return I;I.nodes.push({id:0,attributes:{x:Math.random()*k,y:Math.random()*k}});for(let R=1;R<P;++R)I.nodes.push({id:R,attributes:{x:Math.random()*k,y:Math.random()*k}}),I.edges.push({id:R-1,source:R-1,target:R});return I}},Symbol.toStringTag,{value:"Module"}));function l(T){return typeof T=="number"&&isFinite(T)?T:void 0}const d=Object.freeze(Object.defineProperty({__proto__:null,configure:function({children:P=2,height:k=3}={}){if(!function(R){return typeof R=="number"&&isFinite(R)&&R>0?R:void 0}(P))throw new TypeError('Invalid argument: "children" is not a positive number, was '+P);if(!function(R){return typeof R=="number"&&isFinite(R)&&R>=0?R:void 0}(k))throw new TypeError('Invalid argument: "height" is not a positive number, was '+k);return{children:P,height:k}},generate:function({children:P,height:k}){k+=1;const I=Math.pow(P,k),R=[],M=[];let z=1,j=0,X=0;for(let O=0;O<k;++O){const N=I/(z+1)/1.5;for(let W=0;W<z;++W){const U=j++;if(R.push({id:U,attributes:{x:(W+1)*N*10,y:20*O}}),O!==k-1)for(let K=0;K<P;++K)M.push({id:X,source:U,target:U*P+K+1}),X+=1}z*=P}return{nodes:R,edges:M}}},Symbol.toStringTag,{value:"Module"})),h=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:P=20,edges:k,p:I,scale:R=100}={}){if(!l(P)||P<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+P);if(k!==void 0&&I!==void 0)throw new TypeError("Invalid argument: choose between options.edges and options.p");return k===void 0&&I===void 0&&(I=.1),I===void 0&&(I=-1),k===void 0&&(k=-1),{nodes:P,p:I,edges:k,scale:R}},generate:function(P){const k={nodes:[],edges:[]},I=P.nodes,R=P.p,M=P.scale;if(R>=0){let z=0;for(let j=0;j<I;j++){k.nodes.push({id:j,attributes:{x:Math.random()*M,y:Math.random()*M}});for(let X=0;X<j;X++)Math.random()<R&&k.edges.push({id:z++,source:j,target:X})}}else{const z=[],j=P.edges;for(let O=0;O<I;O++){k.nodes.push({id:O,attributes:{x:100*Math.random(),y:100*Math.random()}});for(let N=O+1;N<I;N++)z.push({source:O,target:N})}let X=z.length-1;for(let O=0;O<j;O++){const N=z.splice(Math.floor(Math.random()*X),1)[0];N.id=O,k.edges.push(N),X--}}return k}},Symbol.toStringTag,{value:"Module"})),c=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:P=40,m0:k=5,m:I=1,scale:R=100}={}){if(!l(P)||P<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+P);if(!l(k)||k>=P)throw new TypeError(`Invalid argument: options.m0 is not a number < ${P}, was ${k}`);if(!l(k)||I>=k)throw new TypeError(`Invalid argument: options.m is not a number <= ${k}, was ${I}`);if(!l(R)||R<0)throw new TypeError("Invalid argument: options.scale is not a number or is less than 0");return{nodes:P,m0:k,m:I,scale:R}},generate:function({scale:P,nodes:k,m0:I,m:R}){const M={nodes:[],edges:[]},z={},j=[],X=P/10;let O=0;for(let N=0;N<I;N++)M.nodes.push({id:N,attributes:{x:Math.random()*X,y:Math.random()*X}}),j[N]=0;for(let N=0;N<I;N++)for(let W=N+1;W<I;W++){const U={id:O++,source:N,target:W};z[U.source+"-"+U.target]=U,M.edges.push(U),j[N]++,j[W]++}for(let N=I;N<k;N++){M.nodes.push({id:N,attributes:{x:Math.random()*P,y:Math.random()*P}}),j[N]=0;let W=0;for(let K=0;K<N;K++)W+=j[K];let U=0;for(let K=0;K<R;K++){const Z=Math.random();let rt=0;for(let vt=0;vt<N;vt++)if(!z[`${N}-${vt}`]&&!z[`${vt}-${N}`]&&(rt=N===1?1:rt+j[vt]/W+U/(N-K),Z<=rt)){U+=j[vt]/W;const St={id:O++,source:N,target:vt};z[`${St.source}-${St.target}`]=St,M.edges.push(St),j[N]++,j[vt]++;break}}}return M}},Symbol.toStringTag,{value:"Module"})),g=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:P=50,width:k=100,height:I=100,x:R=0,y:M=0}={}){if(!isFinite(P)||P<1)throw new RangeError("Tree generator: number of nodes must be a positive integer");return{nodes:P,width:k,height:I,x:R,y:M}},generate:function({nodes:P,x:k,y:I,width:R,height:M}){const z=k-R/2,j=I-M/2;return{nodes:new Array(P).fill(0).map((X,O)=>({id:O,attributes:{x:z+Math.random()*R,y:j+Math.random()*M}})),edges:new Array(P-1).fill(0).map((X,O)=>({id:O,source:Math.floor(Math.sqrt(O)),target:O+1}))}}},Symbol.toStringTag,{value:"Module"})),m=5,_=10,p=10,v=2.7,x=.2;function b(T){return Math.pow(v,T)*_}function E(T){return m+b(T)/p}function S(T,P,k,I,R){if(k===0)return R;const M=b(k),z=E(k),j=z*x;let X=-Math.PI;const O=2*Math.PI/P,N=I.attributes.x||0,W=I.attributes.y||0;for(let U=0;U<P;++U){const K={id:R,attributes:{x:N+M*Math.cos(X),y:W+M*Math.sin(X),radius:z}},Z={id:R,source:I.id,target:R,attributes:{width:j}};T.nodes.push(K),T.edges.push(Z),R=S(T,P,k-1,K,R+1),X+=O}return R}const A=Object.freeze(Object.defineProperty({__proto__:null,configure:function({depth:P=3,breadth:k=3,nodes:I}){return I!==void 0?(k=5,P=Math.ceil(Math.log(I)/Math.log(5))):I=-1,{depth:P,breadth:k,nodes:I}},generate:function({depth:P,breadth:k,nodes:I}){const R={id:0,attributes:{x:0,y:0,radius:E(P+1)}},M={nodes:[R],edges:[]};return S(M,k,P,R,1),I!==void 0&&I>=0&&(M.nodes=M.nodes.slice(0,I),M.edges=M.edges.slice(0,Math.max(I-1,0))),M}},Symbol.toStringTag,{value:"Module"}));s.balancedTree=d,s.barabasiAlbert=c,s.erdosRenyi=h,s.flower=A,s.grid=o,s.path=a,s.random=r,s.randomTree=g,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})},typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).ogmaGenerators={})}}),Ge=class{constructor(t){this._ogma=t}},kb={};function Ek(t,e,n,i,s,r){let o=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++){const d=r[a],h=r[l];if(d!==h){const c=t[d][h]*s,g=1/(c*c);if(g){const m=e[d]-e[h],_=n[d]-n[h];o+=g*Math.pow(c-Math.sqrt(m*m+_*_),2)}}}return o}function Sk(t,e,n,i,s,r,o){let a=0;if(s===-1)return 0;for(let l=0;l<i;l++)for(let d=0;d<i;d++){const h=o[l],c=o[d];if(h!==c&&(h===s||c===s)){const g=t[h][c]*r,m=1/(g*g);if(m){const _=e[h]-e[c],p=n[h]-n[c];a+=m*Math.pow(g-Math.sqrt(_*_+p*p),2)}}}return a}function Y0(t,e,n,i,s,r,o,a){o=o||0;let l=0,d=0;for(let h=0;h<i;h++)for(let c=0;c<i;c++){const g=a[h],m=a[c];if(g!==m){const _=t[g][m]*r,p=1/(_*_);if(p){const v=e[g]-e[m],x=n[g]-n[m],b=p*Math.pow(_-Math.sqrt(v*v+x*x),2);l+=b,g!==s&&m!==s||(d+=b)}}}return(1-o)*l+o*d}function q0(t,e,n,i,s,r,o,a,l){o=o||0;const d=e,h=n;(s=s===void 0?-1:s)===-1&&(o=0);const c=e[s],g=n[s];for(let m=0;m<i;m++){const _=a[m],p=l(t[s][m]),v=o/(p*p);if(p===0)continue;let x=0,b=0,E=0;const S=e[_],A=n[_];for(let P=0;P<i;P++){const k=a[P];if(k!==_){const I=t[_][k]*r,R=1/(I*I),M=e[k],z=n[k];if(R!==0){const j=S-M,X=A-z,O=j*j+X*X,N=O<1e-12?0:1/Math.sqrt(O);b+=(1-o)*R*(M+I*(S-M)*N),E+=(1-o)*R*(z+I*(A-z)*N)}x+=R}}const T=(1-o)*x+v;if(T!==0){const P=S-c,k=A-g;let I=P*P+k*k;I=I<1e-12?0:1/Math.sqrt(I);const R=p===0?0:v*(p*I);d[_]=(b+R*e[_])/T,h[_]=(E+R*n[_])/T}}return{x:d,y:h}}function vU(t,e,n,i,s,r,o,a){o=o||0;const l=e,d=n;let h;(s=s===void 0?-1:s)===-1&&(o=0);for(let c=0;c<i;c++){const g=a[c];let m=0,_=0,p=0;const v=e[g],x=n[g];for(let b=0;b<i;b++){const E=a[b];let S=0;if(E!==g){let A=0;const T=t[g][E]*r,P=1/(T*T);g!==s&&E!==s||(A=P);const k=(1-o)*P+o*A;if(m+=k,P!==0){const I=e[E],R=n[E],M=v-I,z=x-R,j=M*M+z*z;j>1e-6&&(S=1/Math.sqrt(j)),_+=k*(I+T*(v-I)*S),p+=k*(R+T*(x-R)*S)}}}h=m,h!==0&&(l[g]=_/h,d[g]=p/h)}return{x:l,y:d}}function Ib(t=(s,r)=>s-r,e=[],n={},i=s=>s){let s=e.length;function r(a){for(;;){const l=2*a+1,d=l+1;let h=a;if(l<s&&t(e[l],e[h])<0&&(h=l),d<s&&t(e[d],e[h])<0&&(h=d),h===a)return a;const c=e[h];e[h]=e[a],e[a]=c,n[i(e[h])]=h,n[i(c)]=a,a=h}}return{get keys(){return n},get size(){return s},heapify:r,pop(){if(s<=0)return;if(s===1)return s--,e[0];const a=e[0];return e[0]=e[s-1],s--,r(0),a},decreaseKey(a,l){for(l!==void 0&&(e[a]=l,n[i(l)]=a);a>0;){const d=a-1>>1;if(!(t(e[d],e[a])>0))break;{const h=e[a];e[a]=e[d],e[d]=h,n[i(e[a])]=a,n[i(h)]=d,a=d}}return a},min:()=>e[0],remove(a){return this.decreaseKey(a,Number.NEGATIVE_INFINITY),this.pop()},push(a){s++;let l=s-1;for(e[l]=a;l>0;){const d=l-1>>1;if(!(t(e[d],e[l])>0))break;{const h=e[l];e[l]=e[d],e[d]=h,n[i(e[l])]=l,n[i(h)]=d,l=d}}return l},empty:()=>s<=0,toArray:()=>e.slice(0,s)}}function Mb({sources:t,targets:e,weights:n,source:i,target:s,undirected:r=!1,indexes:o,N:a}){if(!(a=o?o.length:a)||!isFinite(a)||a===0)throw new Error("Invalid number of nodes "+a);const l=new Float32Array(a),d=new Int32Array(a),h={},c=Number.POSITIVE_INFINITY;if(!n){n=[];for(let p=0;p<a;p++)n[p]=1}if(!o){o=new Uint32Array(a);for(let p=0;p<a;p++)o[p]=p+1}for(let p=0;p<a;p++)l[p]=c,d[p]=-1,h[o[p]]=p;l[h[i]]=0;let g=!1;for(let p=1;p<=a;p++){for(let v=0;v<n.length;v++){const x=t[v],b=e[v],E=h[x],S=h[b];if(E!==void 0&&S!==void 0){const A=n[v];let T=l[E]+A;l[E]!==c&&T<l[S]&&(l[S]=T,d[S]=x,g=!0),r&&(T=l[S]+A,l[S]!==c&&T<l[E]&&(l[E]=T,d[E]=b,g=!0))}}if(!g)break}if(g)for(let p=0;p<n.length;p++){const v=t[p],x=e[p],b=h[v],E=h[x];if(b!==void 0&&E!==void 0){const S=n[p];if(l[b]+S<l[E])return null}}let m=null,_=null;if(s!==void 0){const p=h[s];if(p!==void 0&&l[p]!==c){m=[];for(let v=s;v!==-1;v=d[h[v]])m.push(v);m=m.reverse(),_=l[p]}}return{distances:l,path:m,pathLength:_}}function Nb(t,e,n,i,s,r,o){i=i||t.map((v,x)=>x+1);const a=i.length,l=new Float32Array(a),d=new Int32Array(a),h=new Uint32Array(a),c=Number.POSITIVE_INFINITY,g={};if(a===0)return{distances:l,path:null,pathLength:null};if(!s){s={};for(let v=0;v<a;v++)s[i[v]]=v}for(let v=0;v<a;v++)l[v]=c,d[v]=-1,h[v]=g[v]=v;const m=Ib((v,x)=>l[v]-l[x],h,g);for(l[s[e]]=0,m.decreaseKey(g[s[e]]);m.size!==0;){const v=m.pop(),x=l[v],b=t[v];if(x===c)break;for(let E=0,S=b.nodes.length;E<S;E++){const A=b.nodes[E],T=r?1:o?o(i[v],A):b.weights?b.weights[E]:1,P=s[A];if(P===void 0)continue;const k=x+T;k<l[P]&&(l[P]=k,d[P]=v,m.decreaseKey(g[P]))}}let _=null,p=null;if(n!==void 0){const v=s[n];if(l[v]!==c){_=[];for(let x=v;x!==-1;x=d[x])_.push(i[x]);_.reverse(),p=l[n]}}return{distances:l,path:_,pathLength:p}}function J0({sources:t,targets:e,weights:n,indexes:i,adjacency:s,undirected:r,ignoreWeights:o}){const a=Number.POSITIVE_INFINITY,l=i?i.length:s.length;if(!i){i=new Uint32Array(l);for(let p=0;p<l;p++)i[p]=p+1}const d=new Array(l),h={};for(let p=0;p<l;p++){d[p]=new Float32Array(l);for(let v=0;v<l;v++)d[p][v]=p===v?0:a;h[i[p]]=p}const c=l,g=n.length;t=t.slice(),e=e.slice(),n=n.slice();for(let p=0;p<l;p++)t[g+p]=c,e[g+p]=i[p],n[g+p]=0,o&&(n[p]=1);const m=Mb({sources:t,targets:e,weights:n,undirected:r,N:l+1,source:c});if(m===null)throw new Error("Graph has negative weight loops");const _=m.distances;for(let p=0;p<n.length;p++){const v=h[t[p]],x=h[e[p]];v!==void 0&&x!==void 0&&(n[p]=n[p]+_[v]-_[x])}t=t.slice(0,g),e=e.slice(0,g),n=n.slice(0,g);for(let p=0;p<l;p++){const v=i[p],{distances:x}=Nb(s,v,void 0,i,h,!!o);for(let b=0;b<l;b++)d[p][b]=p===b?0:x[b]}return d}function Cd(t,e){for(let n=1,i=t.length;n<i;n++){const s=t[n];let r=n;for(;r>0&&e.get(t[r-1])>e.get(s);)t[r]=t[r-1],--r;t[r]=s}return t}function xU(t,e){for(let n=1,i=t.length;n<i;n++){const s=t[n];let r=n;for(;r>0&&e.get(t[r-1])<e.get(s);)t[r]=t[r-1],--r;t[r]=s}return t}function Qn(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function K0(t){return Array.isArray(t)?t:[t]}function wk(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(Array.isArray(i))for(let s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e}function bU(...t){if(t.length===0)return[];const e=t[0].constructor;let n=0;for(const r of t)n+=r.length;const i=new e(n);let s=0;for(const r of t){for(let o=0;o<r.length;o++)i[s+o]=r[o];s+=r.length}return i}function EU(t,e){const n=t.indexOf(e);return n!==-1&&(t.splice(n,1),!0)}function Ak(t,e){let n,i,s=0,r=t.length-1;for(;s<=r;)if(n=(s+r)/2|0,i=t[n],i<e)s=n+1;else{if(!(i>e))return n;r=n-1}return-1}sc(kb,{CyclesFinder:()=>Hk,Quadtree:()=>Bk,bellmanFord:()=>Mb,betweenness:()=>Xk,circlePack:()=>Nk,circleSpread:()=>HU,constrainedStress:()=>Y0,convexhull:()=>GU,detectCyclesDirected:()=>Gk,detectCyclesUndirected:()=>k$,detectCyclesUndirectedDFS:()=>I$,dijkstra:()=>Nb,distanceStress:()=>Sk,johnson:()=>J0,kruskal:()=>Wk,largestEmptyCircle:()=>Lk,minDisk:()=>Fb,minHeap:()=>Ib,removeRadialOverlap:()=>tv,stressMinimizationStep:()=>q0,stressMinimizationStepGeneral:()=>vU,weightedStress:()=>Ek});var Mh=(t,e)=>{const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=e[t[i]];return n},Ur=11102230246251565e-32,ai=134217729,SU=(3+8*Ur)*Ur;function H_(t,e,n,i,s){let r,o,a,l,d=e[0],h=i[0],c=0,g=0;h>d==h>-d?(r=d,d=e[++c]):(r=h,h=i[++g]);let m=0;if(c<t&&g<n)for(h>d==h>-d?(o=d+r,a=r-(o-d),d=e[++c]):(o=h+r,a=r-(o-h),h=i[++g]),r=o,a!==0&&(s[m++]=a);c<t&&g<n;)h>d==h>-d?(o=r+d,l=o-r,a=r-(o-l)+(d-l),d=e[++c]):(o=r+h,l=o-r,a=r-(o-l)+(h-l),h=i[++g]),r=o,a!==0&&(s[m++]=a);for(;c<t;)o=r+d,l=o-r,a=r-(o-l)+(d-l),d=e[++c],r=o,a!==0&&(s[m++]=a);for(;g<n;)o=r+h,l=o-r,a=r-(o-l)+(h-l),h=i[++g],r=o,a!==0&&(s[m++]=a);return r===0&&m!==0||(s[m++]=r),m}function wU(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function rc(t){return new Float64Array(t)}var AU=(3+16*Ur)*Ur,TU=(2+12*Ur)*Ur,CU=(9+64*Ur)*Ur*Ur,xl=rc(4),Ew=rc(8),Sw=rc(12),ww=rc(16),yi=rc(4);function LU(t,e,n,i,s,r,o){let a,l,d,h,c,g,m,_,p,v,x,b,E,S,A,T,P,k;const I=t-s,R=n-s,M=e-r,z=i-r;S=I*z,g=ai*I,m=g-(g-I),_=I-m,g=ai*z,p=g-(g-z),v=z-p,A=_*v-(S-m*p-_*p-m*v),T=M*R,g=ai*M,m=g-(g-M),_=M-m,g=ai*R,p=g-(g-R),v=R-p,P=_*v-(T-m*p-_*p-m*v),x=A-P,c=A-x,xl[0]=A-(x+c)+(c-P),b=S+x,c=b-S,E=S-(b-c)+(x-c),x=E-T,c=E-x,xl[1]=E-(x+c)+(c-T),k=b+x,c=k-b,xl[2]=b-(k-c)+(x-c),xl[3]=k;let j=wU(4,xl),X=TU*o;if(j>=X||-j>=X||(c=t-I,a=t-(I+c)+(c-s),c=n-R,d=n-(R+c)+(c-s),c=e-M,l=e-(M+c)+(c-r),c=i-z,h=i-(z+c)+(c-r),a===0&&l===0&&d===0&&h===0)||(X=CU*o+SU*Math.abs(j),j+=I*h+z*a-(M*d+R*l),j>=X||-j>=X))return j;S=a*z,g=ai*a,m=g-(g-a),_=a-m,g=ai*z,p=g-(g-z),v=z-p,A=_*v-(S-m*p-_*p-m*v),T=l*R,g=ai*l,m=g-(g-l),_=l-m,g=ai*R,p=g-(g-R),v=R-p,P=_*v-(T-m*p-_*p-m*v),x=A-P,c=A-x,yi[0]=A-(x+c)+(c-P),b=S+x,c=b-S,E=S-(b-c)+(x-c),x=E-T,c=E-x,yi[1]=E-(x+c)+(c-T),k=b+x,c=k-b,yi[2]=b-(k-c)+(x-c),yi[3]=k;const O=H_(4,xl,4,yi,Ew);S=I*h,g=ai*I,m=g-(g-I),_=I-m,g=ai*h,p=g-(g-h),v=h-p,A=_*v-(S-m*p-_*p-m*v),T=M*d,g=ai*M,m=g-(g-M),_=M-m,g=ai*d,p=g-(g-d),v=d-p,P=_*v-(T-m*p-_*p-m*v),x=A-P,c=A-x,yi[0]=A-(x+c)+(c-P),b=S+x,c=b-S,E=S-(b-c)+(x-c),x=E-T,c=E-x,yi[1]=E-(x+c)+(c-T),k=b+x,c=k-b,yi[2]=b-(k-c)+(x-c),yi[3]=k;const N=H_(O,Ew,4,yi,Sw);S=a*h,g=ai*a,m=g-(g-a),_=a-m,g=ai*h,p=g-(g-h),v=h-p,A=_*v-(S-m*p-_*p-m*v),T=l*d,g=ai*l,m=g-(g-l),_=l-m,g=ai*d,p=g-(g-d),v=d-p,P=_*v-(T-m*p-_*p-m*v),x=A-P,c=A-x,yi[0]=A-(x+c)+(c-P),b=S+x,c=b-S,E=S-(b-c)+(x-c),x=E-T,c=E-x,yi[1]=E-(x+c)+(c-T),k=b+x,c=k-b,yi[2]=b-(k-c)+(x-c),yi[3]=k;const W=H_(N,Sw,4,yi,ww);return ww[W-1]}function qc(t,e,n,i,s,r){const o=(e-r)*(n-s),a=(t-s)*(i-r),l=o-a,d=Math.abs(o+a);return Math.abs(l)>=AU*d?l:-LU(t,e,n,i,s,r,d)}var Aw=Math.pow(2,-52),Jc=new Uint32Array(512),Tk=class Ck{static from(e,n=NU,i=RU){const s=e.length,r=new Float64Array(2*s);for(let o=0;o<s;o++){const a=e[o];r[2*o]=n(a),r[2*o+1]=i(a)}return new Ck(r)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:s,_hullHash:r}=this,o=e.length>>1;let a=1/0,l=1/0,d=-1/0,h=-1/0;for(let I=0;I<o;I++){const R=e[2*I],M=e[2*I+1];R<a&&(a=R),M<l&&(l=M),R>d&&(d=R),M>h&&(h=M),this._ids[I]=I}const c=(a+d)/2,g=(l+h)/2;let m,_,p;for(let I=0,R=1/0;I<o;I++){const M=W_(c,g,e[2*I],e[2*I+1]);M<R&&(m=I,R=M)}const v=e[2*m],x=e[2*m+1];for(let I=0,R=1/0;I<o;I++){if(I===m)continue;const M=W_(v,x,e[2*I],e[2*I+1]);M<R&&M>0&&(_=I,R=M)}let b=e[2*_],E=e[2*_+1],S=1/0;for(let I=0;I<o;I++){if(I===m||I===_)continue;const R=IU(v,x,b,E,e[2*I],e[2*I+1]);R<S&&(p=I,S=R)}let A=e[2*p],T=e[2*p+1];if(S===1/0){for(let M=0;M<o;M++)this._dists[M]=e[2*M]-e[0]||e[2*M+1]-e[1];Xl(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let R=0;for(let M=0,z=-1/0;M<o;M++){const j=this._ids[M],X=this._dists[j];X>z&&(I[R++]=j,z=X)}return this.hull=I.subarray(0,R),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(qc(v,x,b,E,A,T)<0){const I=_,R=b,M=E;_=p,b=A,E=T,p=I,A=R,T=M}const P=MU(v,x,b,E,A,T);this._cx=P.x,this._cy=P.y;for(let I=0;I<o;I++)this._dists[I]=W_(e[2*I],e[2*I+1],P.x,P.y);Xl(this._ids,this._dists,0,o-1),this._hullStart=m;let k=3;i[m]=n[p]=_,i[_]=n[m]=p,i[p]=n[_]=m,s[m]=0,s[_]=1,s[p]=2,r.fill(-1),r[this._hashKey(v,x)]=m,r[this._hashKey(b,E)]=_,r[this._hashKey(A,T)]=p,this.trianglesLen=0,this._addTriangle(m,_,p,-1,-1,-1);for(let I,R,M=0;M<this._ids.length;M++){const z=this._ids[M],j=e[2*z],X=e[2*z+1];if(M>0&&Math.abs(j-I)<=Aw&&Math.abs(X-R)<=Aw||(I=j,R=X,z===m||z===_||z===p))continue;let O=0;for(let Z=0,rt=this._hashKey(j,X);Z<this._hashSize&&(O=r[(rt+Z)%this._hashSize],O===-1||O===i[O]);Z++);O=n[O];let N,W=O;for(;N=i[W],qc(j,X,e[2*W],e[2*W+1],e[2*N],e[2*N+1])>=0;)if(W=N,W===O){W=-1;break}if(W===-1)continue;let U=this._addTriangle(W,z,i[W],-1,-1,s[W]);s[z]=this._legalize(U+2),s[W]=U,k++;let K=i[W];for(;N=i[K],qc(j,X,e[2*K],e[2*K+1],e[2*N],e[2*N+1])<0;)U=this._addTriangle(K,z,N,s[z],-1,s[K]),s[z]=this._legalize(U+2),i[K]=K,k--,K=N;if(W===O)for(;N=n[W],qc(j,X,e[2*N],e[2*N+1],e[2*W],e[2*W+1])<0;)U=this._addTriangle(N,z,W,-1,s[W],s[N]),this._legalize(U+2),s[N]=U,i[W]=W,k--,W=N;this._hullStart=n[z]=W,i[W]=n[K]=z,i[z]=K,r[this._hashKey(j,X)]=z,r[this._hashKey(e[2*W],e[2*W+1])]=W}this.hull=new Uint32Array(k);for(let I=0,R=this._hullStart;I<k;I++)this.hull[I]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(PU(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:s}=this;let r=0,o=0;for(;;){const a=i[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(r===0)break;e=Jc[--r];continue}const d=a-a%3,h=l+(e+1)%3,c=d+(a+2)%3,g=n[o],m=n[e],_=n[h],p=n[c];if(kU(s[2*g],s[2*g+1],s[2*m],s[2*m+1],s[2*_],s[2*_+1],s[2*p],s[2*p+1])){n[e]=p,n[a]=g;const v=i[c];if(v===-1){let b=this._hullStart;do{if(this._hullTri[b]===c){this._hullTri[b]=e;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(e,v),this._link(a,i[o]),this._link(o,c);const x=d+(a+1)%3;r<Jc.length&&(Jc[r++]=x)}else{if(r===0)break;e=Jc[--r]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,s,r,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,s),this._link(a+1,r),this._link(a+2,o),this.trianglesLen+=3,a}};function PU(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function W_(t,e,n,i){const s=t-n,r=e-i;return s*s+r*r}function kU(t,e,n,i,s,r,o,a){const l=t-o,d=e-a,h=n-o,c=i-a,g=s-o,m=r-a,_=h*h+c*c,p=g*g+m*m;return l*(c*p-_*m)-d*(h*p-_*g)+(l*l+d*d)*(h*m-c*g)<0}function IU(t,e,n,i,s,r){const o=n-t,a=i-e,l=s-t,d=r-e,h=o*o+a*a,c=l*l+d*d,g=.5/(o*d-a*l),m=(d*h-a*c)*g,_=(o*c-l*h)*g;return m*m+_*_}function MU(t,e,n,i,s,r){const o=n-t,a=i-e,l=s-t,d=r-e,h=o*o+a*a,c=l*l+d*d,g=.5/(o*d-a*l);return{x:t+(d*h-a*c)*g,y:e+(o*c-l*h)*g}}function Xl(t,e,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const r=t[s],o=e[r];let a=s-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let s=n+1,r=i;od(t,n+i>>1,s),e[t[n]]>e[t[i]]&&od(t,n,i),e[t[s]]>e[t[i]]&&od(t,s,i),e[t[n]]>e[t[s]]&&od(t,n,s);const o=t[s],a=e[o];for(;;){do s++;while(e[t[s]]<a);do r--;while(e[t[r]]>a);if(r<s)break;od(t,s,r)}t[n+1]=t[r],t[r]=o,i-s+1>=r-n?(Xl(t,e,s,i),Xl(t,e,n,r-1)):(Xl(t,e,n,r-1),Xl(t,e,s,i))}}function od(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function NU(t){return t[0]}function RU(t){return t[1]}function Lk(t,e=1,n=0,i,s){if(!i||!s){const c=t.map(m=>[m.x,m.y]),g=Tk.from(c,m=>m[0],m=>m[1]);i=Mh(g.triangles,c),s=Mh(g.hull,c)}if(!s)return[];const r=n*n,o=[],a={};for(let c=0;c<i.length;c+=3)if(FU(s,Rb(i[c],i[c+1],i[c+2]))){const g=DU(i[c],i[c+1],i[c+2]);g>r&&(o.push(c),a[c]=g)}if(o.length===0)return[];o.sort((c,g)=>a[c]-a[g]);let l=o[0],d=a[l];const h=[];for(let c=0;c<o.length;c++){const g=o[c],m=a[g];m>d&&m>r&&(l=g,d=m,h.push(l),h.length>e&&h.shift())}return h.map(c=>OU(i[c],i[c+1],i[c+2]))}function FU(t,e){const n=t.length,i=t[n-1],[s,r]=e;let[o,a]=i,l=!1;for(let d=0;d<n;d++){const h=t[d],[c,g]=h;g>r!=a>r&&s<(o-c)*(r-g)/(a-g)+c&&(l=!l),o=c,a=g}return l}function OU(t,e,n){const i=Rb(t,e,n);let s=0;for(let r=0;r<3;r++){const o=arguments[r],a=o[0]-i[0],l=o[1]-i[1],d=Math.sqrt(a*a+l*l);d>s&&(s=d)}return[i[0],i[1],s]}function DU(t,e,n){const[i,s]=Rb(t,e,n),[r,o]=t,a=i-r,l=s-o;return a*a+l*l}function Rb(t,e,n){const i=[(t[0]+e[0])/2,(t[1]+e[1])/2],s=[(e[0]+n[0])/2,(e[1]+n[1])/2],r=-1/((e[1]-t[1])/(e[0]-t[0])),o=-1/((n[1]-e[1])/(n[0]-e[0])),a=i[1]-r*i[0],l=(a-(s[1]-o*s[0]))/(o-r);return[l,r*l+a]}function Fb(t,e,n,i){let s;if(i)s=i;else{s=new Uint32Array(t.length);for(let E=0,S=t.length;E<S;E++)s[E]=E}let r=t[s[0]],o=r,a=e[s[0]],l=a;for(let E=1;E<s.length;E++){const S=s[E],A=t[S],T=e[S];A<r&&(r=A),A>o&&(o=A),T<a&&(a=T),T>l&&(l=T)}const d=(r+o)/2,h=(a+l)/2;for(let E=0;E<s.length;E++){const S=s[E];t[S]-=d,e[S]-=h}function c(E,S,A,T,P,k){const I=A-k+1e-9*Math.max(A,k,1),R=T-E,M=P-S;return I>0&&I*I>R*R+M*M}function g(E,S,A,T,P,k,I){for(let R=0;R<T.length;++R){const M=T[R];if(!c(E,S,A,P[M],k[M],I[M]))return!1}return!0}function m(E,S,A,T,P,k){const I=T-E,R=P-S,M=k-A,z=Math.sqrt(I*I+R*R);return[(E+T+I/z*M)/2,(S+P+R/z*M)/2,(z+A+k)/2]}function _(E,S,A,T,P,k,I,R,M){const z=(E+T+I)/3,j=(S+P+R)/3,X=E-z,O=S-j,N=T-z,W=P-j,U=I-z,K=R-j,Z=X-N,rt=X-U,vt=O-W,St=O-K,ut=k-A,_t=M-A,Rt=X*X+O*O-A*A,Gt=Rt-N*N-W*W+k*k,Yt=Rt-U*U-K*K+M*M,Et=rt*vt-Z*St,Tt=(vt*Yt-St*Gt)/(2*Et)-X,re=(St*ut-vt*_t)/Et,Xt=(rt*Gt-Z*Yt)/(2*Et)-O,se=(Z*_t-rt*ut)/Et,de=re*re+se*se-1,q=2*(A+Tt*re+Xt*se),ht=Tt*Tt+Xt*Xt-A*A,bt=-(Math.abs(de)>1e-6?(q+Math.sqrt(q*q-4*de*ht))/(2*de):ht/q);return[z+X+Tt+re*bt,j+O+Xt+se*bt,bt]}function p(E,S,A,T){switch(E.length){case 1:const P=E[0];return function(X,O,N){return[X,O,N]}(S[P],A[P],T[P]);case 2:const[k,I]=E;return m(S[k],A[k],T[k],S[I],A[I],T[I]);case 3:const[R,M,z]=E;return _(S[R],A[R],T[R],S[M],A[M],T[M],S[z],A[z],T[z]);default:return null}}function v(E,S,A,T,P,k){const I=A-k,R=T-E,M=P-S;return I<0||I*I<R*R+M*M}function x(E,S,A,T,P){const k=A[S],I=T[S],R=P[S];if(g(k,I,R,E,A,T,P))return[S];for(let M=0;M<E.length;++M){const z=E[M],j=A[z],X=T[z],O=P[z];if(v(k,I,R,j,X,O)){const[N,W,U]=m(j,X,O,k,I,R);if(g(N,W,U,E,A,T,P))return[E[M],S]}}for(let M=0;M<E.length-1;++M)for(let z=M+1;z<E.length;++z){const j=E[M],X=E[z],O=A[j],N=T[j],W=P[j],U=A[X],K=T[X],Z=P[X],rt=m(O,N,W,U,K,Z);if(v(rt[0],rt[1],rt[2],k,I,R)){const vt=m(O,N,W,k,I,R);if(v(vt[0],vt[1],vt[2],U,K,Z)){const St=m(U,K,Z,k,I,R);if(v(St[0],St[1],St[2],O,N,W)){const ut=_(O,N,W,U,K,Z,k,I,R);if(g(ut[0],ut[1],ut[2],E,A,T,P))return[j,X,S]}}}}throw new Error}s=function(S){for(let A=S.length-1;A>=0;A--){let T=Math.floor(Math.random()*(A+1));T=Math.max(Math.min(T,A),0);const P=S[A];S[A]=S[T],S[T]=P}return S}(s),n=n||new Array(t.length).fill(0);const b=function(S,A,T,P,k){let I=null,R=[],M=0;for(;M<A;){const z=S[M];I&&c(I[0],I[1],I[2],T[z],P[z],k[z])?M++:(R=x(R,z,T,P,k),I=p(R,T,P,k),M=0)}return I}(s,s.length,t,e,n);b[0]+=d,b[1]+=h;for(let E=0;E<s.length;E++){const S=s[E];t[S]+=d,e[S]+=h}return b}var Pk=[1/0,1/0,-1/0,-1/0];function om(t,e,n,i,s,r={x:0,y:0}){const o=Math.cos(s),a=Math.sin(s),l=t-n,d=e-i;return r.x=o*l-a*d+n,r.y=a*l+o*d+i,r}function zU(t,e,n=0,i={x:0,y:0}){return i.x=t.x+n*Math.sin(e),i.y=t.y+n*Math.cos(e),i}var wn=(t,e,n,i)=>Math.hypot(t-n,e-i);function gf(t,e,n,i){const s=t-n,r=e-i;return s*s+r*r}function kk(t){const e=Math.sqrt(t.x*t.x+t.y*t.y);return t.x/=e,t.y/=e,t}function Q0(t){return 180*t/Math.PI}function BU(t){return t*Math.PI/180}function Ik(t,e){return t.minX-=e,t.minY-=e,t.maxX+=e,t.maxY+=e,t.width===void 0&&(t.width=t.maxX-t.minX),t.height===void 0&&(t.height=t.maxY-t.minY),t.width+=2*e,t.height+=2*e,t}function Ob(t,e,n,i,s,r){const o=i-t,a=s-e,l=Math.sqrt(o*o+a*a);if(l>n+r||l<Math.abs(n-r))return null;const d=(n*n-r*r+l*l)/(2*l),h=t+o*d/l,c=e+a*d/l,g=Math.sqrt(n*n-d*d),m=g/l*-a,_=o*(g/l);return[[h+m,c+_],[h-m,c-_]]}function Db(t,e,n,i,s,r){if(t-s>=0&&n-s<0)return 1;if(t-s<0&&n-s>=0)return-1;if(t-s==0&&n-s==0)return e-i>=0||i-r>=0?e-i:i-e;const o=(t-s)*(i-r)-(n-s)*(e-r);return o<0?1:o>0?-1:(t-s)*(t-s)+(e-r)*(e-r)-((n-s)*(n-s)+(i-r)*(i-r))}function UU([t,e,n],i,s){const r=Math.abs(t-i),o=Math.abs(e-s);return r+o<=n||!(r>n||o>n)&&Math.sqrt(r*r+o*o)<n+1e-12}function $U(t,e,n,i){const s=t[0]-e,r=t[1]-n,o=t[2]-i;return s*s+r*r<o*o+1e-6}function zb(t,e,n,i,s,r,o){const a=t-Math.max(i,Math.min(r,t)),l=e-Math.max(s,Math.min(o,e));return a*a+l*l<n*n}function Mk(t,e,n,i,s,r,o,a={x:0,y:0}){const l=a||{x:0,y:0};let d,h,c,g;if(n===t){const x=t-s,b=o*o-x*x;if(b<0)return null;const E=Math.sqrt(b);d=t,c=t,h=r+E,g=r-E}else{const x=(i-e)/(n-t),b=e-x*t,E=b-r,S=x*x+1,A=2*(x*E-s),T=A*A-4*S*(s*s+E*E-o*o);if(T<0)return null;const P=-A,k=Math.sqrt(T),I=2*S;d=(P+k)/I,c=(P-k)/I,h=x*d+b,g=x*c+b}const m=t-d,_=e-h,p=t-c,v=e-g;return m*m+_*_<p*p+v*v?(l.x=d,l.y=h):(l.x=c,l.y=g),l}function tv({X:t,Y:e,sizes:n,indexes:i,R:s,center:r,gap:o=0,epsilon:a=.001,maxLoops:l=5,inPlace:d=!0}){const h=i.length,c=r[0],g=r[1];let m=h;d||(t=t.slice(),e=e.slice());const _=Ob,p=Db,v=i.slice().sort((R,M)=>p(t[R],e[R],t[M],e[M],c,g)),x=v[h-1],b=t[x],E=e[x];let S=!1;for(let R=0;R<m-1;R++){let M=R%h,z=(R+1)%h;R===-1&&(M=h-1,z=0),M=v[M],z=v[z];const j=t[M],X=e[M];let O=t[z],N=e[z];const W=n[M]+n[z]+o;let U=p(j,X,O,N,c,g);if(U===-1&&S&&(U=1),!(W>s)){if(U===1||W-wn(j,X,O,N)>a){const K=_(c,g,s,j,X,W);if(K){const Z=K[0];S=O>c&&Z[0]<c,O=t[z]=Z[0],N=e[z]=Z[1]}}else S=!1;if(R%h==h-2){const K=v[h-1],Z=v[0];if(e[K]>g&&e[Z]>g&&t[K]-n[K]<t[Z]+n[K]){let rt=0;for(m=Math.min(h*l,m+h);e[v[K]]>g&&e[v[0]]>g&&t[v[K]]<t[v[0]]&&++rt<h;){const vt=v.pop();vt&&v.unshift(vt)}}}}}const A=b-c,T=E-g,P=t[x]-c,k=e[x]-g,I=A===P?0:Math.abs(Math.acos((A*P+T*k)/(Math.sqrt(A*A+T*T)*Math.sqrt(P*P+k*k))));if(I!==0){const R=Math.sin(-I),M=Math.cos(-I);let z;for(let j=0;j<h;j++){z=v[j];const X=t[z]-c,O=e[z]-g;t[z]=X*M-O*R+c,e[z]=X*R+O*M+g}}return{X:t,Y:e}}function Tw(t,e,n,i,s,r){const o={},a=n[t];let l=a,d=0;const h=a*s;for(const c in e){const g=e[c];let m=0,_=0;for(let b=0,E=g.length;b<E;b++){const S=n[g[b]];_=Math.max(_,S),m+=2*S+i}const p=m/(2*Math.PI),v=_+l,x=r?d+Math.max(r,v):d*s;d=Math.max(v,d,p,h,x),o[c]=d,l=_}return o[0]=0,o[Number.POSITIVE_INFINITY]=d,o}function jU(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Cw(t){const e=t.length,n=[0,1];let i=2;for(let s=2;s<e;s++){for(;i>1&&jU(t[n[i-2]],t[n[i-1]],t[s])<=0;)--i;n[i++]=s}return n.slice(0,i)}function GU(t){const e=t.length;if(e<3)return null;const n=new Array(e),i=new Array(e);for(let c=0;c<e;c++)n[c]=[+t[c][0],+t[c][1],c];n.sort((c,g)=>c[0]-g[0]||c[1]-g[1]);for(let c=0;c<e;c++)i[c]=[n[c][0],-n[c][1]];const s=Cw(n),r=Cw(i),o=r[r.length-1],a=s[s.length-1],l=r[0]===s[0],d=o===a?1:0,h=[];for(let c=s.length-1;c>=0;--c)h.push(t[n[s[c]][2]]);for(let c=+l;c<r.length-d;c++)h.push(t[n[r[c]][2]]);return h}var Lw=t=>--t*t*t+1,Pw=(t,e,n)=>{const i=t-n[0],s=e-n[1];return i*i+s*s},VU=(t,e)=>{let n=1/0,i=-1/0;for(let s=0;s<t.length;s++){const r=t[s],o=e?e[r]:r;n=Math.min(o,n),i=Math.max(o,i)}return{min:n,max:i}};function HU({X:t,Y:e,R:n,center:i,maxSteps:s=1e3,padding:r=5,epsilon:o=1e-9,damping:a=2,pinned:l=-1,indexes:d,onUpdate:h,pushSmallerOut:c=!0}){const g=d?d.length:t.length;let m=d;if(m===void 0){m=new Uint32Array(g);for(let S=0;S<g;S++)m[S]=S}else m=d;if(l!==-1)i=[t[l],e[l]];else if(!i){let S=0,A=0;for(let T=0;T<g;T++)S+=t[m[T]],A+=e[m[T]];i=[S/g,A/g]}const{min:_,max:p}=VU(m,n);function v(S,A){let T=0;for(let R=0;R<g-1;R++)for(let M=R+1;M<g;M++){if(R===M)continue;const z=m[R],j=m[M],X=t[z],O=e[z],N=n[z],W=t[j],U=e[j],K=n[j],Z=W-X,rt=U-O,vt=N+K+r,St=Z*Z+rt*rt;if(St<vt*vt-S){const ut=(vt-Math.sqrt(St))*A,_t=1/St,Rt=Z*_t*ut,Gt=rt*_t*ut,Yt=Rt*Rt+Gt*Gt;if(j!==l){const Et=N/_;T+=Yt*Et,t[j]+=Rt*Et,e[j]+=Gt*Et}if(z!==l){const Et=K/_;T+=Yt*Et,t[z]-=Rt*Et,e[z]-=Gt*Et}}}const P=S*a*(1-A),k=i[0],I=i[1];for(let R=0;R<g;R++){const M=m[R];if(M!==l){const z=t[M],j=e[M],X=n[M],O=c?P*(X/p):P,N=(z-k)*O,W=(j-I)*O;T+=N*N+W*W,t[M]-=N,e[M]-=W}}return T}m.sort((S,A)=>n[A]*Pw(t[A],e[A],i)-n[S]*Pw(t[S],e[S],i));let x=0,b=0;const E=Lw(1/g);for(let S=0;S<s&&(x=v(E,Lw((S+1)/s)),h&&setTimeout(()=>h(t,e)),!(Math.abs(x-b)<o));S++)b=x;return{X:t,Y:e}}var Kc=t=>({data:t,next:null,prev:null});function Nk(t,e=0,n=0){const i=t.length;if(i===0)return t;const s=t[0];if(s.x=e,s.y=n,i===1)return t;const r=t[1];if(s.x=e-r.radius,r.x=e+s.radius,r.y=n,i===2)return t;const o=t[2];kw(r,s,o);let a=Kc(s),l=Kc(r),d=Kc(o);a.next=d.prev=l,l.next=a.prev=d,d.next=l.prev=a;t:for(let h=3;h<i;h++){d=Kc(t[h]),kw(a.data,l.data,t[h]);let c=l.next,g=a.prev,m=l.data.radius,_=a.data.radius;do if(m<=_){if(Iw(c.data,d.data)){l=c,a.next=l,l.prev=a,--h;continue t}m+=c.data.radius,c=c.next}else{if(Iw(g.data,d.data)){a=g,a.next=l,l.prev=a,--h;continue t}_+=g.data.radius,g=g.prev}while(c!==g.next);d.prev=a,d.next=l,a.next=l.prev=l=d;let p=Mw(a);for(;(d=d.next)!==l;){const v=Mw(d);v<p&&(a=d,p=v)}l=a.next}return t}function kw(t,e,n){const i=t.x-e.x;let s,r;const o=t.y-e.y,a=i*i+o*o;let l,d;a?(r=e.radius+n.radius,r*=r,d=t.radius+n.radius,d*=d,r>d?(s=(a+d-r)/(2*a),l=Math.sqrt(Math.max(0,d/a-s*s)),n.x=t.x-s*i-l*o,n.y=t.y-s*o+l*i):(s=(a+r-d)/(2*a),l=Math.sqrt(Math.max(0,r/a-s*s)),n.x=e.x+s*i-l*o,n.y=e.y+s*o+l*i)):(n.x=e.x+n.radius,n.y=e.y)}var WU=1e-6;function Iw(t,e){const n=t.radius+e.radius-WU,i=e.x-t.x,s=e.y-t.y;return n>0&&n*n>i*i+s*s}function Mw(t){const e=t.data,n=t.next.data,i=e.radius+n.radius,s=(e.x*n.radius+n.x*e.radius)/i,r=(e.y*n.radius+n.y*e.radius)/i;return s*s+r*r}var XU=16,ZU=class{constructor(t=Int32Array,e=XU,n=8){this._BIG_LIST=new Uint8Array([-1])[0],this._ArrayType=t,this._capacity=e,this._MAX_LIST_SIZE=n,this._freeIndex=-1,this.clear()}clear(){this._buffer=new this._ArrayType(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._idToIndex={},this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(t){let e;return this._freeIndex===-1?e=this._nextIndex++:(e=this._freeIndex,this._freeIndex=-1),this._idToIndex[t]=e,e>=this._capacity&&this._expand(e+1),this._sizes[e]=0,e}getItems(t){const e=this._idToIndex[t];if(e===void 0)return;const n=this._sizes[e],i=this._MAX_LIST_SIZE*e;if(n<=this._MAX_LIST_SIZE){this._constList.length=n;for(let s=0,r=n;s<r;++s)this._constList[s]=this._buffer[i+s];return this._constList}if(n===this._BIG_LIST){let s=this._buffer[i];return this._bigLists[s]}}removeEntry(t){const e=this._idToIndex[t];if(this._sizes[e]===this._BIG_LIST){const n=this._MAX_LIST_SIZE*e,i=this._buffer[n];this._bigLists[i].length=0}this._sizes[e]=0,this._freeIndex=e}size(t){const e=this._idToIndex[t];let n=this._sizes[e];return n<=this._MAX_LIST_SIZE?n:this._bigLists[this._buffer[e*this._MAX_LIST_SIZE]].length}sizes(t){const e=this._sizes,n=this._bigLists,i=this._buffer,s=this._MAX_LIST_SIZE,r=t.length,o=new Array(r);for(let a=0;a<r;a++){const l=this._idToIndex[t[a]],d=e[l];o[a]=d<=s?d:n[i[l*s]].length}return o}addTo(t,e){const n=this._idToIndex[t],i=this._sizes[n],s=n*this._MAX_LIST_SIZE;if(i<this._MAX_LIST_SIZE)this._buffer[s+i]=e,this._sizes[n]=i+1;else if(i===this._BIG_LIST){let r=this._buffer[s];this._bigLists[r].push(e)}else{let r=new Array(this._MAX_LIST_SIZE);for(let o=0;o<this._MAX_LIST_SIZE;++o)r[o]=this._buffer[s+o];r.push(e),this._bigLists.push(r),this._sizes[n]=this._BIG_LIST,this._buffer[s]=this._bigLists.length-1}}removeFrom(t,e){this.removeFromAndGetSize(t,e)}removeFromAndGetSize(t,e){const n=this._idToIndex[t];let i=this._sizes[n],s=this._MAX_LIST_SIZE*n;if(i<=this._MAX_LIST_SIZE){for(let r=s,o=s+i;r<o;++r)if(this._buffer[r]===e)return i-=1,this._buffer[r]=this._buffer[o-1],this._sizes[n]=i,i}else if(i===this._BIG_LIST){let r=this._buffer[s],o=this._bigLists[r],a=o.indexOf(e);if(a!==-1)return o.splice(a,1),o.length}}reserve(t){this._capacity<t&&this._expand(t)}_expand(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=Nw(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=Nw(this._sizes,this._capacity)}has(t){const e=this._idToIndex[t];return!(e===void 0||e>=this._capacity)&&this._sizes[e]!==0}get averageSize(){let t=0;for(let e=0;e<this._capacity;e++)t+=this._sizes[e];return t/this._capacity}};function Nw(t,e){let n=new t.constructor(e);return n.set(t),n}var ad,Rw,ld,bl,ud,wa=[0,1],ff=[0,2];for(ld=4;ld<65535;ld<<=2)for(ad=0,Rw=wa.length;ad<Rw;ad++)wa.push(wa[ad]|ld),ff.push((wa[ad]|ld)<<1);function Os(t,e){return(ff[255&e]|wa[255&t])+65536*(ff[e>>8&255]|wa[t>>8&255])+4294967296*(ff[e>>16&255]|wa[t>>16&255])}function Fw(t,e=[0,0]){if(t>0xffffffffffff)throw"Only morton codes up to 48 bits are supported.";if(!bl){bl={},ud={};for(var n=0;n<256;n++)bl[Os(n,0)]=n,ud[Os(0,n)]=n}var i=bl[21845&t],s=ud[43690&t];return t>65535&&(i|=bl[21845&(t/=65536)]<<8,s|=ud[43690&t]<<8,t>65535&&(i|=bl[21845&(t/=65536)]<<16,s|=ud[43690&t]<<16)),e[0]=i,e[1]=s,e}Os.code=function(e,n,i){if(e>24)throw"Morton codes are only supported up to Z=24";var s=1<<24-e;return Os(n*s,i*s)},Os.range=function(e,n,i){if(e>24)throw"Morton ranges are only supported up to Z=24";var s=1<<24-e,r=Os(n*s,i*s);return[r,r+s*s-1]},Os.reverse=Fw,Os.decode=function(e,n){var i=Fw(n),s=1<<24-e;return[i[0]/s,i[1]/s]},Os.min=function(e,n){var i=1431655765&e,s=1431655765&n,r=2863311530&e,o=2863311530&n;return Math.min(i,s)+Math.min(r,o)};var YU=1e-6,qU=1e-12;function Rk(){for(var t=arguments,e=t.length-1,n=e,i=[],s=0;s<=e&&Math.abs(t[s])<=qU;s++)e--;switch(e){case 1:JU(t[n],t[n-1],i);break;case 2:KU(t[n],t[n-1],t[n-2],i);break;case 3:QU(t[n],t[n-1],t[n-2],t[n-3],i)}return i}function JU(t,e,n=[]){return e!==0&&n.push(-t/e),n}function KU(t,e,n,i=[]){var s=e/n,r=s*s-4*(t/n);if(r>0){var o=Math.sqrt(r);i.push(.5*(-s+o)),i.push(.5*(-s-o))}else r===0&&i.push(.5*-s);return i}function QU(t,e,n,i,s=[]){var r,o,a=n/i,l=e/i,d=(3*l-a*a)/3,h=(2*a*a*a-9*l*a+27*(t/i))/27,c=a/3,g=h*h/4+d*d*d/27,m=h/2;if(Math.abs(g)<=YU&&(g=0),g>0){var _=Math.sqrt(g);o=(r=-m+_)>=0?Math.pow(r,1/3):-Math.pow(-r,1/3),(r=-m-_)>=0?o+=Math.pow(r,1/3):o-=Math.pow(-r,1/3),s.push(o-c)}else if(g<0){var p=Math.sqrt(-d/3),v=Math.atan2(Math.sqrt(-g),-m)/3,x=Math.cos(v),b=Math.sin(v),E=Math.sqrt(3);s.push(2*p*x-c),s.push(-p*(x+E*b)-c),s.push(-p*(x-E*b)-c)}else r=m>=0?-Math.pow(m,1/3):Math.pow(-m,1/3),s.push(2*r-c),s.push(-r-c);return s}function fo(t,e,n,i,s,r,o,a,l,d,h){for(var c,g,m=Math.min(o,l),_=Math.min(a,d),p=Math.max(o,l),v=Math.max(a,d),x=Rk((c=a-d)*(t+-2*n+s)+(g=l-o)*(e+-2*i+r),c*(-2*t+2*n)+g*(-2*e+2*i),c*t+g*e+(o*d-l*a)),b=0;b<x.length;b++){var E=x[b];if(0<=E&&E<=1){var S=t+(n-t)*E,A=e+(i-e)*E,T=S+(n+(s-n)*E-S)*E,P=A+(i+(r-i)*E-A)*E;if(o===l){if(_<=P&&P<=v){if(!h)return 1;h.push(T,P)}}else if(a===d){if(m<=T&&T<=p){if(!h)return 1;h.push(T,P)}}else if(T>=m&&P>=_&&T<=p&&P<=v){if(!h)return 1;h.push(T,P)}}}return h?h.length/2:0}function Fk(t,e,n,i,s,r,o,a,l,d,h){return h?(fo(t,e,n,i,s,r,o,a,l,a,h),fo(t,e,n,i,s,r,l,a,l,d,h),fo(t,e,n,i,s,r,o,d,l,d,h),fo(t,e,n,i,s,r,o,a,o,d,h),h.length/2):o<=t&&l>=t&&a<=e&&d>=e||o<=s&&l>=s&&a<=r&&d>=r||fo(t,e,n,i,s,r,o,a,l,a)||fo(t,e,n,i,s,r,l,a,l,d)||fo(t,e,n,i,s,r,o,d,l,d)||fo(t,e,n,i,s,r,o,a,o,d)?1:0}function mo(t,e,n,i,s,r,o,a,l,d,h,c,g){for(var m,_,p=Math.min(l,h),v=Math.min(d,c),x=Math.max(l,h),b=Math.max(d,c),E=Rk((m=d-c)*(-1*t+3*n+-3*s+o)+(_=h-l)*(-1*e+3*i+-3*r+a),m*(3*t+-6*n+3*s)+_*(3*e+-6*i+3*r),m*(-3*t+3*n)+_*(-3*e+3*i),m*t+_*e+(l*c-h*d)),S=0;S<E.length;S++){var A=E[S];if(0<=A&&A<=1){var T=t+(n-t)*A,P=e+(i-e)*A,k=n+(s-n)*A,I=i+(r-i)*A,R=T+(k-T)*A,M=P+(I-P)*A,z=R+(k+(s+(o-s)*A-k)*A-R)*A,j=M+(I+(r+(a-r)*A-I)*A-M)*A;if(l===h){if(v<=j&&j<=b){if(!g)return 1;g.push(z,j)}}else if(d===c){if(p<=z&&z<=x){if(!g)return 1;g.push(z,j)}}else if(z>=p&&j>=v&&z<=x&&j<=b){if(!g)return 1;g.push(z,j)}}}return g?g.length/2:0}function Ok(t,e,n,i,s,r,o,a,l,d,h,c,g){return g?(mo(t,e,n,i,s,r,o,a,l,d,h,d,g),mo(t,e,n,i,s,r,o,a,h,d,h,c,g),mo(t,e,n,i,s,r,o,a,l,c,h,c,g),mo(t,e,n,i,s,r,o,a,l,d,l,c,g),g.length/2):l<=t&&h>=t&&d<=e&&c>=e||l<=o&&h>=o&&d<=a&&c>=a||mo(t,e,n,i,s,r,o,a,l,d,h,d)||mo(t,e,n,i,s,r,o,a,h,d,h,c)||mo(t,e,n,i,s,r,o,a,l,c,h,c)||mo(t,e,n,i,s,r,o,a,l,d,l,c)?1:0}var Ow=typeof Map>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(e){return!!this._values[e]}set(e,n){e in this._values||this._size++,this._values[e]=n}get(e){return this._values[e]}delete(e){e in this._values&&(delete this._values[e],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Map,t$=typeof Set>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(e){return!!this._values[e]}add(e){e in this._values||this._size++,this._values[e]=!0}delete(e){e in this._values&&(delete this._values[e],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Set,Dk=class{constructor(){this._intersects=null,this._getBounds=null}setBoundsGetter(t){return this._getBounds=t,this}setIntersector(t){return this._intersects=t,this}},e$=65536,n$=16,i$=16,s$=class extends Dk{constructor(t,e,n=i$,i=e$,s=Int32Array,r=n$){super(),this._occupied=0,this._idToCode=new Ow,this._codeCache=[0,0,0],this.code=(o,a,l)=>l|Os(o,a)<<this._bitsForZoom,this.decode=(o,a)=>(Os.reverse(o>>this._bitsForZoom,a),a[2]=o&this._zoomMask,a),this._intersects=t,this._getBounds=e,this._cells=new ZU(s),this._offset=i,this._maxLevels=r,this._mortonMax=(1<<this._maxLevels)-1,this._bitsForZoom=Math.log2(this._maxLevels),this._zoomMask=(1<<this._bitsForZoom)-1,this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._min=-i,this._max=i,this._resolution=this._mortonMax/(this._max-this._min),this._minCellSize=n*this._resolution,this._bounds=new Array(4*this._maxLevels);for(let o=0;o<this._maxLevels;o++)this._bounds[4*o]=1/0,this._bounds[4*o+1]=1/0,this._bounds[4*o+2]=-1/0,this._bounds[4*o+3]=-1/0}setMinCellSize(t){return this._minCellSize=t,this}setOffset(t){return this._offset=t,this._min=-t,this._max=t,this._resolution=this._mortonMax/(this._max-this._min),this}insert(t,e,n,i,s){e===void 0&&([e,n,i,s]=this._getBounds(t));const r=Math.max(i-e,s-n);let o,a=this._minCellSize;for(o=0;a<r&&o<this._maxLevels-1;o++)a*=2;const l=this._resolution,d=this._min,h=l*(.5*(i+e)-d)/a|0,c=l*(.5*(s+n)-d)/a|0,g=this.code(h,c,o);this._cells.has(g)||this._cells.addEntry(g),this._cells.addTo(g,t),this._objectsAtLevel[o]++,this._occupied|=1<<o;const m=4*o,_=this._bounds;return h<_[m]&&(_[m]=h),c<_[m+1]&&(_[m+1]=c),h>_[m+2]&&(_[m+2]=h),c>_[m+3]&&(_[m+3]=c),this._idToCode.set(t,g),g}has(t){return this._idToCode.has(t)}update(t,e,n,i,s){return this.remove(t),this.insert(t,e,n,i,s)}remove(t){const e=this._idToCode.get(t);this.decode(e,this._codeCache);const n=this._codeCache[2];return--this._objectsAtLevel[n]==0&&(this._occupied&=~(1<<n),this._bounds[4*n]=1/0,this._bounds[4*n+1]=1/0,this._bounds[4*n+2]=-1/0,this._bounds[4*n+3]=-1/0),this._cells.removeFrom(e,t),this._idToCode.delete(t),this}query(t,e,n,i){const s=this._cells,r=this._bounds,o=this._intersects,a=this._min,l=this._resolution;let d=this._minCellSize,h=this._occupied;const c=[];for(let g=0;g<this._maxLevels&&h!==0;d*=2,h>>=1,g++){if(!(1&h))continue;const m=1/d,_=4*g,p=Math.max(r[_],l*(t-a)*m-1|0),v=Math.max(r[_+1],l*(e-a)*m-1|0),x=Math.min(r[_+2],l*(n-a)*m+1|0),b=Math.min(r[_+3],l*(i-a)*m+1|0);for(let E=p;E<=x;E++)for(let S=v;S<=b;S++){const A=this.code(E,S,g),T=s.getItems(A);if(T!==void 0)for(let P=0;P<T.length;P++){const k=T[P];o(k,t,e,n,i)&&c.push(k)}}}return c}traverse(t,e,n,i,s){const r=this._cells,o=this._bounds,a=this._intersects,l=this._min,d=this._resolution;let h=this._minCellSize,c=this._occupied;const g=[];for(let m=0;m<this._maxLevels&&c!==0;h*=2,c>>=1,m++){if(!(1&c))continue;const _=1/h,p=4*m,v=Math.max(o[p],d*(t-l)*_-1|0),x=Math.max(o[p+1],d*(e-l)*_-1|0),b=Math.min(o[p+2],d*(n-l)*_+1|0),E=Math.min(o[p+3],d*(i-l)*_+1|0);for(let S=v;S<=b;S++)for(let A=x;A<=E;A++){const T=this.code(S,A,m),P=r.getItems(T);if(P!==void 0)for(let k=0;k<P.length;k++){const I=P[k];if(a(I,t,e,n,i)&&(g.push(I),s(I)))return g}}}return g}collisions(t,e=this._getBounds){if(typeof e!="function")throw new Error("getBounds function is required to get the object bounds");const n=Array.from(this._idToCode.keys()),i=this._min,s=this._resolution,r=this._cells,o=new Ow,a=[];for(let l=0;l<n.length;l++){let d=0,h=this._minCellSize,c=this._occupied;const g=n[l];let[m,_,p,v]=e(g);const x=Math.max(p-m,v-_);for(d=0;h<x;d++)h*=2,c>>=1;m=s*(m-i),_=s*(_-i),p=s*(p-i),v=s*(v-i);for(let b=d;b<this._maxLevels&&c!==0;h*=2,c>>=1,b++){if(!(1&c))continue;const E=1/h,S=_*E-1|0,A=p*E+1|0,T=v*E+1|0;for(let P=m*E-1|0;P<=A;P++)for(let k=S;k<=T;k++){const I=this.code(P,k,b);if(o.get(I)===l)continue;o.set(I,l);const R=r.getItems(I);if(R!==void 0)for(let M=0;M<R.length;M++){const z=R[M],[j,X,O,N]=this._getBounds(z);z!==g&&t(g,j,X,O,N)&&a.push(g,z)}}}}return r$(a)}clear(){this._occupied=0,this._cells.clear(),this._idToCode.clear(),this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._bounds=new Array(4*this._maxLevels);for(let t=0;t<this._maxLevels;t++)this._bounds[4*t]=1/0,this._bounds[4*t+1]=1/0,this._bounds[4*t+2]=-1/0,this._bounds[4*t+3]=-1/0;return this}keyToBBox(t){const[e,n,i]=this.decode(t,[0,0,0]),s=this._minCellSize*(1<<i),r=this._min,o=this._resolution;return[e*s/o+r,n*s/o+r,(e+1)*s/o+r,(n+1)*s/o+r]}keys(){return Object.keys(this._cells._idToIndex)}get averageCellOccupancy(){return this._cells.averageSize}get size(){return this._idToCode.size}getBoxes(){return Array.from(this._idToCode.keys()).map(t=>this._getBounds(t))}};function r$(t){const e=new t$,n=[];for(let i=0;i<t.length;i+=2){const s=t[i],r=t[i+1],o=s<r?s*r+(r-s-1)*(r-s-1)/4:s*r+(s-r-1)*(s-r-1)/4;e.has(o)||(e.add(o),n.push(s,r))}return n}function o$(t,e,n,i,s,r,o,a){return t>s&&t<o&&e>r&&e<a||n>s&&n<o&&i>r&&i<a}function Ir(t,e,n,i,s,r,o,a){return i>=r&&e<=a&&n>=s&&t<=o}var Cr=(t,e,n,i,s,r)=>({minX:t,minY:e,maxX:n,maxY:i,leaf:!0,level:r,parent:s,objects:[],final:!1,children:null});function zk(t){const{minX:e,minY:n,maxX:i,maxY:s}=t;return[e,n,i,s]}function Ld(t,e,n,i,s,r,o,a){return t>=s&&n<=o&&e>=r&&i<=a}var a$=0,l$=1,u$=2,d$=3;function Qc(t,e,n,i,s,r,o,a){const l=(r+a)/2,d=(e+i)/2;return(t+n)/2<=(s+o)/2?d<=l?a$:l$:d<=l?d$:u$}var h$=t=>t,Il=class extends Dk{constructor(t=h$,e=10,n,i=0){super(),this._nodeCapacity=10,this._root=null,this._objects={},this._size=0,this._rootLevel=0,this._maxLevel=30,this._idToCell={},this._nodeCapacity=e,this._root=null,this._getBounds=t,this._rootLevel=i,this._maxLevel=i+30,this._idToCell={},n&&(this._root=Cr(n[0],n[1],n[2],n[3],null,i))}get size(){return this._size}get root(){return this._root}clear(){return this._root=null,this._objects={},this._size=0,this._idToCell={},this._rootLevel=0,this._maxLevel=this._rootLevel+30,this}insert(t,e,n,i,s,r=this._root){if(e||([e,n,i,s]=this._getBounds(t)),this._objects[t])return;if(this._objects[t]=!0,this._size++,!this._root){const m=Math.max(Math.abs(i-e),Math.abs(s-n));return this._root=Cr(e,n,e+m,n+m,null,this._rootLevel),this._idToCell[t]=[this._root],this._root.objects=[t],t}let o,a=[r],l=!1;const d=this._nodeCapacity,h=this._idToCell,c=this._maxLevel;let g;for(;g=a.pop();){o=g;const{minX:m,minY:_,maxX:p,maxY:v}=o;Ir(e,n,i,s,m,_,p,v)&&(o.leaf?o.objects&&(o.objects.length<d||o.final)?(o.objects.push(t),h[t]?h[t].push(o):h[t]=[o],l=!0,(o.level>=c||Math.abs(p-m)<=Math.abs(i-e)||Math.abs(v-_)<=Math.abs(s-n))&&(o.final=!0)):(this.splitNode(o),a.push(o)):a.push.apply(a,o.children))}if(!Ld(e,n,i,s,(r=this._root).minX,r.minY,r.maxX,r.maxY)){let m=this._rootLevel;for(;!Ld(e,n,i,s,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){r=this._root;const{minX:_,minY:p,maxX:v,maxY:x}=r;let b=_,E=p,S=v,A=x;const T=Math.abs(v-_),P=Math.abs(x-p);if(P===0&&T===0)break;const k=Math.max(T,P);e<_?(b-=k,n<p?E-=k:A+=k):(S+=k,n<p?E-=k:A+=k);const I=Cr(b,E,S,A,null,--m);this.splitNode(I),I.children[Qc(_,p,v,x,b,E,S,A)]=r,this._root=r.parent=I}for(a=[this._root],this._root.level=this._rootLevel;g=a.shift();)if(o=g,!o.leaf)for(let _=0;_<4;_++){const p=o.children[_];p.level=o.level+1,a.push(p)}r=this._root;for(let _=0;_<4;_++){const p=r.children[_];p&&p.leaf&&p.objects&&(p.objects.push(t),h[t]?h[t].push(p):h[t]=[p])}}return l?t:void 0}removeById(t){if(!this._objects[t])return t;this._size--;const e=this._idToCell[t];for(let n=0;n<e.length;n++){const i=e[n].objects||[];for(let s=0,r=i.length;s<r;s++)if(i[s]===t){i.splice(s,1);break}}return delete this._objects[t],delete this._idToCell[t],t}remove(t){const[e,n,i,s]=this._getBounds(t),r=[this._root];let o,a;const l=[];for(;o=r.pop();)if(Ir(e,n,i,s,o.minX,o.minY,o.maxX,o.maxY))if(o.leaf){const d=o.objects||[];for(let h=0,c=d.length;h<c;h++)if(d[h]===t){d.splice(h,1),c===1&&l.push(o);break}}else r.push.apply(r,o.children);if(delete this._idToCell[t],delete this._objects[t],this._size--,l.length)for(;a=l.pop();){let d=a.parent,h=!0;for(;d&&h;){if(!d.leaf){for(let c=0;c<4;c++)if(o=d.children[c],!o.leaf||o.objects&&o.objects.length!==0){h=!1;break}h&&(d.leaf=!0,d.children=[],d.objects=[])}d=d.parent}}return t}splitNode(t){const{minX:e,minY:n,maxX:i,maxY:s}=t,r=(e+i)/2,o=(n+s)/2,a=t.level+1,l=this._idToCell,d=this._maxLevel,h=[Cr(e,n,r,o,t,a),Cr(e,o,r,s,t,a),Cr(r,o,i,s,t,a),Cr(r,n,i,o,t,a)];if(t.objects!==null){const c=t.objects,g=this._getBounds;for(let m=0,_=c.length;m<_;m++){const p=c[m],v=g(p);let x=l[p];for(let b=0;b<4;b++){const E=h[b],{minX:S,minY:A,maxX:T,maxY:P}=E;Ir(v[0],v[1],v[2],v[3],S,A,T,P)&&(E.objects&&E.objects.push(p),(E.level>=d||Math.abs(T-S)<=Math.abs(v[2]-v[0])||Math.abs(P-A)<=Math.abs(v[3]-v[1]))&&(E.final=!0),x?x.push(E):x=[E])}x&&x.splice(x.indexOf(t),1)}}t.children=h,t.objects=null,t.leaf=!1}point(t,e,n){let i=[];const s=[this._root];let r,o,a;const l=this._getBounds;for(;r=s.pop();)if(t>=r.minX&&t<=r.maxX&&e>=r.minY&&e<=r.maxY){if(r.leaf){n&&r.objects&&(i=r.objects);const d=r.objects||[];for(let h=0,c=d.length;h<c;h++)a=d[h],o=l(a),t>=o[0]&&t<=o[2]&&e>=o[1]&&e<=o[3]&&i.push(a);break}s.push.apply(s,r.children)}return i.length?i:null}neigbours(t,e){let n,i=[];const s=[this._root];for(;n=s.pop();)if(t>=n.minX&&t<=n.maxX&&e>=n.minY&&e<=n.maxY){if(n.leaf){i=n.objects;break}s.push.apply(s,n.children)}return i}query(t,e,n,i){const s=[],r=[this._root];let o,a,l;const d=this._getBounds,h={},c=this._intersects;let g;for(;o=r.pop();)if(Ir(t,e,n,i,o.minX,o.minY,o.maxX,o.maxY))if(o.leaf){const m=o.objects||[];for(let _=0,p=m.length;_<p;_++)l=m[_],h[l]||(a=d(l),Ir(t,e,n,i,a[0],a[1],a[2],a[3])&&(c&&!c(l,t,e,n,i)||s.push(l)),h[l]=!0)}else g=Qc(t,e,n,i,o.minX,o.minY,o.maxX,o.maxY),r.push(o.children[(g+3)%4],o.children[(g+2)%4],o.children[(g+1)%4],o.children[g]);return s}traverse(t,e,n,i,s){const r=[],o=[this._root];let a,l,d;const h=this._getBounds,c={},g=this._intersects;let m;for(;a=o.pop();)if(Ir(t,e,n,i,a.minX,a.minY,a.maxX,a.maxY))if(a.leaf){const _=a.objects||[];for(let p=0,v=_.length;p<v;p++)if(d=_[p],!c[d]){if(l=h(d),Ir(t,e,n,i,l[0],l[1],l[2],l[3])&&(!g||g(d,t,e,n,i))&&(r.push(d),s(d)))return r;c[d]=!0}}else m=Qc(t,e,n,i,a.minX,a.minY,a.maxX,a.maxY),o.push(a.children[(m+3)%4],a.children[(m+2)%4],a.children[(m+1)%4],a.children[m]);return r}getOverlaps(){const t=[this._root];let e,n,i;const s=[],r=this._getBounds,o={};for(;e=t.pop();)if(e.leaf){const a=e.objects||[],l=a.length;for(let d=0;d<l;d++)for(let h=0;h<l;h++)if(n=a[d],i=a[h],d!==h&&!o[n+":"+i]&&!o[i+":"+n]){o[n+":"+i]=!0;const c=r(n),g=r(i);Ir(c[0],c[1],c[2],c[3],g[0],g[1],g[2],g[3])&&s.push(n,i)}}else t.push.apply(t,e.children);return s}cover(t,e,n,i){if(this._root===null)return this._root=Cr(t,e,n,i,null,0),this;let s=this._root;if(!Ld(t,e,n,i,s.minX,s.minY,s.maxX,s.maxY)){let r=this._rootLevel;for(;!Ld(t,e,n,i,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){s=this._root;const{minX:d,minY:h,maxX:c,maxY:g}=s;let m=d,_=h,p=c,v=g;const x=Math.abs(c-d),b=Math.abs(g-h);if(b===0&&x===0)break;const E=Math.max(x,b);t<d?(m-=E,e<h?_-=E:v+=E):(p+=E,e<h?_-=E:v+=E);const S=Cr(m,_,p,v,null,--r);this.splitNode(S),S.children[Qc(d,h,c,g,m,_,p,v)]=s,this._root=s.parent=S}const o=[this._root];let a,l;for(this._root.level=this._rootLevel;a=o.shift();)if(l=a,!l.leaf)for(let d=0;d<4;d++){const h=l.children[d];h.level=l.level+1,o.push(h)}}return this}getAll(){return Object.keys(this._objects).map(t=>Number(t))}forEach(t,e){const n=[this._root];let i;for(;i=n.pop();)if(i.leaf&&i.objects)for(let s=0,r=i.objects.length;s<r;s++)t.call(e,i.objects[s]);else n.push.apply(n,i.children);return this}getLeafs(){const t=[this._root],e=[];let n;for(;n=t.pop();)n.leaf?e.push(n):t.push.apply(t,n.children);return e}traverseFromRoot(t,e){const n=[this._root];let i;for(;i=n.pop();)t.call(e,i,i.objects)||i.leaf||n.push.apply(n,i.children);return this}update(t,e,n,i,s){return this.remove(t),this.insert(t,e,n,i,s),this}getNodeBounds(t){return zk(t)}};Il.flatAccessor=(t,e)=>n=>{const i=e*n;return t.slice(i,i+e)},Il.inside=Ld,Il.intersects=o$,Il.overlaps=Ir,Il.getNodeBBox=zk;var Bk=Il;function c$(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Uk(this.cover(e,n),e,n,t)}function Uk(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,r,o,a,l,d,h,c,g,m=t._root,_={data:i},p=t._x0,v=t._y0,x=t._x1,b=t._y1;if(!m)return t._root=_,t;for(;m.length;)if((d=e>=(r=(p+x)/2))?p=r:x=r,(h=n>=(o=(v+b)/2))?v=o:b=o,s=m,!(m=m[c=h<<1|d]))return s[c]=_,t;if(a=+t._x.call(null,m.data),l=+t._y.call(null,m.data),e===a&&n===l)return _.next=m,s?s[c]=_:t._root=_,t;do s=s?s[c]=new Array(4):t._root=new Array(4),(d=e>=(r=(p+x)/2))?p=r:x=r,(h=n>=(o=(v+b)/2))?v=o:b=o;while((c=h<<1|d)==(g=(l>=o)<<1|a>=r));return s[g]=m,s[c]=_,t}function g$(t){var e,n,i,s,r=t.length,o=new Array(r),a=new Array(r),l=1/0,d=1/0,h=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>h&&(h=i),s<d&&(d=s),s>c&&(c=s));if(l>h||d>c)return this;for(this.cover(l,d).cover(h,c),n=0;n<r;++n)Uk(this,o[n],a[n],t[n]);return this}function f$(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,r=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var o,a,l=s-n||1,d=this._root;n>t||t>=s||i>e||e>=r;)switch(a=(e<i)<<1|t<n,(o=new Array(4))[a]=d,d=o,l*=2,a){case 0:s=n+l,r=i+l;break;case 1:n=s-l,r=i+l;break;case 2:s=n+l,i=r-l;break;case 3:n=s-l,i=r-l}this._root&&this._root.length&&(this._root=d)}return this._x0=n,this._y0=i,this._x1=s,this._y1=r,this}function m$(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function p$(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function wi(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function _$(t,e,n){var i,s,r,o,a,l,d,h=this._x0,c=this._y0,g=this._x1,m=this._y1,_=[],p=this._root;for(p&&_.push(new wi(p,h,c,g,m)),n==null?n=1/0:(h=t-n,c=e-n,g=t+n,m=e+n,n*=n);l=_.pop();)if(!(!(p=l.node)||(s=l.x0)>g||(r=l.y0)>m||(o=l.x1)<h||(a=l.y1)<c))if(p.length){var v=(s+o)/2,x=(r+a)/2;_.push(new wi(p[3],v,x,o,a),new wi(p[2],s,x,v,a),new wi(p[1],v,r,o,x),new wi(p[0],s,r,v,x)),(d=(e>=x)<<1|t>=v)&&(l=_[_.length-1],_[_.length-1]=_[_.length-1-d],_[_.length-1-d]=l)}else{var b=t-+this._x.call(null,p.data),E=e-+this._y.call(null,p.data),S=b*b+E*E;if(S<n){var A=Math.sqrt(n=S);h=t-A,c=e-A,g=t+A,m=e+A,i=p.data}}return i}function y$(t){if(isNaN(r=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,s,r,o,a,l,d,h,c,g,m=this._root,_=this._x0,p=this._y0,v=this._x1,x=this._y1;if(!m)return this;if(m.length)for(;;){if((d=r>=(a=(_+v)/2))?_=a:v=a,(h=o>=(l=(p+x)/2))?p=l:x=l,e=m,!(m=m[c=h<<1|d]))return this;if(!m.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,g=c)}for(;m.data!==t;)if(i=m,!(m=m.next))return this;return(s=m.next)&&delete m.next,i?(s?i.next=s:delete i.next,this):e?(s?e[c]=s:delete e[c],(m=e[0]||e[1]||e[2]||e[3])&&m===(e[3]||e[2]||e[1]||e[0])&&!m.length&&(n?n[g]=m:this._root=m),this):(this._root=s,this)}function v$(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function x$(){return this._root}function b$(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function E$(t){var e,n,i,s,r,o,a=[],l=this._root;for(l&&a.push(new wi(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,s=e.y0,r=e.x1,o=e.y1)&&l.length){var d=(i+r)/2,h=(s+o)/2;(n=l[3])&&a.push(new wi(n,d,h,r,o)),(n=l[2])&&a.push(new wi(n,i,h,d,o)),(n=l[1])&&a.push(new wi(n,d,s,r,h)),(n=l[0])&&a.push(new wi(n,i,s,d,h))}return this}function S$(t){var e,n=[],i=[];for(this._root&&n.push(new wi(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var s=e.node;if(s.length){var r,o=e.x0,a=e.y0,l=e.x1,d=e.y1,h=(o+l)/2,c=(a+d)/2;(r=s[0])&&n.push(new wi(r,o,a,h,c)),(r=s[1])&&n.push(new wi(r,h,a,l,c)),(r=s[2])&&n.push(new wi(r,o,c,h,d)),(r=s[3])&&n.push(new wi(r,h,c,l,d))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function w$(t){return t[0]}function A$(t){return arguments.length?(this._x=t,this):this._x}function T$(t){return t[1]}function C$(t){return arguments.length?(this._y=t,this):this._y}function $k(t,e,n){var i=new Bb(e??w$,n??T$,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Bb(t,e,n,i,s,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=r,this._root=void 0}function Dw(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var vi=$k.prototype=Bb.prototype;vi.copy=function(){var t,e,n=new Bb(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Dw(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var s=0;s<4;++s)(e=i.source[s])&&(e.length?t.push({source:e,target:i.target[s]=new Array(4)}):i.target[s]=Dw(e));return n},vi.add=c$,vi.addAll=g$,vi.cover=f$,vi.data=m$,vi.extent=p$,vi.find=_$,vi.remove=y$,vi.removeAll=v$,vi.root=x$,vi.size=b$,vi.visit=E$,vi.visitAfter=S$,vi.x=A$,vi.y=C$;var dd=function(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s},L$=function(t){const e=[];let n,i,s,r,o,a,l,d=this._root;for(d&&e.push(new dd(d,this._x0,this._y0,this._x1,this._y1));(n=e.pop())&&(l=t(d=n.node,s=n.x0,r=n.y0,o=n.x1,a=n.y1),l!=="break");)if(!l&&d.length){const h=(s+o)/2,c=(r+a)/2;(i=d[3])&&e.push(new dd(i,h,c,o,a)),(i=d[2])&&e.push(new dd(i,s,c,h,a)),(i=d[1])&&e.push(new dd(i,h,r,o,c)),(i=d[0])&&e.push(new dd(i,s,r,h,c))}return this};function Ub(t,e,n,i,s){const r=new Array(t.length);for(let o=0;o<e.length;o++){const a=i[e[o]],l=i[n[o]];r[a]=r[a]||[],r[a].push(l),s&&(r[l]=r[l]||[],r[l].push(a))}return r}function Nh(t,e){return t[e]===-1?e:Nh(t,t[e])}function P$(t,e,n){const i=Nh(t,e),s=Nh(t,n);t[i]=s}function k$(t,e,n,i=!1){const s=new Int32Array(t.length),r={};for(let o=0;o<t.length;o++)s[o]=-1,r[t[o]]=o;for(let o=0;o<e.length;o++){const a=r[e[o]],l=r[n[o]];if(i&&a===l)return!0;const d=Nh(s,a),h=Nh(s,l);if(d===h)return!0;P$(s,d,h)}return!1}function jk(t,e,n,i,s,r,o,a){if(i[t]=s,n[t])return!0;if(e[t])return!1;e[t]=1,n[t]=1;const l=r[t];if(l){for(const d of l)if(jk(d,e,n,i,t,r,o,a))return o.push(a[d]),!0}return n[t]=0,!1}function Gk(t,e,n){const i=t.length,s=new Uint8Array(i),r=new Uint8Array(i),o=new Int32Array(i),a={};for(let d=0;d<i;d++)a[t[d]]=d;const l=Ub(t,e,n,a,!1);for(let d=0;d<i;d++){const h=[];if(jk(d,s,r,o,-1,l,h,t)&&h.length>1){const c=h[0];for(let g=1;g<h.length;g++)if(h[g]===c){h.length=g;break}return h.push(c),h.reverse()}}return!1}function Vk(t,e,n,i,s,r,o){e[t]=1,i[t]=n;const a=s[t];if(a){for(const l of a)if(e[l]){if(l!==n)return i[l]=t,r.push(o[l]),!0}else if(Vk(l,e,t,i,s,r,o))return r.push(o[l]),!0}return!1}function I$(t,e,n){const i=t.length,s=new Uint8Array(i),r=new Int32Array(i),o={};for(let l=0;l<i;l++)o[t[l]]=l,r[l]=-1;const a=Ub(t,e,n,o,!0);for(let l=0;l<e.length;l++){const d=o[e[l]],h=o[n[l]];a[d]=a[d]||[],a[d].push(h)}for(let l=0;l<i;l++){const d=l,h=[];if(!s[d]&&Vk(d,s,-1,r,a,h,t))return!0}return!1}$k.prototype.visit2=L$;var Hk=class{constructor(t,e,n){this.cycles=[],this.visitedLength=0,this.visitedStack=[],this.stack=[],this.idToIndex={},this.removed={},this.nodes=t,this.visited=new Uint8Array(this.nodes.length);for(let i=0;i<t.length;i++)this.idToIndex[t[i]]=i;this.adjacency=Ub(t,e,n,this.idToIndex)}getCycles(){this.visited=new Uint8Array(this.nodes.length),this.visitedStack=[];for(let t=0;t<this.nodes.length;t++)for(this.backtrack(t,t);this.visitedLength!==0;){const e=this.visitedStack.pop();e!==void 0&&this.visited[e]&&(this.visited[e]=0,this.visitedLength--)}return this.cycles}backtrack(t,e){let n=!1;this.stack.push(e),this.visited[e]||(this.visited[e]=1,this.visitedLength++),this.visitedStack.push(e);const i=this.adjacency[e]||[];for(const s of i)if(this.removed[e]=this.removed[e]||{},!this.removed[e][s]){if(s<t)this.removed[e][s]=!0;else if(s===t){n=!0;const r=[];for(let o=0,a=!1;o<this.stack.length;o++){const l=this.stack[o];t===l&&(a=!0),a&&r.push(this.nodes[l])}this.cycles.push(r)}else if(!this.visited[s]){const r=this.backtrack(t,s);n=n||r}}if(n){let s;do s=this.visitedStack.pop(),this.visited[s]&&(this.visited[s]=0,this.visitedLength--);while(s!==e)}return this.stack.pop(),n}};function M$(){return{index:{},parent:[],count:0}}function N$(t,e){t.index[e]===void 0&&(t.count+=1,t.index[e]=t.parent.push(-t.count))}function zw(t,e){let n=t.index[e];if(n===void 0)return-1;for(;n>=0;)e=n,n=t.parent[n];return e}function R$(t,e,n){t.parent[n]=e,t.count-=1}function F$(t){return t.count<=1}function Wk(t,e,n,i,s){s&&e.sort((a,l)=>s(a)-s(l));const r=[],o=M$();t.forEach(a=>N$(o,a));for(let a=0;a<e.length&&!F$(o);a++){const l=zw(o,n(e[a])),d=zw(o,i(e[a]));l!==d&&l>0&&d>0&&(R$(o,l,d),r.push(e[a]))}return r}function Xk({adjacency:t,directed:e=!1,normalized:n=!0}){const i=[],s=[],r={},o={},a={},l={};let d;const h=new Array(t.length),c={},g={},m={};for(let b=0;b<t.length;b++){const E=t[b];m[E.id]=E.adj,c[E.id]=!0,g[E.id]=b,e||E.adj.forEach(S=>{c[S]=!0})}const _=Object.keys(c).map(b=>+b);for(let b=0;b<_.length;b++)h[b]=0;for(let b=0;b<_.length;b++)d=_[b],x(d),v();const p=n?_.length>2?1/((_.length-1)*(_.length-2)):0:e?0:.5;if(p)for(let b=0;b<h.length;b++)h[b]*=p;return h;function v(){for(let b=0;b<_.length;b++)l[_[b]]=0;for(;s.length;){const b=s.pop(),E=(1+l[b])/a[b],S=r[b];for(let A=0;A<S.length;++A){const T=S[A];l[T]+=a[T]*E}b!==d&&(h[g[b]]+=l[b])}}function x(b){for(let E=0;E<_.length;E++){const S=_[E];r[S]=[],o[S]=-1,a[S]=0}for(o[b]=0,a[b]=1,i.push(b);i.length;){const E=i.shift();s.push(E),m[E].forEach(S=>{o[S]===-1&&(o[S]=o[E]+1,i.push(S)),o[S]===o[E]+1&&(a[S]+=a[E],r[S].push(E))})}}}var Zk=class{constructor(t){this._heap=[],this._size=0,this._keyToValue=t,this._keyToIndex=new Int32Array(t.length),this._keyToIndex.fill(-1)}add(t){let e=this._keyToIndex[t];e===-1&&(e=this._size++,this._heap[e]=t),this._keyToIndex[t]=this._bubble(e)}removeMin(){if(this._size===0)return NaN;const t=this._heap[0];return this._heap[0]=this._heap[--this._size],this._bubble(0),t}isEmpty(){return this._size===0}has(t){return this._keyToIndex[t]!==-1}_bubble(t){const e=this._indexToValue(t),n=this._getParentIndex(t),i=this._indexToValue(n);let s=t;if(t!==0&&i>e)s=this._swap(t,n);else{const r=this._getLeftChildIndex(t),o=this._getRightChildIndex(t),a=this._indexToValue(r),l=this._indexToValue(o),d=Math.min(e,a,l);d===e||(s=d===a?this._swap(t,r):this._swap(t,o))}return s===t?t:this._bubble(s)}_indexToValue(t){return t>=this._size?1/0:this._keyToValue[this._heap[t]]}_getParentIndex(t){return(t-1)/2|0}_getLeftChildIndex(t){return 2*t+1}_getRightChildIndex(t){return 2*t+2}_swap(t,e){const n=this._heap[t],i=this._heap[e];return this._heap[t]=i,this._heap[e]=n,this._keyToIndex[n]=e,this._keyToIndex[i]=t,e}},O$=(()=>{let t=0;return typeof requestAnimationFrame<"u"?requestAnimationFrame:function(e){const n=Date.now(),i=Math.min(16,Math.max(0,16-(n-t))),s=t=n+i;return setTimeout(()=>e(s),i)}})(),Yk=50,D$=typeof cancelAnimationFrame<"u"?cancelAnimationFrame:function(t){return clearTimeout(t)};function $b(t,e){return O$(n=>{t.call(e,n)})}function qk(t){t&&D$(t)}var z$=typeof global=="object"&&global!==null&&global.it!==void 0,Yr=typeof document<"u",qo=typeof window<"u",fp=qo&&!window.__OGMA_HEADLESS,mp=fp&&Yr,B$=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",U$=qo&&/mac/.test(B$);function $$(t){return typeof t=="number"&&t%1==0}function ev(t){return Array.isArray(t)?t.join("."):t}function Wa(t){if(!t)return[];if(typeof t=="string")return t.split(".");if(Array.isArray(t)){for(let e=0;e<t.length;++e)if(typeof t[e]!="string")throw new TypeError(`${t[e]} is not a string`);return t.slice()}throw new TypeError(`invalid property path "${t}": expected string or array of strings`)}function pp(t,e,n){let i,s,r;if(e===0)return function(){t.apply(n,arguments)};const o=function(){i=!1,s&&(r.apply(n,s),s=null)};return r=function(){let a;return i?s=arguments:(a=t.apply(n,arguments),setTimeout(o,e),i=!0),a},r}function j$(t,e,n){let i,s,r,o,a;const l=e===0||e===void 0?100:e;function d(){const c=Date.now()-o;c<l&&c>=0?i=setTimeout(d,l-c):(i=null,n||(a=t.apply(r,s),r=s=null))}const h=function(){r=this,s=arguments,o=Date.now();const c=n&&!i;return i||(i=setTimeout(d,e)),c&&(a=t.apply(r,s),r=s=null),a};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(a=t.apply(r,s),r=s=null,clearTimeout(i),i=null)},h}function Jk(t,e,n,i,s){n(t[e],e,t,i,s).then(r=>{e===t.length-1?i(r):Jk(t,e+1,n,i,s)}).catch(s)}function G$(t,e){return new Promise((n,i)=>Jk(t,0,e,n,i))}function _p(){return new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120}function Kk(t){return t.reduce((e,n)=>e.then(n),Promise.resolve())}function nv(t,e,n,i,s,r,o,a){return t+s+256*(e+r)+65536*(n+o)+16777216*(i+a)}function V$(t,e){return t<e?t*e+Math.pow(e-t-1,2)/4:t*e+Math.pow(t-e-1,2)/4}function Xa(t){return!(t===null||typeof t!="object"||Qn(t)||t instanceof RegExp||typeof HTMLElement<"u"&&t instanceof HTMLElement)}function nh(t){const e=Object.keys(t),n=new Array(e.length);for(let i=0;i<e.length;++i)n[i]=t[e[i]];return n}function hr(t,e,n){if(Array.isArray(t))return t.forEach(e,n);if(!Xa(t))throw new Error("forEach: invalid argument "+JSON.stringify(t));const i=Object.keys(t);if(n!==void 0)for(let s=0;s<i.length;++s){const r=i[s];e.call(n,t[r],r)}else for(let s=0;s<i.length;++s){const r=i[s];e(t[r],r)}}function nn(t){if(Array.isArray(t)){const i=new Array(t.length);for(let s=0;s<t.length;++s)i[s]=nn(t[s]);return i}if(!An(t))return t;const e={},n=Object.keys(t);for(const i of n)e[i]=nn(t[i]);return e}function H$(t,e){e.forEach(n=>{t.indexOf(n)===-1&&t.push(n)})}function $r(t,e,n){const i=typeof e=="string"?e.split("."):e;for(let s=0;s<i.length-1;++s){const r=i[s];let o=t[r];o||(o={},t[r]=o),t=o}t[i[i.length-1]]=n}function Qe(t,e){const n=Wa(e);if(!n.length)return t;if(t){for(let i=0;i<n.length-1;++i){const s=t[n[i]];if(!s)return;t=s}return t[n[n.length-1]]}}function Rh(t,e,n="."){e||(e=r=>!Xa(r));const i={},s=Object.keys(t);for(let r=0;r<s.length;++r){const o=s[r],a=t[o];if(e(a))i[o]=a;else{const l=Rh(a,e),d=Object.keys(l);for(let h=0;h<d.length;h++){const c=d[h];i[`${o}${n}${c}`]=l[c]}}}return i}function iv(t){const e={},n=Object.keys(t);for(let i=0;i<n.length;++i){const s=n[i];$r(e,s,t[s])}return e}function Za(t,e,n=[]){const i=Object.keys(t);for(let s=0;s<i.length;++s){const r=i[s],o=t[r],a=e?e+r:r;An(o)?Za(o,a+".",n):n.push(a)}return n}var Qk=Object.prototype.hasOwnProperty;function tI(t,e){const n=[t];let i;for(;n.length>0;)if(i=n.pop(),i)if(An(i))for(const s in i)Qk.call(i,s)&&n.push(i[s]);else e(i)}function W$(t){const e={};return tI(t,n=>e[n.getName()]=n),e}function yp(t,e=[]){if(An(t)){const n=Object.keys(t);for(const i of n)yp(t[i],e)}else e.push(t);return e}function vp(t){for(const e in t)typeof t[e]=="function"&&delete t[e];return t}function rs(t,e){if(t===void 0)return nn(e);if(!Xa(t))return t;const n={},i=Object.keys(e);for(const s of i){const r=e[s],o=t[s];Xa(r)?n[s]=rs(o,r):n[s]=o===void 0?nn(r):o}return n}function An(t){return t&&(t.constructor===Object||!t.constructor)}function am(t,e){if(!An(e)||!An(t))return e;const n=Object.assign({},t),i=Object.keys(e);for(const s of i)n[s]=am(n[s],e[s]);return n}function sv(t,e){return e==null?t:e.reduce((n,i)=>(n[i]=t[i],n),{})}var Zl=(...t)=>{const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)Qk.call(i,s)&&(Array.isArray(e[s])&&Array.isArray(i[s])?e[s]=Array.from(new Set(e[s].concat(i[s]))):An(e[s])&&An(i[s])?e[s]=Zl(e[s],i[s]):e[s]=i[s])}return e},X$={},eI=X$,mf={},nI={},rv=t=>null;if(typeof global=="object"&&(mf=global),typeof window=="object"&&(nI=window),typeof Wd=="object"&&typeof Wd.require=="function"){const t=Wd.require.bind(Wd);rv=e=>{try{return t(e)}catch{return null}}}else typeof mf.require=="function"&&(rv=t=>{const e=mf.require;try{return e(t)}catch{return null}});function Ss(t,{throwOnError:e}={}){let n=null;if(!n&&t&&(n=eI[t]),!n&&t&&(n=rv(t)),!n&&t&&(n=nI[t]),!n&&t&&(n=mf[t]),!n&&e){const i=[`unable to find module "${t}"; make sure one of these statements is true:`,`- Ogma.libraries['${t}'] is set to the right library`,`- require('${t}') returns the right library`,`- window['${t}'] is set to the right library`].join(`
`);throw new Error(i)}return n}var iI=typeof performance<"u"&&performance.now?()=>0|performance.now():()=>Date.now(),Z$=iI();function ci(){return iI()-Z$}function sI(){const t=new Date,e=t.getDate(),n=t.getMonth()+1;return`${t.getFullYear()}-${n<10?"0"+n:n}-${e<10?"0"+e:e}`}function rI(){const t=new Date;return`[${tg((t.getUTCHours()-(t.getTimezoneOffset()/60|0))%24)}:${tg(t.getUTCMinutes())}:${tg(t.getUTCSeconds())}:${tg(t.getUTCMilliseconds(),3)}]`}function tg(t,e=2){let n=Math.pow(10,e-1),i=String(t);for(;n>1;)t<n&&(i="0"+i),n/=10;return i}function Wo(t){!z$&&console.warn(rI()+" "+t)}function Y$(t,e){e.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(i=>{Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(n.prototype,i)||Object.create(null))})})}var X_,Ya,jb,oI,he=()=>{},lm=()=>!1,Gb=()=>!0,um=()=>null,Gs=t=>t,ov=class Pd{constructor(){this.method=null,this.url=null,this.status=0,this.readyState=0,this.headers={},this.responseText=null,this.response=null,Pd.onCreate&&Pd.onCreate(this)}open(e,n){this.method=e,this.url=n,Pd.onSend&&Pd.onSend(this)}respond(e,n,i){this.readyState=4,this.status=e,this.headers=n,this.responseText=i,this.response=i,this.onreadystatechange()}send(){this.readyState=4}};ov.onCreate=he,ov.onSend=he;var aI=ov,av=class kd{constructor(){this.onload=he,kd.onCreate&&kd.onCreate(this)}readAsDataURL(e){this._blob=e,kd.onRead&&kd.onRead(this)}load(e){this.result=typeof e=="function"?e(this._blob):e,this.onload&&this.onload()}};av.onCreate=he,av.onRead=he;var lI=av;function qr(){return Ya||{createElementNS:()=>null,createElement:()=>null,implementation:{createDocument(){throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')}}}}X_=Ss("xmldom"),Ya=Yr?document:X_?new X_.DOMImplementation().createDocument():null,jb=typeof XMLHttpRequest<"u"?XMLHttpRequest:aI,oI=typeof FileReader<"u"?FileReader:lI;var q$=class{observe(){}unobserve(){}disconnect(){}},J$=typeof ResizeObserver>"u"?q$:ResizeObserver,uI=t=>new J$(t);function dI(t,e){if(document&&document.defaultView){let n=t.style[e];if((!n||n==="auto")&&qr().defaultView){const i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return n==="auto"?null:n?n.toString():null}return null}var hI=class{constructor(){this.onmousewheel=he,this.__dummy=!0,this.style={},this.clientWidth=0,this.clientHeight=0,this.childNodes=[],this.style={width:"0px",height:"0px",top:void 0,left:void 0,position:"",backgroundColor:void 0}}get offsetWidth(){return parseFloat(this.style.width||"0")}get offsetHeight(){return parseFloat(this.style.height||"0")}get firstChild(){return null}get parentNode(){return null}get classList(){return{length:0,value:"",add(){},remove(){},contains:t=>!1,item:null}}get innerHTML(){return""}set innerHTML(t){}appendChild(t){return this.childNodes.push(t),t}removeChild(){}addEventListener(){}removeEventListener(){}insertBefore(){}contains(t){return!1}};function dm(){return new hI}var Vi=qo?()=>window.devicePixelRatio:()=>1;function cI(t){const e=";base64,";let n,i,s;if(t.indexOf(e)===-1)return n=t.split(","),i=n[0].split(":")[1],s=decodeURIComponent(n[1]),Fh(s,i);n=t.split(e),i=n[0].split(":")[1],s=window.atob(n[1]);const r=s.length,o=new Uint8Array(r);for(let a=0;a<r;++a)o[a]=s.charCodeAt(a);return Fh([o],i)}var gI=class{constructor(t,e){this.data=t,this.type=e}};function Fh(t,e){return typeof Blob<"u"?new Blob(t,{type:e}):new gI(t,e)}function K$(t){return typeof Blob<"u"&&t instanceof Blob||t instanceof gI}function Q$(t,e){return e==="blob"?t:e==="dataURL"?cI(t):Fh([t],"text/xml")}function ra(t,e,n){if(!fp)return t;let i=null,s=null,r=null;window.Blob?(i=Q$(t,n),s=window.URL.createObjectURL(i)):r="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(t);const o=document.createElement("a");return o.setAttribute("href",s||r),o.setAttribute("download",e),document.body.appendChild(o),o.click(),document.body.removeChild(o),s&&setTimeout(()=>window.URL.revokeObjectURL(s),0),t}function hm(t,e,n,i=Vi()){if(qa(t,e+"px",n+"px"),t.tagName==="IMG"||t.tagName==="CANVAS"){const s=t;s.width=e*i,s.height=n*i}}function Vb(t,e){hr(e,(n,i)=>{n!==void 0&&t.setAttribute(i,n)})}var Hb="http://www.w3.org/2000/svg",lv="http://www.w3.org/2000/xmlns/",fI="http://www.w3.org/1999/xlink",t5=1;function Ce(t,e){const n=Ya.createElementNS(Hb,t);return n.style||(n.style={}),e&&Vb(n,e),n}function uv(t){const e=Ya.createElement("div"),n=t.trim().replace(/\s+/g," ");if(e.innerHTML=n,!e.firstChild||e.firstChild.nodeType!==t5)throw new Error(`Failed to create element from: "${t}". Expected an HTML string`);return e.firstChild}function Wb(t){if(Ya)return Ya.createTextNode(t)}function mI(t){return typeof Image>"u"?Promise.resolve(null):new Promise(e=>{const n=new Image;n.src=t,n.onload=()=>e(n),n.onerror=()=>e(null)})}function pI(t){if(t.indexOf("http://")===0||t.indexOf("https://")===0)return t;const e=window.location.origin,n=window.location.pathname,i=n.lastIndexOf("/");return i===-1?e+"/"+t:e+n.substr(0,i)+"/"+t}function $u(t){return new Promise((e,n)=>{const i=new jb;i.open("GET",pI(t),!0),i.onreadystatechange=function(){if(i.readyState===4){const s=i.status;s===200?e(i.responseText):n(s!==0?new Error(`cannot retrieve file at url "${t}"; the server responded with status code ${s}.`):new Error(`cannot send XMLHttpRequest to url "${t}"; if you're using the local file protocol this is most likely the cause.`))}},i.onerror=function(){n(new Error(`cannot retrieve file at url "${t}"; the XMLHttpRequest failed.`))},i.send()})}function _I(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function cm(t,e){t.style.cursor=e,t.style.cursor!==e&&(t.style.cursor=`-webkit-${e}`)}function yI(t){return new Promise((e,n)=>{const i=new jb;i.responseType="blob",i.open("GET",pI(t),!0),i.onreadystatechange=()=>{if(i.readyState===4){if(i.status===200)return e(i.response);n(i.status)}},i.onerror=s=>n(s),i.send()})}function vI(t){return yI(t).then(e=>new Promise((n,i)=>{const s=new oI;s.onerror=i,s.onload=()=>n(s.result),s.readAsDataURL(e)}))}function Yl(t,e=!0){const n=e?"&#13;":`
`;return(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,n).replace(/[\r\n]/g,n)}var Xb={0:"left",1:"middle",2:"right"};function xI(t){if(t.baseURI)return t.baseURI;const e=t.getElementsByTagName("base");return e.length>0?e[0].href:t.URL||(t.location?t.location.href:"")}function bI(t,e,n,i){return new Promise(s=>{let r=e;const o=Date.now(),a=(n-e)*Math.min(1,1/(i/16));(function l(){Date.now()-o<i?(r=Math.min(1,Math.max(0,r+a)),t.style.opacity=r.toString(),$b(l)):s()})()})}function qa(t,e,n){t.style.width=e,t.style.height=n}var EI=qo&&!!window.PointerEvent,xp="pointerdown",bp="pointermove",Ep="pointerup",oc="pointercancel",bu={},gm=0,SI=t=>t.pointerType==="mouse",wI=t=>t.pointerType!=="mouse";function e5(){if(Yr&&gm===0&&EI){const t=document.documentElement;t.addEventListener(xp,AI,!0),t.addEventListener(bp,TI,!0),t.addEventListener(Ep,fm,!0),t.addEventListener(oc,fm,!0)}gm++}function n5(){if(gm--,Yr&&gm===0){const t=document.documentElement;t.removeEventListener(xp,AI,!0),t.removeEventListener(bp,TI,!0),t.removeEventListener(Ep,fm,!0),t.removeEventListener(oc,fm,!0)}}function AI(t){bu[t.pointerId]=t}function TI(t){bu[t.pointerId]&&(bu[t.pointerId]=t)}function fm(t){delete bu[t.pointerId]}function Sp(t,e){t.touches=[];for(const n in bu)t.touches.push(bu[n]);t.changedTouches=[t],e(t)}function i5(t,e,n){const i=s=>{SI(s)||(wI(s)&&s.preventDefault(),Sp(s,n))};return t(e,xp,i,!1),i}function s5(t,e,n){const i=s=>{wI(s)&&s.preventDefault(),Sp(s,n)};return t(e,oc,i,!1),i}function r5(t,e,n){const i=s=>{SI(s)&&s.buttons===0||Sp(s,n)};return t(e,bp,i,!1),i}function o5(t,e,n){const i=s=>Sp(s,n);return t(e,Ep,i,!1),t(e,oc,i,!1),i}function Bw(t,e,n,i){return n==="touchstart"?t(e,xp,i,!1):n==="touchmove"?t(e,bp,i,!1):n==="touchend"?(t(e,Ep,i,!1),t(e,oc,i,!1)):void 0}var ee=class{constructor(t){this._ogma=t}_setModules(t){this._modules=t}onMounted(){}onReady(t){}destroy(t){}},a5=["graphics","legend","brand"],Z_=300,Y_=300,l5=200,u5=class extends ee{constructor(){super(...arguments),this._width=Z_,this._height=Y_,this._resizeObserver=uI(()=>this._resize()),this._layers={},this._focus=!1,this._container=null,this._isFullScreen=!1,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],this._refreshUntil=0,this._currentTime=ci(),this._timeouts=[],this._isDestroyed=!1,this._onDetachDom=[],this._isRealBrowser=fp,this._isDocumentReady=mp,this._inFrame=!1,this._mustRefresh=!1,this._nextFrame=null,this._onWindowFocus=()=>this.refresh(),this._onFullscreenChange=()=>{this._isFullScreen=ih()},this._resize=t=>{if(!this._container&&!t)return;const e=this._width,n=this._height;let i,s;if(this._container){const r=this._modules.settings.get("minimumWidth"),o=this._modules.settings.get("minimumHeight"),a=this._container.clientWidth||1,l=this._container.clientHeight||1;i=Math.max(r,t?t.width:a),s=Math.max(o,t?t.height:l)}else t!=null&&(i=t.width,s=t.height);i===e&&s===n||(this._width=i,this._height=s,hr(this._layers,({element:r,automaticResize:o})=>{o&&hm(r,i,s)}),this._modules.events.fire("resize",{prevWidth:e,prevHeight:n,width:i,height:s,difWidth:i-e,difHeight:s-n}))}}onMounted(){this._modules.settings.register("minimumWidth",Z_,()=>this._resize(),!1),this._modules.settings.register("minimumHeight",Y_,()=>this._resize(),!1),this._modules.events.register(["beforeNewFrame","frame","afterNewFrame","setContainer","resize"]),this._onDetachDom=[],e5(),this.addWindowEventListener("focus",this._onWindowFocus)}onReady(t){var e,n;t.container&&this.setContainer(t.container),(e=t.options)!=null&&e.width||(n=t.options)!=null&&n.height?this._resize({width:t.options.width||Z_,height:t.options.height||Y_}):this._resize()}addWindowEventListener(t,e,n){return this._isRealBrowser&&this.addElementEventListener(window,t,e,n),this}addDirectWindowEventListener(t,e,n){this._isRealBrowser&&window.addEventListener(t,e,n)}removeDirectWindowEventListener(t,e){this._isRealBrowser&&window.removeEventListener(t,e)}addDocumentEventListener(t,e,n){return this._isDocumentReady&&this.addElementEventListener(document.documentElement,t,e,n),e}removeDocumentEventListener(t,e){this._isDocumentReady&&document.documentElement.removeEventListener(t,e)}addMediaListener(t,e){if(this._isDocumentReady&&typeof window.matchMedia=="function"){const n=window.matchMedia(t);n.addListener(e),this._onDetachDom.push(()=>n.removeListener(e))}}addElementEventListener(t,e,n,i){return this._isDestroyed||(t.addEventListener(e,n,i),this._onDetachDom.push(()=>t.removeEventListener(e,n,i))),n}detachFromDom(){this._onDetachDom.forEach(t=>t()),this._onDetachDom=[],this._emptyContainer()}setTimeout(t,e=0){const n=setTimeout(()=>{this._timeouts.splice(this._timeouts.indexOf(n),1),t()},e);return this._timeouts.push(n),n}clearTimeout(t){return t&&(clearTimeout(t),this._timeouts.splice(this._timeouts.indexOf(t),1)),null}clearAllTimeouts(){this._timeouts.forEach(clearTimeout),this._timeouts=[]}stopFrames(){this._isDestroyed=!0,this._nextFrame&&(qk(this._nextFrame),this._nextFrame=null)}isDestroyed(){return this._isDestroyed}getDimensions(){return{width:this._width,height:this._height}}setDimensions(t){this._resize(t)}setLayer(t,e,{automaticResize:n=!1}={}){e&&(e._ogmaLayer=t,n&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",hm(e,this._width,this._height,Vi()))),this._layers[t]={element:e,automaticResize:n},this._updateContainerContent()}setContainer(t){let e;if(typeof t=="string"){if(e=document.getElementById(t),!e)throw new Error(`unable to find DOM element with id "${t}"`)}else e=t;if(e===this._container)return;e===null&&this._emptyContainer();const n=this._container;this._isFullScreen=!1,this._container&&this._resizeObserver.unobserve(this._container),this._container=e,this._container&&(["fullscreenchange","webkitfullscreenchange"].forEach(i=>{this.addElementEventListener(this._container,i,this._onFullscreenChange)}),this._resizeObserver.observe(this._container)),this._resize(),this._updateContainerContent(),this._modules.events.fire("setContainer",{element:e,prevElement:n})}getContainer(){return this._container}appendElement(t){this._container!==null&&this._container.appendChild(t)}focus(){this._focus=!0}blur(){this._focus=!1}hasFocus(){return this._focus}forceResize(){this._resize()}_beforeOrAfterNextFrame(t){const e=t?this._afterNextFramePromises:this._beforeNextFramePromises,n=new Promise(i=>{e.push(()=>(i(void 0),n))});return this._refresh(),n}beforeNextFrame(){return this._beforeOrAfterNextFrame(!1)}afterNextFrame(){return this._beforeOrAfterNextFrame(!0)}refresh(t){t&&(this._refreshUntil=Math.max(this._refreshUntil,t)),this._refresh()}_emptyContainer(){if(this._container){const t=[];for(let e=0;e<this._container.childNodes.length;++e){const n=this._container.childNodes[e];n._ogmaLayer&&t.push(n)}for(let e=0;e<t.length;++e)this._container.removeChild(t[e])}}_fillContainer(){if(this._container){const t=dI(this._container,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&(this._container.style.position="relative");const e=this._container.firstChild;a5.forEach(n=>{const i=this._layers[n];i&&i.element&&this._container&&this._container.insertBefore(i.element,e)})}}_updateContainerContent(){this._emptyContainer(),this._fillContainer()}_refresh(){this._inFrame?this._mustRefresh=!0:this._nextFrame||this._isDestroyed||(this._nextFrame=$b(()=>this._playFrame()))}_playFrame(){const t=ci(),e=t-this._currentTime,n=wk([this._beforeNextFramePromises,()=>this._modules.events.fire("beforeNewFrame",{elapsed:e}),()=>this._modules.events.fire("frame",{elapsed:e}),()=>this._modules.events.fire("afterNewFrame",{elapsed:e}),this._afterNextFramePromises,()=>{this._inFrame=!1,(this._mustRefresh||t<this._refreshUntil+17)&&(this._mustRefresh=!1,this._refresh())}]);this._inFrame=!0,this._nextFrame=null,this._mustRefresh=!1,this._currentTime=t,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],n.reduce((i,s)=>i.then(()=>{if(!this._isDestroyed)return s()}),Promise.resolve())}isPlayingFrame(){return this._inFrame||!!this._nextFrame}setFullScreen(t){let e=Promise.resolve();return t!==this._isFullScreen?(this._container&&(e=t?d5(this._container):h5()),e.then(()=>new Promise(n=>{this.setTimeout(()=>{this._isFullScreen=ih(),n(void 0)},l5)}))):e}isFullScreen(){return ih()}debounceBeforeFrame(t){let e=!1,n=[];const i=()=>{const s=n;e=!1,n=[],t(),s.forEach(r=>r())};return()=>new Promise(s=>{n.push(s),e||(e=!0,this.beforeNextFrame().then(i))})}destroy(){this._resizeObserver.disconnect(),n5(),this.detachFromDom(),this.clearAllTimeouts(),this.stopFrames()}};function ih(){return typeof document<"u"&&!!(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}function d5(t){return ih()?Promise.resolve():t.requestFullscreen?t.requestFullscreen():t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?Promise.resolve(t.webkitRequestFullScreen()):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():Promise.resolve()}function h5(){return ih()?typeof document>"u"?Promise.resolve():document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?Promise.resolve(document.webkitCancelFullScreen()):document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():Promise.resolve():Promise.resolve()}var c5=class extends ee{constructor(){super(...arguments),this._nodeChanges=[],this._edgeChanges=[],this._shouldTriggerEvents=!1}onMounted(){this._nodeDataList=this._modules.graph.createAttribute(!0,{name:"data",storage:"any"},!1),this._edgeDataList=this._modules.graph.createAttribute(!1,{name:"data",storage:"any"},!1),this._nodeList=this._modules.graph.getNodeAttribute("object"),this._edgeList=this._modules.graph.getEdgeAttribute("object"),this._modules.events.register(["setData","updateNodeData","updateEdgeData"]),this._modules.events.on("addNodes",({nodes:t,objects:e})=>this._onAddElements(t,e)).on("addEdges",({edges:t,objects:e})=>this._onAddElements(t,e)).on("beforeNewFrame",()=>{this._shouldTriggerEvents&&(this._shouldTriggerEvents=!1,this._triggerEvents())})}_onAddElements(t,e){const{isNode:n,size:i,_indexes:s}=t,r=this[n?"_nodeDataList":"_edgeDataList"];for(let o=0;o<i;++o)r.set(s[o],e[o].data)}setProperty(t,e,n,{dispatch:i=!1,virtual:s=!1}={}){this._setDataProperty(t.isNode,t._indexes,e,n,i,s),this._modules.events.fire("setData",{elements:t,virtual:s})}getProperty(t,e){return this._getDataProperty(t.isNode,t._indexes,e)}_setDataProperty(t,e,n,i,s,r){s&&typeof i=="function"&&(s=!1);const o=Uw(n),a=typeof i=="function",l=t?this._nodeList:this._edgeList,d=t?this._nodeDataList:this._edgeDataList,h=g5(t?this._nodeChanges:this._edgeChanges,o);for(let c=0;c<e.length;++c){const g=e[c];let m=d.get(g);const _=l.get(g),p=s?i[c]:i;let v,x;if(o===null)v=m,x=a?p(_):p,d.set(g,x);else{m==null&&(m={},d.set(g,m));const b=o.length;for(let E=0;E<b;E++){const S=o[E];let A=m[S];E<b-1?(A==null&&(A={},m[S]=A),m=A):(v=A,x=a?p(_):p,m[S]=x)}}h.indexes.push(g),h.previousValues.push(v),h.newValues.push(x),h.virtual=r}this._scheduleEvents()}_getDataProperty(t,e,n,i){const s=Uw(n);i||(i=new Array(e.length));const r=t?this._nodeDataList:this._edgeDataList;for(let o=0;o<e.length;++o){const a=e[o];let l,d=r.get(a);if(s!==null&&s.length)if(d==null)l=void 0;else{const h=s.length;for(let c=0;c<h&&d;++c)l=d=d[s[c]]}else l=d;i[o]=l}return i}_scheduleEvents(){this._shouldTriggerEvents=!0,this._modules.dom.refresh()}_triggerEvents(){const t=this._prepareEvtPayload(!0),e=this._prepareEvtPayload(!1);this._modules.events.fire("updateNodeData",t),this._modules.events.fire("updateEdgeData",e)}_prepareEvtPayload(t){const e=t?this._modules.graph.nodeList:this._modules.graph.edgeList,n=t?"_nodeChanges":"_edgeChanges";let i=[];const s=this[n];this[n]=[];const r=[];for(let o=0;o<s.length;++o){const{indexes:a,property:l,newValues:d,previousValues:h,virtual:c}=s[o];i=i.concat(a||[]),t?r.push({property:l,newValues:d,previousValues:h,virtual:c,nodes:e(a)}):r.push({property:l,newValues:d,previousValues:h,virtual:c,edges:e(a)})}return t?{nodes:e(i).dedupe(),isNode:t,changes:r}:{edges:e(i).dedupe(),isNode:t,changes:r}}};function g5(t,e){for(let i=0;i<t.length;++i){const s=t[i],r=s.property;if(e===null&&r===null)return s;if(e&&r&&r.length===e.length){let o=!0;for(let a=0;a<r.length;++a)if(r[a]!==e[a]){o=!1;break}if(o)return s}}const n={property:e&&e.slice(),indexes:[],previousValues:[],newValues:[],nodes:null,virtual:!1,edges:null};return t.push(n),n}function Uw(t){return typeof t=="string"?t.split("."):Qn(t)?t:null}function CI(t,e,n){const i=t.getObjectList(e.isNode);for(let s=0;s<e._indexes.length;++s){const r=e._indexes[s];n(i.get(r),s)}}function LI(t,e,n){const i=new Array(e.size),s=t.getObjectList(e.isNode);for(let r=0;r<e._indexes.length;++r){const o=e._indexes[r],a=s.get(o);i[r]=n(a,r)}return i}function PI(t,e,n){n=n||Gb;const i=e.isNode,s=t.acquireIndexList(i),r=t.getObjectList(i),o=t.getListFactory(i);for(let a=0;a<e._indexes.length;++a){const l=e._indexes[a],d=r.get(l);d&&n(d,a)&&s.push(l)}return o(s.sliceAndReset())}function kI(t,e,n,i){const s=t.getListFactory(e.isNode);if(!n)return{valid:e,invalid:s()};const r=t.acquireIndexList(e.isNode),o=t.acquireIndexList(e.isNode),a=t.getObjectList(e.isNode);for(let l=0;l<e._indexes.length;l++){const d=e._indexes[l],h=a.get(d);h!==void 0&&(n(h,i)?r:o).pushUnchecked(d)}return{valid:s(r.sliceAndReset()),invalid:s(o.sliceAndReset())}}function II(t,e,n,i){const s=t.getObjectList(e.isNode);let r=i;for(let o=0;o<e._indexes.length;++o){const a=e._indexes[o];r=n(r,s.get(a),o)}return r}function MI(t,e){const n=e.isNode,i=t.topology.getDeduper(n),s=t.acquireIndexList(n),r=t.getListFactory(n);for(let o=0;o<e._indexes.length;o++){const a=e._indexes[o];i.get(a)===0&&(i.set(a,1),s.push(a))}return r(s.sliceAndReset())}function NI(t,e,n){const i=e.isNode,s=n.topology.getDeduper(i),r=n.acquireIndexList(i),o=n.getListFactory(i);for(let a=0;a<e._indexes.length;a++){const l=e._indexes[a];s.set(l,1)}for(let a=0;a<t._indexes.length;a++){const l=t._indexes[a];s.get(l)===0&&r.push(l)}return o(r.sliceAndReset())}function RI(t,e){const n=e.isNode,i=t.storage.fetch(n),s=i.getFlexArray("excluded"),r=i.getMaxIndex(),o=t.topology.getDeduper(n),a=t.acquireIndexList(n),l=t.getListFactory(n);for(let d=0;d<e._indexes.length;d++)o.set(e._indexes[d],1);for(let d=1;d<=r;++d)o.get(d)===0&&s.get(d)===0&&a.push(d);return l(a.sliceAndReset())}function FI(t,e,n){const i=t.getListFactory(e.isNode),s=new Uint32Array(e._indexes.length+n._indexes.length);return s.set(e._indexes),s.set(n._indexes,e._indexes.length),i(s)}function OI(t,e){return t.getObjectList(e.isNode).getMultiple(e._indexes)}function wp(t,e){const n=t.getStorage(e.isNode);if(e.isList){const i=new Array(e.size);for(let s=0;s<e._indexes.length;++s)i[s]=n.getId(e._indexes[s]);return i}return n.getId(e._index)}function DI(t,e){return t.topology.getExtremity(!0,e)}function zI(t,e){return t.topology.getExtremity(!1,e)}function BI(t,e,n){return t.getObjectList(e.isNode).get(e._indexes[n])}function UI(t,e,n){const i=t.getListFactory(e.isNode),s=t.getObjectList(e.isNode),r=e._indexes.slice();return r.sort((o,a)=>{const l=s.get(o),d=s.get(a);return n(l,d)}),i(r)}var f5=[];function $I(t){typeof t=="object"&&t!==null||(t={});const e=typeof t.data=="function"?t.data:Gs;return{attributes:Array.isArray(t.attributes)?t.attributes:t.attributes||f5,data:e}}function Ap(t,e){for(const n of t){const i=e;Object.keys(i).forEach(s=>{const r=i[s];n.prototype[s]=function(o,a){return Wo(`Deprecated method "${s}"; please use "${r}" instead.`),this[r](o,a)}})}}function $w(t){const e=t.getFlexArray("removed"),n=t.getFlexArray("excluded"),i=t.getFlexArray("virtual");return{all:s=>e.get(s)===0,visible:s=>n.get(s)===0,excluded:s=>n.get(s)===1,raw:s=>i.get(s)===0&&e.get(s)===0,_all:s=>!0}}function jw(t,e,n){return{all:eg(n.all,t,e),visible:eg(n.visible,t,e),raw:eg(n.raw,t,e),_all:eg(n._all,t,e)}}function eg(t,e,n){let i=null;return{getList(){if(!i){const s=e(),r=n();r.reset();for(let o=1;o<=s;++o)t(o)&&r.push(o);i=r.sliceAndReset()}return i},invalidList(){i=null}}}function m5(t){if(t===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof t!="string"&&(typeof t!="number"||!isFinite(t)))throw new Error(`${t} is not a valid id, expected string or number`);return t}var Gw=new Uint32Array(1),Jo=class{constructor(t,e){this.size=1,this.isNode=!1,this.isList=!1,this._index=t,this._ogma=e}get _indexes(){return Gw[0]=this._index,Gw}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]}isInView(t){return this._ogma.modules.locate.isElementInView(this,t)}hasParallelEdges(){return this._ogma.modules.graph.hasParallelEdges(this)}getParallelEdges(t){return this._ogma.modules.graph.getParallelEdges(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:t,edges:e}=this.fastGetAdjacentElements();return{nodes:t.dedupe(),edges:e.filter(n=>n!==this).dedupe()}}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this._ogma.modules.graph.edgeList(new Uint32Array([this._index]))}getId(){return wp(this._ogma.modules.graph,this)}getSource(){return DI(this._ogma.modules.graph,this)}getTarget(){return zI(this._ogma.modules.graph,this)}getExtremities(){return this._ogma.modules.graph.nodeList(new Uint32Array([this.getSource()._index,this.getTarget()._index]))}setSource(t){this._ogma.modules.graph.setSource(this,t)}setTarget(t){this._ogma.modules.graph.setTarget(this,t)}slice(){return this.toList()}toJSON(t={}){const{attributes:e,data:n}=$I(t);return{id:this.getId(),source:this.getSource().getId(),target:this.getTarget().getId(),attributes:this.getAttributes(e),data:n(nn(this.getData()))}}get(t){return t===0?this:void 0}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1,ignoreCurvature:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t,e)}setData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)[0]}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdge(this)}getSubEdges(){return this._ogma.modules.transformations.getSubEdges(this)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Ap([Jo],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var tl=class{constructor(t,e){this.isList=!0,this.isNode=!1,this._indexes=t,this._ogma=e}get size(){return this._indexes.length}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}getParallelEdges(t){return this._ogma.modules.graph.getParallelEdges(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:t,edges:e}=this.fastGetAdjacentElements();return{nodes:t.dedupe(),edges:e.subtract(this).dedupe()}}isVisible(){return this.isExcluded().map(t=>!t)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(t=>this._ogma.modules.transformations.isElementVirtual(t))}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this}toArray(){return OI(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.edgeList(this._indexes.slice())}getId(){return wp(this._ogma.modules.graph,this)}getSource(){return DI(this._ogma.modules.graph,this)}getTarget(){return zI(this._ogma.modules.graph,this)}getExtremities(){return this.getSource().concat(this.getTarget())}get(t){return BI(this._ogma.modules.graph,this,t)}forEach(t){CI(this._ogma.modules.graph,this,t)}map(t){return LI(this._ogma.modules.graph,this,t)}[Symbol.iterator](){let t=-1;return{next:()=>({value:this.get(++t),done:t>=this.size})}}filter(t){return PI(this._ogma.modules.graph,this,t)}reduce(t,e){return II(this._ogma.modules.graph,this,t,e)}concat(t){return FI(this._ogma.modules.graph,this,t)}dedupe(){return MI(this._ogma.modules.graph,this)}subtract(t){return NI(this,t,this._ogma.modules.graph)}slice(t,e){return this._ogma.modules.graph.edgeList(this._indexes.slice(t,e))}indexOf(t){return t instanceof Jo?this._indexes.indexOf(t._index):-1}includes(t){return this.indexOf(t)!==-1}sort(t){return UI(this._ogma.modules.graph,this,t)}inverse(){return RI(this._ogma.modules.graph,this)}toJSON(t={}){return this.map(e=>e.toJSON(t))}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1,ignoreCurvature:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t,e)}setData(t,e){if(arguments.length<2&&(e=t,t=null),typeof e!="function"&&!Qn(e))throw new Error(`invalid argument ${e}; expected array or function`);return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this}fillData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this.map(e=>this._ogma.modules.classes.hasSingleElementClass(t,e))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdges(this)}getSubEdges(){return this.map(this._ogma.modules.transformations.getSubEdges)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Ap([tl],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var ar="geo.latitude",lr="geo.longitude",Vw="geo.prevLat",q_="geo.prevLng",dv=85.0511287798,p5=6378137,mm=1,_5='Map data &copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap contributors</a>',Aa={latitudePath:"latitude",longitudePath:"longitude",maxZoomLevel:22,minZoomLevel:0,wrapCoordinates:!0,tileUrlTemplate:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",tileUrlSubdomains:"abc",attribution:null,attributionOptions:void 0,backgroundColor:"silver",opacity:1,duration:0,disableNodeDragging:!0,tileBuffer:1,sizeRatio:1,tiles:{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",subdomains:"abc",tms:!1,wms:!1},crs:void 0},y5={maxBoundsViscosity:1,worldCopyJump:!0,zoomControl:!1,attributionControl:!1};function Io(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ws(t,e,n){return Math.max(e,Math.min(n,t))}function hv(t,e,n){return t+(e-t)*n}function Te(t,e,n){return t*(1-n)+e*n}function ql(t){if(!t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n){const s=t[n];s>e&&(e=s)}return e}function Dr(t){if(!t.length)return 1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n){const s=t[n];s<e&&(e=s)}return e}var jI=(t,e)=>Math.log(t)/Math.log(e),pm=t=>t<-Math.PI?t+2*Math.PI:t>Math.PI?t-2*Math.PI:t,v5=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const s=e[i],r=t+s,o=Math.abs(t)<Math.abs(s)?t-(r-s):s-(r-t);o&&(e[n++]=o),t=r}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,s=this._n,r=0;if(s>0){for(r=t[--s];s>0&&(e=r,n=t[--s],r=e+n,i=n-(r-e),!i););s>0&&(i<0&&t[s-1]<0||i>0&&t[s-1]>0)&&(n=2*i,e=r+n,n==e-r&&(r=e))}return r}};function*x5(t){for(const e of t)yield*_U(e)}function GI(t){return Array.from(x5(t))}var je=1e-6,b5=1e-12,Ee=Math.PI,ys=Ee/2,Hw=Ee/4,Vs=2*Ee,Lr=180/Ee,Xi=Ee/180,pn=Math.abs,E5=Math.atan,Eu=Math.atan2,en=Math.cos,qe=Math.sin,S5=Math.sign||function(t){return t>0?1:t<0?-1:0},ac=Math.sqrt;function VI(t){return t>1?0:t<-1?Ee:Math.acos(t)}function Su(t){return t>1?ys:t<-1?-ys:Math.asin(t)}function Id(){}function _m(t,e){t&&Xw.hasOwnProperty(t.type)&&Xw[t.type](t,e)}var Ww={Feature:function(t,e){_m(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,s=n.length;++i<s;)_m(n[i].geometry,e)}},Xw={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){cv(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)cv(n[i],e,0)},Polygon:function(t,e){Zw(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)Zw(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,s=n.length;++i<s;)_m(n[i],e)}};function cv(t,e,n){var i,s=-1,r=t.length-n;for(e.lineStart();++s<r;)i=t[s],e.point(i[0],i[1],i[2]);e.lineEnd()}function Zw(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)cv(t[n],e,1);e.polygonEnd()}function w5(t,e){t&&Ww.hasOwnProperty(t.type)?Ww[t.type](t,e):_m(t,e)}function gv(t){return[Eu(t[1],t[0]),Su(t[2])]}function wu(t){var e=t[0],n=t[1],i=en(n);return[i*en(e),i*qe(e),qe(n)]}function ng(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ym(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function J_(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ig(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function fv(t){var e=ac(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function mv(t,e){function n(i,s){return i=t(i,s),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,s){return(i=e.invert(i,s))&&t.invert(i[0],i[1])}),n}function pv(t,e){return pn(t)>Ee&&(t-=Math.round(t/Vs)*Vs),[t,e]}function A5(t,e,n){return(t%=Vs)?e||n?mv(qw(t),Jw(e,n)):qw(t):e||n?Jw(e,n):pv}function Yw(t){return function(e,n){return pn(e+=t)>Ee&&(e-=Math.round(e/Vs)*Vs),[e,n]}}function qw(t){var e=Yw(t);return e.invert=Yw(-t),e}function Jw(t,e){var n=en(t),i=qe(t),s=en(e),r=qe(e);function o(a,l){var d=en(l),h=en(a)*d,c=qe(a)*d,g=qe(l),m=g*n+h*i;return[Eu(c*s-m*r,h*n-g*i),Su(m*s+c*r)]}return o.invert=function(a,l){var d=en(l),h=en(a)*d,c=qe(a)*d,g=qe(l),m=g*s-c*r;return[Eu(c*s+g*r,h*n+m*i),Su(m*n-h*i)]},o}function T5(t,e,n,i,s,r){if(n){var o=en(e),a=qe(e),l=i*n;s==null?(s=e+i*Vs,r=e-l/2):(s=Kw(o,s),r=Kw(o,r),(i>0?s<r:s>r)&&(s+=i*Vs));for(var d,h=s;i>0?h>r:h<r;h-=l)d=gv([o,-a*en(h),-a*qe(h)]),t.point(d[0],d[1])}}function Kw(t,e){(e=wu(e))[0]-=t,fv(e);var n=VI(-e[1]);return((-e[2]<0?-n:n)+Vs-je)%Vs}function HI(){var t,e=[];return{point:function(n,i,s){t.push([n,i,s])},lineStart:function(){e.push(t=[])},lineEnd:Id,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function pf(t,e){return pn(t[0]-e[0])<je&&pn(t[1]-e[1])<je}function sg(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function WI(t,e,n,i,s){var r,o,a=[],l=[];if(t.forEach(function(_){if(!((p=_.length-1)<=0)){var p,v,x=_[0],b=_[p];if(pf(x,b)){if(!x[2]&&!b[2]){for(s.lineStart(),r=0;r<p;++r)s.point((x=_[r])[0],x[1]);return void s.lineEnd()}b[0]+=2*je}a.push(v=new sg(x,_,null,!0)),l.push(v.o=new sg(x,null,v,!1)),a.push(v=new sg(b,_,null,!1)),l.push(v.o=new sg(b,null,v,!0))}}),a.length){for(l.sort(e),Qw(a),Qw(l),r=0,o=l.length;r<o;++r)l[r].e=n=!n;for(var d,h,c=a[0];;){for(var g=c,m=!0;g.v;)if((g=g.n)===c)return;d=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(m)for(r=0,o=d.length;r<o;++r)s.point((h=d[r])[0],h[1]);else i(g.x,g.n.x,1,s);g=g.n}else{if(m)for(d=g.p.z,r=d.length-1;r>=0;--r)s.point((h=d[r])[0],h[1]);else i(g.x,g.p.x,-1,s);g=g.p}d=(g=g.o).z,m=!m}while(!g.v);s.lineEnd()}}}function Qw(t){if(e=t.length){for(var e,n,i=0,s=t[0];++i<e;)s.n=n=t[i],n.p=s,s=n;s.n=n=t[0],n.p=s}}function K_(t){return pn(t[0])<=Ee?t[0]:S5(t[0])*((pn(t[0])+Ee)%Vs-Ee)}function C5(t,e){var n=K_(e),i=e[1],s=qe(i),r=[qe(n),-en(n),0],o=0,a=0,l=new v5;s===1?i=ys+je:s===-1&&(i=-ys-je);for(var d=0,h=t.length;d<h;++d)if(g=(c=t[d]).length)for(var c,g,m=c[g-1],_=K_(m),p=m[1]/2+Hw,v=qe(p),x=en(p),b=0;b<g;++b,_=S,v=T,x=P,m=E){var E=c[b],S=K_(E),A=E[1]/2+Hw,T=qe(A),P=en(A),k=S-_,I=k>=0?1:-1,R=I*k,M=R>Ee,z=v*T;if(l.add(Eu(z*I*qe(R),x*P+z*en(R))),o+=M?k+I*Vs:k,M^_>=n^S>=n){var j=ym(wu(m),wu(E));fv(j);var X=ym(r,j);fv(X);var O=(M^k>=0?-1:1)*Su(X[2]);(i>O||i===O&&(j[0]||j[1]))&&(a+=M^k>=0?1:-1)}}return(o<-je||o<je&&l<-b5)^1&a}function XI(t,e,n,i){return function(s){var r,o,a,l=e(s),d=HI(),h=e(d),c=!1,g={point:m,lineStart:p,lineEnd:v,polygonStart:function(){g.point=x,g.lineStart=b,g.lineEnd=E,o=[],r=[]},polygonEnd:function(){g.point=m,g.lineStart=p,g.lineEnd=v,o=GI(o);var S=C5(r,i);o.length?(c||(s.polygonStart(),c=!0),WI(o,P5,S,n,s)):S&&(c||(s.polygonStart(),c=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),c&&(s.polygonEnd(),c=!1),o=r=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function m(S,A){t(S,A)&&s.point(S,A)}function _(S,A){l.point(S,A)}function p(){g.point=_,l.lineStart()}function v(){g.point=m,l.lineEnd()}function x(S,A){a.push([S,A]),h.point(S,A)}function b(){h.lineStart(),a=[]}function E(){x(a[0][0],a[0][1]),h.lineEnd();var S,A,T,P,k=h.clean(),I=d.result(),R=I.length;if(a.pop(),r.push(a),a=null,R)if(1&k){if((A=(T=I[0]).length-1)>0){for(c||(s.polygonStart(),c=!0),s.lineStart(),S=0;S<A;++S)s.point((P=T[S])[0],P[1]);s.lineEnd()}}else R>1&&2&k&&I.push(I.pop().concat(I.shift())),o.push(I.filter(L5))}return g}}function L5(t){return t.length>1}function P5(t,e){return((t=t.x)[0]<0?t[1]-ys-je:ys-t[1])-((e=e.x)[0]<0?e[1]-ys-je:ys-e[1])}pv.invert=pv;var tA=XI(function(){return!0},k5,M5,[-Ee,-ys]);function k5(t){var e,n=NaN,i=NaN,s=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,o){var a=r>0?Ee:-Ee,l=pn(r-n);pn(l-Ee)<je?(t.point(n,i=(i+o)/2>0?ys:-ys),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(r,i),e=0):s!==a&&l>=Ee&&(pn(n-s)<je&&(n-=s*je),pn(r-a)<je&&(r-=a*je),i=I5(n,i,r,o),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=r,i=o),s=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function I5(t,e,n,i){var s,r,o=qe(t-n);return pn(o)>je?E5((qe(e)*(r=en(i))*qe(n)-qe(i)*(s=en(e))*qe(t))/(s*r*o)):(e+i)/2}function M5(t,e,n,i){var s;if(t==null)s=n*ys,i.point(-Ee,s),i.point(0,s),i.point(Ee,s),i.point(Ee,0),i.point(Ee,-s),i.point(0,-s),i.point(-Ee,-s),i.point(-Ee,0),i.point(-Ee,s);else if(pn(t[0]-e[0])>je){var r=t[0]<e[0]?Ee:-Ee;s=n*r/2,i.point(-r,s),i.point(0,s),i.point(r,s)}else i.point(e[0],e[1])}function N5(t){var e=en(t),n=2*Xi,i=e>0,s=pn(e)>je;function r(l,d){return en(l)*en(d)>e}function o(l,d,h){var c=[1,0,0],g=ym(wu(l),wu(d)),m=ng(g,g),_=g[0],p=m-_*_;if(!p)return!h&&l;var v=e*m/p,x=-e*_/p,b=ym(c,g),E=ig(c,v);J_(E,ig(g,x));var S=b,A=ng(E,S),T=ng(S,S),P=A*A-T*(ng(E,E)-1);if(!(P<0)){var k=ac(P),I=ig(S,(-A-k)/T);if(J_(I,E),I=gv(I),!h)return I;var R,M=l[0],z=d[0],j=l[1],X=d[1];z<M&&(R=M,M=z,z=R);var O=z-M,N=pn(O-Ee)<je;if(!N&&X<j&&(R=j,j=X,X=R),N||O<je?N?j+X>0^I[1]<(pn(I[0]-M)<je?j:X):j<=I[1]&&I[1]<=X:O>Ee^(M<=I[0]&&I[0]<=z)){var W=ig(S,(-A+k)/T);return J_(W,E),[I,gv(W)]}}}function a(l,d){var h=i?t:Ee-t,c=0;return l<-h?c|=1:l>h&&(c|=2),d<-h?c|=4:d>h&&(c|=8),c}return XI(r,function(d){var h,c,g,m,_;return{lineStart:function(){m=g=!1,_=1},point:function(p,v){var x,b=[p,v],E=r(p,v),S=i?E?0:a(p,v):E?a(p+(p<0?Ee:-Ee),v):0;if(!h&&(m=g=E)&&d.lineStart(),E!==g&&(!(x=o(h,b))||pf(h,x)||pf(b,x))&&(b[2]=1),E!==g)_=0,E?(d.lineStart(),x=o(b,h),d.point(x[0],x[1])):(x=o(h,b),d.point(x[0],x[1],2),d.lineEnd()),h=x;else if(s&&h&&i^E){var A;S&c||!(A=o(b,h,!0))||(_=0,i?(d.lineStart(),d.point(A[0][0],A[0][1]),d.point(A[1][0],A[1][1]),d.lineEnd()):(d.point(A[1][0],A[1][1]),d.lineEnd(),d.lineStart(),d.point(A[0][0],A[0][1],3)))}!E||h&&pf(h,b)||d.point(b[0],b[1]),h=b,g=E,c=S},lineEnd:function(){g&&d.lineEnd(),h=null},clean:function(){return _|(m&&g)<<1}}},function(d,h,c,g){T5(g,t,n,c,d,h)},i?[0,-t]:[-Ee,t-Ee])}function R5(t,e,n,i,s,r){var o,a=t[0],l=t[1],d=0,h=1,c=e[0]-a,g=e[1]-l;if(o=n-a,c||!(o>0)){if(o/=c,c<0){if(o<d)return;o<h&&(h=o)}else if(c>0){if(o>h)return;o>d&&(d=o)}if(o=s-a,c||!(o<0)){if(o/=c,c<0){if(o>h)return;o>d&&(d=o)}else if(c>0){if(o<d)return;o<h&&(h=o)}if(o=i-l,g||!(o>0)){if(o/=g,g<0){if(o<d)return;o<h&&(h=o)}else if(g>0){if(o>h)return;o>d&&(d=o)}if(o=r-l,g||!(o<0)){if(o/=g,g<0){if(o>h)return;o>d&&(d=o)}else if(g>0){if(o<d)return;o<h&&(h=o)}return d>0&&(t[0]=a+d*c,t[1]=l+d*g),h<1&&(e[0]=a+h*c,e[1]=l+h*g),!0}}}}}var Md=1e9,rg=-Md;function F5(t,e,n,i){function s(d,h){return t<=d&&d<=n&&e<=h&&h<=i}function r(d,h,c,g){var m=0,_=0;if(d==null||(m=o(d,c))!==(_=o(h,c))||l(d,h)<0^c>0)do g.point(m===0||m===3?t:n,m>1?i:e);while((m=(m+c+4)%4)!==_);else g.point(h[0],h[1])}function o(d,h){return pn(d[0]-t)<je?h>0?0:3:pn(d[0]-n)<je?h>0?2:1:pn(d[1]-e)<je?h>0?1:0:h>0?3:2}function a(d,h){return l(d.x,h.x)}function l(d,h){var c=o(d,1),g=o(h,1);return c!==g?c-g:c===0?h[1]-d[1]:c===1?d[0]-h[0]:c===2?d[1]-h[1]:h[0]-d[0]}return function(d){var h,c,g,m,_,p,v,x,b,E,S,A=d,T=HI(),P={point:k,lineStart:function(){P.point=I,c&&c.push(g=[]),E=!0,b=!1,v=x=NaN},lineEnd:function(){h&&(I(m,_),p&&b&&T.rejoin(),h.push(T.result())),P.point=k,b&&A.lineEnd()},polygonStart:function(){A=T,h=[],c=[],S=!0},polygonEnd:function(){var M=function(){for(var O=0,N=0,W=c.length;N<W;++N)for(var U,K,Z=c[N],rt=1,vt=Z.length,St=Z[0],ut=St[0],_t=St[1];rt<vt;++rt)U=ut,K=_t,ut=(St=Z[rt])[0],_t=St[1],K<=i?_t>i&&(ut-U)*(i-K)>(_t-K)*(t-U)&&++O:_t<=i&&(ut-U)*(i-K)<(_t-K)*(t-U)&&--O;return O}(),z=S&&M,j=(h=GI(h)).length;(z||j)&&(d.polygonStart(),z&&(d.lineStart(),r(null,null,1,d),d.lineEnd()),j&&WI(h,a,M,r,d),d.polygonEnd()),A=d,h=c=g=null}};function k(R,M){s(R,M)&&A.point(R,M)}function I(R,M){var z=s(R,M);if(c&&g.push([R,M]),E)m=R,_=M,p=z,E=!1,z&&(A.lineStart(),A.point(R,M));else if(z&&b)A.point(R,M);else{var j=[v=Math.max(rg,Math.min(Md,v)),x=Math.max(rg,Math.min(Md,x))],X=[R=Math.max(rg,Math.min(Md,R)),M=Math.max(rg,Math.min(Md,M))];R5(j,X,t,e,n,i)?(b||(A.lineStart(),A.point(j[0],j[1])),A.point(X[0],X[1]),z||A.lineEnd(),S=!1):z&&(A.lineStart(),A.point(R,M),S=!1)}v=R,x=M,b=z}return P}}var eA=t=>t,Au=1/0,vm=Au,Oh=-Au,xm=Oh,O5={point:D5,lineStart:Id,lineEnd:Id,polygonStart:Id,polygonEnd:Id,result:function(){var t=[[Au,vm],[Oh,xm]];return Oh=xm=-(vm=Au=1/0),t}};function D5(t,e){t<Au&&(Au=t),t>Oh&&(Oh=t),e<vm&&(vm=e),e>xm&&(xm=e)}var nA=O5;function Zb(t){return function(e){var n=new _v;for(var i in t)n[i]=t[i];return n.stream=e,n}}function _v(){}function Yb(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),w5(n,t.stream(nA)),e(nA.result()),i!=null&&t.clipExtent(i),t}function ZI(t,e,n){return Yb(t,function(i){var s=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(s/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+e[0][0]+(s-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function z5(t,e,n){return ZI(t,[[0,0],e],n)}function B5(t,e,n){return Yb(t,function(i){var s=+e,r=s/(i[1][0]-i[0][0]),o=(s-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];t.scale(150*r).translate([o,a])},n)}function U5(t,e,n){return Yb(t,function(i){var s=+e,r=s/(i[1][1]-i[0][1]),o=-r*i[0][0],a=(s-r*(i[1][1]+i[0][1]))/2;t.scale(150*r).translate([o,a])},n)}_v.prototype={constructor:_v,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var iA=16,$5=en(30*Xi);function sA(t,e){return+e?G5(t,e):j5(t)}function j5(t){return Zb({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function G5(t,e){function n(i,s,r,o,a,l,d,h,c,g,m,_,p,v){var x=d-i,b=h-s,E=x*x+b*b;if(E>4*e&&p--){var S=o+g,A=a+m,T=l+_,P=ac(S*S+A*A+T*T),k=Su(T/=P),I=pn(pn(T)-1)<je||pn(r-c)<je?(r+c)/2:Eu(A,S),R=t(I,k),M=R[0],z=R[1],j=M-i,X=z-s,O=b*j-x*X;(O*O/E>e||pn((x*j+b*X)/E-.5)>.3||o*g+a*m+l*_<$5)&&(n(i,s,r,o,a,l,M,z,I,S/=P,A/=P,T,p,v),v.point(M,z),n(M,z,I,S,A,T,d,h,c,g,m,_,p,v))}}return function(i){var s,r,o,a,l,d,h,c,g,m,_,p,v={point:x,lineStart:b,lineEnd:S,polygonStart:function(){i.polygonStart(),v.lineStart=A},polygonEnd:function(){i.polygonEnd(),v.lineStart=b}};function x(k,I){k=t(k,I),i.point(k[0],k[1])}function b(){c=NaN,v.point=E,i.lineStart()}function E(k,I){var R=wu([k,I]),M=t(k,I);n(c,g,h,m,_,p,c=M[0],g=M[1],h=k,m=R[0],_=R[1],p=R[2],iA,i),i.point(c,g)}function S(){v.point=x,i.lineEnd()}function A(){b(),v.point=T,v.lineEnd=P}function T(k,I){E(s=k,I),r=c,o=g,a=m,l=_,d=p,v.point=E}function P(){n(c,g,h,m,_,p,r,o,s,a,l,d,iA,i),v.lineEnd=S,S()}return v}}var V5=Zb({point:function(t,e){this.stream.point(t*Xi,e*Xi)}});function H5(t){return Zb({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function W5(t,e,n,i,s){function r(o,a){return[e+t*(o*=i),n-t*(a*=s)]}return r.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*s]},r}function rA(t,e,n,i,s,r){if(!r)return W5(t,e,n,i,s);var o=en(r),a=qe(r),l=o*t,d=a*t,h=o/t,c=a/t,g=(a*n-o*e)/t,m=(a*e+o*n)/t;function _(p,v){return[l*(p*=i)-d*(v*=s)+e,n-d*p-l*v]}return _.invert=function(p,v){return[i*(h*p-c*v+g),s*(m-c*p-h*v)]},_}function X5(t){return Z5(function(){return t})()}function Z5(t){var e,n,i,s,r,o,a,l,d,h,c=150,g=480,m=250,_=0,p=0,v=0,x=0,b=0,E=0,S=1,A=1,T=null,P=tA,k=null,I=eA,R=.5;function M(O){return l(O[0]*Xi,O[1]*Xi)}function z(O){return(O=l.invert(O[0],O[1]))&&[O[0]*Lr,O[1]*Lr]}function j(){var O=rA(c,0,0,S,A,E).apply(null,e(_,p)),N=rA(c,g-O[0],m-O[1],S,A,E);return n=A5(v,x,b),a=mv(e,N),l=mv(n,a),o=sA(a,R),X()}function X(){return d=h=null,M}return M.stream=function(O){return d&&h===O?d:d=V5(H5(n)(P(o(I(h=O)))))},M.preclip=function(O){return arguments.length?(P=O,T=void 0,X()):P},M.postclip=function(O){return arguments.length?(I=O,k=i=s=r=null,X()):I},M.clipAngle=function(O){return arguments.length?(P=+O?N5(T=O*Xi):(T=null,tA),X()):T*Lr},M.clipExtent=function(O){return arguments.length?(I=O==null?(k=i=s=r=null,eA):F5(k=+O[0][0],i=+O[0][1],s=+O[1][0],r=+O[1][1]),X()):k==null?null:[[k,i],[s,r]]},M.scale=function(O){return arguments.length?(c=+O,j()):c},M.translate=function(O){return arguments.length?(g=+O[0],m=+O[1],j()):[g,m]},M.center=function(O){return arguments.length?(_=O[0]%360*Xi,p=O[1]%360*Xi,j()):[_*Lr,p*Lr]},M.rotate=function(O){return arguments.length?(v=O[0]%360*Xi,x=O[1]%360*Xi,b=O.length>2?O[2]%360*Xi:0,j()):[v*Lr,x*Lr,b*Lr]},M.angle=function(O){return arguments.length?(E=O%360*Xi,j()):E*Lr},M.reflectX=function(O){return arguments.length?(S=O?-1:1,j()):S<0},M.reflectY=function(O){return arguments.length?(A=O?-1:1,j()):A<0},M.precision=function(O){return arguments.length?(o=sA(a,R=O*O),X()):ac(R)},M.fitExtent=function(O,N){return ZI(M,O,N)},M.fitSize=function(O,N){return z5(M,O,N)},M.fitWidth=function(O,N){return B5(M,O,N)},M.fitHeight=function(O,N){return U5(M,O,N)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&z,j()}}function Y5(t){return function(e,n){var i=en(e),s=en(n),r=t(i*s);return r===1/0?[2,0]:[r*s*qe(e),r*qe(n)]}}function q5(t){return function(e,n){var i=ac(e*e+n*n),s=t(i),r=qe(s),o=en(s);return[Eu(e*r,i*o),Su(i&&n*r/i)]}}var YI=Y5(function(t){return(t=VI(t))&&t/qe(t)});function J5(){return X5(YI).scale(79.4188).clipAngle(179.999)}function oA(t,e){t&&e!==void 0&&isFinite(e)&&t.setOpacity&&t.setOpacity(e)}function aA(){return qo||typeof global<"u"&&!global.process}function Q_(t){return Math.log2(t)+mm}function K5(t){return 2**(t-mm)}function lA(t){return t!=null&&!isNaN(t)}function qI(t,e){return KI(t,e,"longitude")}function JI(t,e){return KI(t,e,"latitude")}function KI(t,e,n){if(isNaN(e))throw new TypeError(`node ${t}: ${e} is not a valid ${n}`)}YI.invert=q5(function(t){return t});var Q5=t=>Math.pow(2,Math.ceil(Math.log2(t)));function tj(t,e){return e==null&&t.url===Aa.tiles.url?_5:null}function ej(t={},e){const{tileUrlSubdomains:n,tileUrlTemplate:i,attribution:s,attributionOptions:r,latitudePath:o,longitudePath:a,sizeRatio:l,tiles:d}=t;if(i!=null&&typeof i!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a URL string");if(n!=null&&typeof n!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a string");if(d!=null){if(!(An(d)||d instanceof e.Layer))throw new TypeError("Geo mode: tiles must be a object or L.Layer instance");const h=d;if(h.url!=null&&typeof h.url!="string")throw new TypeError("Geo mode: tiles.url must be a string");if(h.subdomains!=null&&typeof h.subdomains!="string")throw new TypeError("Geo mode: tiles.subdomains must be a string");if(h.tms&&typeof h.tms!="boolean")throw new TypeError("Geo mode: tiles.tms must be a boolean");if(h.wms&&typeof h.wms!="boolean")throw new TypeError("Geo mode: tiles.wms must be a boolean")}if(s!=null&&typeof s!="string")throw new TypeError("Geo mode: Map attribution must be a string");if(r!=null&&!An(r))throw new TypeError("Geo mode: attributionOptions must to be a BrandOptions object");if(o!=null&&typeof o!="string"&&!Array.isArray(o))throw new TypeError("Geo mode: Latitude path must be a valid property path: a string or an array of strings.");if(a!=null&&typeof a!="string"&&!Array.isArray(a))throw new TypeError("Geo mode: Longitude path must be a valid property path: a string or an array of strings.");if(l!=null&&(!isFinite(l)||l<=0))throw new TypeError("Geo mode: sizeRatio must be a positive number.")}function nj(t,e={}){if(e.tiles===void 0||e.tileUrlTemplate||e.tileUrlSubdomains){const n=Aa.tiles;return wt(wt(wt({},e.tiles||{}),Aa.tiles),{url:e.tileUrlTemplate||n.url,subdomains:e.tileUrlSubdomains||n.subdomains})}return An(e.tiles)?wt(wt({},t.tiles),e.tiles):e.tiles}function ij(t,e){return t.attribution!==e.attribution||t.tiles!==e.tiles}var sj=qr().createElement("div");function rj(t){const e=qr().createElement("div");e.className="ogma-geo-container",qa(e,"100%","100%");const n=t||sj;return n.insertBefore(e,n.firstChild),e}function oj(t){const e=[[1/0,1/0],[-1/0,-1/0]];return t.getGeoCoordinates().reduce((n,{latitude:i,longitude:s})=>{const[r,o]=n;return r[0]=Math.min(r[0],i),r[1]=Math.min(r[1],s),o[0]=Math.max(o[0],i),o[1]=Math.max(o[1],s),n},e)}function aj(t,e,n,i){const s=e._indexes;t.getNodeAttribute(ar).setMultiple(s,n),t.getNodeAttribute(lr).setMultiple(s,i)}function lj(t,e,n){const{longitudePath:i,latitudePath:s,wrapCoordinates:r}=n,[o,a]=t.getAttributes(!0,[ar,lr]),l=e._indexes,d=e.getId(),h=l.length,c=e.getData(s),g=e.getData(i);for(let m=0;m<h;m++){let _=g[m],p=c[m];const v=l[m],x=d[m];p!=null&&_!=null&&(qI(x,_),JI(x,p),r&&(_%=180,p=ws(+p,-dv,dv)),a.set(v,_),o.set(v,p))}}function uj(t,{longitudePath:e,latitudePath:n,wrapCoordinates:i},s){const r=t.getData(e),o=t.getData(n);return r!=null&&o!=null&&(!(!i&&!s)||Math.abs(o)<=dv&&Math.abs(r)<=180)}function og(t,e,n,i){dj(t,!0,e,n,i)}function dj(t,e,n,i,s){const r=t.getAttribute(e,i),o=t.getAttribute(e,s),a=n._indexes;o.setMultiple(a,r.getMultiple(a))}function hj(t){return t.reduce((e,{nodes:n,newValues:i})=>{if(!n)return e;const s=n.filter((r,o)=>i[o]!=null);return e?e.concat(s):s},null)}function cj(t,e){return t.getAttributes(["text.minVisibleSize","text.size","text.scale","radius"]).forEach(({text:n,radius:i},s)=>{e[t.get(s).getId()]={"text.minVisibleSize":n.minVisibleSize,"text.size":n.size,"text.scale":n.scale,minVisibleSize:n.minVisibleSize,size:Math.max(1,Number(i))}}),e}function uA(t,e){return t.getAttributes(["text.minVisibleSize","text.size","text.scale","minVisibleSize","width"]).forEach(({text:n,minVisibleSize:i,width:s},r)=>{e[t.get(r).getId()]={"text.minVisibleSize":n.minVisibleSize,"text.size":n.size,"text.scale":n.scale,minVisibleSize:i,size:Math.max(1,Number(s))}}),e}function gj(t,e,n){if(!e||!Object.keys(e).length)return Promise.resolve();const i=t.getId().filter(s=>e[s]).map(s=>{if(!e[s])return 0;const r=Number(e[s]["text.minVisibleSize"]),o=Number(e[s].minVisibleSize),a=Number(e[s]["text.size"]),l=Number(e[s]["text.scale"]),d=Number(e[s].size)*l*n;return d<=o||d<=r?0:a});return t.setAttribute("text.size",i)}function fj(t,e){const n=t.getId().map(i=>{const s=e[i]||{};return Number(s["text.size"])});return t.setAttribute("text.size",n)}var mj=t=>J5().rotate([-t.longitude,-t.latitude]).scale(p5),dA=new Uint32Array(1),fr=class{constructor(t,e){this.size=1,this.isNode=!0,this.isList=!1,this._index=t,this._ogma=e}get _indexes(){return dA[0]=this._index,dA}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this._ogma.modules.camera.graphToScreenCoordinates(this.getPosition())}isInScreen(){const t=this.getPositionOnScreen(),e=this._ogma.modules.camera;return t.x>=0&&t.x<=e.width&&t.y>=0&&t.y<=e.height}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}isInView(t){return this._ogma.modules.locate.isElementInView(this,t)}getAdjacentNodes(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)}getAdjacentEdges(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)}getAdjacentElements(t){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,t).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,t).dedupe()}}getDegree(t){return this._ogma.modules.graph.getDegree(this,t)[0]}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}getConnectedComponent(t){return this._ogma.modules.graph.getConnectedComponentByNode(this,t)[0]}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this._ogma.nodeList(new Uint32Array([+this._index]))}getId(){return wp(this._ogma.modules.graph,this)}slice(){return this.toList()}toJSON(t={}){const{attributes:e,data:n}=$I(t),i=this.getAttributes(e);return{id:this.getId(),attributes:i,data:n(nn(this.getData()))}}get(t){return t===0?this:void 0}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t)}setData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)[0]}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getGeoCoordinates(){const t=this._ogma.modules.graph,e=t.getNodeAttribute(ar).get(this._index),n=t.getNodeAttribute(lr).get(this._index);return{latitude:lA(e)?e:void 0,longitude:lA(n)?n:void 0}}setGeoCoordinates(t){return this.toList().setGeoCoordinates([t]).then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNode(this)}getSubNodes(){return this._ogma.modules.transformations.getSubNodes(this)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Ap([fr],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var to=class{constructor(t,e){this.isList=!0,this.isNode=!0,this._indexes=t,this._ogma=e}get size(){return this._indexes.length}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this.getPosition().map(t=>this._ogma.modules.camera.graphToScreenCoordinates(t))}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}getAdjacentNodes(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)}getAdjacentEdges(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)}getAdjacentElements(t){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,t).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,t).dedupe()}}getDegree(t){return this._ogma.modules.graph.getDegree(this,t)}getConnectedComponents(t){return this._ogma.modules.graph.getConnectedComponents(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}isVisible(){return this.isExcluded().map(t=>!t)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(t=>this._ogma.modules.transformations.isElementVirtual(t))}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this}toArray(){return OI(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.nodeList(this._indexes.slice())}getId(){return wp(this._ogma.modules.graph,this)}get(t){return BI(this._ogma.modules.graph,this,t)}forEach(t){CI(this._ogma.modules.graph,this,t)}map(t){return LI(this._ogma.modules.graph,this,t)}[Symbol.iterator](){let t=-1;return{next:()=>({value:this.get(++t),done:t>=this.size})}}filter(t){return PI(this._ogma.modules.graph,this,t)}reduce(t,e){return II(this._ogma.modules.graph,this,t,e)}concat(t){return FI(this._ogma.modules.graph,this,t)}dedupe(){return MI(this._ogma.modules.graph,this)}subtract(t){return NI(this,t,this._ogma.modules.graph)}slice(t,e){return this._ogma.modules.graph.nodeList(this._indexes.slice(t,e))}indexOf(t){return t instanceof fr?this._indexes.indexOf(t._index):-1}includes(t){return this.indexOf(t)!==-1}inverse(){return RI(this._ogma.modules.graph,this)}sort(t){return UI(this._ogma.modules.graph,this,t)}toJSON(t={}){return this.map(e=>e.toJSON(t))}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t)}setData(t,e){if(arguments.length<2&&(e=t,t=null),typeof e!="function"&&!Qn(e))throw new Error(`invalid argument ${e}; expected array or function`);return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this}fillData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this.map(e=>this._ogma.modules.classes.hasSingleElementClass(t,e))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getGeoCoordinates(){const t=this._ogma.modules.graph,e=new Array(this._indexes.length),n=t.getNodeAttribute(ar).getMultiple(this._indexes),i=t.getNodeAttribute(lr).getMultiple(this._indexes);for(let s=0,r=this._indexes.length;s<r;s++)e[s]={latitude:n[s],longitude:i[s]};return e}setGeoCoordinates(t){const e=this._ogma.modules.geo,n=this.getId(),i=this._indexes,s=new Array(i.length),r=new Array(i.length);if(t===null&&(t=new Array(i.length).fill(null)),t.length!==i.length)throw new RangeError("You must provide coordinates for each node in the NodeList");for(let l=0,d=i.length;l<d;l++){let{latitude:h,longitude:c}=t[l]||{latitude:void 0,longitude:void 0};const g=n[l];h==null&&c==null?h=c=void 0:(JI(g,h),qI(g,c)),s[l]=h,r[l]=c}this.setData(e.latitudePath,s),this.setData(e.longitudePath,r);const{dom:o,graph:a}=this._ogma.modules;return aj(a,this,s,r),this._ogma.modules.geo.isEnabled()?o.afterNextFrame().then(()=>o.afterNextFrame()).then(()=>this):o.afterNextFrame().then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNodes(this)}getSubNodes(){return this.map(this._ogma.modules.transformations.getSubNodes)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};function bm(t,e,n={},i={}){return Dh(t,e,[n],i).get(0)}function pj(t,{nodes:e=[],edges:n=[]},i={}){if(t.fireEvent("preAddGraph",{name:"preAddGraph"}),!i.batchSize)return Promise.all([Dh(t,!0,e,i),Dh(t,!1,n,i)]).then(([r,o])=>(t.fireEvent("postAddGraph",{name:"postAddGraph"}),t.fireEvent("addGraph",{nodes:r,edges:o}),{nodes:r,edges:o}));let s;return Tu(t,!0,e,i).then(r=>(s=r,Tu(t,!1,n,i))).then(r=>({nodes:s,edges:r})).then(r=>(t.fireEvent("postAddGraph",{name:"postAddGraph"}),t.fireEvent("addGraph",{name:"addGraph"}),r))}function Tu(t,e,n,i={}){if(i.batchSize){const s=[];for(let a=0;a<n.length;a+=i.batchSize)s.push(n.slice(a,a+i.batchSize));const r=(a,l)=>{let d;return a.then(h=>(d=h,t.getDom().afterNextFrame())).then(()=>Dh(t,e,l,i)).then(h=>d.concat(h))},o=e?t.nodeList():t.edgeList();return s.reduce(r,Promise.resolve(o))}return Promise.resolve(Dh(t,e,n,i))}function Dh(t,e,n,i){const{virtual:s=!1}=i;t.fireEvent("preAddElements",{name:"preAddElements",objects:n,virtual:s,isNode:e});const r=!!i.ignoreInvalid,o=t.storage.fetch(e),a=[],l=[],d=[],h=[],c=new Set;for(const A of n){if(typeof A!="object"||A===null||Array.isArray(A)){if(r)continue;throw new Error(`${A} is not a valid ${e?"node":"edge"}`)}const T=m5(A.id);if(!o.getIndex(T,!1)&&!c.has(T)){if(!e){const P=A,k=t.getExtremityIndex(T,P.source,0,r),I=t.getExtremityIndex(T,P.target,1,r);if(r&&(!k||!I))continue;d.push(k),h.push(I)}l.push(T),a.push(A),c.add(T)}}const g=o.addElements(l);e?t.topology.allocateNodes(g):t.topology.allocateEdges(g,d,h);const m=o.getFlexArray("object"),_=o.getFlexArray("excluded"),p=o.getFlexArray("removed"),v=o.getFlexArray("virtual"),x=e?t.node:t.edge,b=e?t.nodeList:t.edgeList,E=t.getCacheLists(e),S=b(g);for(let A=0;A<g.length;A++){const T=g[A];m.set(T,x(T))}return _.setMultiple(g,0),p.setMultiple(g,0),v.setMultiple(g,s?1:0),E.visible.invalidList(),E.all.invalidList(),E._all.invalidList(),s||E.raw.invalidList(),S.size!==0&&(e?t.fireEvent("addNodes",{virtual:s,objects:a,nodes:S}):t.fireEvent("addEdges",{virtual:s,objects:a,edges:S})),S}function _j(t,e,n){return lc(t,!0,[e],n)}function yj(t,e,n){return lc(t,!1,[e],n)}function vj(t,e,n){return lc(t,!0,e,n)}function xj(t,e,n){return lc(t,!1,e,n)}function lc(t,e,n,i={}){Array.isArray(n)||n instanceof(e?to:tl)||(n=[n]);const{virtual:s=!1}=i,r={elementsToRemove:t.getElements(e,n)};t.fireEvent("requestElementsToDelete",r);let{elementsToRemove:o}=r;if(!o.size)return Promise.resolve();o=o.dedupe();const a=t.storage.fetch(e),l=a.getFlexArray("removed");o=o.filter(g=>l.get(g._index)===0),e&&lc(t,!1,o.getAdjacentEdges({filter:"all"}),i);const d=o._indexes,h=t.getCacheLists(e),c={virtual:s,[e?"nodes":"edges"]:o};if(t.fireEvent(e?"beforeRemoveNodes":"beforeRemoveEdges",c),h.visible.invalidList(),h.all.invalidList(),h.raw.invalidList(),t.setExcluded(o,!0),l.setMultiple(d,1),!e)for(let g=0;g<d.length;++g)t.topology.removeFromAdjacencyList(d[g]);return a.removeElements(d),t.fireEvent(e?"removeNodes":"removeEdges",c),t.fireEvent(e?"afterRemoveNodes":"afterRemoveEdges",c),Promise.resolve()}Ap([to],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var bj=class{addNodes(t,e){return Tu(this.modules.graph,!0,t,e)}addEdges(t,e){return Tu(this.modules.graph,!1,t,e)}addNode(t,e){return bm(this.modules.graph,!0,t,e)}addEdge(t,e){return bm(this.modules.graph,!1,t,e)}removeNodes(t,e){return vj(this.modules.graph,t,e)}removeEdges(t,e){return xj(this.modules.graph,t,e)}removeNode(t,e){return _j(this.modules.graph,t,e)}removeEdge(t,e){return yj(this.modules.graph,t,e)}getNodes(t){return this.modules.graph.getNodes(t)}getEdges(t){return this.modules.graph.getEdges(t)}getNode(t){return this.modules.graph.getNode(t)}getEdge(t){return this.modules.graph.getEdge(t)}clearGraph(){this.modules.graph.clear()}setGraph(t,e){return this.modules.graph.clear(),this.addGraph(t,e)}addGraph(t,e){const n=this.modules.graph.getNodes().size===0,i=pj(this.modules.graph,t,e);return n?this.modules.locate.locateGraph({padding:30,ignoreZoomLimits:!0,duration:0}).then(()=>i):i}createNodeList(){return this.getNodes([])}createEdgeList(){return this.getEdges([])}getConnectedComponents(t={}){return this.modules.graph.getConnectedComponents(this.getNodes(t.filter),t)}getConnectedComponentByNode(t,e){const n=this.modules.graph.getNode(t);if(n===void 0)throw new Error(`getComponentByNode: cannot find node ${t}`);return this.modules.graph.getConnectedComponentByNode(n,e)[0]}},po=()=>(t,e)=>t[e],_o=()=>(t,e,n)=>{t[e]=n},hA={1:ty(1),2:ty(2),4:ty(4),8:po(),16:po(),32:po(),int8:po(),int16:po(),int32:po(),float:po(),any:po()},cA={1:ey(1),2:ey(2),4:ey(4),8:_o(),16:_o(),32:_o(),int8:_o(),int16:_o(),int32:_o(),float:_o(),any:_o()};function ty(t){const e=8/t,n=(1<<t)-1;return(i,s)=>i[s/e|0]>>s%e*t&n}function ey(t){const e=8/t,n=Math.pow(2,t)-1;return(i,s,r)=>{const o=s%e*t,a=s/e|0,l=r<<o,d=255-(n-r<<o);i[a]=i[a]&d|l}}function Ej(t,e){return t===void 0&&e!=="any"&&e!=="resource"?0:t}var Sj={get(t){return this._getArrayElt(this._buffer,t)},set(t,e){this._setArrayElt(this._buffer,t,e)}},wj={get(t){return this._byIndex[this._getArrayElt(this._buffer,t)]},set(t,e){let n=this._byName[e];n===void 0&&(n=this._nextIndex++,this._byIndex.push(e),this._getElementBitSize()>this._elementSize&&this.increaseElementSize(),this._byName[e]=n),this._setArrayElt(this._buffer,t,n)}},Aj=0,Em=class{constructor(t){this._id=Aj++,this._initialized=!1;const e=t.name,n=t.storage,i=t.size||0,s=Ej(t.default,n),r=Math.max(8,gA(i+1)),o=n==="resource"?1:n;this._name=e,this._storage=n,this._getArrayElt=hA[o],this._setArrayElt=cA[o],this._elementSize=o,this._nbElements=r,this._fallback=null,this._byName=void 0,this._byIndex=void 0,this._nextIndex=void 0,this._defaultValue=s,this._BASE_VALUE=n==="any"?void 0:0,this._methods=Sj,this._initialized=!1,this._buffer=null,n==="resource"&&(this._methods=wj,this._byName=Object.create(null),this._byIndex=[],this._nextIndex=1,this._byName[s]=0,this._byIndex.push(s))}getValues(){return Object.keys(this._byName||{})}getName(){return this._name||""}setDefaultValue(t){this._defaultValue=t,this._storage==="resource"&&(this._byName[t]=0,this._byIndex[0]=t)}get(t){return this._get(t)}set(t,e){this._set(t,e)}_get(t){return this._defaultValue}_set(t,e){e!==this._defaultValue&&(this._initialize(),this._set(t,e))}setFallback(t){this._fallback=t,this.get=this._getWithFallback}_getWithFallback(t){const e=this._get(t);return e===void 0&&this._fallback?this._fallback.get(t):e}_initialize(){this._initialized=!0,this._buffer=ny(this._nbElements,this._elementSize),this._get=this._methods.get,this._set=this._methods.set,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(0)}grow(t){const e=gA(t+1);if(!(e<=this._nbElements)){if(this._initialized)if(this._elementSize==="any")for(let n=this._nbElements;n<e;++n)this._buffer.push(this._defaultValue);else{const n=ny(e,this._elementSize);n.set(this._buffer),this._buffer=n,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(this._nbElements)}this._nbElements=e}}increaseElementSize(){const t=this._elementSize;if(typeof t!="number"||t===32)throw new Error("FlexArray: cannot increase element size");const e=2*t,n=hA[e],i=cA[e];if(this._initialized){const s=this._nbElements,r=this._getArrayElt,o=this._buffer,a=ny(s,e);if(t>=8)a.set(o);else for(let l=0;l<s;++l)i(a,l,r(o,l));this._buffer=a}this._elementSize=e,this._getArrayElt=n,this._setArrayElt=i}buffer(){if(!this._buffer)throw new Error("FlexArray: buffer not instantiated");return this._buffer}elementBitSize(){return this._elementSize}capacity(){return this._nbElements}byteSize(){return this._nbElements*this._elementSize/8}isInitialized(){return this._initialized||this._fallback&&this._fallback.isInitialized()}getMultiple(t,e){const n=t.length;e===void 0&&(e=new Array(n));for(let i=0,s=n;i<s;++i)e[i]=this.get(t[i]);return e}fill(t,e){for(let n=0,i=t.length;n<i;++n)this.set(t[n],e)}setMultiple(t,e,n){if(n||!Array.isArray(e)&&!ArrayBuffer.isView(e))for(let i=0,s=t.length;i<s;++i)this.set(t[i],e);else for(let i=0,s=t.length;i<s;++i)this.set(t[i],e[i])}reset(){return this._initialized&&this._reset(0),this}_reset(t){const e=this._storage==="resource"?0:this._defaultValue;if(this._buffer)if(typeof this._elementSize!="number"||this._elementSize>=8)this._buffer.fill(e,t);else{const n=8/this._elementSize;let i=0;for(let s=0;s<n;++s)i<<=this._elementSize,i+=e;if(t===void 0)this._buffer.fill(i);else{const s=t+(8-t%8);for(let r=t;r<s;++r)this._setArrayElt(this._buffer,r,e);this._buffer.fill(i,s/8)}}}_getElementBitSize(){if(this._nextIndex)return Math.pow(2,Math.ceil(Math.log2(Math.log2(this._nextIndex))))}};function gA(t){let e=2;for(;e<t;)e*=2;return e}function ny(t,e){return e==="any"?new Array(t):e==="float"?new Float32Array(t):e==="int8"?new Int8Array(t):e==="int16"?new Int16Array(t):e==="int32"?new Int32Array(t):e===32?new Uint32Array(t):e===16?new Uint16Array(t):new Uint8Array(Math.ceil(t/8*e))}var fA=4,QI=class{constructor(){this._buffer=new Uint32Array(fA),this._capacity=fA,this._size=0,this._busy=!1}isBusy(){return this._busy}markBusy(){return this._busy=!0,this}sliceAndReset(){this._busy=!1;const t=this.slice(0,this._size);return this.reset(),t}reset(){return this._size=0,this}reserve(t){return t>this._capacity&&this._setCapacity(Io(t)),this}_setCapacity(t){const e=new Uint32Array(t);e.set(this._buffer),this._buffer=e,this._capacity=t}push(t){return this._size===this._capacity&&this._setCapacity(2*this._capacity),this._buffer[this._size++]=t,this}pushUnchecked(t){return this._buffer[this._size++]=t,this}slice(t=0,e=this._size){return this._buffer.slice(t,e)}getBuffer(){return this._buffer}getLength(){return this._size}getCapacity(){return this._capacity}setLength(t){return this._size=t,this}isEmpty(){return this._size===0}},mA=class{constructor(t){this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._flexArrays=[],this._defaultValues=[],this._flexArraysByName={},this._indexLists=[],this._name=t?"node":"edge",this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._idFlexArray=new Em({storage:"int32"}),this._idFlexArray.get=e=>this._indexToId[e],this._idFlexArray.getMultiple=e=>{const n=new Array(e.length);for(let i=0;i<e.length;++i)n[i]=this._indexToId[e[i]];return n},this._flexArraysByName.id=this._idFlexArray}addElements(t){const e=[];for(let n=0,i=t.length;n<i;++n){const s=t[n];let r=this._idToIndex[s];r===void 0&&(r=this._getNextIndex(),this._idToIndex[s]=r,this._indexToId[r]=s),e.push(r)}for(const n of this._flexArrays)n.grow(this._nextIndex);for(const n of this._indexLists)n.reserve(this._nextIndex);return new Uint32Array(e)}removeElements(t){for(let e=0,n=t.length;e<n;++e){const i=t[e],s=this._indexToId[i];s!==void 0&&(delete this._idToIndex[s],this._removeIndex(i))}}clear(){this._idToIndex=Object.create(null),this._indexToId=[void 0],this._nextIndex=1,this._freeIndexes=[];for(const t of this._flexArrays)t.reset();for(const t of this._indexLists)t.reset()}has(t){return this._indexToId[t]!==void 0}getIndex(t,e=!1){const n=this._idToIndex[t];if(n===void 0&&e)throw new Error(`${this._name} id "${t}" not found`);return n}createFlexArray(t,e){const{name:n}=t;if(n&&e&&this._flexArraysByName[n])throw new Error(`${this._name} flexArray "${n}" already exists`);let i=t.default;i===void 0&&t.storage!=="any"&&t.storage!=="resource"&&(i=0);const s=this._nextIndex,r={storage:t.storage,size:s,name:n,default:i};let o;return o=(i===void 0&&t.storage!=="any"&&t.storage,new Em(r)),this._flexArrays.push(o),this._defaultValues.push(t.default),n&&e&&(this._flexArraysByName[n]=o),o}getFlexArray(t){return this._flexArraysByName[t]}getAllFlexArrays(){return this._flexArraysByName}createIndexList(){const t=new QI;return t.reserve(this._nextIndex),this._indexLists.push(t),t}getId(t){return this._indexToId[t]}getMaxIndex(){return this._nextIndex-1}_removeIndex(t){this._indexesToBeFreed.push(t)}_getNextIndex(){let t=this._freeIndexes.pop();return t===void 0&&(t=this._nextIndex++),t}freeIndexes(){for(const t of this._indexesToBeFreed)this._indexToId[t]=void 0,this._freeIndexes.push(t);for(let t=0;t<this._flexArrays.length;++t){const e=this._flexArrays[t],n=this._defaultValues[t];for(const i of this._indexesToBeFreed)e.set(i,n)}this._indexesToBeFreed=[]}},pA=(t,e)=>(t+e)*(t+e+1)/2+e;function hd(t,e){const n=t<e?t:e;return 67108864*n+(t+e-n)}var Tj=8,yv=class{constructor(){this._BIG_LIST=255,this._MAX_LIST_SIZE=8,this._capacity=Tj,this._buffer=new Uint32Array(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(t){return t===void 0&&(t=this._nextIndex++),t>=this._capacity&&this._reserve(t+1),this._sizes[t]=0,t}get(t){const e=this._sizes[t],n=this._MAX_LIST_SIZE*t;if(e<=this._MAX_LIST_SIZE){this._constList.length=e;for(let i=0,s=e;i<s;++i)this._constList[i]=this._buffer[n+i];return this._constList}if(e===this._BIG_LIST){const i=this._buffer[n];return this._bigLists[i]}throw new Error(`Table: ${t} out of bounds (${e})`)}size(t){const e=this._sizes[t];return e<=this._MAX_LIST_SIZE?e:this._bigLists[this._buffer[t*this._MAX_LIST_SIZE]].length}sizes(t){const e=this._sizes,n=this._bigLists,i=this._buffer,s=this._MAX_LIST_SIZE,r=t.length,o=new Array(r);for(let a=0;a<r;a++){const l=t[a],d=e[l];o[a]=d<=s?d:n[i[l*s]].length}return o}addTo(t,e){const n=this._sizes[t],i=t*this._MAX_LIST_SIZE;if(n<this._MAX_LIST_SIZE)this._buffer[i+n]=e,this._sizes[t]=n+1;else if(n===this._BIG_LIST){const s=this._buffer[i];this._bigLists[s].push(e)}else{const s=new Array(this._MAX_LIST_SIZE);for(let r=0;r<this._MAX_LIST_SIZE;++r)s[r]=this._buffer[i+r];s.push(e),this._bigLists.push(s),this._sizes[t]=this._BIG_LIST,this._buffer[i]=this._bigLists.length-1}return this}removeFrom(t,e){return this.removeFromAndGetSize(t,e),this}removeFromAndGetSize(t,e){const n=this._MAX_LIST_SIZE*t;let i=this._sizes[t];if(i<=this._MAX_LIST_SIZE){for(let s=n,r=n+i;s<r;++s)if(this._buffer[s]===e)return i-=1,this._buffer[s]=this._buffer[r-1],this._sizes[t]=i,i}else if(i===this._BIG_LIST){const s=this._buffer[n],r=this._bigLists[s],o=r.indexOf(e);if(o!==-1)return r.splice(o,1),r.length}throw new Error('topology: Table: "removeFrom" failed, should not happen')}reserve(t){return this._capacity<t&&this._reserve(t),this}_reserve(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=_A(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=_A(this._sizes,this._capacity)}};function _A(t,e){const n=new t.constructor(e);return n.set(t),n}var Cj=1,Lj=2,Pj=3,kj=4,Ij=5,Mj=6,vv="_visible",xv="_data",sh="_hovered",bv="_hoverExtremityHighlighted",Xe="_selected",Ev="_selectionExtremityHighlighted",_f="_dragged",tM="_rewirable",Ta="_export",eM="_faded",nM="_transparent",Nj="_visual_groups",uc=-1,ag="in",lg="out",iy="both",yA=[Xe,_f,Ev,sh,bv,tM,Ta,eM,nM,Nj],iM=2,sM=3,Rj=3,Fj=4,rM=-1,Oj=["hover","zoom","panning","rotation","gesture","drag","selection","tooltip","user","interactions","resizing","rewiring","connectNodes","lasso"],El=void 0,Dj=class{constructor(t){this._neighborTable=new yv,this._parallelTable=new yv,this._parallelEdgesIndex=[],this._hasParallelEdges=new Set,this._fakeDeduper={get:()=>0,set:he,reset(){return this}},this._fakeInvertedDeduper={get:()=>1,set:he,reset(){return this}},this._graph=t,this.nodeDeduper=t.createNodeAttribute({storage:1},!1),this.edgeDeduper=t.createEdgeAttribute({storage:1},!1),this._sourceList=t.getEdgeAttribute("source"),this._targetList=t.getEdgeAttribute("target")}getAdjacentDirections(t){return this._neighborTable.get(t)}getEdgeIndexesInDirection(t){return this._parallelTable.get(t)}allocateNodes(t){this._neighborTable.reserve(t.length);for(let e=0;e<t.length;++e)this._neighborTable.addEntry(t[e])}allocateEdges(t,e,n){this._parallelTable.reserve(Math.floor(t.length/2));for(let i=0;i<t.length;i++){const s=t[i],r=e[i],o=n[i];this._sourceList.set(s,r),this._targetList.set(s,o),this.addToAdjacencyList(s)}}getExtremity(t,e){const n=t?this._sourceList:this._targetList;if(e.isList){const i=this._graph.acquireIndexList(!0);for(let s=0;s<e._indexes.length;s++)i.push(n.get(e._indexes[s]));return this._graph.nodeList(i.sliceAndReset())}return this._graph.getObjectList(!0).get(n.get(e._index))}setExtremities(t,e,n){for(let i=0;i<t.length;++i)this.removeFromAdjacencyList(t[i]);e!==null&&this._sourceList.setMultiple(t,e),n!==null&&this._targetList.setMultiple(t,n);for(let i=0;i<t.length;++i)this.addToAdjacencyList(t[i])}addToAdjacencyList(t){const e=this._sourceList.get(t),n=this._targetList.get(t),i=hd(e,n);let s=this._parallelEdgesIndex[i];if(s===El)s=this._parallelTable.addEntry(),this._parallelEdgesIndex[i]=s,this._neighborTable.addTo(e,s),e!==n&&this._neighborTable.addTo(n,s);else{this._hasParallelEdges.add(t);const r=this._parallelTable.get(+s);if(r)for(const o of r)this._hasParallelEdges.add(o)}this._parallelTable.addTo(s,t)}hasParallelEdges(t){return this._hasParallelEdges.has(t)}removeFromAdjacencyList(t){const e=this._sourceList.get(t),n=this._targetList.get(t),i=hd(e,n),s=this._parallelEdgesIndex[i];s!==El&&this._parallelTable.removeFromAndGetSize(s,t)===0&&(this._neighborTable.removeFrom(e,s),e!==n&&this._neighborTable.removeFrom(n,s),this._parallelEdgesIndex[i]=El,this._hasParallelEdges.delete(t))}getParallelEdges(t,e={}){const n=e.filter||"visible",i=this._graph.acquireIndexList(!1),s=this._graph.getFilter(!1,n);for(let r=0;r<t._indexes.length;r++){const o=t._indexes[r],a=hd(this._sourceList.get(o),this._targetList.get(o)),l=this._parallelEdgesIndex[a];if(l!==El){const d=this._parallelTable.get(+l);if(d)for(const h of d)s(h)&&i.push(h)}}return this._graph.edgeList(i.sliceAndReset())}fastGetNodesAdjacentElements(t){const e=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),i=this._sourceList,s=this._targetList;for(let r=0;r<t.length;r++){const o=t[r],a=this._neighborTable.get(o);for(const l of a){const d=this._parallelTable.get(l),h=d[0],c=i.get(h),g=s.get(h);if(c!==0&&g!==0){e.push(c+g-o);for(const m of d)n.push(m)}}}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}}fastGetEdgesAdjacentElements(t){const e=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),i=this._sourceList,s=this._targetList;for(let r=0;r<t.length;r++){const o=t[r],a=i.get(o),l=s.get(o),d=hd(a,l),h=this._parallelEdgesIndex[d];if(h!==El){const c=this._parallelTable.get(+h);if(c)for(const g of c)n.push(g)}e.push(a),e.push(l)}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}}getDeduper(t){return(t?this.nodeDeduper:this.edgeDeduper).reset()}collectAdjacentEdges(t,e,n,i=!1,s=!1){const r=e===ag,o=!(e===lg||r||s),a=this._graph.acquireIndexList(!1),l=this._graph.getFilter(!1,n),d=i?this.getDeduper(!1):this._fakeDeduper;let h=this._fakeInvertedDeduper;const c=this._sourceList,g=this._targetList;if(s){h=this.getDeduper(!0);for(let m=0;m<t.length;m++)h.set(t[m],1)}for(let m=0;m<t.length;m++){const _=t[m],p=this._neighborTable.get(_);for(const v of p){const x=this._parallelTable.get(v);if(o)for(const b of x)l(b)&&d.get(b)===0&&(a.push(b),d.set(b,1));else for(const b of x){const E=c.get(b),S=g.get(b),A=E+S-_;r!==(S===_)&&E!==S||!l(b)||d.get(b)!==0||h.get(A)!==1||(a.push(b),d.set(b,1))}}}return a.sliceAndReset()}collectAdjacentNodes(t,e,n,i=!1,s,r){const o=e!==ag,a=e!==lg,l=this._graph.acquireIndexList(!0),d=this._graph.getFilter(!1,n),h=i?this.getDeduper(!0):this._fakeDeduper,c=this._sourceList,g=this._targetList;if(s)for(let m=0;m<s.length;m++){const _=s[m];l.push(_),h.set(_,1)}if(r)for(let m=0;m<r.length;m++){const _=r[m];h.set(_,1)}for(let m=0;m<t.length;m++){const _=t[m],p=this._neighborTable.get(_);for(const v of p){const x=this._parallelTable.get(v);for(const b of x)if(d(b)){const E=c.get(b),S=g.get(b),A=E+S-_;if((a&&_===S||o&&_===E)&&h.get(A)===0){l.push(A),h.set(A,1);break}}}}return l.sliceAndReset()}getAdjacentElements(t,e,n={}){const i=n.direction||iy,s=n.filter||"visible",r=n.policy||"union",o=!!n.bothExtremities;if(t){const a=r==="include-sources"?e:null,l=r==="exclude-sources"?e:null;return this.collectAdjacentNodes(e,i,s,!0,a,l)}return this.collectAdjacentEdges(e,i,s,!0,o)}getEdgesBetweenTwoNodes(t,e){const n=hd(t,e),i=this._parallelEdgesIndex[n];if(i===El)return new Uint32Array;const s=this._parallelTable.get(+i);return new Uint32Array(s)}getConnectedComponents(t,{filter:e="visible",returnIds:n=!1,internalIndexes:i=!1}={}){const s=this._graph,r=[],o={},a=s.acquireIndexList(!0);let l;typeof e=="string"?l=s.getFilter(!0,e):(l=e,e="visible");for(let c=0;c<t.length;c++){const g=t[c];l(g)&&a.push(g)}const d=a.sliceAndReset(),h={filter:e};for(let c=0;c<d.length;c++){const g=d[c];if(!o[g]){const m=[g],_=[];for(;m.length!==0;){const p=m.pop();!o[p]&&l(p)&&(m.push.apply(m,this.getAdjacentElements(!0,new Uint32Array([p]),h)),o[p]=!0,_.push(p))}_.length>0&&r.push(_)}}if(n){const c=s.getNodeAttribute("id");for(let g=0;g<r.length;g++)r[g]=c.getMultiple(r[g])}else if(!i)for(let c=0;c<r.length;c++)r[c]=s.nodeList(new Uint32Array(r[c]));return r}getAdjacencyList({directed:t,ids:e,weight:n,nodes:i}){const s=t?lg:iy,r=new Array(i.length),o=this._graph;for(let _=0;_<i.length;++_)r[_]=this.collectAdjacentEdges(new Uint32Array([i[_]]),s,"all");const a=o.getEdgeAttribute("source"),l=o.getEdgeAttribute("target"),d=o.getEdgeAttribute("width"),h=o.getNodeAttribute("id"),c=[],g=typeof n=="number",m=typeof n!="function"&&!g&&!!n;for(let _=0;_<r.length;_++){const p=r[_],v=i[_],x=p.length,b=e?new Array(x):new Uint32Array(x),E=new Array(x);for(let A=0;A<x;A++){const T=p[A],P=a.get(T),k=l.get(T);let I=t||v===P?k:P;if(e&&(I=h.get(I)),b[A]=I,n){if(g&&(E[A]=n),typeof n=="function"){const R=o.getNode(P),M=o.getNode(k);E[A]=n(R,M)}m&&(E[A]=d.get(T)||1)}}const S=wt({nodes:b,id:e?h.get(v):v},n&&{weights:E});c.push(S)}return c}degrees(t,e){if(e!==ag&&e!==lg)return this._neighborTable.sizes(t);const n=new Array(t.length),i=e===ag;for(let s=0,r=t.length;s<r;s++)n[s]=this._degree(t[s],i);return n}_degree(t,e){const n=this._neighborTable.get(t),i=this._sourceList,s=this._targetList;let r=0;for(let o=0;o<n.length;++o){const a=this._parallelTable.get(n[o]);for(let l=0;l<a.length;++l){const d=a[l],h=i.get(d),c=s.get(d);if(e&&c===t||!e&&h===t){r+=1;break}}}return r}getDegree(t,e){const{direction:n,filter:i}=this._getDegreeOptions(e),s=new Array(t.length),r=new Uint32Array(1);for(let o=0;o<t.length;++o)r[0]=t[o],s[o]=this.collectAdjacentNodes(r,n,i).length;return s}_getDegreeOptions(t){const e={direction:iy,filter:"visible"};return typeof t=="string"?e.direction=t:t&&(typeof t.direction=="string"&&(e.direction=t.direction),typeof t.filter=="string"&&(e.filter=t.filter)),e}},zj=class extends ee{constructor(){super(...arguments),this.storage={nodes:new mA(!0),edges:new mA(!1),fetch(t){return t?this.nodes:this.edges}},this._promisesToResolve=[],this._nodeIndexLists=[],this._edgeIndexLists=[],this._onNewFrame=()=>{this.storage.nodes.freeIndexes(),this.storage.edges.freeIndexes()}}onMounted(){this._modules.events.register(["preAddElements","addNodes","addEdges","preAddGraph","postAddGraph","addGraph","excludedStateChange","clearGraph","afterRemoveNodes","beforeRemoveNodes","requestElementsToDelete","removeNodes","beforeRemoveEdges","afterRemoveEdges","removeEdges"]),[{name:"excluded",storage:1,default:1},{name:"removed",storage:1,default:1},{name:"virtual",storage:1,default:0}].forEach(t=>{this.createNodeAttribute(t,!0),this.createEdgeAttribute(t,!0)}),this.node=this._ogma.node,this.edge=this._ogma.edge,this.nodeList=this._ogma.nodeList,this.edgeList=this._ogma.edgeList,this._nodes=this.createAttribute(!0,{name:"object",storage:"any"},!0),this._edges=this.createAttribute(!1,{name:"object",storage:"any"},!0),this.createAttribute(!1,{name:"source",storage:32},!0),this.createAttribute(!1,{name:"target",storage:32},!0),this._nodeFilters=$w(this.storage.nodes),this._edgeFilters=$w(this.storage.edges),this._initialize(),this._modules.events.on("frame",this._onNewFrame)}onReady(t){if(t.graph){const{nodes:e,edges:n}=t.graph;e&&this.addNodes(e),n&&this.addEdges(n)}}createIndexList(t){return this.storage.fetch(t).createIndexList()}getDom(){return this._modules.dom}acquireIndexList(t){const e=t?this._nodeIndexLists:this._edgeIndexLists;let n=e.find(i=>!i.isBusy());return n||(n=this.createIndexList(t),e.push(n)),n.markBusy(),n}getObjectList(t){return t?this._nodes:this._edges}getListFactory(t){return t?this.nodeList:this.edgeList}getStorage(t){return t?this.storage.nodes:this.storage.edges}getFilter(t,e){const n=t?this._nodeFilters:this._edgeFilters;return n[e]||n.visible}fireEvent(t,e){this._modules.events.fire(t,e)}getCacheLists(t){return t?this._nodeCacheLists:this._edgeCacheLists}_resolvePromises(){const t=this._promisesToResolve;this._promisesToResolve=[],t.forEach(e=>e())}_initialize(){this._nodeCacheLists=jw(()=>this.getNodeMaxIndex(),()=>this.acquireIndexList(!0),this._nodeFilters),this._edgeCacheLists=jw(()=>this.getEdgeMaxIndex(),()=>this.acquireIndexList(!1),this._edgeFilters),this.topology=new Dj(this),this._resolvePromises()}getNodeMaxIndex(){return this.storage.nodes.getMaxIndex()}getEdgeMaxIndex(){return this.storage.edges.getMaxIndex()}isExcluded(t){return this.storage.fetch(t.isNode).getFlexArray("excluded").getMultiple(t._indexes)}setExcluded(t,e){const n=e?1:0,i=t.isNode,s=this.storage.fetch(i),r=s.getFlexArray("excluded"),o=s.getFlexArray("removed"),a=this.acquireIndexList(i),l=this.getListFactory(i);for(let h=0;h<t._indexes.length;h++){const c=t._indexes[h],g=r.get(c),m=o.get(c);n!==g&&m===0&&a.push(c)}const d=a.sliceAndReset();if(d.length){this.getCacheLists(t.isNode).visible.invalidList();const h=l(d);r.setMultiple(d,n),this._modules.events.fire("excludedStateChange",{elements:h,value:e})}}addNode(t,e){return bm(this,!0,t,e)}addEdge(t,e){return bm(this,!1,t,e)}addNodes(t,e){return Tu(this,!0,t,e)}addEdges(t,e){return Tu(this,!1,t,e)}getExtremityIndex(t,e,n,i){if(e instanceof fr)return e._index;{const s=this.storage.nodes.getIndex(e);if(!s&&!i)throw new Error(`addEdge(s): invalid ${n===0?"source":"target"} for edge "${t}"; node "${e}" does not exist`);return s}}getNodes(t){return this.getElements(!0,t)}getEdges(t){return this.getElements(!1,t)}getElements(t,e){const n=t?this.nodeList:this.edgeList,i=t?to:tl,s=t?fr:Jo;if(e&&typeof e!="string"){const r=this.acquireIndexList(t),o=this.storage.fetch(t);if(e instanceof s)r.push(e._index);else if(Qn(e)){const a=e;for(const l of a)if(l instanceof s)r.push(l._index);else{const d=o.getIndex(l);d&&r.push(d)}}else if(e instanceof i){const a=this.getFilter(t,"all"),l=e;for(let d=0;d<l._indexes.length;d++){const h=l._indexes[d];a(h)&&r.push(h)}}return n(r.sliceAndReset())}{const r=e||"visible",o=this.getCacheLists(t)[r];if(!o)throw new Error(`getNodes/getEdges: unexpected argument "${r}"`);return n(o.getList())}}getNode(t){return this._getElement(!0,t)}getEdge(t){return this._getElement(!1,t)}_getElement(t,e){if(e instanceof(t?fr:Jo))return e;const n=this.getStorage(t),i=this.getObjectList(t),s=n.getIndex(e);return s?i.get(s):void 0}clear(){this._modules.events.fire("clearGraph",{nodes:this.getNodes("all"),edges:this.getEdges("all")}),this.storage.nodes.clear(),this.storage.edges.clear(),this._initialize()}createAttribute(t,e,n=!1){return this.storage.fetch(t).createFlexArray(e,n)}createNodeAttribute(t,e){return this.createAttribute(!0,t,e)}createEdgeAttribute(t,e){return this.createAttribute(!1,t,e)}getAttribute(t,e){return this.storage.fetch(t).getFlexArray(e)}getAttributes(t,e){return e.map(n=>this.getAttribute(t,n))}getNodeAttribute(t){return this.storage.nodes.getFlexArray(t)}getNodeAttributes(t){return this.getAttributes(!0,t)}getEdgeAttribute(t){return this.storage.edges.getFlexArray(t)}getEdgeAttributes(t){return this.getAttributes(!1,t)}getAllNodeAttributes(){return this.storage.nodes.getAllFlexArrays()}getAllEdgeAttributes(){return this.storage.edges.getAllFlexArrays()}setSource(t,e){const n=this.getNode(e);n&&this.topology.setExtremities(t._indexes,n._indexes,null)}setTarget(t,e){const n=this.getNode(e);n&&this.topology.setExtremities(t._indexes,null,n._indexes)}getParallelEdges(t,e={}){return this.topology.getParallelEdges(t,e)}hasParallelEdges(t){return this.topology.hasParallelEdges(t._index)}getEdgesBetweenTwoNodes(t,e){return this.edgeList(this.topology.getEdgesBetweenTwoNodes(t._index,e._index))}getAdjacentDirections(t){return this.topology.getAdjacentDirections(t)}getEdgeIndexesInDirection(t){return this.topology.getEdgeIndexesInDirection(t)}fastGetNodesAdjacentElements(t){const e=this._ogma.getNodes();let n=!1;if(e.size===t.size){const i=new Set(t._indexes);for(let s=0;s<e.size;s++)i.delete(e._indexes[s]);n=i.size===0}return n?{nodes:e,edges:this._ogma.getEdges()}:this.topology.fastGetNodesAdjacentElements(t._indexes)}fastGetEdgesAdjacentElements(t){const e=this._ogma.getEdges();let n=!1;if(e.size===t.size){const i=new Set(t._indexes);for(let s=0;s<e.size;s++)i.delete(e._indexes[s]);n=i.size===0}return n?{nodes:this._ogma.getNodes(),edges:e}:this.topology.fastGetEdgesAdjacentElements(t._indexes)}getAdjacentNodes(t,e){return this.nodeList(this.topology.getAdjacentElements(!0,t._indexes,e))}getAdjacentEdges(t,e){return this.edgeList(this.topology.getAdjacentElements(!1,t._indexes,e))}getDegree(t,e){return this.topology.getDegree(t._indexes,e)}degrees(t,e){return this.topology.degrees(t,e)}getAdjacencyList({directed:t=!1,internalIndexes:e=!1,weight:n=1,nodes:i,indexes:s}={}){return this.topology.getAdjacencyList({directed:t,weight:n,ids:!e,nodes:s||this.getNodes(i)._indexes})}getConnectedComponents(t,e){return this.topology.getConnectedComponents(t._indexes,e)}getConnectedComponentByNode(t,e){return this.topology.getConnectedComponents(t._indexes,e)}},qb=512,Jb=128,oM=Math.round(Math.log2(qb)),Kb=Math.round(Math.log2(Jb)),Bj=oM+Kb,Jl=255,Uj=32767,aM=65535,Sv=15,Kl=3,Sm=15,yf=32,wo=128,wv=8,Av=1/16,Tv=Math.round(Math.sqrt(Sm+1)),Cv=wo*Tv,di=16,Ko=1,Ms=256,$j=128,jj=128,wm=1.5,lM=1,Cu=56,Gj=16,Vj=2*Cu+Gj,vf=6,uM=3,dM=3,xi=41,Tp=5,Am=5,hM=.9721,zh=24,Hj=1.4142,Wj=/^rgba?\((\d+),?\s*(\d+),?\s*(\d+),?\s*((\d+)?\.?\d+)*\)$/;function Qb(t,e=[0,0,0,0]){const n=Wj.exec(t);return n?(e[0]=parseInt(n[1])/255,e[1]=parseInt(n[2])/255,e[2]=parseInt(n[3])/255,e[3]=n[4]===void 0?1:parseFloat(n[4]),e):null}function xf(t){return t<16?"0"+t.toString(16):t.toString(16)}function cM([t,e,n,i=1]){return`rgba(${256*t|0},${256*e|0},${256*n|0},${i})`}function t1(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,i,s,r)=>i+i+s+s+r+r);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1]:null}var sy=["AliceBlue","#F0F8FF","AntiqueWhite","#FAEBD7","Aqua","#00FFFF","Aquamarine","#7FFFD4","Azure","#F0FFFF","Beige","#F5F5DC","Bisque","#FFE4C4","Black","#000000","BlanchedAlmond","#FFEBCD","Blue","#0000FF","BlueViolet","#8A2BE2","Brown","#A52A2A","BurlyWood","#DEB887","CadetBlue","#5F9EA0","Chartreuse","#7FFF00","Chocolate","#D2691E","Coral","#FF7F50","CornflowerBlue","#6495ED","Cornsilk","#FFF8DC","Crimson","#DC143C","Cyan","#00FFFF","DarkBlue","#00008B","DarkCyan","#008B8B","DarkGoldenRod","#B8860B","DarkGray","#A9A9A9","DarkGrey","#A9A9A9","DarkGreen","#006400","DarkKhaki","#BDB76B","DarkMagenta","#8B008B","DarkOliveGreen","#556B2F","DarkOrange","#FF8C00","DarkOrchid","#9932CC","DarkRed","#8B0000","DarkSalmon","#E9967A","DarkSeaGreen","#8FBC8F","DarkSlateBlue","#483D8B","DarkSlateGray","#2F4F4F","DarkSlateGrey","#2F4F4F","DarkTurquoise","#00CED1","DarkViolet","#9400D3","DeepPink","#FF1493","DeepSkyBlue","#00BFFF","DimGray","#696969","DimGrey","#696969","DodgerBlue","#1E90FF","FireBrick","#B22222","FloralWhite","#FFFAF0","ForestGreen","#228B22","Fuchsia","#FF00FF","Gainsboro","#DCDCDC","GhostWhite","#F8F8FF","Gold","#FFD700","GoldenRod","#DAA520","Gray","#808080","Grey","#808080","Green","#008000","GreenYellow","#ADFF2F","HoneyDew","#F0FFF0","HotPink","#FF69B4","IndianRed","#CD5C5C","Indigo","#4B0082","Ivory","#FFFFF0","Khaki","#F0E68C","Lavender","#E6E6FA","LavenderBlush","#FFF0F5","LawnGreen","#7CFC00","LemonChiffon","#FFFACD","LightBlue","#ADD8E6","LightCoral","#F08080","LightCyan","#E0FFFF","LightGoldenRodYellow","#FAFAD2","LightGray","#D3D3D3","LightGrey","#D3D3D3","LightGreen","#90EE90","LightPink","#FFB6C1","LightSalmon","#FFA07A","LightSeaGreen","#20B2AA","LightSkyBlue","#87CEFA","LightSlateGray","#778899","LightSlateGrey","#778899","LightSteelBlue","#B0C4DE","LightYellow","#FFFFE0","Lime","#00FF00","LimeGreen","#32CD32","Linen","#FAF0E6","Magenta","#FF00FF","Maroon","#800000","MediumAquaMarine","#66CDAA","MediumBlue","#0000CD","MediumOrchid","#BA55D3","MediumPurple","#9370DB","MediumSeaGreen","#3CB371","MediumSlateBlue","#7B68EE","MediumSpringGreen","#00FA9A","MediumTurquoise","#48D1CC","MediumVioletRed","#C71585","MidnightBlue","#191970","MintCream","#F5FFFA","MistyRose","#FFE4E1","Moccasin","#FFE4B5","NavajoWhite","#FFDEAD","Navy","#000080","OldLace","#FDF5E6","Olive","#808000","OliveDrab","#6B8E23","Orange","#FFA500","OrangeRed","#FF4500","Orchid","#DA70D6","PaleGoldenRod","#EEE8AA","PaleGreen","#98FB98","PaleTurquoise","#AFEEEE","PaleVioletRed","#DB7093","PapayaWhip","#FFEFD5","PeachPuff","#FFDAB9","Peru","#CD853F","Pink","#FFC0CB","Plum","#DDA0DD","PowderBlue","#B0E0E6","Purple","#800080","RebeccaPurple","#663399","Red","#FF0000","RosyBrown","#BC8F8F","RoyalBlue","#4169E1","SaddleBrown","#8B4513","Salmon","#FA8072","SandyBrown","#F4A460","SeaGreen","#2E8B57","SeaShell","#FFF5EE","Sienna","#A0522D","Silver","#C0C0C0","SkyBlue","#87CEEB","SlateBlue","#6A5ACD","SlateGray","#708090","SlateGrey","#708090","Snow","#FFFAFA","SpringGreen","#00FF7F","SteelBlue","#4682B4","Tan","#D2B48C","Teal","#008080","Thistle","#D8BFD8","Tomato","#FF6347","Turquoise","#40E0D0","Violet","#EE82EE","Wheat","#F5DEB3","White","#FFFFFF","WhiteSmoke","#F5F5F5","Yellow","#FFFF00","YellowGreen","#9ACD32"],cd=[0,0,0,0],Bh=new Map;Bh.set(null,[0,0,0,0]),Bh.set("transparent",[0,0,0,0]);for(let t=0;t<sy.length;t+=2){const e=sy[t].toLowerCase(),n=sy[t+1];Bh.set(e,t1(n))}var fi=t=>{let e=Bh.get(t);if(e===void 0){const n=t+"",i=n.charAt(0)==="#"?t1(n):Qb(n);Bh.set(t,i),e=i}return e},Lv=t=>{const e=fi(t);if(!e)return null;const[n,i,s]=e;return`#${xf(255*n)}${xf(255*i)}${xf(255*s)}`},Ml=t=>{let e=1,n=t;return n&&Qb(t,cd)&&(n=`rgb(${255*+cd[0]},${255*+cd[1]},${255*+cd[2]})`,e=parseFloat(cd[3].toString())),{color:n,opacity:e}},dc=class{on(t,e){if(typeof t!="string")throw new TypeError("Event name must be string");if(typeof e!="function")throw new TypeError("Event handler must be function");const n=this._events=this._events||{};return(n[t]=n[t]||[]).push(e),this}off(t,e){if(typeof t!="string")throw new TypeError("Event name must be string");const n=this._events=this._events||{},i=n[t];if(Qn(i))if(typeof e!="function")n[t]=null;else{const s=i.indexOf(e);s!==-1&&i.splice(s,1),i.length===0&&(n[t]=null)}return this}fire(t,...e){if(typeof t!="string")throw new TypeError("Event name must be string");const n=(this._events=this._events||{})[t];if(Qn(n)){const i=e;for(let s=0;s<n.length;s++){const r=n[s];r&&r.apply(this,i)}}return this}once(t,e){const n=this,i=function(...s){e.apply(n,s),n.off(t,i)};return i.handler=e,this.on(t,i)}hasListener(t,e){if(!t||!e)return!1;const n=(this._events=this._events||{})[t];if(Qn(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];if(r===e||r.handler===e)return!0}return!1}clearEvents(){this._events={}}getListeners(t){return(this._events=this._events||{})[t]}};function gM(t){if(t.keys)return Array.from(t.keys());const e=[];return t.forEach((n,i)=>e.push(i)),e}function fM(t){if(t.values)return Array.from(t.values());const e=[];return t.forEach(n=>e.push(n)),e}var mM=class{constructor(){this._map=new Map}reset(){this._map.clear()}set(t,e,n){this._map.set(pA(t,e),n)}get(t,e){return this._map.get(pA(t,e))}},Xj=class{constructor({elementSize:t,sideElementSize:e,nbSideElementsPerMainElement:n,id:i,depth:s,elementType:r,animated:o,stencilUsage:a}){this._nbCellsAllocated=0,this._nbCellsFreed=0,this._isFullyAllocated=!1,this._isFullyFreed=!1,this._mustUpdate=!0,this._capacity=qb,this.version=0,this._id=i,this.depth=s,this.type=r,this.animated=o,this.stencilUsage=a,this.elementSize=t,this._nbSideElementsPerMainElement=n,this._totalSideElementsSize=n*e,this._byteCapacity=this._capacity*this.elementSize,this._byteArray=new Uint8Array(this._byteCapacity),this._dataView=new DataView(this._byteArray.buffer),this._sideByteCapacity=this._capacity*this._totalSideElementsSize,this._sideByteArray=new Uint8Array(this._sideByteCapacity),this._sideDataView=new DataView(this._sideByteArray.buffer)}update(){this._mustUpdate&&(this.version+=1,this._mustUpdate=!1,this._isFullyAllocated&&this._nbCellsFreed===this._nbCellsAllocated&&(this._isFullyFreed=!0))}allocate(t){let e=-1;return!this._isFullyAllocated&&this._nbCellsAllocated+t<=this._capacity?(e=this._nbCellsAllocated,this._nbCellsAllocated+=t,this._mustUpdate=!0):this._isFullyAllocated=!0,e}free(t,e){for(let n=0;n<e;n++){const i=(t+n)*this.elementSize;this._dataView.setUint16(i,0)}this._mustUpdate=!0,this._nbCellsFreed+=e}triggerUpdate(){this._mustUpdate=!0}isEmpty(){return this._nbCellsFreed===this._nbCellsAllocated}isFullyFreed(){return this._isFullyFreed}getId(){return this._id}getDataView(){return this._dataView}getByteArray(){return this._byteArray}getSize(){return this._nbCellsAllocated}getNbSideElementsPerMainElement(){return this._nbSideElementsPerMainElement}hasSideData(){return this._nbSideElementsPerMainElement>0}getSideDataView(){return this._sideDataView}getSideByteArray(){return this._sideByteArray}getTotalSideElementsSize(){return this._totalSideElementsSize}},vA=8,Zj=class{constructor(){this.version=0,this.version=0,this._blockInfo={buffer:null,offset:0,size:0,address:0},this._init_()}reset(){this._init_()}_init_(){this._buffersByDepth=new Array(100),this._buffersById=[],this._buffersByAscendingDepth=[],this._buffersByDescendingDepth=[],this._mustUpdate=!0}_fillBlockInfo(t,e,n,i){return this._blockInfo.buffer=t,this._blockInfo.offset=e,this._blockInfo.size=n,this._blockInfo.address=i,this._blockInfo}_createBuffer(t,e,n,i,s){const r=e?Vj:Cu,o=this._buffersById.length,a=new Xj({elementSize:r,sideElementSize:vf,nbSideElementsPerMainElement:i,id:o,depth:n,elementType:t,animated:e,stencilUsage:s});return this._buffersById.push(a),a}getBlockInfo(t){return this._fillBlockInfo(this._buffersById[t>>Bj],(t>>Kb)%qb,t%Jb,t)}allocateBlock(t,e,n,i,s,r,o){const a=qj(r,vA);this._mustUpdate=!0;let l=null,d=-1;if(t){const c=this.getBlockInfo(t),g=c.buffer,m=c.offset,_=c.size,p=c.size===s,v=g.depth===i,x=g.type===e,b=g.animated===n,E=g.getNbSideElementsPerMainElement()===a,S=g.stencilUsage===o;p&&v&&x&&b&&E&&S?(g.triggerUpdate(),l=g,d=m):g.free(m,_)}if(d===-1){const c=+n,g=a/vA,m=this._buffersByDepth[i]||Array(2);this._buffersByDepth[i]=m;const _=m[c]||[];m[c]=_;const p=_[e]||Array(16);_[e]=p;const v=p[g]||Array(4);p[g]=v;const x=v[o]||[];v[o]=x;const b=x[x.length-1];b&&(l=b,d=b.allocate(s)),d===-1&&(l=this._createBuffer(e,n,i,a,o),d=l.allocate(s),x.push(l))}const h=Yj(l.getId(),d,s);return this._fillBlockInfo(l,d,s,h)}freeBlock(t){if(t){this._mustUpdate=!0;const e=this.getBlockInfo(t);e.buffer.free(e.offset,e.size)}return 0}_sortBuffersByDepth(){const t=[];for(let e=0;e<this._buffersByDepth.length;e++){const n=this._buffersByDepth[e];if(n)for(let i=0;i<n.length;i++){const s=n[i];if(s)for(let r=0;r<s.length;r++){const o=s[r];if(o)for(let a=0;a<o.length;a++){const l=o[a];if(l)for(let d=0;d<l.length;d++){const h=l[d];if(h)for(let c=0;c<h.length;c++){const g=h[c];g.update(),g.isFullyFreed()?(this._buffersById[g.getId()]=void 0,h.splice(c,1),c-=1):t.push(g)}}}}}}this._buffersByAscendingDepth=t,this._buffersByDescendingDepth=t.slice().reverse()}update(){this._mustUpdate&&(this._sortBuffersByDepth(),this.version+=1,this._mustUpdate=!1)}getBuffers(){return this._buffersById}getBuffersByAscendingDepth(){return this._buffersByAscendingDepth}getBuffersByDescendingDepth(){return this._buffersByDescendingDepth}};function Yj(t,e,n){return((t<<oM)+e<<Kb)+n}function qj(t,e){let n=0;for(;n<t;)n+=e;return n}var zs=1,Oa=2,Tm=3,mi=1,Xo=2,Ca=3,hc=4,Da=5,za=6,Qo=7,As=1,Cp=2,e1=3,n1=4,pa=5,La=6,uu=1,pM=2,_M=3;function xA(){return{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:mi,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1}}function bA(t={}){return t.pieceId=0,t.shape="",t.x1=0,t.y1=0,t.x2=0,t.y2=0,t.rectWidthOrSourceRadiusScaled=0,t.rectWidthOrSourceRadiusFixed=0,t.rectHeightOrTargetRadiusScaled=0,t.rectHeightOrTargetRadiusFixed=0,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern=t.pattern||{type:mi,attributes:{}},t.pattern.type=mi,t.opacity=1,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1,t.isSelfLoop=!1,t.isText=!1,t.adjustTextAngle=!1,t.isBadge=!1,t.unusedFlag2=!1,t.unusedFlag3=!1,t}function Jj(t={}){return t.duration=0,t.beginTime=-1,t.easing="linear",t}function i1(){return{valid:!1,id:void 0,end:xA(),start:xA(),animation:{duration:0,beginTime:-1,easing:"linear"}}}function yM(t,e,n,i){t.width=e*i,t.height=n*i,qa(t,`${e}px`,`${n}px`)}var Kj=class{constructor(){this._capacity=Jb,this._id=0,this.size=0,this.depth=0,this.animated=!1,this.stencilUsage=uu,this.type=zs,this._list=Array(this._capacity);for(let t=0;t<this._capacity;++t)this._list[t]=i1()}reset(t,e,n,i){return this.type=t,this.animated=e,this.depth=n,i!==void 0&&(this._id=i),this.stencilUsage=uu,this.size=0,this}next(){if(this.size>=this._capacity)throw new Error("internal error: block.next() was called on a full block");return this._list[this.size++]}nextAndReset(){const t=this.next();return t.end=bA(t.end),t.start=bA(t.start),t.animation=Jj(t.animation),t}forEach(t){this._list.forEach(t)}getElement(t){return this._list[t]}getCurrentElement(){return this._list[this.size-1]}getElements(){return this._list}getId(){return this._id}setGlobalAnimation(t,e,n){for(let i=0;i<this.size;++i){const s=this._list[i].animation;s.duration=t,s.beginTime=e,s.easing=n}}},Qj=class{constructor(){this._version=0,this._initialize()}reset(){this._initialize()}_initialize(){this._mustUpdate=!0,this.maxCoord=0,this.maxScaledSize=0,this.maxMinVisibleSize=0,this.maxSymbolicSize=0,this.maxDashLength=0,this.maxGapLength=0,this.maxPatternScale=0}set({maxCoord:t,maxScaledSize:e,maxMinVisibleSize:n,maxSymbolicSize:i,maxDashLength:s,maxGapLength:r,maxPatternScale:o}){const a=this.maxCoord<t||this.maxScaledSize<e||this.maxMinVisibleSize<n||this.maxSymbolicSize<i||this.maxDashLength<s||this.maxGapLength<r||this.maxPatternScale<o;return a&&(this.maxCoord=t,this.maxScaledSize=e,this.maxMinVisibleSize=n,this.maxSymbolicSize=i,this.maxDashLength=s,this.maxGapLength=r,this.maxPatternScale=o,this._mustUpdate=!0),a}update(){return this._mustUpdate&&(this._version+=1,this._mustUpdate=!1),this}getVersion(){return this._version}},t4={linear:[0,1,0,0],quadraticIn:[0,0,1,0,0,0,0,0],quadraticOut:[0,2,-1,0,0,0,0,0],quadraticInOut:[0,0,2,0,-1,4,-2,0],cubicIn:[0,0,0,1],cubicOut:[0,3,-3,1],cubicInOut:[0,0,0,4,-3,12,-12,4]},e4=class{constructor(){this._linearEasing=[0,1,0,0,0,1,0,0],this._nameToPolygon={},this._polygonToName={},this.add(t4)}add(t){Object.keys(t).forEach(e=>{const n=t[e].slice();n.length<8&&(n[4]=n[0],n[5]=n[1],n[6]=n[2],n[7]=n[3]);const i=nv(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);this._nameToPolygon[e]=n,this._polygonToName[i]=e})}getCoefficients(t){return this._nameToPolygon[t]||this._linearEasing}getName(t,e,n,i,s,r,o,a){const l=nv(t,e,n,i,s,r,o,a);return this._polygonToName[l]||"linear"}},s1=new e4,n4=0,i4=1,s4=2,r4=3,o4=4,a4=5,l4=6,u4=7,d4=8,h4=9,Lp=10,c4=0,vM=1,xM=2,r1=30,bM=0,g4=1,f4=2,o1=3,m4=4,p4=5,a1=6,EM=1e-6,vs=Math.PI,rh=2*Math.PI,SM=vs*(5/4),wM=vs*(7/4),AM=vs*(3/4),TM=vs*(1/4),EA=1.1,SA=.07,_4=1,wA=1,AA=.17,y4=1,v4=-vs/2,x4=vs/2,b4={plain:{dash:0,gap:0},dashed:{dash:3,gap:1},dotted:{dash:1,gap:3}},E4={right:0,top:-Math.PI/2,left:Math.PI,bottom:Math.PI/2,center:0},S4={right:Math.PI,top:-Math.PI/2,left:0,bottom:Math.PI/2,center:0},w4=class{constructor(t,e,n,i,s){this._littleEndian=_p(),this._maxScaledSize=0,this._maxMinVisibleSize=0,this._maxSymbolicSize=0,this._maxDashLength=0,this._maxGapLength=0,this._maxPatternScale=0,this._actualScaledSizeToBytes=Uj,this._actualMinVisibleSizeToBytes=Sv,this._actualSymbolicSizeToBytes=Jl,this._actualDashLengthToBytes=Kl,this._actualGapLengthToBytes=Kl,this._actualPatternScaleToBytes=Jl,this._genericObject=i1(),this._shapeManager=e,this._patternManager=t,this._textManager=n,this._bufferOffsetToId=i,this._colorParser=s}resizeBoundaries(t,e,n,i,s,r){this._maxScaledSize=t,this._maxMinVisibleSize=e,this._maxSymbolicSize=n,this._maxDashLength=i,this._maxGapLength=s,this._maxPatternScale=r,this._actualScaledSizeToBytes=aM/t,this._actualMinVisibleSizeToBytes=Sv/e,this._actualSymbolicSizeToBytes=Jl/n,this._actualDashLengthToBytes=Kl/i,this._actualGapLengthToBytes=Kl/s,this._actualPatternScaleToBytes=Jl/r}storeGenericObject(t,e,n){const i=this._shapeManager.getIdFromName(n.shape),s=n.pieceId,r=this._dashLengthToBytes(n.dashLength),o=this._gapLengthToBytes(n.gapLength),a=+n.hasHead,l=+n.hasTail,d=+n.isBodyTriangle,h=+n.isSelfLoop,c=this._patternScaleToBytes(n.patternScale),g=this._offsetAngleToBytes(n.offsetAngle),m=+n.isText,_=+n.adjustTextAngle,p=+n.isBadge,v=+n.unusedFlag2,x=+n.unusedFlag3,b=this._opacityToBytes(n.opacity),E=this._minVisibleSizeToBytes(n.globalMinVisibleSize),S=this._minVisibleSizeToBytes(n.strokeMinVisibleSize),A=this._minVisibleSizeToBytes(n.patternMinVisibleSize),T=this._symbolicSizeToBytes(n.symbolicSize),P=this._curvatureToBytes(n.curvature),k=n.pattern.attributes.colors;k&&(n.pattern.attributes.colors=k.split(";").map(se=>ug(this._colorToBytes(se.trim()))).join(";"));const I=this._patternManager.getIdFromDefinition(n.pattern),R=this._colorToBytes(n.fillColor),M=this._colorToBytes(n.strokeColor),z=this._colorToBytes(n.patternColor),{x1:j,y1:X,x2:O,y2:N}=n,W=this._scaledSizeToBytes(n.rectWidthOrSourceRadiusScaled),U=this._fixedSizeToBytes(n.rectWidthOrSourceRadiusFixed),K=this._scaledSizeToBytes(n.rectHeightOrTargetRadiusScaled),Z=this._fixedSizeToBytes(n.rectHeightOrTargetRadiusFixed),rt=this._scaledSizeToBytes(n.thicknessOrFontSizeScaled),vt=this._fixedSizeToBytes(n.thicknessOrFontSizeFixed),St=this._scaledSizeToBytes(n.strokeWidthScaled),ut=this._fixedSizeToBytes(n.strokeWidthFixed),_t=this._scaledSizeToBytes(n.offsetScaled),Rt=this._fixedSizeToBytes(n.offsetFixed),Gt=this._fixedSizeToBytes(n.pattern.attributes.paddingTop||0),Yt=this._fixedSizeToBytes(n.pattern.attributes.paddingLeft||0),Et=i+(s<<4)+(r<<8)+(o<<10)+(a<<12)+(l<<13)+(d<<14)+(h<<15),Tt=c+(g<<8)+(m<<11)+(_<<12)+(p<<13)+(v<<14)+(x<<15),re=b+(E<<4)+(S<<8)+(A<<12),Xt=T+(P<<8);this._setUint16(t,e+0,Et),this._setUint16(t,e+2,Tt),this._setUint16(t,e+4,re),this._setUint16(t,e+6,Xt),this._setUint16(t,e+8,I),this._setUint16(t,e+10,R),this._setUint16(t,e+12,M),this._setUint16(t,e+14,z),this._setFloat32(t,e+16,j),this._setFloat32(t,e+20,X),this._setFloat32(t,e+24,O),this._setFloat32(t,e+28,N),this._setUint16(t,e+32,W),this._setUint16(t,e+34,U),this._setUint16(t,e+36,K),this._setUint16(t,e+38,Z),this._setUint16(t,e+40,rt),this._setUint16(t,e+42,vt),this._setUint16(t,e+44,St),this._setUint16(t,e+46,ut),this._setUint16(t,e+48,_t),this._setInt16(t,e+50,Rt),this._setInt16(t,e+52,Gt),this._setInt16(t,e+54,Yt)}_setUint16(t,e,n){t.setUint16(e,n,this._littleEndian)}_setInt16(t,e,n){t.setUint16(e,this._signedToUnsignedInt16(n),this._littleEndian)}_setFloat32(t,e,n){t.setFloat32(e,n,this._littleEndian)}_colorToBytes(t){const e=this._colorParser(t);return Math.round(15*e[0])+(Math.round(15*e[1])<<4)+(Math.round(15*e[2])<<8)+(Math.round(15*e[3])<<12)}_scaledSizeToBytes(t){return Math.ceil(Math.min(t,this._maxScaledSize)*this._actualScaledSizeToBytes)}_fixedSizeToBytes(t){return t}_minVisibleSizeToBytes(t){return Math.round(Math.min(t,this._maxMinVisibleSize)*this._actualMinVisibleSizeToBytes)}_symbolicSizeToBytes(t){return Math.round(Math.min(t,this._maxSymbolicSize)*this._actualSymbolicSizeToBytes)}_dashLengthToBytes(t){return Math.round(Math.min(t,this._maxDashLength)*this._actualDashLengthToBytes)}_gapLengthToBytes(t){return Math.round(Math.min(t,this._maxGapLength)*this._actualGapLengthToBytes)}_patternScaleToBytes(t){return Math.round(Math.min(t,this._maxPatternScale)*this._actualPatternScaleToBytes)}_offsetAngleToBytes(t){return Math.round((t+rh)%rh*(8/rh))}_opacityToBytes(t){return Math.round(15*Math.min(t,1))}_curvatureToBytes(t){return this._signedToUnsignedByte(t)}_signedToUnsignedByte(t){return ws(t,-128,127)+128}_signedToUnsignedInt16(t){return ws(t,-32768,32767)+32768}storeAnimationInformation(t,e,{beginTime:n,duration:i},s){this._setAnimationBeginTime(t,e,n),this._setAnimationDuration(t,e,i),this._setAnimationEasing(t,e,s)}_setAnimationBeginTime(t,e,n){this._setFloat32(t,e,n)}_setAnimationDuration(t,e,n){this._setFloat32(t,e+4,n)}_setAnimationEasing(t,e,n){this._setUint16(t,e+8,(n[0]+128<<8)+(n[4]+128)),this._setUint16(t,e+10,(n[1]+128<<8)+(n[5]+128)),this._setUint16(t,e+12,(n[2]+128<<8)+(n[6]+128)),this._setUint16(t,e+14,(n[3]+128<<8)+(n[7]+128))}extractGenericElement(t,e,n){const i=t.type,s=t.animated,r=t.getDataView(),o=e*t.elementSize,a=this._genericObject;if(a.valid=!1,r.getUint16(o)&&(a.valid=!0,this._extractGenericObject(a.end,r,o,n),s&&(this._extractGenericObject(a.start,r,o+Cu,n),this._extractAnimationInformation(a.animation,r,o+2*Cu)),a.id=this._bufferOffsetToId.get(t.getId(),e),i===Oa)){const l=t.getSideDataView(),d=e*t.getTotalSideElementsSize(),h=d+t.getTotalSideElementsSize();a.end.pattern=this._textManager.extractTextFromDataView(l,d,h)}return a}_extractGenericObject(t,e,n,{bytesToActualCoord:i,bytesToActualScaledSize:s,bytesToActualMinVisibleSize:r,bytesToActualPatternScale:o,bytesToActualSymbolicSize:a,bytesToActualDashLength:l,bytesToActualGapLength:d}){const h=e,c=n,g=this._littleEndian,m=h.getUint16(c,g),_=We(m,0,4),p=We(m,4,8),v=We(m,8,10),x=We(m,10,12),b=We(m,12,13),E=We(m,13,14),S=We(m,14,15),A=We(m,15,16),T=h.getUint16(c+2,g),P=We(T,0,8),k=We(T,8,11),I=We(T,11,12),R=We(T,12,13),M=We(T,13,14),z=We(T,14,15),j=We(T,15,16),X=h.getUint16(c+4,g),O=We(X,0,4),N=We(X,4,8),W=We(X,8,12),U=We(X,12,16),K=h.getUint16(c+6,g),Z=We(K,0,8),rt=We(K,8,16),vt=h.getUint16(c+8,g),St=h.getUint16(c+10,g),ut=h.getUint16(c+12,g),_t=h.getUint16(c+14,g),Rt=h.getFloat32(c+16,g),Gt=h.getFloat32(c+20,g),Yt=h.getFloat32(c+24,g),Et=h.getFloat32(c+28,g),Tt=h.getUint16(c+32,g),re=h.getUint16(c+34,g),Xt=h.getUint16(c+36,g),se=h.getUint16(c+38,g),de=h.getUint16(c+40,g),q=h.getUint16(c+42,g),ht=h.getUint16(c+44,g),bt=h.getUint16(c+46,g),xt=h.getUint16(c+48,g),ct=ry(h.getUint16(c+50,g)),yt=ry(h.getUint16(c+52,g)),Dt=ry(h.getUint16(c+54,g));t.pieceId=p,t.shape=this._shapeManager.getNameFromId(_),t.x1=ds(Rt,i),t.y1=ds(Gt,i),t.x2=ds(Yt,i),t.y2=ds(Et,i),t.rectWidthOrSourceRadiusScaled=ds(Tt,s),t.rectWidthOrSourceRadiusFixed=re,t.rectHeightOrTargetRadiusScaled=ds(Xt,s),t.rectHeightOrTargetRadiusFixed=se,t.thicknessOrFontSizeScaled=ds(de,s),t.thicknessOrFontSizeFixed=q,t.strokeWidthScaled=ds(ht,s),t.strokeWidthFixed=bt,t.offsetScaled=ds(xt,s),t.offsetFixed=ct,t.pattern=this._patternManager.getDefinitionFromId(vt),t.pattern.attributes.paddingTop=yt,t.pattern.attributes.paddingLeft=Dt,t.opacity=O/15,t.fillColor=ug(St),t.strokeColor=ug(ut),t.patternColor=ug(_t),t.globalMinVisibleSize=ds(N,r),t.strokeMinVisibleSize=ds(W,r),t.patternMinVisibleSize=ds(U,r),t.offsetAngle=k*(2*Math.PI/8),t.patternScale=P*o,t.symbolicSize=Z*a,t.curvature=A4(rt),t.dashLength=v*l,t.gapLength=x*d,t.hasHead=!!b,t.hasTail=!!E,t.isBodyTriangle=!!S,t.isSelfLoop=!!A,t.isText=!!I,t.adjustTextAngle=!!R,t.isBadge=!!M,t.unusedFlag2=!!z,t.unusedFlag3=!!j}_extractAnimationInformation(t,e,n){const i=this._littleEndian,s=e.getFloat32(n,i),r=e.getFloat32(n+4,i),o=e.getUint16(n+8,i),a=e.getUint16(n+10,i),l=e.getUint16(n+12,i),d=e.getUint16(n+14,i),h=(o>>8)-128,c=(a>>8)-128,g=(l>>8)-128,m=(d>>8)-128,_=o%256-128,p=a%256-128,v=l%256-128,x=d%256-128;t.beginTime=s,t.duration=r,t.easing=s1.getName(h,c,g,m,_,p,v,x)}};function We(t,e,n){return t%(1<<n)>>e}function A4(t){return t-128}function ry(t){return t-32768}function ds(t,e){return t*e}var TA=new Array(65535);function ug(t){let e=TA[t];if(!e){const n=We(t,0,4)/15,i=We(t,4,8)/15,s=We(t,8,12)/15,r=We(t,12,16)/15;e=`rgba(${255*n|0}, ${255*i|0}, ${255*s|0}, ${r})`,n+i+s+r===0&&(e=null),TA[t]=e}return e}var T4={[Xo]:"image",[hc]:"piechart",[Ca]:"text",[Da]:"icon",[za]:"badge"},C4=class{constructor(){this._pixelRatio=1,this._nextPatternId=1,this._version=0,this._init_()}reset(){this._init_()}_init_(){this._mustUpdate=!0,this._nextPatternId=1,this._patterns=[null],this._patternsByHash={},this._pixelRatio=1,this._nullPattern={id:-1,type:mi,attributes:{}}}_increaseNextId(){let t=this._nextPatternId++;for(t%256==255&&(t=this._nextPatternId++);this._patterns.length<=t;)this._patterns.push(void 0);return t}_createPattern({type:t,attributes:e}){const n={id:this._increaseNextId(),type:t,attributes:this._getAttributes(t,e)};return this._patterns[n.id]=n,this._mustUpdate=!0,n}_getAttributes(t,e){return t===Xo?{image:e.image,scaled:e.scaled,duplicated:e.duplicated}:t===Ca||t===Da||t===za?{font:e.font,size:e.size,style:e.style,text:e.text,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,align:e.align||"center",offset:e.offset||0}:t===hc&&e.colors?{colors:e.colors,colorArray:e.colors.split(";").map(n=>n.trim())}:{}}getPatternList(){return this._patterns.filter(t=>t)}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}setPixelRatio(t){t!==this._pixelRatio&&(this._pixelRatio=t,this._mustUpdate=!0)}getPixelRatio(){return this._pixelRatio}notifyUpdate(){this._mustUpdate=!0}getIdFromDefinition(t){const{type:e,attributes:n}=t,i=e===Ca||e===Da||e===za;let s=0;return e&&e!==mi&&e!==Qo&&(e!==Xo||n.image)&&(!i||n.text&&n.font)&&(s=this._addPattern(t),e===Ca&&n.style==="normal"&&(n.style="bold",this._addPattern(t))),s}_addPattern(t){const e=this._getPatternHash(t);let n=this._patternsByHash[e];return n||(this._nextPatternId>65500?Wo("maximum number of pattern exceeded"):(n=this._createPattern(t).id,this._patternsByHash[e]=n)),n}_getPatternHash({type:t,attributes:e}){const n=[T4[t]];return t===Xo?n.push(e.scaled?"scaled":"non-scaled",e.duplicated?"duplicated":"non-duplicated",e.image.src||e.image.toDataURL()):t===Ca?n.push(e.text,e.font,e.style,e.size,e.align||"center",e.offset||0):t===Da||t===za?n.push(e.text,e.font,e.style,e.size,e.paddingLeft,e.paddingTop):n.push(e.colors),n.join("+")}getDefinitionFromId(t){if(t&&this._patterns[t]){const e=this._patterns[t];if(e)return e}return this._nullPattern}getVersion(){return this._version}};function CA(t){return t.map(({x:e,y:n,r:i=0})=>({x:e,y:n,r:i}))}var L4=class{constructor(){this._version=0,this._mustUpdate=!0,this._byName={},this._byId=new Array(Sm+1)}register(t,{getDistanceFromStrokeVertically:e,getDistanceFromStrokeHorizontally:n,points:i,hole:s,isSimple:r}){if(this._byName[t])return;let o=r?1:wv;const a=r?wv-1:Sm;for(;this._byId[o];)o+=1;if(o>a)throw new Error("max number of shape exceeded");const l={id:o,name:t,getDistanceFromStrokeVertically:e,getDistanceFromStrokeHorizontally:n,points:CA(i.slice()),hole:s?CA(s.slice()):null,isSimple:!!r};return this._mustUpdate=!0,this._byId[o]=l,this._byName[t]=l,l}getIdFromName(t){return this._byName[t].id}getNameFromId(t){const e=this._byId[t];return e?e.name:""}getDefinitionFromName(t){return this._byName[t]}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}getVersion(){return this._version}getShapeList(){return this._byId.filter(t=>t)}},Pv=300,kv=150,CM=class{constructor(){this.style={},this.width=Pv,this.height=kv,this.__context=new LM,this.style={},this.width=Pv,this.height=kv}get __dummy(){return!0}get parentNode(){return null}getContext(t){return t==="2d"?this.__context:null}toDataURL(t="png"){return`data:image/${t};base64,`}addEventListener(){}removeEventListener(){}getBoundingClientRect(){return{left:0,top:0,bottom:0,right:0,width:this.width,height:this.height}}},LM=class{constructor(){this._fontSize=10}set font(t){const e=t.match(/\d+/);e&&(this._fontSize=parseFloat(e[0]))}set fillStyle(t){}set textBaseline(t){}set textAlign(t){}set strokeStyle(t){}set lineWidth(t){}fill(){}stroke(){}clearRect(){}fillRect(){}strokeRect(){}beginPath(){}closePath(){}moveTo(){}lineTo(){}rect(){}arc(){}save(){}restore(){}clip(){}translate(){}rotate(){}fillText(){}setLineDash(){}quadraticCurveTo(){}bezierCurveTo(){}drawImage(){}measureText(t){return{width:t.length*Math.ceil(.625*this._fontSize)}}getImageData(){return{width:0,height:0,data:new Uint8ClampedArray(0)}}},dg=Ss("canvas")||Ss("canvas-prebuilt");function ei(t=Pv,e=kv){if(Yr){const i=document.createElement("canvas");return i.width=t,i.height=e,i}if(dg){let i=null;return i="createCanvas"in dg?dg.createCanvas(t,e):new dg(t,e),i.style={},i}const n=new CM;return n.width=t,n.height=e,n}function Iv(t,e,n=t.width,i=t.height){e.clearRect(0,0,n,i)}function ta(t,e,n,i=""){t.font=`${i} ${n}px ${e}`}function PM(){return l1(ei(),{},"webgl")!==null}var kM=t=>{const{canvas:e,width:n,height:i}=wt({canvas:document.createElement("canvas"),width:window.innerWidth*devicePixelRatio,height:window.innerHeight*devicePixelRatio},t);e.width=Math.ceil(n),e.height=Math.ceil(i),e.style.width=Math.ceil(n/devicePixelRatio)+"px",e.style.height=Math.ceil(i/devicePixelRatio)+"px";const s=e.getContext("webgl2",{antialias:!0});if(!s)throw new Error("WebGL 2.0 not supported");return s},IM=(t,e,n)=>{const i=kM();return i.canvas.addEventListener("webglcontextlost",n),{context:i,cleanUp:()=>{var s;i.canvas.removeEventListener("webglcontextlost",n),(s=i.getExtension("WEBGL_lose_context"))==null||s.loseContext()}}};function l1(t,e,n){let i=t.getContext(n,e);return i||(i=t.getContext("experimental-webgl",e)),i||null}function u1(t,e){if(e<2)return t;const n=t.split(`
`),i=[];for(let s=0;s<n.length;++s){const r=n[s];if(r.length<e)i.push(r);else{const o=MM(n[s],e);for(let a=0;a<o.length;++a)i.push(o[a])}}return i.join(`
`)}function MM(t,e){const n=[""],i=t.split(" ");for(let s=0;s<i.length;s++){const r=n[n.length-1],o=i[s];r.length+1+o.length<=e&&r.length?n[n.length-1]+=(r.length>0?" ":"")+o:n.push(o)}return n}function NM(t,e){if(t===null)return null;const n=(t=t.toString()).split(`
`),i=[];let s=0;for(let r=0;r<n.length;r++){let o=n[r];if(!e||e<=1||o.length<e)i.push(o),s=Math.max(s,o.length);else{const a=MM(n[r],e);for(let l=0;l<a.length;l++)o=a[l],i.push(o),s=Math.max(s,o.length)}}return{data:i,maxLength:s,lines:i.length}}function RM(){const t=Ss("@mapbox/mapbox-gl-rtl-text")||Ss("mapbox-gl-rtl-text"),e=t?t.processBidirectionalText:qo?window.processBidirectionalText:null,n=t?t.applyArabicShaping:qo?window.applyArabicShaping:null;return{processBidirectionalText:e?s=>{if(s===null||s==null)return"";const r=[];let o=0,a="";const l=s.split(`
`);for(let d=0;d<l.length;d++){const h=l[d],c=l[d].length+o;c>0&&d<l.length-1&&r.push(c),a+=d>0?""+h:h,o+=h.length}return e(a,r).join(`
`)}:s=>s,applyArabicShaping:n?s=>s==null?null:typeof s=="number"?s.toString():n(s):s=>s==null?null:s.toString()}}var oy=_p(),hg=10,P4=1<<17,k4=65536,I4=256,LA=128,M4=25,FM=1e3,Mv=2,N4=class{constructor(t){this._patternManager=t,this._canvas=ei(),this._ctx=this._canvas.getContext("2d",{willReadFrequently:!0}),this._processBidirectionalText=RM().processBidirectionalText,this._cornerRadius=0,this._version=0,this._textPattern={id:0,type:Qo,attributes:{text:"",font:"",size:0,style:"normal",align:"center"},dimensions:{width:0,height:0}},this._textDimensions={width:0,height:0},this._lineWidthList=new Array(64),this._init()}_init(){this._mustClear=!1,this._clear()}reset(){this._init()}clear(){this._mustClear=!0}_measureChar(t,e,n){return ta(this._ctx,e,zh,n),this._ctx.measureText(t).width/zh}_getAtlas(t,e,n,i){const s=n===uc?0:n,r=this._byFont[t]||(this._byFont[t]={none:void 0,bold:void 0,italic:void 0,normal:void 0}),o=r[i]||(r[i]={}),a=o[e]||(o[e]=new Array(50));return a[s]||(a[s]=new Array(256))}_getMeasurementAtlas(t,e){const n=this._widthAtlases[e];return n[t]||(n[t]=new Array(256))}measureText(t,e,n,i=1){if(!e)return this._textDimensions.width=0,this._textDimensions.height=0,this._textDimensions;const s=this._getMeasurementAtlas(e,n);let r=0,o=0,a=1;for(let l=0;l<t.length;++l){const d=t.charCodeAt(l);if(d===hg)o>r&&(r=o),o=0,a+=1;else{let h=s[d];h===void 0&&(h=this._measureChar(t[l],e,n),s[d]=h),o+=h}}return o>r&&(r=o),this._textDimensions.width=r*i,this._textDimensions.height=a*i,this._textDimensions}_getCharInfo(t,e,n,i,s,r){let o=t[e];if(!o){const a=String.fromCharCode(e);o={ratio:this._measureChar(a,n,i),patternId:0},o.patternId=this._patternManager.getIdFromDefinition({id:0,type:Ca,attributes:{text:a,font:n,style:i,size:s,align:r}}),t[e]=o}return o}storeTextInDataView(t,e,n,i){let s=e;if(i&&i.type===Qo){const{font:r,style:o,size:a,align:l}=i.attributes,d=l==="center",h=this._getAtlas(r,o,a,l);let c=0,g=1,m=0,_=0;const p=this._lineWidthList,v=this._processBidirectionalText(i.attributes.text);for(let S=0;S<v.length;++S){const A=v.charCodeAt(S);A===hg?(m>c&&(c=m),p[_]=m,_++,m=0,g++):m+=this._getCharInfo(h,A,r,o,a,l).ratio}p[_]=m,m>c&&(c=m),_=0;let x=-(d?p[_]:c)/2,b=(1-g)/2,E=0;for(let S=0;S<v.length;++S){const A=v.charCodeAt(S),T=h[A];if(A===hg)_+=1,x=-(d?p[_]:c)/2,b+=S===0?.5:1,E=0;else{const P=T.ratio,k=T.patternId;x+=(P+E)/2,E=P;const I=(ws(x*FM+k4,0,P4-1)<<8)+ws(b*Mv+LA,0,I4-1);t.setUint16(s,k,oy),t.setUint32(s+2,I,oy),s+=vf}}}this._fillWithZeros(t,s,n)}extractTextFromDataView(t,e,n){const i=t,s=oy,r=i.getUint16(e,s),o=this._textPattern,a=this._patternManager.getDefinitionFromId(r),{font:l,style:d,size:h,align:c}=a.attributes,g=this._getAtlas(l,d,h,c),m=[];let _=0,p=0,v=0,x=null;for(let E=e;E<n;E+=vf){const S=i.getUint16(E,s);if(!S)break;const A=(i.getUint8(E+2)-LA)/Mv,T=this._patternManager.getDefinitionFromId(S);if(!T||!T.attributes||!T.attributes.text)break;const P=T.attributes.text.charCodeAt(0),k=g[P];x===null?x=A:A>x&&(_>p&&(p=_),_=0,v+=1,m.push(hg),x=A),m.push(P),k&&(_+=k.ratio)}_>p&&(p=_);const b=String.fromCharCode.apply(null,m);return o.attributes.style=d,o.attributes.font=l,o.attributes.size=h,o.attributes.align=c,o.attributes.text=this._processBidirectionalText(b),o.dimensions&&(o.dimensions.width=p,o.dimensions.height=v),o}_fillWithZeros(t,e,n){for(let i=e;i<n;i+=vf)t.setUint16(i,0)}_clear(){this._byFont={},this._widthAtlases={normal:{},bold:{},italic:{}}}update(){this._mustClear&&(this._clear(),this._mustClear=!1)}getVersion(){return this._version}getCornerRadius(){return this._cornerRadius}setCornerRadius(t){t!==this._cornerRadius&&(this._cornerRadius=t,this._version++)}};function cg(t,e,n,i,s){const r=1-s;return r*r*r*t+3*s*r*r*e+3*s*s*r*n+s*s*s*i}function Ql(t,e,n,i){const s=1-i;return s*s*t+2*s*i*e+i*i*n}var OM=(t,e)=>2/(1+Math.exp(-Math.abs(t*e))),Nv=class Rv extends dc{constructor({bufferList:e,patternManager:n,boundariesManager:i,shapeManager:s,textManager:r,memoryManager:o}){super(),this._firstFrame=!0,this._width=0,this._height=0,this._pixelRatio=0,this._viewX=0,this._viewY=0,this._viewZoom=0,this._viewAngle=0,this._viewAngleCos=0,this._viewAngleSin=0,this._currentTime=0,this._scales={bytesToActualCoord:0,bytesToActualScaledSize:0,bytesToActualMinVisibleSize:0,bytesToActualSymbolicSize:0,bytesToActualDashLength:0,bytesToActualGapLength:0,bytesToActualPatternScale:0},this._shapesVersion=0,this._patternsVersion=0,this._boundariesVersion=0,this._textsVersion=0,this._backgroundRgba=[1,1,1,0],this._renderBackground=!1,this._hideImages=!1,this._genericObject=i1(),this._littleEndian=_p(),this._bufferList=e,this._shapeManager=s,this._patternManager=n,this._boundariesManager=i,this._textManager=r,this._memoryManager=o}static createInitData(){return null}static getName(){return null}static isAvailable(){return!0}static setEdgeArrowSizeRatio(e){Rv.edgeArrowSizeRatio=e}static setMinEdgeTipSize(e){Rv.minEdgeTipSize=e}getDomElement(){return null}_initCanvas(e){e.style.touchAction="none"}export(e){return Promise.resolve()}extractElement(e,n){return this._memoryManager.extractGenericElement(e,n,this._scales)}_compareDimensions(e,n,i){return(e!==this._width||n!==this._height||i!==this._pixelRatio)&&(this._width=e,this._height=n,this._pixelRatio=i,!0)}_compareView(e,n,i,s){return(e!==this._viewX||n!==this._viewY||i!==this._viewZoom||s!==this._viewAngle)&&(this._viewX=e,this._viewY=n,this._viewZoom=i,this._viewAngle=s,this._viewAngleCos=Math.cos(s),this._viewAngleSin=Math.sin(s),!0)}_compareCurrentTime(e){return e!==this._currentTime&&(this._currentTime=e,!0)}_compareBackgroundColor(e,n){return(e!==this._backgroundColor||n!==this._renderBackground)&&(this._renderBackground=n,this._backgroundColor=e,this._backgroundRgba=fi(this._backgroundColor),!0)}_compareShapes(){return this._shapesVersion!==this._shapeManager.getVersion()&&(this._shapesVersion=this._shapeManager.getVersion(),!0)}_comparePatterns(){return this._patternsVersion!==this._patternManager.getVersion()&&(this._patternsVersion=this._patternManager.getVersion(),!0)}_compareBoundaries(){return this._boundariesVersion!==this._boundariesManager.getVersion()&&(this._boundariesVersion=this._boundariesManager.getVersion(),!0)}_compareTexts(){return this._textsVersion!==this._textManager.getVersion()&&(this._textsVersion=this._textManager.getVersion(),!0)}_compareIsDisplayableBuffer(e){return this._isBufferDisplayable!==e&&(this._isBufferDisplayable=e,!0)}_compareHideImages(e){return this._hideImages!==e&&(this._hideImages=e,!0)}renderFrame({x:e,y:n,zoom:i,angle:s,width:r,height:o,pixelRatio:a,backgroundColor:l,currentTime:d,isBufferDisplayable:h,hideImages:c,renderBackground:g}){const m=this._compareShapes(),_=this._comparePatterns(),p=this._compareBoundaries(),v=this._compareTexts(),x=this._compareDimensions(r,o,a),b=this._compareView(e,n,i,s),E=this._compareCurrentTime(d),S=this._compareBackgroundColor(l,g),A=this._compareIsDisplayableBuffer(h),T=this._compareHideImages(c);if(p){const P=this._boundariesManager,k=this._scales;k.bytesToActualCoord=1,k.bytesToActualScaledSize=P.maxScaledSize/aM,k.bytesToActualMinVisibleSize=P.maxMinVisibleSize/Sv,k.bytesToActualSymbolicSize=P.maxSymbolicSize/Jl,k.bytesToActualDashLength=P.maxDashLength/Kl,k.bytesToActualGapLength=P.maxGapLength/Kl,k.bytesToActualPatternScale=P.maxPatternScale/Jl}this._firstFrame&&this._beforeFirstFrame(),this._render({shapesChanged:m,patternsChanged:_,boundariesChanged:p,textsChanged:v,dimensionsChanged:x,viewChanged:b,currentTimeChanged:E,backgroundColorChanged:S,isBufferDisplayableChanged:A,isHideImagesChanged:T}),this._firstFrame&&(this._afterFirstFrame(),this._firstFrame=!1)}_render(e){}_beforeFirstFrame(){}_afterFirstFrame(){}destroy(){}ensureAnimationsReady(){}getImageData(){return null}setViewportClipping(e){}};Nv.edgeArrowSizeRatio=uM,Nv.minEdgeTipSize=dM;var jr=Nv,d1=()=>({minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),Ai=class bf{constructor(e={}){const{xValues:n=[],yValues:i=[],scaledSizeValues:s=[],fixedSizeValues:r=[]}=e;this.minX=Dr(n),this.minY=Dr(i),this.maxX=ql(n),this.maxY=ql(i),this.minScaledSize=Dr(s),this.maxScaledSize=ql(s),this.minFixedSize=Dr(r),this.maxFixedSize=ql(r),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY}reset(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.minScaledSize=1/0,this.maxScaledSize=-1/0,this.minFixedSize=1/0,this.maxFixedSize=-1/0,this.width=0,this.height=0,this.cx=0,this.cy=0,this}addPoint(e,n,i,s){return this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n),i!==void 0&&s!==void 0&&(s==="scaled"?(this.minScaledSize=Math.min(this.minScaledSize,i),this.maxScaledSize=Math.max(this.maxScaledSize,i)):(this.minFixedSize=Math.min(this.minFixedSize,i),this.maxFixedSize=Math.max(this.maxFixedSize,i))),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this}computeForZoom(e){const n=Math.max(this.maxScaledSize,this.maxFixedSize/e);return bf.from({minX:this.minX-n/2,minY:this.minY-n/2,maxX:this.maxX+n/2,maxY:this.maxY+n/2,width:this.width+n,height:this.height+n})}static from({minX:e,minY:n,maxX:i,maxY:s,width:r,height:o}={}){const a=new bf;return e!=null&&(a.minX=e),n!=null&&(a.minY=n),i!=null&&(a.maxX=i),s!=null&&(a.maxY=s),i!=null&&e!=null&&(a.width=r||(i-e)/2,a.cx=(e+i)/2),s!=null&&n!=null&&(a.height=o||(s-n)/2,a.cy=(n+s)/2),a}static fromValues(e,n,i){let s=1/0,r=1/0,o=-1/0,a=-1/0,l=-1/0;for(let h=0;h<e.length;h++){const c=e[h],g=n[h],m=i[h];c-m<s&&(s=c-m),g-m<r&&(r=g-m),c+m>o&&(o=c+m),g+m>a&&(a=g+m),m>l&&(l=m)}const d=bf.from({minX:s,minY:r,maxX:o,maxY:a});return d.maxScaledSize=l,d}pad(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,this.width+=2*e,this.height+=2*e,this}isValid(){return isFinite(this.width)&&isFinite(this.height)}extend(e){return this.addPoint(e.minX,e.minY),this.addPoint(e.maxX,e.maxY),this}bottomLeft(){return{x:this.minX,y:this.minY}}topRight(){return{x:this.maxX,y:this.maxY}}},R4=5,PA=5;function Pp(t,e,n,i,s,r){const o=r||{x1:0,y1:0,x2:0,y2:0},a=(i+i/PA*n)*PA,l=-s+Math.PI,d=-s+Math.PI/2;return o.x1=t+Math.cos(l)*a,o.y1=e+Math.sin(l)*a,o.x2=t+Math.cos(d)*a,o.y2=e+Math.sin(d)*a,o}function el(t,e,n,i,s,r){const o=r||{x:0,y:0},a=(t+n)/2,l=(e+i)/2,d=t-n,h=e-i,c=Math.sqrt(d*d+h*h);if(c===0)return o.x=a,o.y=l,o;const g=h/c,m=-d/c,_=-c*s/R4;return o.x=a+g*_,o.y=l+m*_,o}function kp(t,e,n,i,s,r,o,a={x:0,y:0}){return a.x=(1-t)*(1-t)*e+2*(1-t)*t*r+t*t*i,a.y=(1-t)*(1-t)*n+2*(1-t)*t*o+t*t*s,a}function h1(t,e,n,i,s,r,o,a={x:0,y:0}){return a.x=(2*t-2)*e+(2*i-4*r)*t+2*r,a.y=(2*t-2)*n+(2*s-4*o)*t+2*o,kk(a)}function DM(t,e,n,i,s,r,o,a={x:0,y:0}){return h1(t,e,n,i,s,r,n,a),om(a.x,a.y,0,0,Math.PI/2,a),a}function zM(t,e,n,i,s,r,o,a,l,d=0,h=!1){const c=n-2*o+s,g=i-2*a+r,m=-((n-t)*g-(i-e)*c)/((2*o-2*n)*g-(2*a-2*i)*c);if(m<0||m>1)return!1;let _=l/2;h&&(_*=1-m),_+=d;const p=Ql(n,o,s,m),v=Ql(i,a,r,m);return wn(p,v,t,e)<=_}function F4(t,e){const n=t.getAttribute("curvature"),[i,s]=t.getExtremities().getAttributes(["x","y"]),r=el(i.x,i.y,s.x,s.y,n);return kp(e,i.x,i.y,s.x,s.y,r.x,r.y)}function O4(t,e){const n=t.getAttribute("curvature"),[i,s]=t.getExtremities().getAttributes(["x","y"]),r=el(i.x,i.y,s.x,s.y,n);return DM(e,i.x,i.y,s.x,s.y,r.x,r.y)}function D4(t,e){const n=t.getAttribute("curvature"),[i,s]=t.getExtremities().getAttributes(["x","y"]),r=el(i.x,i.y,s.x,s.y,n);return h1(e,i.x,i.y,s.x,s.y,r.x,r.y)}function Uh(t,e,n,i,s,r,o,a,l,d={x:0,y:0}){const h=(1-t)*(1-t)*(1-t),c=3*t*(1-t)*(1-t),g=3*t*t*(1-t),m=t*t*t;return d.x=h*e+c*r+g*a+m*i,d.y=h*n+c*o+g*l+m*s,d}function BM(t,e,n,i,s,r,o,a,l,d,h,c){const g=wn(n,i,o,a);if(Math.abs(t-n)>g||Math.abs(e-i)>g)return!1;let m=.5,_=wn(t,e,n,i)<wn(t,e,s,r)?-.01:.01,p=100;const v=Uh(m,n,i,s,r,o,a,l,d);let x,b=wn(t,e,v.x,v.y);const E=h/2+c;for(;p-- >0&&m>=0&&m<=1&&b>E&&(_>.001||_<-.001);)x=b,Uh(m,n,i,s,r,o,a,l,d,v),b=wn(t,e,v.x,v.y),b>x?(_=-_/2,m+=_):m+_<0||m+_>1?(_/=2,b=x):m+=_;return b<E}function c1(t,e,n,i,s,r,o=d1()){const a=t+.6666666666666666*(n-t),l=e+2/3*(i-e);return Ip(t,e,a,l,a+1/3*(s-t),l+1/3*(r-e),s,r,o)}function Ip(t,e,n,i,s,r,o,a,l=d1()){const{min:d,max:h,sqrt:c}=Math;let g,m,_,p,v;l.minX=d(t,o),l.maxX=h(t,o),l.minY=d(e,a),l.maxY=h(e,a);for(let x,b,E,S,A,T,P,k=0;k<2;++k)if(k===0?(m=t,_=n,p=s,v=o):(m=e,_=i,p=r,v=a),b=6*m-12*_+6*p,x=-3*m+9*_-9*p+3*v,E=3*_-3*m,b|=0,x|=0,E|=0,x!==0)A=b*b-4*E*x,A<0||(T=(-b+c(A))/(2*x),T>0&&T<1&&(g=ay(T,m,_,p,v),k===0?(l.minX=d(l.minX,g),l.maxX=h(l.maxX,g)):(l.minY=d(l.minY,g),l.maxY=h(l.maxY,g))),P=(-b-c(A))/(2*x),P>0&&P<1&&(g=ay(P,m,_,p,v),k===0?(l.minX=d(l.minX,g),l.maxX=h(l.maxX,g)):(l.minY=d(l.minY,g),l.maxY=h(l.maxY,g))));else{if(b===0)continue;S=-E/b,S>0&&S<1&&(g=ay(S,m,_,p,v),k===0?(l.minX=d(l.minX,g),l.maxX=h(l.maxX,g)):(l.minY=d(l.minY,g),l.maxY=h(l.maxY,g)))}return l}function ay(t,e,n,i,s){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*i+Math.pow(t,3)*s}function z4(t,e,n,i,s,r){const o=t-2*n+s,a=e-2*i+r,l=2*n-2*t,d=2*i-2*e,h=4*(o*o+a*a),c=4*(o*l+a*d),g=l*l+d*d,m=2*Math.sqrt(h+c+g),_=Math.sqrt(h),p=2*h*_,v=2*Math.sqrt(g),x=c/_;return(p*m+_*c*(m-v)+(4*g*h-c*c)*Math.log((2*_+x+m)/(x+v)))/(4*p)}function UM(t,e,n,i,s,r,o,a=0,l=!1){const d=wn(n,i,s,r),h=(o/2*(l?wn(t,e,s,r)/d:1)+a)/d,c=(s-n)*h,g=(r-i)*h,m=n+g,_=i-c,p=t-m,v=e-_,x=n-g-m,b=i+c-_,E=s+g-m,S=r-c-_,A=p*x+v*b,T=p*E+v*S;return A>0&&A<x*x+b*b&&T>0&&T<E*E+S*S}function B4(t,e,n,i,s=!1){if(s&&(gg(t,n)||gg(t,i)||gg(e,n)||gg(e,i)))return!1;let r=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y);const o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(o===0)return!1;const a=r/o;r=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y);const l=r/o;return!(a<=0||a>=1||l<=0||l>=1)}function gg(t,e){return t.x===e.x&&t.y===e.y}function Lu(t,e,n,i){return Math.atan2(i-e,n-t)}function U4(t,e,n){const i=Lu(t.x,t.y,e.x,e.y)-Lu(n.x,n.y,e.x,e.y);return i<0?i+2*Math.PI:i}function $4(t,e,n,i,s,r,o,a){const l=(a-r)*(n-t)-(o-s)*(i-e);if(l===0)return null;let d=e-r;return d=((o-s)*d-(a-r)*(t-s))/l,{x:t+d*(n-t),y:e+d*(i-e)}}function Nd(t,e,n,i,s,r,o,a){const l=t-n,d=e-i,h=s-o,c=r-a,g=l*c-h*d,m=(d*(t-s)-l*(e-r))/g;if(m<0||m>1)return null;const _=(h*(r-e)+c*(t-s))/g;return _>=0&&_<=1?{x:t-_*l,y:e-_*d}:null}function $M(t,e,n,i,s,r,o,a){let l;const d=[];return l=Nd(t,e,n,i,s,r,s,a),l&&d.push(l),l=Nd(t,e,n,i,s,a,o,a),l&&d.push(l),l=Nd(t,e,n,i,o,a,o,r),l&&d.push(l),l=Nd(t,e,n,i,o,r,s,r),l&&d.push(l),d}function tu(t,e,n,i,s,r,o,a){const l=((o-s)*(e-r)-(a-r)*(t-s))/((a-r)*(n-t)-(o-s)*(i-e)),d=((n-t)*(e-r)-(i-e)*(t-s))/((a-r)*(n-t)-(o-s)*(i-e));return l>=0&&l<=1&&d>=0&&d<=1}function g1(t,e,n,i,s,r,o,a){return t>=s&&e>=r&&t<=o&&e<=a||n>=s&&i>=r&&n<=o&&i<=a||!!tu(t,e,n,i,s,r,s,a)||!!tu(t,e,n,i,o,r,o,a)||!!tu(t,e,n,i,s,r,o,r)||!!tu(t,e,n,i,s,a,o,a)}function jM(t,e,n){return Math.sqrt(f1(t.x,t.y,e.x,e.y,n.x,n.y))}function f1(t,e,n,i,s,r){const o=gf(n,i,s,r);if(o===0)return gf(t,e,n,i);let a=((t-n)*(s-n)+(e-i)*(r-i))/o;return a=Math.max(0,Math.min(1,a)),gf(t,e,n+a*(s-n),i+a*(r-i))}function GM(t,e,n,i,s,r){const o=s-n,a=r-i;if(o===0&&a===0)return{x:n,y:i};const l=((t-n)*o+(e-i)*a)/(o*o+a*a);return l<0?{x:n,y:i}:l>1?{x:s,y:r}:{x:n+l*o,y:i+l*a}}function j4(t,e,n,i,s,r){const o=s-n,a=r-i,l=((t-n)*o+(e-i)*a)/(o*o+a*a);return{x:n+o*l,y:i+a*l}}function Mp(t,e,n,i,s,r){const o=r||{x:0,y:0},a=(t+n)/2,l=(e+i)/2,d=t-n,h=e-i,c=Math.sqrt(d*d+h*h);if(c===0)return o.x=a,o.y=l,o;const g=h/c,m=-d/c,_=-c*s/Tp;return o.x=a+g*_,o.y=l+m*_,o}function m1(t,e,n,i,s,r){const o=r||{x1:0,y1:0,x2:0,y2:0},a=(i+i/Am*n)*Am,l=-s+vs,d=vs/2-s;return o.x1=t+Math.cos(l)*a,o.y1=e+Math.sin(l)*a,o.x2=t+Math.cos(d)*a,o.y2=e+Math.sin(d)*a,o}var G4={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},center:{x:0,y:0}},V4=[{name:"topLeft",dx:-1,dy:-1},{name:"topRight",dx:1,dy:-1},{name:"bottomLeft",dx:-1,dy:1},{name:"bottomRight",dx:1,dy:1}],Rr={x:0,y:0};function H4(t,e,n,i,s,r,o,a,l,d,h,c){r=r||o.getNodes()._indexes;const g=l.getZoom(),m=o.getObjectList(!0),_=a.getFlexArrays().nodes.current;let p=1/0,v=0,x=-1/0;a.update();for(let b=0;b<r.length;++b){const E=r[b];if(_.excluded.get(E)||!_.detectable.get(E)||h.has(E))continue;const S=_.x.get(E),A=_.y.get(E),T=_.layer.get(E);if(T<x)continue;Rr.x=S,Rr.y=A;const P=l.graphToScreenCoordinates(Rr),k=P.x,I=P.y,R=_.shape.get(E),M=_.scalingMethod.get(E)==="scaled",z=_.radius.get(E)*(M?g:1),j=z+s,X=(t-k)/j,O=(e-I)/j;if(Rr.x=t,Rr.y=e,!(i&&VM(Rr,E,a,l,d)))if(d.checkShapeHit(R,X,O)){const N=o.getAttribute(!0,"virtual").get(E)!==0;if(j>p&&N)continue;p=j}else{if(!n)continue;{const N=c(_.text.content.get(E)||null),W=_.textHidden.get(E),U=_.text.minVisibleSize.get(E);if(W||!N||(M?2*z:1/0)<U)continue;const K=u1(N,_.text.maxLineLength.get(E)),Z=_.innerStroke.width.get(E),rt=_.text.margin.get(E),vt=_.text.padding.get(E),St=_.text.size.get(E),ut=_.text.scale.get(E),_t=_.text.scaling.get(E),Rt=_.text.font.get(E),Gt=_.text.style.get(E),Yt=_.text.position.get(E),Et=d.measureText(K,Rt,Gt,1),Tt=_t?ut*z*2:St,re=Et.width*Tt/2+vt,Xt=Et.height*Tt/2+vt,se=G4[Yt],de=Z+rt+z,q=k+(de+re)*se.x,ht=I+(de+Xt)*se.y;if(t<=q-re||t>=q+re||e<=ht-Xt||e>=ht+Xt)continue}}v=E,x=T}return m.get(v)||null}var kA=Math.cos(Math.PI/4);function VM(t,e,n,i,s){const r=n.getFlexArrays().nodes.current,o=i.getZoom(),a=r.scalingMethod.get(e)==="scaled",l=r.radius.get(e)*(a?o:1),d=r.x.get(e),h=r.y.get(e);for(let c=0;c<4;c++){const{name:g,dx:m,dy:_}=V4[c],p=r.badges[g].stroke.width.get(e),v=r.badges[g].stroke.scalingMethod.get(e)==="scaled",x=r.badges[g].scale.get(e)*l+(v?o:1)*p,b=r.badges[g].minVisibleSize.get(e)/2,E=r.badges[g].positionScale.get(e);if(!r.badges[g].text.content.get(e)&&!r.badges[g].image.url.get(e)||x<b)continue;const S=i.graphToScreenCoordinates({x:d+r.radius.get(e)*E*m*kA,y:h+r.radius.get(e)*E*_*kA}),{x:A,y:T}=S,P=(t.x-A)/x,k=(t.y-T)/x;if(s.checkShapeHit("circle",P,k))return g}}function W4(t,e,n,i,s,r,o,a,l){s=s||r.getEdges()._indexes;const d=r.getObjectList(!1),h=l.getFlexArrays(),c=h.edges.current,g=h.nodes.current,m=o.getZoom(),_=i/m;Rr.x=t,Rr.y=e;const p=o.screenToGraphCoordinates(Rr),v=p.x,x=p.y;let b=0;l.update();for(let E=0;E<s.length;++E){const S=s[E],A=c.source.get(S),T=c.target.get(S),P=c.excluded.get(S),k=c.detectable.get(S),I=a.has(A),R=a.has(T);if(P||!k||I||R)continue;const M=A===T,z=c.curvature.get(S),j=c.shape.body.get(S)==="triangle",X=c.scalingMethod.get(S)==="scaled",O=c.width.get(S)/(X?1:m),N=g.x.get(A),W=g.y.get(A),U=g.x.get(T),K=g.y.get(T);if(M){const Z=g.scalingMethod.get(A)==="scaled",rt=m1(N,W,z,g.radius.get(A)/(Z?1:m),0);if(!BM(v,x,N,W,N,W,rt.x1,rt.y1,rt.x2,rt.y2,O,_))continue}else if(z!==0){const Z=Mp(N,W,U,K,z);if(!zM(v,x,N,W,U,K,Z.x,Z.y,O,_,j))continue}else if(!UM(v,x,N,W,U,K,O,_,j))continue;b=S}return d.get(b)||null}function X4(t){const e=t.getNodeAttribute("radius"),n=t.getEdgeAttribute("width"),i=t.getNodes(),s=t.getEdges();let r=0,o=0;for(let a=0;a<i._indexes.length;a++){const l=i._indexes[a],d=e.get(l);d>r&&(r=d)}for(let a=0;a<s._indexes.length;a++){const l=s._indexes[a],d=n.get(l);d>o&&(o=d)}return Math.max(2*r,o)}function Z4(t){return t===null?"none":t==="webgl"?"WebGL":t==="svg"?"SVG":t==="canvas"?"Canvas":t}function HM(t,e,n,i){const s=(t-e)/n,r=s*s,o=r*s,a=s1.getCoefficients(i),l=s<.5?0:4;return ws(a[l]+a[l+1]*s+a[l+2]*r+a[l+3]*o,0,1)}function Rd(t,e,n,i){if(t===e)return t;const[s,r,o,a]=fi(t),[l,d,h,c]=fi(e);return`rgba(${Math.round(255*Te(s,l,n))},${Math.round(255*Te(r,d,n))},${Math.round(255*Te(o,h,n))},${Te(a,c,i)})`}function Y4(t,e){const[n,i,s,r]=fi(t);return`rgba(${255*n},${255*i},${255*s},${r*e})`}var fg=1/xi,WM=class extends jr{constructor(t){super(t),this._cachePoints=[],this._nextCachePoint=0,this._tmp={x1:0,y1:0,x2:0,y2:0},this._pointCopies=Array(128),this._clipViewport=!0}_resetCachePoints(){this._nextCachePoint=0}_point(t,e){let n=this._cachePoints[this._nextCachePoint++];return n||(n={x:0,y:0},this._cachePoints.push(n)),n.x=t,n.y=e,n}setViewportClipping(t){this._clipViewport=t}_displayBuffer(t){const e=t.getSize(),n=t.animated;for(let i=0;i<e;++i){const s=this.extractElement(t,i);s.valid&&this._displayElement(s,n)}}_mixAttributes(t,e,n){const i=HM(this._currentTime,n.beginTime,n.duration,n.easing);return t.dashLength=Te(e.dashLength,t.dashLength,i),t.gapLength=Te(e.gapLength,t.gapLength,i),t.offsetAngle=Te(e.offsetAngle,t.offsetAngle,i),t.opacity=Te(e.opacity,t.opacity,i),t.globalMinVisibleSize=Te(e.globalMinVisibleSize,t.globalMinVisibleSize,i),t.strokeMinVisibleSize=Te(e.strokeMinVisibleSize,t.strokeMinVisibleSize,i),t.patternMinVisibleSize=Te(e.patternMinVisibleSize,t.patternMinVisibleSize,i),t.symbolicSize=Te(e.symbolicSize,t.symbolicSize,i),t.curvature=Te(e.curvature,t.curvature,i),t.fillColor=Rd(e.fillColor,t.fillColor,i,i),t.strokeColor=Rd(e.strokeColor,t.strokeColor,i,i),t.patternColor=Rd(e.patternColor,t.patternColor,i,i),t.x1=Te(e.x1,t.x1,i),t.y1=Te(e.y1,t.y1,i),t.x2=Te(e.x2,t.x2,i),t.y2=Te(e.y2,t.y2,i),t.rectWidthOrSourceRadiusScaled=Te(e.rectWidthOrSourceRadiusScaled,t.rectWidthOrSourceRadiusScaled,i),t.rectWidthOrSourceRadiusFixed=Te(e.rectWidthOrSourceRadiusFixed,t.rectWidthOrSourceRadiusFixed,i),t.rectHeightOrTargetRadiusScaled=Te(e.rectHeightOrTargetRadiusScaled,t.rectHeightOrTargetRadiusScaled,i),t.rectHeightOrTargetRadiusFixed=Te(e.rectHeightOrTargetRadiusFixed,t.rectHeightOrTargetRadiusFixed,i),t.thicknessOrFontSizeScaled=Te(e.thicknessOrFontSizeScaled,t.thicknessOrFontSizeScaled,i),t.thicknessOrFontSizeFixed=Te(e.thicknessOrFontSizeFixed,t.thicknessOrFontSizeFixed,i),t.strokeWidthScaled=Te(e.strokeWidthScaled,t.strokeWidthScaled,i),t.strokeWidthFixed=Te(e.strokeWidthFixed,t.strokeWidthFixed,i),t.offsetScaled=Te(e.offsetScaled,t.offsetScaled,i),t.offsetFixed=Te(e.offsetFixed,t.offsetFixed,i),t}_computeRenderInfo(t){const e=this._viewZoom,n=this._point(t.x1,t.y1),i=this._point(t.x2,t.y2);return{shape:this._shapeManager.getDefinitionFromName(t.shape),pieceId:t.pieceId,dashLength:t.dashLength,gapLength:t.gapLength,hasHead:t.hasHead,hasTail:t.hasTail,isBodyTriangle:t.isBodyTriangle,isSelfLoop:t.isSelfLoop,patternScale:t.patternScale,offsetAngle:pm(t.offsetAngle),isText:t.isText,adjustTextAngle:t.adjustTextAngle,isBadge:t.isBadge,unusedFlag2:t.unusedFlag2,unusedFlag3:t.unusedFlag3,opacity:t.opacity,globalMinVisibleSize:t.globalMinVisibleSize,strokeMinVisibleSize:t.strokeMinVisibleSize,patternMinVisibleSize:t.patternMinVisibleSize,symbolicSize:t.symbolicSize===0?1/0:t.symbolicSize*e,curvature:t.curvature,pattern:t.pattern,fillColor:t.fillColor,strokeColor:t.strokeColor,patternColor:t.patternColor,pos1OnGraph:n,pos2OnGraph:i,pos1:this._graphToScreenCoordinates(n),pos2:this._graphToScreenCoordinates(i),rectWidthOrSourceRadius:t.rectWidthOrSourceRadiusScaled*e+t.rectWidthOrSourceRadiusFixed,rectHeightOrTargetRadius:t.rectHeightOrTargetRadiusScaled*e+t.rectHeightOrTargetRadiusFixed,thicknessOrFontSize:t.thicknessOrFontSizeScaled*e+t.thicknessOrFontSizeFixed,strokeWidth:t.strokeWidthScaled*e+t.strokeWidthFixed,offset:t.offsetScaled*e+t.offsetFixed}}_applyBackgroundBlending(t){t.opacity!==1&&(t.fillColor=this._blendColor(t.fillColor,t.opacity),t.strokeColor=this._blendColor(t.strokeColor,t.opacity),t.textColor=this._blendColor(t.textColor,t.opacity))}_pointArray(t){let e=this._pointCopies[t];if(!e){e=new Array(t),this._pointCopies[t]=e;for(let n=0;n<t;++n)e[n]={x:0,y:0,r:0}}return e}_scalePoints(t,e,n,i){const s=t.shape.points.length,r=this._pointArray(s);for(let l=0;l<s;++l){const d=t.shape.points[l],h=r[l];h.x=e.x+d.x*n,h.y=e.y+d.y*i,h.r=d.r*n}const o=t.pos2OnGraph.x-t.pos1OnGraph.x,a=t.pos2OnGraph.y-t.pos1OnGraph.y;if(o!==0||a!==0){const l=Math.sqrt(o*o+a*a),d=o/l,h=a/l;for(const c of r){const g=c.x-e.x,m=c.y-e.y;c.x=e.x+d*g+h*m,c.y=e.y-h*g+d*m}}return r}_drawPoints(t,e=!1){t.length===1?this._drawCircle(t[0],t[0].r):this._drawPolygon(t,e)}_computeCenter(t){const e=Math.cos(t.offsetAngle),n=Math.sin(t.offsetAngle),i=(t.pos1.x+t.pos2.x)/2+e*t.offset,s=(t.pos1.y+t.pos2.y)/2+n*t.offset;return this._point(i,s)}_displayTextBox(t,e,n,i){const s=this._computeCenter(t),r=t.rectWidthOrSourceRadius/2,o=t.rectHeightOrTargetRadius/2;(e||i)&&this._drawRoundedRectangle(s,r,o,0,t.fillColor)}_displayNodeComponent(t,e,n,i){const s=this._computeCenter(t);if(t.pattern.type!==Qo){const r=t.rectWidthOrSourceRadius/2,o=t.rectHeightOrTargetRadius/2,a=this._scalePoints(t,s,r,o);if((e||i)&&this._drawPoints(a,!0),e&&this._fill(t.fillColor),i){if(this._startClip(),t.pattern.type===hc){let l=t.pattern.attributes.colorArray;t.opacity!==1&&(l=l.map(d=>this._blendColor(d,t.opacity))),this._displayPieChart(s,r,l)}else if(t.pattern.type===Da||t.pattern.type===za){const d=Math.round(t.rectHeightOrTargetRadius*t.patternScale),h=t.pattern.attributes.text,c=t.patternColor,g=t.pattern.attributes.font,m=t.pattern.attributes.style,_=t.pattern.attributes.align,p=t.rectWidthOrSourceRadius,v=t.pattern.attributes.paddingTop,x=t.pattern.attributes.paddingLeft;this._displayText(s,0,h,c,g,d,m,_,p,x,v,!0)}else if(t.pattern.type===Xo){const l=t.pattern.attributes.image;if(l.isDummy||l.width&&l.height){const d=t.pattern.attributes.duplicated,h=d?1:t.patternScale,c=t.rectWidthOrSourceRadius*h,g=t.rectHeightOrTargetRadius*h,m=t.pattern.attributes.scaled,_=t.opacity;this._displayImage(s,c,g,l,m,d,_)}}this._endClip()}if(n){const l=t.strokeWidth/2,d=this._scalePoints(t,s,r+l,o+l);this._drawPoints(d),this._stroke(t.strokeColor,t.strokeWidth)}}else if(i){const o=t.thicknessOrFontSize,a=t.pattern.attributes.text,l=t.patternColor,d=t.pattern.attributes.font,h=t.pattern.attributes.style,c=t.pattern.attributes.align,g=t.rectWidthOrSourceRadius;this._displayText(s,0,a,l,d,o,h,c,g,0,0,!1)}}_displayElement(t,e){if(!t.end||!t.end.shape||!t.end.pieceId||e&&(!t.start||!t.animation))return;this._resetCachePoints();const n=e?this._mixAttributes(t.end,t.start,t.animation):t.end,i=this._computeRenderInfo(n);if(i.symbolicSize<i.globalMinVisibleSize||i.opacity===0)return;this._applyBackgroundBlending(i);const s=!!(i.strokeColor&&i.strokeWidth>0&&i.symbolicSize>=i.strokeMinVisibleSize),r=i.pattern.type!==mi&&i.symbolicSize>=i.patternMinVisibleSize,o=!!i.fillColor;if(i.pieceId===As)return this._displayNodeComponent(i,o,s,r);if(i.pieceId===La)return this._displayTextBox(i,o,s,r);const a=i.pos2.x-i.pos1.x,l=i.pos2.y-i.pos1.y,d=Math.sqrt(a*a+l*l);let h,c=null,g=null;if(i.isSelfLoop){const m=i.pieceId===pa||i.pieceId===pa+La?i.strokeWidth/2:i.rectWidthOrSourceRadius,{x1:_,y1:p,x2:v,y2:x}=this._getSelfLoopControlPoints(i.pos1,i.curvature,m);c=this._point(_,p),g=this._point(v,x),h=J4(i.pos1,c,g,i.pos2,1)}else i.curvature?(c=this._getQuadraticCurveControlPoint(i),h=q4(i.curvature,d,1)):h=d;if(i.pieceId===pa||i.pieceId===pa+La){const m=i.strokeWidth,_=this._getPointOnLine(i.pos1,c,g,i.pos2,.5),p=this._getTangentOnLine(i.pos1,c,g,i.pos2,.5);if(i.rectWidthOrSourceRadius>=h-m&&!i.isSelfLoop){if(!i.adjustTextAngle)return;p.x=1,p.y=0}let v=-Math.atan2(p.y,p.x);const x=pm(i.offsetAngle-v);(!i.isSelfLoop&&x<0||i.isSelfLoop&&i.offsetAngle<0)&&(p.x*=-1,p.y*=-1),(v>Math.PI/2||v<-Math.PI/2)&&(v+=Math.PI);const b=this._getOrthogonal(p),E=_.x+b.x*i.offset,S=_.y+b.y*i.offset;if(i.pieceId===pa+La){if(!i.fillColor)return;const A=i.rectWidthOrSourceRadius/2,T=i.rectHeightOrTargetRadius/2;this._drawRoundedRectangle(this._point(E,S),A,T,x+Math.PI/2,i.fillColor)}else{const A=this._point(E,S),T=v,P=i.thicknessOrFontSize,k=i.pattern.attributes.text,I=i.patternColor,R=i.pattern.attributes.font,M=i.pattern.attributes.style,z=i.pattern.attributes.align,j=i.rectWidthOrSourceRadius;this._displayText(A,T,k,I,R,P,M,z,j,0,0,!1)}}else{const m=i.pieceId===e1,_=i.pieceId===n1,p=Math.cos(i.offsetAngle),v=Math.sin(i.offsetAngle);i.pos1.x+=p*i.offset,i.pos1.y+=v*i.offset,i.pos2.x+=p*i.offset,i.pos2.y+=v*i.offset;const x=i.shape.name==="line",b=i.thicknessOrFontSize,E=i.rectWidthOrSourceRadius,S=i.rectHeightOrTargetRadius,A=+i.hasHead,T=+i.hasTail,P=Math.max(jr.minEdgeTipSize,b*jr.edgeArrowSizeRatio),k=A*Math.min(5*E,P),I=T*Math.min(5*S,P),R=i.isSelfLoop?1/0:d-E-S,M=Math.min(0,R-k-I)/2,z=b/2;let j=E>z?E-Math.sqrt(E*E-z*z):z;const X=Math.max(E+I+T*M,0)-(1-A)*j;j=E>z?S-Math.sqrt(S*S-z*z):z;const O=Math.max(S+k+A*M,0)-(1-T)*j;if(m||_){const N=_?-1:1,W=(m?h-O:X)-N;let U=null,K=null;if(i.isSelfLoop&&c&&g){const Z=this._getTFromLengthOnCubicCurve(i.pos1,c,g,i.pos2,W-i.strokeWidth/2*N);U=this._getPointOnCubicCurve(i.pos1,c,g,i.pos2,Z),K=this._getTangentOnCubicCurve(i.pos1,c,g,i.pos2,Z)}else if(i.curvature&&c){const Z=this._getTFromLengthOnQuadraticCurve(i.pos1,c,i.pos2,W-i.strokeWidth/2*N);U=this._getPointOnQuadraticCurve(i.pos1,c,i.pos2,Z),K=this._getTangentOnQuadraticCurve(i.pos1,c,i.pos2,Z)}else{const Z=W/h;U=this._mixPoints(i.pos1,i.pos2,Z),K=this._point(a/d,l/d)}if(K.x*=N,K.y*=N,o){if(i.shape.hole){const rt=this._makeEdgeExtremityPoints(U,K,P,i.shape.hole);this._drawPoints(rt),this._startReverseClip()}const Z=this._makeEdgeExtremityPoints(U,K,P,i.shape.points);this._drawPoints(Z),this._fill(i.fillColor),i.shape.hole&&this._endReverseClip()}if(s){if(i.shape.hole){const vt=this._makeEdgeExtremityPoints(U,K,P,i.shape.hole);this._drawPoints(vt),this._stroke(i.strokeColor,i.strokeWidth)}const Z=P+i.strokeWidth/2,rt=this._makeEdgeExtremityPoints(U,K,Z,i.shape.points);this._drawPoints(rt),this._stroke(i.strokeColor,i.strokeWidth)}}else{if(h-X-O<=0)return;if(x){const N=K4(h,b,X,O,i.dashLength,i.gapLength);s&&(this._drawLine(i.pos1,c,g,i.pos2),this._stroke(i.strokeColor,b+2*i.strokeWidth,N)),o&&(this._drawLine(i.pos1,c,g,i.pos2),this._stroke(i.fillColor,b,N))}else{const N=X,W=h-O;if(s){const U=this._makeTriangleEdgeBody(i.pos1,c,g,i.pos2,N,W,b+i.strokeWidth/2,i.strokeWidth/2);this._drawPoints(U),this._stroke(i.strokeColor,i.strokeWidth)}if(o){const U=this._makeTriangleEdgeBody(i.pos1,c,g,i.pos2,N,W,b,0);this._drawPoints(U),this._fill(i.fillColor)}}}}}_makeTriangleEdgeBody(t,e,n,i,s,r,o,a){return e?n?this._makeSelfLoopTriangleEdge(t,e,n,i,s,r,o,a):this._makeCurveTriangleEdge(t,e,i,s,r,o,a):this._makeStraightTriangleEdge(t,i,s,r,o,a)}_makeCurveTriangleEdge(t,e,n,i,s,r,o){const a=2*xi+2,l=this._pointArray(a),d=this._getTFromLengthOnQuadraticCurve(t,e,n,i),h=(this._getTFromLengthOnQuadraticCurve(t,e,n,s)-d)/xi,c=(o-r)/xi/2;let g=r/2,m=d;for(let _=0;_<=xi;++_){const p=this._getPointOnQuadraticCurve(t,e,n,m),v=this._getTangentOnQuadraticCurve(t,e,n,m),x=this._getOrthogonal(v),b=x.x*g,E=x.y*g,S=l[_],A=l[a-1-_];S.x=p.x+b,S.y=p.y+E,A.x=p.x-b,A.y=p.y-E,m+=h,g+=c}return l}_makeSelfLoopTriangleEdge(t,e,n,i,s,r,o,a){const l=2*xi+2,d=this._pointArray(l),h=this._getTFromLengthOnCubicCurve(t,e,n,i,s),c=(this._getTFromLengthOnCubicCurve(t,e,n,i,r)-h)/xi,g=(a-o)/xi/2;let m=o/2,_=h;for(let p=0;p<=xi;++p){const v=this._getPointOnCubicCurve(t,e,n,i,_),x=this._getTangentOnCubicCurve(t,e,n,i,_),b=this._getOrthogonal(x),E=b.x*m,S=b.y*m,A=d[p],T=d[l-1-p];A.x=v.x+E,A.y=v.y+S,T.x=v.x-E,T.y=v.y-S,_+=c,m+=g}return d}_makeStraightTriangleEdge(t,e,n,i,s,r){const o=e.x-t.x,a=e.y-t.y,l=Math.sqrt(o*o+a*a),d=this._point(o/l,a/l),h=this._getOrthogonal(d),c=s/2,g=r/2,m=this._pointArray(4),_=m[0],p=m[1],v=m[2],x=m[3],b=t.x+d.x*n,E=t.y+d.y*n,S=t.x+d.x*i,A=t.y+d.y*i,T=h.x*c,P=h.y*c,k=h.x*g,I=h.y*g;return _.x=b+T,_.y=E+P,p.x=b-T,p.y=E-P,v.x=S-k,v.y=A-I,x.x=S+k,x.y=A+I,m}_makeEdgeExtremityPoints(t,e,n,i){const s=this._pointArray(i.length),r=n/2,o=t.x+e.x*r,a=t.y+e.y*r,l=e.x,d=e.y;for(let h=0;h<i.length;++h){const c=i[h],g=s[h],m=(l*c.x-d*c.y)*r,_=(d*c.x+l*c.y)*r;g.x=o+m,g.y=a+_,g.r=c.r*r}return s}_drawLine(t,e,n,i){e?n?this._drawCubicCurve(t,e,n,i):this._drawQuadraticCurve(t,e,i):this._drawStraightLine(t,i)}_getSelfLoopControlPoints(t,e,n){return m1(t.x,t.y,e,n,this._viewAngle,this._tmp)}_getQuadraticCurveControlPoint(t){return Mp(t.pos1.x,t.pos1.y,t.pos2.x,t.pos2.y,t.curvature,this._point(0,0))}_graphToScreenCoordinates(t){const e=this._width/2,n=this._height/2,i=(t.x-this._viewX)*this._viewZoom,s=(t.y-this._viewY)*this._viewZoom,r=this._viewAngleCos,o=this._viewAngleSin,a=r*i+o*s+e,l=-o*i+r*s+n;return this._point(a,l)}_blendColor(t,e){return t&&this._backgroundColor?Rd(this._backgroundColor,t,e,1):t?Y4(t,e):null}_getTangentOnLine(t,e,n,i,s){return e?n?this._getTangentOnCubicCurve(t,e,n,i,s):this._getTangentOnQuadraticCurve(t,e,i,s):this._getTangentOnStraightLine(t,i)}_getTangentOnStraightLine(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);return this._point(n/s,i/s)}_getTangentOnQuadraticCurve(t,e,n,i){const s=1-i,r=s*e.x+i*n.x-(s*t.x+i*e.x),o=s*e.y+i*n.y-(s*t.y+i*e.y),a=Math.sqrt(r*r+o*o);return this._point(r/a,o/a)}_getTangentOnCubicCurve(t,e,n,i,s){const r=1-s,o=r*r,a=s*s,l=o*(e.x-t.x)+2*r*s*(n.x-e.x)+a*(i.x-n.x),d=o*(e.y-t.y)+2*r*s*(n.y-e.y)+a*(i.y-n.y),h=Math.sqrt(l*l+d*d);return this._point(l/h,d/h)}_mixPoints(t,e,n){const i=Te(t.x,e.x,n),s=Te(t.y,e.y,n);return this._point(i,s)}_getOrthogonal(t){return this._point(-t.y,t.x)}_getPointOnLine(t,e,n,i,s){return e?n?this._getPointOnCubicCurve(t,e,n,i,s):this._getPointOnQuadraticCurve(t,e,i,s):this._mixPoints(t,i,s)}_getPointOnQuadraticCurve(t,e,n,i){const s=Ql(t.x,e.x,n.x,i),r=Ql(t.y,e.y,n.y,i);return this._point(s,r)}_getPointOnCubicCurve(t,e,n,i,s){const r=cg(t.x,e.x,n.x,i.x,s),o=cg(t.y,e.y,n.y,i.y,s);return this._point(r,o)}_getTFromLengthOnCubicCurve(t,e,n,i,s){let r=t.x,o=t.y,a=0,l=0;for(let d=0;d<xi;++d){a+=fg;const h=cg(t.x,e.x,n.x,i.x,a),c=cg(t.y,e.y,n.y,i.y,a),g=h-r,m=c-o,_=Math.sqrt(g*g+m*m),p=l+_;if(p>s)return a-fg*((p-s)/_);l=p,r=h,o=c}return 1}_getTFromLengthOnQuadraticCurve(t,e,n,i){let s=t.x,r=t.y,o=0,a=0;for(let l=0;l<xi;++l){o+=fg;const d=Ql(t.x,e.x,n.x,o),h=Ql(t.y,e.y,n.y,o),c=d-s,g=h-r,m=Math.sqrt(c*c+g*g),_=a+m;if(_>i)return o-fg*((_-i)/m);a=_,s=d,r=h}return 1}};function q4(t,e,n){const i=Math.abs(t)/Tp+EM,s=i*i,r=n-.5,o=r*r,a=1/(16*s),l=Math.sqrt(o+a),d=.5/i*Math.sqrt(s+.25);return Math.abs(2*i)*(r*l+.5*d+a*Math.log(Math.abs((r+l)/(-.5+d))))*e}function J4(t,e,n,i,s){const r=(t.x+e.x+n.x)/3,o=(t.y+e.y+n.y)/3,a=r-e.x,l=o-e.y,d=e.x-n.x,h=e.y-n.y,c=a*a+l*l,g=(d*d+h*h)/4,m=Math.sqrt(c-g);return 2*hM*m*3.14159265359*s}function K4(t,e,n,i,s,r){const o=[];if(n&&o.push(0,n),s&&r){const a=s*e,l=r*e,d=a+l,h=t-i-n-d;let c=0;for(;c<h;)o.push(a,l),c+=d;const g=t-i-n-c,m=Math.min(a,g),_=Math.max(g-m,0);o.push(m,_)}else o.push(t-i-n,0);return i&&o.push(0,i),o}var eu=0,oh=1,ah=2,_a=3,IA=4,p1=0,Fv=1,Q4={[eu]:{min:"NEAREST",mag:"NEAREST",mipmap:!1},[oh]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[ah]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[_a]:{min:"LINEAR_MIPMAP_LINEAR",mag:"LINEAR",mipmap:!0}},tG={[p1]:"ALPHA",[Fv]:"RGBA"};function Pu(t){return Math.ceil((t+2*Ko)/di)*di}function eG(t,e,n,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r],l=a.x,d=a.y,h=l+i,c=d+s;let g=h<n&&c<n;if(g){for(let m=l;m<h;++m)if(e[m+d*n]===1){g=!1;break}}if(g){for(let m=d;m<c;++m)if(e[l+m*n]===1){g=!1;break}}if(g){for(let m=l;m<h;++m)for(let _=d;_<c;++_)e[m+_*n]=1;return t.splice(r,1),t.push({x:l,y:c},{x:h,y:d}),a}}return null}function MA(t,e,n,i,s,r,o){const a=4*t,l=e>>1<<7,d=e%2<<7;o[a]=n/di,o[a+1]=i/di,o[a+2]=l+s/di,o[a+3]=d+r/di}function nG(t,e,n,i,s,r,o){i|=0,s|=0,r|=0,o|=0,e|=0;for(let a=0;a<r;++a)for(let l=0;l<o;++l){const d=4*(i+a+(s+l)*e),h=4*(a+l*r);t[d]=n[h],t[d+1]=n[h+1],t[d+2]=n[h+2],t[d+3]=n[h+3]}}function iG(t,e){let n=0,i=4;for(let r=0;r<t.length;++r){const{width:o,height:a}=t[r],l=Pu(o),d=Pu(a);n+=l*d,i=Math.max(i,Math.max(l,d))}const s=Io(Math.max(i,Math.sqrt(n)));return Math.min(s,e)}function NA(t,e){return Math.floor((e-t)/2)}function RA(t,e,n,i,s,r,o){const{min:a,mag:l,mipmap:d}=Q4[r],h=t[tG[o]];if(o===p1){const c=new Uint8Array(s*s);for(let g=0;g<c.length;++g)c[g]=i[4*g+3];i=c}t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,h,s,s,0,h,t.UNSIGNED_BYTE,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[l]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[a]),d&&t.generateMipmap(t.TEXTURE_2D)}function XM(t,e,n,i,s){const r=new Uint8Array(n*n*4),o=Math.ceil(n/di),a=new Uint8Array(o*o),l=[{x:0,y:0}];for(let d=0;d<e.length;++d){const h=e[d],c=h.id,g=Pu(h.width)/di,m=Pu(h.height)/di,_=eG(l,a,o,g,m);if(_){const p=h.width,v=h.height,x=h.pixels,b=g*di,E=m*di,S=_.x*di+NA(p,b),A=_.y*di+NA(v,E);nG(r,n,x,S,A,p,v),MA(c,t,S,A,b,E,s)}else{if(n<i)return XM(t,e,2*n,i,s);Wo(`exceeded max WebGL texture size of ${i}; some texts/icons/images won't be displayed`),MA(c,t,0,0,0,0,s)}}return{texture:r,size:n}}function sG(t,e,n,i){const{getDistanceFromStrokeVertically:s,getDistanceFromStrokeHorizontally:r}=t,o=e*(1-n)/2,a=(e-1)/2;for(let l=0;l<e;++l)for(let d=0;d<e;++d){const h=4*(d*e+l),c=(l-a)/o,g=(d-a)/o,m=ws(s(c,g),-1,1),_=ws(r(c,g),-1,1);rG(i,h,FA(m),FA(_))}}function FA(t){const e=(t+1)/2;return Math.floor(32768*e)}function rG(t,e,n,i){t[e]=n>>8,t[e+1]=n%256,t[e+2]=i>>8,t[e+3]=i%256}function ZM(t,e){let n=-Math.PI/2;const i=2*Math.PI/t.length;for(const s of t){const r=n+i;e(s,n,r),n=r}}function YM(t,e,n,i,s){ZM(e,(r,o,a)=>{t.beginPath(),t.moveTo(n,i),t.arc(n,i,s,o,a),t.fillStyle=r,t.fill()})}var oG=!ei().__dummy,aG=class extends WM{constructor(t){super(t),this._canvas=ei(),this._imgCanvas=ei(),this._initCanvas(this._canvas),this._ctx=this._canvas.getContext("2d"),this._imgCtx=this._imgCanvas.getContext("2d")}static getName(){return"Canvas"}static isAvailable(){return oG}getDomElement(){return this._canvas}_render({dimensionsChanged:t}){t&&yM(this._canvas,this._width,this._height,this._pixelRatio);const e=this._ctx,n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;e.clearRect(0,0,n,i),this._backgroundColor&&this._renderBackground&&(e.fillStyle=this._backgroundColor,e.fillRect(0,0,n,i));const s=this._bufferList.getBuffersByAscendingDepth();for(const r of s)this._isBufferDisplayable(r)&&this._displayBuffer(r)}_drawRoundedRectangle(t,e,n,i,s){const r=this._ctx,o=this._pixelRatio,a=t.x*o,l=t.y*o;e*=o,n*=o;const d=this._textManager.getCornerRadius(),h=Math.min(d*o,n);e+=h/2,r.save(),r.translate(a,l),r.rotate(i),r.beginPath(),r.arc(e-h,n-h,h,0,Math.PI/2),r.arc(-e+h,n-h,h,Math.PI/2,Math.PI),r.arc(-e+h,-n+h,h,Math.PI,3*Math.PI/2),r.arc(e-h,-n+h,h,3*Math.PI/2,0),s&&(r.fillStyle=s,r.fill()),r.restore()}_drawCircle(t,e){const n=this._ctx,i=this._pixelRatio,s=t.x*i,r=t.y*i,o=e*i;n.beginPath(),n.arc(s,r,o,0,2*Math.PI)}_drawPolygon(t){const e=this._ctx,n=this._pixelRatio;e.beginPath();const i=t[0];e.moveTo(i.x*n,i.y*n);for(let s=1;s<t.length;++s){const r=t[s];e.lineTo(r.x*n,r.y*n)}e.closePath()}_drawStraightLine(t,e){const n=this._ctx,i=this._pixelRatio;n.beginPath(),n.moveTo(t.x*i,t.y*i),n.lineTo(e.x*i,e.y*i)}_drawQuadraticCurve(t,e,n){const i=this._ctx,s=this._pixelRatio;i.beginPath(),i.moveTo(t.x*s,t.y*s),i.quadraticCurveTo(e.x*s,e.y*s,n.x*s,n.y*s)}_drawCubicCurve(t,e,n,i){const s=this._ctx,r=this._pixelRatio;s.beginPath(),s.moveTo(t.x*r,t.y*r),s.bezierCurveTo(e.x*r,e.y*r,n.x*r,n.y*r,i.x*r,i.y*r)}_fill(t){const e=this._ctx;e.fillStyle=t,e.fill()}_stroke(t,e,n=[]){if(e===0)return;const i=this._ctx,s=this._pixelRatio;i.setLineDash(n.map(r=>r*this._pixelRatio)),i.lineWidth=e*s,i.strokeStyle=t,i.stroke()}_startClip(){this._ctx.save(),this._ctx.clip()}_endClip(){this._ctx.restore()}_startReverseClip(){this._ctx.save(),this._ctx.rect(0,0,this._canvas.width,this._canvas.height),this._ctx.clip("evenodd")}_endReverseClip(){this._ctx.restore()}_displayText(t,e,n,i,s,r,o,a,l,d,h){const c=this._ctx,g=this._pixelRatio,m=t.x*g,_=t.y*g,p=r*g,v=a==="center"?0:-l/2;if(h=h*this._viewZoom*g,d=d*this._viewZoom*g,c.save(),c.translate(m,_+g),c.rotate(-e),c.textBaseline="middle",c.textAlign=a,ta(c,s,p,o),c.fillStyle=i,n.indexOf(`
`)!==-1){const x=n.split(`
`),b=x.length;let E=(1-b)/2*p;for(let S=0;S<b;++S)c.fillText(x[S],d+v,h+E),E+=p}else c.fillText(n,d+v,h);c.restore()}_displayImage(t,e,n,i,s,r,o){if(this._hideImages||"isDummy"in i)return;let a=i;o!==1&&(a=this._blendImageOnBackground(i,o));const l=this._ctx,d=this._pixelRatio,h=t.x*d,c=t.y*d,g=e*d,m=n*d,_=a.width*d,p=a.height*d;if(s)l.drawImage(a,h-g/2,c-m/2,g,m);else if(r){const v=h-g/2,x=c-m/2,b=h+g/2,E=c+m/2;let S=h-_/2,A=c-p/2;for(;S>v;)S-=_;for(;A>x;)A-=p;const T=A;for(;S<b;){for(;A<E;)l.drawImage(a,S,A,_,p),A+=p;S+=_,A=T}}else l.drawImage(a,h-_/2,c-p/2,_,p)}_displayPieChart(t,e,n){const i=this._ctx,s=this._pixelRatio,r=t.x*s,o=t.y*s,a=e*s*2,l=2*a;n.length===1&&(i.fillStyle=n[0],i.fillRect(r-a,o-a,l,l)),n.length>1&&YM(i,n,r,o,a)}_blendImageOnBackground(t,e){const n=this._backgroundRgba,i=`rgb(${Math.round(255*n[0])},${Math.round(255*n[1])},${Math.round(255*n[2])})`;return this._imgCanvas.width=t.width,this._imgCanvas.height=t.height,this._imgCtx.clearRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=1,this._imgCtx.fillStyle=i,this._imgCtx.fillRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=e,this._imgCtx.drawImage(t,0,0),this._imgCanvas}getImageData(){return this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height)}},qM=!1;try{qM=!!Ce("svg")}catch{}var gd="none",lG={left:"start",center:"middle",right:"end"},fs="data-element-id",OA="data-text-component",uG="node-text",dG="edge-text",hG="badge-text";function Pa(t){return Math.round(1e3*t)/1e3}function DA(t,e,n,i,s,r){const o=Ce("image");return o.setAttribute("width",Pa(i)),o.setAttribute("height",Pa(s)),o.setAttribute("x",Pa(e)),o.setAttribute("y",Pa(n)),o.setAttribute("href",t),r&&r.appendChild(o),o}function cG(t,e,n,i,s,r=1,o){const a=Ce("rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",n),a.setAttribute("height",i),a.setAttribute("fill",s),a.setAttribute("fill-opacity",r),o&&o.appendChild(a),a}var gG=class extends WM{constructor(t){super(t),this._svg=Ce("svg"),this._defs=Ce("defs"),this._styles=Ce("g",{class:"styles"}),this._background=Ce("rect",{width:"100%",height:"100%",fill:"none",class:"ogma-svg-background"}),this._currentElementId="0",this._currentClipPathId=null,this._clipPathCounter=0,this._defs.appendChild(this._styles),this._svg.setAttribute("pointer-events","none"),this._svg.style.userSelect="none",this._svg.appendChild(this._defs),this._svg.appendChild(this._background),this._clear()}static getName(){return"SVG"}static isAvailable(){return qM}getDomElement(){return this._svg}_render({dimensionsChanged:t}){if(t&&Vb(this._svg,{width:this._width,height:this._height}),this._backgroundColor&&this._renderBackground){const n=Ml(this._backgroundColor);this._background.setAttribute("fill",n.color),this._background.setAttribute("fill-opacity",n.opacity)}const e=this._bufferList.getBuffersByAscendingDepth();this._clear(),this._svg.removeChild(this._container);for(let n=0;n<e.length;++n){const i=e[n];this._isBufferDisplayable(i)&&this._displayBuffer(i)}this._svg.appendChild(this._container)}_clear(){this._container&&this._svg.removeChild(this._container),this._container=Ce("g"),this._svg.appendChild(this._container),this._clipPaths&&this._defs.removeChild(this._clipPaths),this._clipPaths=Ce("g"),this._defs.appendChild(this._clipPaths),this._clipPaths.setAttribute("class","clip-paths"),this._filters&&this._defs.removeChild(this._filters),this._filters=Ce("g"),this._defs.appendChild(this._filters)}_displayElement(t,e){this._currentElementId=t.id>=0?`n${t.id}`:"e"+-t.id,super._displayElement(t,e)}_addBackgroundBlendingFilter(t){const e=fi(this._backgroundColor),n=t,i=1-t,s=[n,0,0,0,e[0]*i,0,n,0,0,e[1]*i,0,0,n,0,e[2]*i,0,0,0,1,0].join(" "),r=`filter-${this._currentElementId}`,o=Ce("filter",{id:r}),a=Ce("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:s});return o.appendChild(a),this._filters.appendChild(o),r}_drawRoundedRectangle(t,e,n,i,s){const r=t.x,o=t.y,a=Math.min(this._textManager.getCornerRadius(),n);e+=a/2;const l=Ce("path"),d=`M ${r+e-a} ${o+n}     A ${a} ${a} 0 0 0 ${r+e} ${o+n-a}     L ${r+e} ${o-n+a}     A ${a} ${a} 0 0 0 ${r+e-a} ${o-n}     L ${r-e+a} ${o-n}     A ${a} ${a} 0 0 0 ${r-e} ${o-n+a}     L ${r-e} ${o+n-a}     A ${a} ${a} 0 0 0 ${r-e+a} ${o+n}     L ${r+e-a} ${o+n}`;l.setAttribute("d",d),l.setAttribute("fill",gd),l.setAttribute("transform",`rotate(${Q0(i)} ${t.x} ${t.y})`),l.setAttribute(fs,this._currentElementId),this._container.appendChild(l),this._element=l,s&&this._fill(s)}_drawCircle(t,e){const{x:n,y:i}=t,s=`M ${n-e}, ${i} a ${e},${e} 0 1,0 ${2*e},0 a ${e},${e} 0 1,0 -${2*e},0`,r=Ce("path");r.setAttribute("d",s),r.setAttribute("fill",gd),r.setAttribute(fs,this._currentElementId),this._container.appendChild(r),this._element=r}_drawPolygon(t,e){const n=Ce("path");let i="";for(let s=0;s<t.length;s++){const{x:r,y:o}=t[s];i+=`${s===0?"M":"L"}${r},${o} `}i+="Z",n.setAttribute("d",i),n.setAttribute(fs,this._currentElementId),n.setAttribute("fill",gd),e&&n.setAttribute(OA,!0),this._container.appendChild(n),this._element=n}_drawStraightLine(t,e){const n=Ce("path"),i=`M ${t.x},${t.y} L${e.x},${e.y}`;n.setAttribute("d",i),n.setAttribute(fs,this._currentElementId),this._container.appendChild(n),this._element=n}_drawQuadraticCurve(t,e,n){const i=Ce("path"),s=`M ${t.x},${t.y} Q${e.x},${e.y} ${n.x},${n.y}`;i.setAttribute("d",s),i.setAttribute("fill",gd),i.setAttribute(fs,this._currentElementId),this._container.appendChild(i),this._element=i}_drawCubicCurve(t,e,n,i){const s=Ce("path"),r=`M ${t.x},${t.y} C${e.x},${e.y} ${n.x},${n.y} ${i.x},${i.y}`;s.setAttribute("d",r),s.setAttribute("fill",gd),s.setAttribute(fs,this._currentElementId),this._container.appendChild(s),this._element=s}_fill(t){const e=Ml(t);this._element.setAttribute("fill",e.color),this._element.setAttribute("fill-opacity",e.opacity),this._currentClipPathId&&this._element.setAttribute("clip-path",`url(#${this._currentClipPathId})`)}_stroke(t,e,n=[]){if(e===0)return;const i=this._element;i.setAttribute("stroke-width",e);const s=Ml(t);i.setAttribute("stroke",s.color),i.setAttribute("stroke-opacity",s.opacity),n.length>0&&i.setAttribute("stroke-dasharray",n.map(Pa).toString())}_startClip(){const t=Ce("clipPath"),e=this._element.cloneNode(!1);this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)}_endClip(){this._currentClipPathId=null}_startReverseClip(){const t=Ce("clipPath"),e=this._element.cloneNode(!1),n=e.getAttribute("d");e.setAttribute("clip-rule","evenodd"),e.setAttribute("d",`${n} M 0 0 L ${this._width} 0 L ${this._width} ${this._height} L 0 ${this._height}`),this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)}_endReverseClip(){this._currentClipPathId=null}_displayText(t,e,n,i,s,r,o="normal",a,l,d,h,c){const g=Ce("g");g.setAttribute(fs,this._currentElementId),g.setAttribute(OA,!0);let m=this._currentElementId[0]==="n"?uG:dG;c&&(m+=" "+hG),g.setAttribute("class",m);const _=Ml(i),p=_.opacity,v=Ml(_.color),x=t.x+d*this._viewZoom,b=t.y+1+h*this._viewZoom,E=Pa(x);g.setAttribute("font-family",s),g.setAttribute("font-size",r),o==="bold"?g.setAttribute("font-weight",o):g.setAttribute("font-style",o),g.setAttribute("fill",v.color),g.setAttribute("fill-opacity",p),e&&g.setAttribute("transform",`rotate(${Q0(-e)} ${x}, ${b})`),g.setAttribute("text-anchor",lG[a]||"middle"),g.setAttribute("dominant-baseline","middle");const S=n.split(`
`),A=S.length,T=Pa(b-(A+1)/2*r),P=a==="center"?0:-l/2;for(let k=0;k<A;k++){const I=Ce("text");I.appendChild(Wb(S[k])),I.setAttribute("x",E+P),I.setAttribute("y",T+(k+1)*r),g.appendChild(I)}this._currentClipPathId&&g.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(g)}_displayImage(t,e,n,i,s,r,o){const a=t.x,l=t.y;if(this._hideImages||!("isDummy"in i)&&(!i.width||!i.height))return;const d=e,h=n;let c,g=i.width,m=i.height;if(s&&(g=d,m=h),r){const _=a-d/2,p=l-h/2,v=a+d/2,x=l+h/2;let b=a-g/2,E=l-m/2;for(c=Ce("g"),c.setAttribute(fs,this._currentElementId);b>_;)b-=g;for(;E>p;)E-=m;const S=E;for(;b<v;){for(;E<x;)DA(i.src,b,E,g,m,c),E+=m;E=S,b+=g}}else c=DA(i.src,a-g/2,l-m/2,g,m),c.setAttribute(fs,this._currentElementId);if(this._currentClipPathId&&c.setAttribute("clip-path",`url(#${this._currentClipPathId})`),o!==1){const _=this._addBackgroundBlendingFilter(o);c.setAttribute("filter",`url(#${_})`)}this._container.appendChild(c)}_displayPieChart(t,e,n){const i=2*e,s=2*i,r=t.x,o=t.y;let a;const l=Ce("g");l.setAttribute(fs,this._currentElementId),n.length===1&&(a=cG(r-i,o-i,s,s,n[0],1,l)),n.length>1&&ZM(n,(d,h,c)=>{const g=r+e*Math.cos(c),m=o+e*Math.sin(c),_=r+e*Math.cos(h),p=o+e*Math.sin(h),v=c-h<=Math.PI?0:1,x=`M ${g},${m} A ${e},${e} 0 ${v} 0 ${_},${p} L ${r},${o} L ${g},${m}`;a=Ce("path"),a.setAttribute("d",x),a.setAttribute("fill",d),a.setAttribute("stroke-width",0),l.appendChild(a)}),this._currentClipPathId&&l.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(l)}},fG=6,mG=class{constructor({gl:t,ext:e,staticProgram:n,animationProgram:i}){this._version=0,this._used=!1,this._dataBufferChanged=!1,this._gl=t,this._ext=e,this._staticProgram=n,this._animationProgram=i,this._glBuffer=this._gl.createBuffer()}setDataBuffer(t){this._dataBuffer!==t&&(this._program=t.animated?this._animationProgram:this._staticProgram,this._dataBuffer=t,this._dataBufferChanged=!0,t.hasSideData()&&!this._sideGlBuffer?this._sideGlBuffer=this._gl.createBuffer():!t.hasSideData()&&this._sideGlBuffer&&(this._gl.deleteBuffer(this._sideGlBuffer),delete this._sideGlBuffer))}setPrograms(t,e){this._staticProgram=t,this._animationProgram=e}markAsUnused(){return this._used=!1,this}getProgram(){return this._program}markAsUsed(){return this._used=!0,this}isUsed(){return this._used}draw(){const t=this._gl,e=this._dataBuffer.type,n=e===Oa,i=n?this._dataBuffer.getNbSideElementsPerMainElement():1,s=e===Tm?xi:1,r=this._dataBuffer.getSize(),o=this._dataBuffer.stencilUsage,a=this._dataBuffer.version,l=this._version!==a||this._dataBufferChanged;this._program.setupBaseAttributes({glBuffer:this._glBuffer,dataBuffer:l?this._dataBuffer.getByteArray():null,divisor:i}),this._program.setupTextAttributes({glBuffer:this._sideGlBuffer,dataBuffer:l&&n?this._dataBuffer.getSideByteArray():null,divisor:1}),this._program.setupStencil(o),l&&(this._version=a,this._dataBufferChanged=!1),this._ext.drawArraysInstancedANGLE(t.TRIANGLES,0,fG*s,r*i)}destroy(){this._gl.deleteBuffer(this._glBuffer),this._sideGlBuffer&&this._gl.deleteBuffer(this._sideGlBuffer)}},pG={byte:1,ubyte:1,short:2,ushort:2,ulong:4,float:4},_G={byte:"BYTE",ubyte:"UNSIGNED_BYTE",short:"SHORT",ushort:"UNSIGNED_SHORT",ulong:"UNSIGNED_LONG",float:"FLOAT"},zA=class{constructor({gl:t,ext:e,specialGlBuffers:n,metaData:i,programWrapper:s}){this._stencilUsage=uu,this._gl=t,this._ext=e,this._specialGlBuffers=n,this._metaData=nn(i),this._programWrapper=s}_finishInit(){const t=this._gl,e=this._ext,n=this._programWrapper.getError();if(n)throw new Error(`WebGL compilation at step "${n.step}:
${n.message}"`);const i=this._programWrapper.getProgram();this._program=i,t.useProgram(i),this._metaData.attributes.forEach(o=>{o.location=t.getAttribLocation(this._program,o.name),o.byteSize=o.size*pG[o.type],o.glType=_G[o.type]}),this._specialAttributes=this._createSpecialAttributesFunctions();const s=[],r=[];for(const o of this._metaData.attributes)o.location!==-1&&(o.name.startsWith("a_text")?r.push(o):s.push(o));this._baseAttributes=ly(s,t,e),this._textAttributes=ly(r,t,e),this._setupUniforms=vG(this._metaData.uniforms,t,i)}_createSpecialAttributesFunctions(){return ly([{location:this._gl.getAttribLocation(this._program,this._metaData.vertexInfoAttribute),size:3,glType:"BYTE",byteSize:3,type:"byte",name:"special"}],this._gl,this._ext)}startPass(t){this._program||this._finishInit(),this._gl.useProgram(this._program),this._resetStencil(),this._setupUniforms(this._gl,t),this._specialAttributes.enable(this._gl),this._specialAttributes.setup(this._specialGlBuffers.vertexInfo,null,0)}_setupAttributes(t,{glBuffer:e,dataBuffer:n,divisor:i}){t.enabled&&!e?t.disable(this._gl):!t.enabled&&e&&t.enable(this._gl),e&&t.setup(e,n,i)}setupBaseAttributes(t){this._setupAttributes(this._baseAttributes,t)}setupTextAttributes(t){this._setupAttributes(this._textAttributes,t)}_resetStencil(){const t=this._gl;this._stencilUsage=uu,t.disable(t.STENCIL_TEST)}setupStencil(t){if(t!==this._stencilUsage){const e=this._gl;t!==uu?(e.enable(e.STENCIL_TEST),t===pM?(e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.stencilFunc(e.ALWAYS,1,1)):t===_M&&(e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(e.EQUAL,0,1))):e.disable(e.STENCIL_TEST),this._stencilUsage=t}}endPass(){const t=this._gl;this._specialAttributes.disable(t),this._baseAttributes.disable(t),this._textAttributes.disable(t)}};function yG(t,e,n){return(i,s,r)=>{let o=0,a=0;for(let l=0;l<t.length;l++)a+=t[l].byteSize;e.bindBuffer(e.ARRAY_BUFFER,i),s&&e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW);for(let l=0;l<t.length;l++){const{location:d,size:h,glType:c,byteSize:g}=t[l];e.vertexAttribPointer(d,h,e[c],!1,a,o),o+=g,n.vertexAttribDivisorANGLE(d,r)}}}function vG(t,e,n){const i={};for(let s=0;s<t.length;++s){const{id:r,name:o}=t[s],a=e.getUniformLocation(n,o);a&&(i[r]=a)}return(s,r)=>{for(let o=0;o<t.length;++o){const{id:a,type:l}=t[o],d=i[a],h=r[a];if(d)switch(l){case"int":case"sampler2D":s.uniform1i(d,h);break;case"float":s.uniform1f(d,h);break;case"vec2":s.uniform2f(d,h[0],h[1]);break;case"vec3":s.uniform3f(d,h[0],h[1],h[2]);break;case"vec4":s.uniform4f(d,h[0],h[1],h[2],h[3])}}}}function xG(t){return e=>{for(let n=0;n<t.length;n++){const i=t[n].location;e.enableVertexAttribArray(i)}}}function bG(t){return e=>{for(let n=0;n<t.length;++n){const i=t[n].location;e.disableVertexAttribArray(i)}}}function ly(t,e,n){const i=xG(t),s=bG(t);return{enable(r){i(r),this.enabled=!0},disable(r){s(r),this.enabled=!1},setup:yG(t,e,n),enabled:!1}}var uy=`#define D3D9_FIX 0
precision highp float;
precision mediump int;
uniform vec3 u_backgroundColor;
uniform sampler2D u_patternNearestTexture;
uniform sampler2D u_patternLinearTexture;
uniform sampler2D u_patternLinearSdfTexture;
uniform sampler2D u_patternMipmapTexture;
uniform sampler2D u_shapeTexture;
varying vec4 dn;
varying vec4 dp;
varying vec4 dq;
varying vec2 dr;
varying vec2 ds;
varying vec4 ei;
varying float dt;
#if D3D9_FIX
#else
varying float dy;
varying vec2 dz;
varying vec2 ea;
varying vec2 eb;
varying float ec;
varying float ed;
varying vec2 ee;
varying vec2 ef;
varying float eg;
varying float eh;
#endif
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SDF_GAMMA = 0.0;
const float EPSILON = 0.000000001;
const float SDF_BUFFER = (256.0 - 64.0) / 256.0; 
vec4 abg(in vec4 um, in vec4 abh) {
float abi = abh.a;
float abj = um.a + EPSILON;
float abk = min(abi + abj, 1.0);
float r = abi / abk;
return vec4(mix(um.rgb, abh.rgb, r), abk);
}
float abl(in float abm, in float fp) {
float abn = (abm * 256.0 + fp) * 256.0;
float abo = abn / 32768.0;
return abo * 2.0 - 1.0;
}
bool mn(float ml, float mm) {
return abs(ml - mm) < EPSILON;
}
float abp(float ma) {
float abt = 2.;
vec2 wz = abs(dq.rg) - dq.ba - vec2(abt) + vec2(ma);
float es = min(max(wz.x, wz.y), 0.0) + length(max(wz, 0.0)) - ma;
return smoothstep(0.1, .5, (1. - es) / 10.);
}
void main() {
#if D3D9_FIX
#else
float aby = eb.x;
float abz = eb.y;
float aca = ee.x;
float acb = ee.y;
#endif
vec4 of = texture2D(u_shapeTexture, dr);
float acc = abl(of.b, of.a) * ef.x;
float acd = abl(of.r, of.g) * ef.y;
float zv = float(ei.z > EPSILON);
float tm = float(ei.w > EPSILON);
float aci = 1. - smoothstep(
0.01,
0.25760,
distance(ei.xy * ei.z - vec2(0.0586), dr * ei.z)
);
aci = aci * 2.5 - 1.5;
aci *= 0.5;
aci *= ef.x;
float acj = abp(dt) ;
vec4 hj = dn;
vec4 hk = dp;
if (eh > -EPSILON) {
vec2 ip = ds;
float aco =
step(dz.x, ip.x) *
step(ip.x, ea.x) *
step(dz.y, ip.y) *
step(ip.y, ea.y);
float acp = aco;
vec4 hl;
if (mn(eh, FILTER_NEAREST)) {
hl = texture2D(u_patternNearestTexture, ip);
} else if (mn(eh, FILTER_LINEAR)) { 
hl = texture2D(u_patternLinearTexture, ip);
} else if (mn(eh, FILTER_LINEAR_SDF)) { 
hl = texture2D(u_patternLinearSdfTexture, ip);
hl.a = smoothstep(SDF_BUFFER - eg, SDF_BUFFER + eg, hl.a);
} else if (mn(eh, FILTER_MIPMAP)) { 
hl = texture2D(u_patternMipmapTexture, ip);
}
hl.rgb += dq.rgb;
hl.a *= acp;
hj = abg(hj, hl);
}
float acu = (1. - zv) * min(acc, acd)
+ zv * aci;
acu = (1. - tm) * acu + tm * acj;
float adc = clamp(acu, 0.0, 1.0);
float adf = clamp(acu - dy, 0.0, 1.0);
float adg = adc - adf;
adg = 1.0 - clamp(acu - dy, 0.0, 1.0);
hj.a *= adf;
hk.a *= adg * step(EPSILON, dy);
vec4 adj = abg(hj, hk);
float adk = adc;
adj.rgb = mix(u_backgroundColor, adj.rgb, aby);
if (ed > EPSILON) {
float adv = fract(acb) * ed;
float adw = clamp(min(adv, aca - adv), 0.0, 1.0);
adk *= adw;
}
if (ec < 0.0 || ec > 1.0 || adk < EPSILON) {
discard;
}
adj.a *= adk;
adj.rgb *= adj.a;
gl_FragColor = adj;
}
`,dy=`#define D3D9_FIX 0
#define ANIMATED 0
precision highp float;
precision mediump int;
attribute /*ushort*/ vec4 a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_final_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_final_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*ushort*/ vec4 a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_prev_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*float*/ vec2 a_animationBeginTime_animationDuration; 
attribute /*ushort*/ vec4 a_animationEasing; 
attribute /*ushort*/ vec3 a_text_charId_charOffsetXY; 
attribute vec3 a_vertexInfo;
uniform float u_viewWidth;
uniform float u_viewHeight;
uniform float u_viewX;
uniform float u_viewY;
uniform float u_viewAngle;
uniform float u_viewZoom;
uniform float u_currentTime;
uniform float u_pixelRatio;
uniform sampler2D u_patternInfoTexture;
varying vec4 dn;
varying vec4 dp;
varying vec4 dq;
varying vec2 dr;
varying vec2 ds;
varying float dt;
#if D3D9_FIX
#else
varying float dy;
varying vec2 dz;
varying vec2 ea;
varying vec2 eb;
varying float ec;
varying float ed;
varying vec2 ee;
varying vec2 ef;
varying float eg;
varying float eh;
#endif
varying vec4 ei;
const float EPSILON = 0.000001;
const float INFINITY = 10000000.0;
const float PI = 3.14159265359;
const float P2_17 = 131072.0;
const float P2_16 = 65536.0;
const float P2_14 = 32768.0;
const float P2_12 = 4096.0;
const float P2_8 = 256.0;
const float P2_7 = 128.0;
const float P2_6 = 64.0;
const float P2_5 = 32.0;
const float P2_4 = 16.0;
const float P2_3 = 8.0;
const float P2_2 = 4.0;
const float P2_1 = 2.0;
const float MAX_PROGRESS = 1.0;
uniform float BYTES_TO_COORD;
uniform float BYTES_TO_SCALED_SIZE;
uniform float BYTES_TO_MIN_VISIBLE_SIZE;
uniform float BYTES_TO_SYMBOLIC_SIZE;
uniform float BYTES_TO_CURVATURE;
uniform float BYTES_TO_DASH_LENGTH;
uniform float BYTES_TO_GAP_LENGTH;
uniform float BYTES_TO_PATTERN_SCALE;
uniform float PATTERN_POSITION_UNIT_SIZE;
uniform float PATTERN_INFO_TEXTURE_SIZE;
uniform float PATTERN_NEAREST_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_SDF_TEXTURE_SIZE;
uniform float PATTERN_MIPMAP_TEXTURE_SIZE;
uniform float ROUNDED_BOX_RADIUS;
const float BYTES_TO_OFFSET_ANGLE = 0.0;
const float BYTES_TO_COLOR = 0.0;
const float SDF_FONT_SIZE = 0.0;
const float SDF_GAMMA = 0.0;
const float CURVATURE_RATIO = 0.0;
const float PATTERN_PADDING = 0.0;
const float TEXT_WIDTH_MULTIPLIER = 0.0;
const float TEXT_HEIGHT_MULTIPLIER = 0.0;
const float SELF_LOOP_CURVATURE_RATIO = 0.0;
const float EDGE_ARROW_SIZE_RATIO = 0.0;
const float EDGE_MIN_TIP_SIZE = 0.0;
const float CURVE_SUBDIVISIONS = 0.0;
const float PIECE_NODE_COMPONENT = 0.0;
const float PIECE_TEXT_BOX = 0.0;
const float PIECE_EDGE_BODY = 0.0;
const float PIECE_EDGE_HEAD = 0.0;
const float PIECE_EDGE_TAIL = 0.0;
const float PIECE_EDGE_TEXT = 0.0;
const float MAX_TEXT_SIZE = 0.0;
const float BYTES_TO_TEXT_OFFSET_X = 0.0;
const float BYTES_TO_TEXT_OFFSET_Y = 0.0;
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SHAPE_TEXTURE_SIZE = 0.0;
const float SIMPLE_SHAPE_SAMPLING_SIZE = 0.0;
const float COMPLEX_SHAPE_SAMPLING_SIZE = 0.0;
const float SHAPE_SAMPLING_BUFFER_RATIO = 0.0;
const float MAX_SHAPES = 0.0;
const float FIRST_COMPLEX_SHAPE_ID = 0.0;
const float SELF_LOOP_TO_CIRCLE_APPROX = 0.0;
const float NB_SHAPES_BY_SIDE = SHAPE_TEXTURE_SIZE / COMPLEX_SHAPE_SAMPLING_SIZE;
const float SHAPE_FILL_PERCENT = 1.0 - SHAPE_SAMPLING_BUFFER_RATIO;
const float T_STEP_PER_CURVE_PIECE = 1.0 / CURVE_SUBDIVISIONS;
const float HEAD_TAIL_PX_ADJUST = 1.5;
const float SDF_SMOOTH_FACTOR = 2.0;
struct gk {
float gl;
float gm;
float gn;
float go;
float gp;
float gq;
float gr;
float gs;
};
struct gt {
float gu;
float gv;
float gw;
float gx;
float gy;
float gz;
float ha;
};
struct hb {
float gl;
float gm;
float gn;
float go;
float gp;
float gq;
float gr;
float gs;
float gu;
float gv;
float gw;
float gx;
float gy;
float gz;
float ha;
float hc;
float hd;
float he;
float hf;
float hg;
float hh;
float hi;
vec4 hj;
vec4 hk;
vec4 hl;
float hm;
float hn;
float ho;
float hp;
float hq;
float hr;
float hs;
float ht;
float hu;
float hv;
float hw;
float hx;
float hy;
float hz;
float ia;
float ib;
float ic;
float id;
float ie;
};
struct ig {
float ih;
vec2 ii;
vec4 hj;
vec4 hk;
float hc;
float ij;
float ik;
float gn;
float il;
vec2 im;
float io;
vec2 ip;
vec2 iq;
vec2 ir;
float is;
float it;
vec4 hl;
vec2 iu;
float iv;
float eu;
vec2 iw;
vec2 ix;
vec2 iy;
};
float iz(float cf, float ja, float jb) {
float jc = mod(cf, pow(2.0, jb));
return floor(jc / pow(2.0, ja));
}
gk jd(float cf) {
gk je;
je.gl = iz(cf, 0.0, 4.0);
je.gm = iz(cf, 4.0, 8.0);
je.gn = iz(cf, 8.0, 10.0);
je.go = iz(cf, 10.0, 12.0);
je.gp = iz(cf, 12.0, 13.0);
je.gq = iz(cf, 13.0, 14.0);
je.gr = iz(cf, 14.0, 15.0);
je.gs = iz(cf, 15.0, 16.0);
return je;
}
gt jf(float cf) {
gt je;
je.gu = iz(cf, 0.0, 8.0);
je.gv = iz(cf, 8.0, 11.0);
je.gw = iz(cf, 11.0, 12.0);
je.gx = iz(cf, 12.0, 13.0);
je.gy = iz(cf, 13.0, 14.0);
je.gz = iz(cf, 14.0, 15.0);
je.ha = iz(cf, 15.0, 16.0);
return je;
}
vec4 jg(in float cf) {
return vec4(
iz(cf, 0.0, 4.0),
iz(cf, 4.0, 8.0),
iz(cf, 8.0, 12.0),
iz(cf, 12.0, 16.0)
);
}
vec2 jh(in float cf) {
return vec2(mod(cf, 256.0), floor(cf / 256.0));
}
vec2 ji(in float cf) {
float jj = floor(cf / P2_6);
float jk = cf - (jj * P2_6);
return vec2(jj, jk);
}
vec2 jl(in float cf) {
float jm = floor(cf / P2_7);
float jn = cf - (jm * P2_7);
return vec2(jm, jn);
}
vec2 jo(in vec2 jp, in float jq) {
float jr = cos(jq);
float js = sin(jq);
return vec2(jr * jp.x + js * jp.y, -js * jp.x + jr * jp.y);
}
vec4 jt(in vec4 ju) {
return floor(ju / 256.0) - 128.0;
}
vec4 jv(in vec4 ju) {
return mod(ju, 256.0) - 128.0;
}
float jw(float cf) {
return cf - 128.0;
}
vec2 jw(vec2 cf) {
return cf - 128.0;
}
vec2 jx(vec2 jy) {
return vec2(-jy.y, jy.x);
}
vec2 jz(vec2 ka, vec2 kb, vec2 kc, float t) {
float kd = 1.0 - t;
return (kd * kd * ka) + (2.0 * kd * t * kb) + (t * t * kc);
}
vec2 ke(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
float kd = 1.0 - t;
float kh = kd * kd;
float ki = kh * kd;
float kj = t * t;
float kk = kj * t;
return (ki * ka) + (3.0 * kh * t * kf) + (3.0 * kd * kj * kg) + (kk * kc);
}
vec2 kl(vec2 ka, vec2 kb, vec2 kc, float t) {
float kd = (1.0 - t);
vec2 jp = (kd * kb + t * kc) - (kd * ka + t * kb);
return normalize(jp);
}
vec2 km(vec2 ka, vec2 kb, vec2 kc, float t) {
return jx(kl(ka, kb, kc, t));
}
vec2 kn(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
float kd = 1.0 - t;
float kh = kd * kd;
float kj = t * t;
vec2 jp = kh * (kf - ka) + 2.0 * kd * t * (kg - kf) + kj * (kc - kg);
return normalize(jp);
}
vec2 ko(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
return jx(kn(ka, kf, kg, kc, t));
}
float ld(float hh, float le, float t) {
float y = abs(hh) / CURVATURE_RATIO + EPSILON;
float hp = y * y;
float kd = t - 0.5;
float kh = kd * kd;
float lf = 1.0 / (16.0 * hp);
float lg = sqrt(kh + lf);
float lh = (0.5 / y) * sqrt(hp + 0.25);
float li = (abs(2.0 * y)) * ((kd * lg) + (0.5 * lh) + (lf * log(abs((kd + lg) / (-0.5 + lh)))));
return li * le;
}
float lj(vec2 ka, vec2 lk, vec2 ll, vec2 kc, float lm) {
vec2 iu = (ka + lk + ll) / 3.0;
vec2 ln = iu - lk;
vec2 lo = lk - ll;
float lp = dot(ln, ln);
float lq = dot(lo, lo) / 4.0;
float ma = sqrt(lp - lq) * SELF_LOOP_TO_CIRCLE_APPROX * 1.55;
return 2.0 * PI * ma * lm;
}
float mb(float cf) {
return cf - 32.0;
}
float mc(float cf) {
return cf - 512.0;
}
float md(float cf) {
return cf - P2_14;
}
void me() {
gl_Position = vec4(-10.0, -10.0, 1.0, 1.0);
}
vec4 mf(vec2 mg) {
return vec4(((vec2(mg.x, u_viewHeight - mg.y) / vec2(u_viewWidth, u_viewHeight)) * 2.0 - 1.0), 0.5, 1.0);
}
float mk(float ml, float mm) {
return step(ml - EPSILON, mm) * step(mm, ml + EPSILON);
}
bool mn(float ml, float mm) {
return abs(ml - mm) < EPSILON;
}
bool mo(float cf) {
return cf > 0.5;
}
vec2 mp(vec2 mq) {
return jo((mq - vec2(u_viewX, u_viewY)) * u_viewZoom, u_viewAngle) + vec2(u_viewWidth, u_viewHeight) / 2.0;
}
float mr(float eu) {
return max(EDGE_MIN_TIP_SIZE, eu * EDGE_ARROW_SIZE_RATIO);
}
float ms(float mt, float mu) {
return mt * BYTES_TO_SCALED_SIZE * u_viewZoom + mu;
}
float nb(float ij, float mz, float na) {
float nc = na - mz;
float a = 1.0 / nc;
float b = -mz / nc;
return ij * a + b;
}
struct nd {
vec2 ne;
vec2 nf;
};
nd ng(vec2 nh, float ma, float hh) {
nd cj;
float ni = (ma + ma / SELF_LOOP_CURVATURE_RATIO * hh) * SELF_LOOP_CURVATURE_RATIO;
float nj = -u_viewAngle + PI;
float nk = -u_viewAngle + PI / 2.0;
cj.ne = nh + vec2(cos(nj), sin(nj)) * ni;
cj.nf = nh + vec2(cos(nk), sin(nk)) * ni;
return cj;
}
float nq(vec2 nr, vec2 lk, vec2 ll, vec2 ns, float nt) {
vec2 nu = nr;
float t = 0.0;
float nv = 0.0;
float nw = lj(nr, lk, ll, ns, 1.0);
return nt / nw;
}
hb nx(
vec4 ny,
vec4 nz,
vec4 oa,
vec4 ob,
vec4 oc,
vec4 od,
vec3 oe
) {
hb a;
gk of = jd(ny.x);
gt og = jf(ny.y);
vec4 oh = jg(ny.z);
vec2 oi = jh(ny.w);
a.gl = of.gl;
a.gm = of.gm;
a.gn = of.gn;
a.go = of.go;
a.gp = of.gp;
a.gq = of.gq;
a.gr = of.gr;
a.gs = of.gs;
a.gu = og.gu;
a.gv = og.gv;
a.gw = og.gw;
a.gx = og.gx;
a.gy = og.gy;
a.gz = og.gz;
a.ha = og.ha;
a.hc = oh.x;
a.hd = oh.y;
a.he = oh.z;
a.hf = oh.w;
a.hg = oi.x;
a.hh = oi.y;
a.hi = nz.x;
a.hj = jg(nz.y);
a.hk = jg(nz.z);
a.hl = jg(nz.w);
a.hm = oa.x;
a.hn = oa.y;
a.ho = oa.z;
a.hp = oa.w;
a.hq = ob.x;
a.hr = ob.y;
a.hs = ob.z;
a.ht = ob.w;
a.hu = oc.x;
a.hv = oc.y;
a.hw = oc.z;
a.hx = oc.w;
a.hy = od.x;
a.hz = md(od.y);
a.id = md(od.z);
a.ie = md(od.w);
a.ia = oe.x;
float x = oe.y;
float y = mod(x, P2_8);
if (oe.z > 0.0) x += oe.z * P2_16;
a.ib = ((x - y) / P2_8) - P2_16;
a.ic = (y - P2_7) * BYTES_TO_TEXT_OFFSET_Y;
return a;
}
bool pp(const in hb a, out ig cj) {
float gl = a.gl;
float gm = a.gm;
float gn = a.gn * BYTES_TO_DASH_LENGTH;
float go = a.go * BYTES_TO_GAP_LENGTH;
float gp = a.gp;
float gq = a.gq;
float gr = a.gr;
float gs = a.gs;
float gu = a.gu * BYTES_TO_PATTERN_SCALE;
float gv = a.gv * BYTES_TO_OFFSET_ANGLE;
float gw = a.gw;
float gx = a.gx;
float gy = a.gy;
float gz = a.gz;
float ha = a.ha;
float hc = a.hc * BYTES_TO_COLOR;
float hd = a.hd * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float he = a.he * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float hf = a.hf * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float hg = a.hg * BYTES_TO_SYMBOLIC_SIZE * u_viewZoom + step(a.hg, EPSILON) * INFINITY;
float hh = jw(a.hh);
float hi = a.hi;
vec4 hj = a.hj * BYTES_TO_COLOR;
vec4 hk = a.hk * BYTES_TO_COLOR;
vec4 hl = a.hl * BYTES_TO_COLOR;
vec2 pq = vec2(a.hm, a.hn) * BYTES_TO_COORD;
vec2 pr = vec2(a.ho, a.hp) * BYTES_TO_COORD;
vec2 nr = mp(pq);
vec2 ns = mp(pr);
float ps = ms(a.hq, a.hr);
float pt = ms(a.hs, a.ht);
float pu = ms(a.hu, a.hv);
float ih = ms(a.hw, a.hx);
float on = ms(a.hy, a.hz);
vec2 pv = a_vertexInfo.xy;
vec2 pw = vec2(0.0, 0.0);
float px = ps;
float py = pt;
float pz = pt * gu;
if (gw > EPSILON) {
if (a.ia < EPSILON) return false;
pz = pu;
hi = a.ia;
ps = pz * TEXT_WIDTH_MULTIPLIER * u_pixelRatio;
pt = pz * TEXT_HEIGHT_MULTIPLIER * u_pixelRatio;
}
bool qz = abs(hh) > EPSILON && mk(gm, PIECE_EDGE_BODY) < EPSILON;
bool ra = qz && a_vertexInfo.z > EPSILON;
if (gl < EPSILON || gm < EPSILON || hg < hd || ra) {
return false;
}
ih *= step(he, hg);
float rp = 0.0;
float rq = 1.0;
float rm = 0.0;
float ro = 1.0;
float rr = 0.0;
float sb = 1.0;
float sd = 1.0;
float so = 0.0;
float sp = 0.0;
vec2 iu;
vec2 iw;
vec2 ix;
vec2 iy;
float eu;
float iv;
float tk = 0.0;
float tl = 1.0;
bool tm = mk(gm, PIECE_TEXT_BOX) > EPSILON;
if (mk(gm, PIECE_NODE_COMPONENT) > EPSILON || tm) {
iu = ceil((nr + ns) / 2.0);
if(length(pr - pq) > EPSILON){
iw = normalize(pr - pq) * vec2(1.,-1.);
}else{
iw = vec2(1.0, 0.0);
}
ix = jx(iw);
iy = ix;
eu = ps;
iv = pt;
} else {
sd = 0.0;
float uf = distance(nr, ns);
vec2 ug = normalize(ns - nr);
vec2 uh = (nr + ns) / 2.0;
vec2 ui = jx(ug);
vec2 uj = uh + (ui * uf * -hh / CURVATURE_RATIO);
if (mk(gm, PIECE_EDGE_TEXT) > 0.0
|| mk(gm, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0
) {
tm = mk(gm, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0;
float un;
float uo = ih;
ih = 0.0;
if (gs > EPSILON) {
nd kb = ng(nr, uo / 2.0, hh);
iu = ke(nr, kb.ne, kb.nf, ns, 0.5);
iw = kn(nr, kb.ne, kb.nf, ns, 0.5);
ix = jx(iw);
iy = ix;
un = lj(nr, kb.ne, kb.nf, ns, 0.5);
} else if (abs(hh) > EPSILON) {
iu = jz(nr, uj, ns, 0.5);
iw = kl(nr, uj, ns, 0.5);
ix = jx(iw);
iy = ix;
un = ld(hh, uf, 1.0);
} else {
iu = uh;
iw = ug;
ix = ui;
iy = ui;
un = uf;
}
eu = ps;
iv = pt;
if(px > un - uo && gs < EPSILON){
if(gx > EPSILON){
iw = vec2(1.0, 0.0);
ix = vec2(0.0, 1.0);
iy = vec2(0.0, 1.0);
} else {
iw = vec2(0,0);
ix = vec2(0.0, 0.0);
iy = vec2(0.0, 0.0);
}
} else {
float jq = -atan(iw.y, iw.x);
tk = jq;
gv -= jq;
if ((jq > PI / 2.0 || jq < -PI / 2.0)) {
gv += (1.0 - gs) * PI;
tl = -1.0;
iw *= -1.0;
ix *= -1.0;
iy *= -1.0;
}
}
} else {
float uz = ps;
float va = pt;
float vb = mr(pu);
float vc = gp 
* min(5. * uz, vb);
float vd = gq 
* min(5. * va, vb);
float ve = mk(gm, PIECE_EDGE_HEAD);
float vf = mk(gm, PIECE_EDGE_TAIL);
float vg = INFINITY * gs + uf - uz - va;
float vq = min(0., vg - vc - vd)/2.;
float vz = pu / 2.;
float wa =
uz > vz
? uz - sqrt(uz * uz - vz * vz)
: vz;
float wb = max( uz +
vd
+ gq * vq, 
0.) - (1. - gp) * wa;
wa =
va > vz
? va - sqrt(va * va - vz * vz)
: vz;
float wc = max( va + 
vc
+ gp * vq
, 0.) - (1. - gq) * wa;
if (ve > EPSILON || vf > EPSILON) {
vec2 wf = ve * ns + vf * nr;
float on = ve * wc + vf * wb + (HEAD_TAIL_PX_ADJUST - 0.5);
float wg = ve * vc + vf * vd;
vec2 wh;
if (gs > EPSILON) {
nd kb = ng(nr, uz, hh);
float un = lj(nr, kb.ne, kb.nf, ns, 1.0);
float nt = ve * (un - wc) + vf * wb;
float t = nq(nr, kb.ne, kb.nf, ns, nt);
wh = ke(nr, kb.ne, kb.nf, ns, t);
} else {
float un = ld(hh, uf, 1.0);
float t = (ve * (un - wc) + vf * wb) / un;
wh = jz(nr, uj, ns, t);
}
iw = normalize(wf - wh);
ix = jx(iw);
iy = ix;
iu = wf - iw * (on - wg / 2.0);
eu = wg;
iv = wg;
gn = 0.0;
go = 0.0;
} else {
float wl;
float wm;
float wn;
if (abs(hh) < EPSILON) {
iu = uh;
iw = ug;
ix = ui;
iy = ix;
eu = uf;
wl = uf;
wm = 0.0;
wn = uf;
} else {
float wp = a_vertexInfo.z;
float wq = wp * T_STEP_PER_CURVE_PIECE;
float kj = wq + T_STEP_PER_CURVE_PIECE;
if (gs < EPSILON) {
vec2 wr = jz(nr, uj, ns, wq);
vec2 ws = jz(nr, uj, ns, kj);
iu = (wr + ws) / 2.0;
iw = normalize(ws - wr);
ix = km(nr, uj, ns, wq);
iy = km(nr, uj, ns, kj);
eu = distance(wr, ws);
wl = ld(hh, uf, 1.0);
wm = ld(hh, uf, wq);
wn = ld(hh, uf, kj);
} else {
nd kb = ng(nr, uz, hh);
vec2 lk = kb.ne;
vec2 ll = kb.nf;
vec2 wr = ke(nr, lk, ll, ns, wq);
vec2 ws = ke(nr, lk, ll, ns, kj);
iu = (wr + ws) / 2.0;
iw = normalize(ws - wr);
ix = ko(nr, lk, ll, ns, wq);
iy = ko(nr, lk, ll, ns, kj);
eu = distance(wr, ws);
wl = lj(nr, lk, ll, ns, 1.0);
wm = lj(nr, lk, ll, ns, wq);
wn = lj(nr, lk, ll, ns, kj);
}
}
iv = pu;
rm = (wb - 1.0) / wl - 0.015 * gs;
ro = MAX_PROGRESS + 0.015 * gs
- (wc - HEAD_TAIL_PX_ADJUST) / wl;
rp = wm / wl;
rq = wn / wl;
rr = wl;
if (gr > 0.0 && vg > 5.0) {
float wx = (wl * iv) / (wl - wb);
float nw = wl;
float hm = wb;
float ho = wl - wc;
float a = -wx / nw;
float b = wx;
float hn = a * hm + b;
float hp = a * ho + b;
float wy = hn / (hm - ho);
float wz = -wy * ho;
iv = min(min(wz, uz), va);;
sp = wy * nw + wz + 1.0;
}
}
}
}
vec2 ip = vec2(0.0, 0.0);
vec2 iq = vec2(EPSILON, EPSILON);
vec2 ir = vec2(-EPSILON, -EPSILON);
float is = -1.0;
float it = 0.0;
bool xb = false;
vec2 xc = vec2(0,0);
vec2 xd = vec2(0,0);
vec2 xe = vec2(0,0);
if (hi > EPSILON && hg > hf) {
float xi = floor(hi / PATTERN_INFO_TEXTURE_SIZE);
float xj = hi - (xi * PATTERN_INFO_TEXTURE_SIZE);
vec4 xk = texture2D(u_patternInfoTexture, vec2(xj, xi) / 255.0) * 255.0;
vec2 xl = jl(xk.z);
vec2 xm = jl(xk.w);
is = xl.x * 2.0 + xm.x;
float xn = 0.0;
if (mn(is, FILTER_NEAREST)) { 
xn = PATTERN_NEAREST_TEXTURE_SIZE;
} else if (mn(is, FILTER_LINEAR)) { 
xn = PATTERN_LINEAR_TEXTURE_SIZE;
} else if (mn(is, FILTER_LINEAR_SDF)) { 
xn = PATTERN_LINEAR_SDF_TEXTURE_SIZE;
xb = true;
} else if (mn(is, FILTER_MIPMAP)) { 
xn = PATTERN_MIPMAP_TEXTURE_SIZE;
}
float xu = 1.0 / xn;
vec2 xv = (vec2(xl.y, xm.y) * PATTERN_POSITION_UNIT_SIZE) * xu / 2.0;
xd += (xk.xy * PATTERN_POSITION_UNIT_SIZE * xu) + xv;
xv -= PATTERN_PADDING * xu * 2.0;
vec2 xw = vec2(eu / 2.0, iv / 2.0) * xu;
vec2 xx = vec2(ih, ih) * xu;
float ya = 1.0 * u_pixelRatio;
float yb = SDF_SMOOTH_FACTOR;
if (gu > EPSILON) {
if (xb) { 
if (a.gy > EPSILON) {
yb = SDF_SMOOTH_FACTOR * u_pixelRatio / SDF_GAMMA;
xc = vec2(-a.ie,-a.id);
}
it = yb * SDF_GAMMA / pz / u_pixelRatio;
ya = SDF_FONT_SIZE / pz;
} else { 
ya = (xv.y / xw.y) / gu;
}
}
xe = (xw + xx) * ya;
xv += PATTERN_PADDING * xu;
iq = xd - xv;
ir = xd + xv;
}
if (gw > EPSILON) {
pw.y = (a.ic) * pz;
sb = 0.0;
sd = 0.0;
pw.x = a.ib * pz * BYTES_TO_TEXT_OFFSET_X;
pw = jo(pw, tk);
pw *= tl;
}
vec2 yg = vec2(cos(gv), sin(gv)) * on;
vec2 yh = iu + yg + pw;
float yi = ih * 2.0;
float yj = eu + sd * (yi + 1.0);
float yk = iv + sb * (yi + 1.0);
vec2 yl = iw * yj / 2.0;
vec2 ym = ix * yk / 2.0;
vec2 yn = iy * yk / 2.0;
float yo = (rq - rp);
float yp = pv.x / 2.0 + 0.5;
float ij = rp + yo * yp;
float io = so + (sp - so) * ij / 2.0;
float yq = step(gl, FIRST_COMPLEX_SHAPE_ID - EPSILON);
float yr = yq * SIMPLE_SHAPE_SAMPLING_SIZE + (1.0 - yq) * COMPLEX_SHAPE_SAMPLING_SIZE;
float ys = yr / COMPLEX_SHAPE_SAMPLING_SIZE;
float yt = ys * SHAPE_SAMPLING_BUFFER_RATIO / 2.0;
float yu = ys * (1.0 - SHAPE_SAMPLING_BUFFER_RATIO);
vec2 ze = vec2(
mod(gl, NB_SHAPES_BY_SIDE),
floor(gl / NB_SHAPES_BY_SIDE)
);
vec2 zh = ze + vec2(yt) +
vec2(rp * yu, 0.0);
vec2 zk = vec2(yo, 1.0) * yu;
vec2 ii = (zh + zk * (pv / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE;
vec2 im = vec2(yj / yo, yk) / 2.0;
float zr = gn * pu;
float zs = go * pu;
float ik = zr + zs;
float il = (ij * rr) / ik;
ip = xd
+ xe
* (pv + xc / im * u_viewZoom);
cj.ii = ii;
float zv = float(gl == 1.);
ei = vec4(
(zh + zk * (vec2(0.5,0.5) / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE,
NB_SHAPES_BY_SIDE * (1. - gw) * zv,
float(tm)
);
cj.im = im;
cj.ih = ih;
cj.hj = hj;
cj.hk = hk;
cj.hc = hc;
cj.ij = nb(ij, rm, ro);
cj.ik = ik;
cj.gn = zr;
cj.il = il;
cj.io = io;
cj.ip = ip;
cj.iq = iq;
cj.ir = ir;
cj.is = is;
cj.it = it;
cj.hl = hl;
cj.iu = yh;
cj.eu = yj + zv;
cj.iv = yk + zv;
cj.iw = iw;
cj.ix = ix;
cj.iy = iy;
return true;
}
float aad(float aae, float aaf, vec4 aag) {
float aah = clamp(((u_currentTime - aae) / aaf), 0.0, 1.0);
float r = aah;
float aai = r * r;
float aaj = aai * r;
vec4 aak = aah < 0.5 ? jt(aag) : jv(aag);
float aal = aak.x;
float aam = aak.y;
float aan = aak.z;
float aao = aak.w;
float aap = aal + aam * r + aan * aai + aao * aaj;
return aap;
}
void main() {
hb a_final = nx(
a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_final_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_final_x1_y1_x2_y2,
a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
#if ANIMATED
float aae = a_animationBeginTime_animationDuration.x;
float aaf = a_animationBeginTime_animationDuration.y;
vec4 aag = a_animationEasing;
float po = aad(aae, aaf, aag);
hb a_prev = nx(
a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_prev_x1_y1_x2_y2,
a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
const float ONE = 1.0;
a_final.gl = mix(a_prev.gl, a_final.gl, ONE);
a_final.gn = mix(a_prev.gn, a_final.gn, po);
a_final.go = mix(a_prev.go, a_final.go, po);
a_final.gp = mix(a_prev.gp, a_final.gp, ONE);
a_final.gq = mix(a_prev.gq, a_final.gq, ONE);
a_final.gm = mix(a_prev.gm, a_final.gm, ONE);
a_final.gu = mix(a_prev.gu, a_final.gu, ONE);
a_final.gw = mix(a_prev.gw, a_final.gw, ONE);
a_final.gx = mix(a_prev.gx, a_final.gx, ONE);
a_final.gy = mix(a_prev.gy, a_final.gy, ONE);
a_final.gz = mix(a_prev.gz, a_final.gz, ONE);
a_final.gs = mix(a_prev.gs, a_final.gs, ONE);
a_final.gv = mix(a_prev.gv, a_final.gv, po);
a_final.hc = mix(a_prev.hc, a_final.hc, po);
a_final.hd = mix(a_prev.hd, a_final.hd, po);
a_final.he = mix(a_prev.he, a_final.he, po);
a_final.hf = mix(a_prev.hf, a_final.hf, po);
a_final.hg =mix(a_prev.hg, a_final.hg, po);
a_final.hh = mix(a_prev.hh, a_final.hh, po);
a_final.hi = mix(a_prev.hi, a_final.hi, ONE);
a_final.hj = mix(a_prev.hj, a_final.hj, po);
a_final.hk = mix(a_prev.hk, a_final.hk, po);
a_final.hl = mix(a_prev.hl, a_final.hl, po);
a_final.hm = mix(a_prev.hm, a_final.hm, po);
a_final.hn = mix(a_prev.hn, a_final.hn, po);
a_final.ho = mix(a_prev.ho, a_final.ho, po);
a_final.hp = mix(a_prev.hp, a_final.hp, po);
a_final.hq = mix(a_prev.hq, a_final.hq, po);
a_final.hr = mix(a_prev.hr, a_final.hr, po);
a_final.hs = mix(a_prev.hs, a_final.hs, po);
a_final.ht = mix(a_prev.ht, a_final.ht, po);
a_final.hu = mix(a_prev.hu, a_final.hu, po);
a_final.hv = mix(a_prev.hv, a_final.hv, po);
a_final.hw = mix(a_prev.hw, a_final.hw, po);
a_final.hx = mix(a_prev.hx, a_final.hx, po);
a_final.hy = mix(a_prev.hy, a_final.hy, po);
a_final.hz = mix(a_prev.hz, a_final.hz, po);
a_final.ia = mix(a_prev.ia, a_final.ia, ONE);
a_final.ib = mix(a_prev.ib, a_final.ib, ONE);
a_final.ic = mix(a_prev.ic, a_final.ic, ONE);
#endif
ig cj;
bool aau = pp(a_final, cj);
if (!aau) {
me();
return;
}
vec2 pv = a_vertexInfo.xy;
dn = cj.hj;
dp = cj.hk;
dq = cj.hl;
dr = cj.ii;
ds = cj.ip;
#if D3D9_FIX
#else
dy = cj.ih;
dz = cj.iq;
ea = cj.ir;
eb = vec2(cj.hc, cj.io);
ec = cj.ij;
ed = cj.ik;
ee = vec2(cj.gn, cj.il);
ef = cj.im;
eg = cj.it;
eh = cj.is;
#endif
float aaz = step(pv.x, 0.0);
float aba = 1.0 - aaz;
dt = min(cj.iv, ROUNDED_BOX_RADIUS * 2.) * u_pixelRatio;
vec2 mg = cj.iu
+ cj.iw * (cj.eu / 2.0) * pv.x
+ (aaz * cj.ix + aba * cj.iy) * cj.iv / 2.0 * pv.y;
dq = dq * (1. - ei.w)
+ vec4(
pv.x * cj.eu,
pv.y * cj.iv,
cj.eu,
cj.iv
) * u_pixelRatio * ei.w;
gl_Position = mf(mg);
}
`,lh=1e20,EG=class{constructor({fontSize:t=24,buffer:e=8,radius:n=6,cutoff:i=.25}={}){this._maxDimension=1,this._gridSize=1,this._fontSize=t,this._buffer=e,this._radius=n,this._cutoff=i,this._height=Math.ceil(this._fontSize+2*this._buffer*wm),this._canvas=ei(),this._canvas.height=this._height,this._canvas.width=1;const s=this._canvas.getContext("2d",{willReadFrequently:!0});this._ctx=s,s.textBaseline="middle",s.textAlign="center",s.fillStyle="black"}setOptions({fontSize:t=24,buffer:e=8,cutoff:n=.25,radius:i=6}){this._fontSize=t,this._buffer=e,this._cutoff=n,this._radius=i,this._height=Math.ceil(this._fontSize+2*this._buffer*wm)}draw(t,e,n){ta(this._ctx,e,this._fontSize,n);const i=SG(this._ctx.measureText(t).width+2*this._buffer)-2*Ko,s=this._height,r=i*s,o=Math.max(i,s);this._canvas.width<i&&(this._canvas.width=i,ta(this._ctx,e,this._fontSize,n),this._ctx.textAlign="center",this._ctx.textBaseline="middle",this._ctx.fillStyle="black"),r>this._gridSize&&(this._gridOuter=new Float64Array(r),this._gridInner=new Float64Array(r),this._gridSize=r),o>this._maxDimension&&(this._f=new Float64Array(o),this._d=new Float64Array(o),this._z=new Float64Array(o+1),this._v=new Int16Array(o),this._maxDimension=o),this._ctx.clearRect(0,0,i,s),this._ctx.fillText(t,i/2,s/2);const a=this._ctx.getImageData(0,0,i,s),l=new Uint8ClampedArray(r);for(let d=0;d<r;d++){const h=a.data[4*d+3]/255;this._gridOuter[d]=h===1?0:h===0?lh:Math.pow(Math.max(0,.5-h),2),this._gridInner[d]=h===1?lh:h===0?0:Math.pow(Math.max(0,h-.5),2)}BA(this._gridOuter,i,s,this._f,this._d,this._v,this._z),BA(this._gridInner,i,s,this._f,this._d,this._v,this._z);for(let d=0;d<r;d++){const h=this._gridOuter[d]-this._gridInner[d];l[d]=Math.max(0,Math.min(255,Math.round(255-255*(h/this._radius+this._cutoff))))}return{height:s,width:i,distance:l}}};function BA(t,e,n,i,s,r,o){for(let a=0;a<e;a++){for(let l=0;l<n;l++)i[l]=t[l*e+a];UA(i,s,r,o,n);for(let l=0;l<n;l++)t[l*e+a]=s[l]}for(let a=0;a<n;a++){for(let l=0;l<e;l++)i[l]=t[a*e+l];UA(i,s,r,o,e);for(let l=0;l<e;l++)t[a*e+l]=Math.sqrt(s[l])}}function UA(t,e,n,i,s){n[0]=0,i[0]=-lh,i[1]=+lh;for(let r=1,o=0;r<s;r++){let a=(t[r]+r*r-(t[n[o]]+n[o]*n[o]))/(2*r-2*n[o]);for(;a<=i[o];)o--,a=(t[r]+r*r-(t[n[o]]+n[o]*n[o]))/(2*r-2*n[o]);o++,n[o]=r,i[o]=a,i[o+1]=+lh}for(let r=0,o=0;r<s;r++){for(;i[o+1]<r;)o++;e[r]=(r-n[o])*(r-n[o])+t[n[o]]}}function SG(t){return Math.ceil((t+2*Ko)/di)*di}var mg=256,wG=.275,AG=.25,TG=6,CG=jj-2*Ko,LG=$j-2*Ko,$A={fontSize:zh,cutoff:wG,radius:TG},PG={fontSize:zh,cutoff:AG,radius:8},kG=class{constructor(t,e){this._patternIdToInfoTexture=new Uint8Array(mg*mg*4),this._glTextures=[],this._textureSizes=[],this._pixelRatio=1,this._gl=t,this._glUnit=e;const n=ei(Ms,Ms),i=n.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("Pattern: could not get 2d context");this._imageCanvasContext=i,this._imageCanvas=n,this._canvasForDuplicatedImage,this._sdfGenerator=new EG($A),this._maxTextureSize=Math.min(4096,t.getParameter(t.MAX_TEXTURE_SIZE))}refresh(t){this._pixelRatio=t.getPixelRatio();const e=this._gl,n=this._getPatternsByFilter(t.getPatternList());for(let r=0;r<n.length;++r){const o=r,a=n[r],l=iG(a,this._maxTextureSize),{texture:d,size:h}=XM(o,a,l,this._maxTextureSize,this._patternIdToInfoTexture),c=this._glTextures[o]||(this._glTextures[o]=e.createTexture()),g=o===eu?p1:Fv;RA(e,c,this._glUnit+1+o,d,h,o,g),this._textureSizes[o]=h}const i=this._glTextureInfo||(this._glTextureInfo=e.createTexture()),s=this._patternIdToInfoTexture;RA(e,i,this._glUnit,s,mg,eu,Fv)}bindMetaDataTexture(){const t=this._gl;t.activeTexture(t.TEXTURE0+this._glUnit),t.bindTexture(t.TEXTURE_2D,this._glTextureInfo)}getInfoTextureUnit(){return this._glUnit}getNearestTextureUnit(){return this._glUnit+1+eu}getLinearTextureUnit(){return this._glUnit+1+oh}getLinearSdfTextureUnit(){return this._glUnit+1+ah}getMipmapTextureUnit(){return this._glUnit+1+_a}getInfoTextureSize(){return mg}getNearestTextureSize(){return this._textureSizes[eu]}getLinearTextureSize(){return this._textureSizes[oh]}getLinearSdfTextureSize(){return this._textureSizes[ah]}getMipmapTextureSize(){return this._textureSizes[_a]}_getPatternsByFilter(t){const e=new Array(IA);for(let n=0;n<IA;++n)e[n]=[];for(let n=0;n<t.length;++n){const i=this._getPatternPixels(t[n]);e[i.filter].push(i)}return e}_getPatternPixels({id:t,type:e,attributes:n}){let i;const{text:s,font:r,style:o,image:a,scaled:l,duplicated:d,colorArray:h}=n;switch(e){case Xo:i=d?this._getDuplicatedImagePixels(a):l?this._getScaledImagePixels(a):this._getNonScaledImagePixels(a);break;case Ca:i=this._getSdfTextPixels(s,r,o);break;case Da:i=this._getIconPixels(s,r,o);break;case za:i=this._getBadgeIconPixels(s,r,o);break;case hc:i=this._getPieChartPixels(h);break;default:throw new Error(`pattern type "${e}" does not exist`)}return i.id=t,i}_getScaledImagePixels(t){let e=t.width,n=t.height;if(e>0){const i=Ms/Math.max(t.width,t.height);e*=i,n*=i}return e&&n&&(e=Pu(e),n=Pu(n)),e-=2*Ko,n-=2*Ko,this._getImagePixels(t,e,n)}_getNonScaledImagePixels(t){return this._getImagePixels(t,t.width,t.height)}_getDuplicatedImagePixels(t){if(t.width===0||t.height===0)return this._getImagePixels(t,0,0);this._canvasForDuplicatedImage||(this._canvasForDuplicatedImage=ei(Ms,Ms));const e=this._canvasForDuplicatedImage,n=e.getContext("2d"),i=t.width,s=t.height;let r=(Ms-i)/2,o=(Ms-s)/2;for(;r>0;)r-=i;for(;o>0;)o-=s;for(let a=r;a<Ms;a+=i)for(let l=o;l<Ms;l+=s)n.drawImage(t,a,l);return this._getImagePixels(e,Ms,Ms)}_getImagePixels(t,e,n){let i;if(e===0||n===0)i=new Uint8Array(0);else{(this._imageCanvas.width<e||this._imageCanvas.height<n)&&(this._imageCanvas.width=e,this._imageCanvas.height=n);const s=this._imageCanvasContext;Iv(this._imageCanvas,s,e,n);try{s.drawImage(t,0,0,e,n)}catch{}i=s.getImageData(0,0,e,n).data}return{width:e,height:n,pixels:i,filter:_a}}_getPieChartPixels(t){const e=LG,n=this._imageCanvasContext,i=e/2,s=e/2;return Iv(this._imageCanvas,n,e,e),n.save(),n.rect(0,0,e,e),n.clip(),YM(n,t,i,s,e),n.restore(),{width:e,height:e,pixels:n.getImageData(0,0,e,e).data,filter:oh}}_getTextPixels(t,e,n,i,s,r){const o=this._imageCanvasContext,a=s*this._pixelRatio;ta(o,n,a,i);let l=Math.ceil(o.measureText(e).width);l===0&&(l=a);let d=0,h=0;t===_a||(d=2*Math.ceil(a*wm/2),h=2*Math.ceil(l*lM/2));const c=Math.ceil(l+h),g=Math.ceil(a+d),m=this._imageCanvas.height<g||this._imageCanvas.width<c;return this._imageCanvas.height<g&&(this._imageCanvas.height=g),this._imageCanvas.width<c&&(this._imageCanvas.width=c),m&&ta(o,n,a,i),o.clearRect(0,0,c,g),o.fillStyle="black",o.textBaseline="middle",o.textAlign="left",o.fillText(e,r+h/2,g/2),{width:c,height:g,pixels:o.getImageData(0,0,c,g).data,filter:t}}_getIconPixels(t,e,n){return this._getTextPixels(_a,t,e,n,CG,0)}_getBadgeIconPixels(t,e,n){return this._sdfGenerator.setOptions(PG),this._getSdfPixels(t,e,n)}_getSdfTextPixels(t,e,n){return this._sdfGenerator.setOptions($A),this._getSdfPixels(t,e,n)}_getSdfPixels(t,e,n){const{width:i,height:s,distance:r}=this._sdfGenerator.draw(t,e,n),o=new Uint8Array(i*s*4);for(let a=0;a<r.length;++a)o[4*a+3]=r[a];return{width:i,height:s,pixels:o,filter:ah}}},IG=class{constructor(t,e){this._gl=t,this._glTextureUnit=e,this._simpleShapePixels=new Uint8Array(yf*yf*4),this._complexShapePixels=new Uint8Array(wo*wo*4),this._shapesWritten=[]}refresh(t){const e=t.getShapeList();for(const n of e)if(!this._shapesWritten.includes(n.id)){const i=n.isSimple?yf:wo,s=n.isSimple?this._simpleShapePixels:this._complexShapePixels;sG(n,i,Av,s),this._loadShapeInGpu(n.id,i,s),this._shapesWritten.push(n.id)}}_loadShapeInGpu(t,e,n){const i=this._gl,s=Cv,r=t%Tv*wo,o=Math.floor(t/Tv)*wo;if(this._texture)i.bindTexture(i.TEXTURE_2D,this._texture);else{const a=new Uint8Array(s*s*4);this._texture=i.createTexture(),i.activeTexture(i.TEXTURE0+this._glTextureUnit),i.bindTexture(i.TEXTURE_2D,this._texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,s,s,0,i.RGBA,i.UNSIGNED_BYTE,a)}i.texSubImage2D(i.TEXTURE_2D,0,r,o,e,e,i.RGBA,i.UNSIGNED_BYTE,n)}getTextureSize(){return Cv}getSamplingSize(){return wo}getBufferRatio(){return Av}getTextureUnit(){return this._glTextureUnit}},jA=class{constructor(t,{vertex:e,fragment:n,constants:i,macros:s}){this._state=0,this._gl=t,this._vertexSource=e,this._fragmentSource=n,this._constants=nn(i||{}),this._macros=nn(s||{})}setConstant(t,e){this._constants[t]=e}setMacro(t,e){this._macros[t]=e}getState(){return this._state}getProgram(){return this._program}compile(){const t=this._gl,e=GA(this._vertexSource,this._macros,this._constants),n=GA(this._fragmentSource,this._macros,this._constants);this._program&&(t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader));const i=t.createProgram(),s=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);if(!(i&&s&&r))throw new Error("Error instantiating WebGL program");this._program=i,this._vertexShader=s,this._fragmentShader=r,t.shaderSource(this._vertexShader,e),t.compileShader(this._vertexShader),t.attachShader(this._program,this._vertexShader),t.shaderSource(this._fragmentShader,n),t.compileShader(this._fragmentShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._state=1}getError(){const t=this._gl;if(!t.getShaderParameter(this._vertexShader,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(this._vertexShader)||"";let n=e;const i=e.match(/ERROR: (\d+):(\d+):(.*)\n/g);if(i&&i.length){const s=this._vertexSource.split(`
`);n=i.map(r=>{const o=r.match(/ERROR: (\d+):(\d+):(.*)\n/);if(!o)return r;const[a,l]=o.slice(2);return`${s[+a]}
${s[+a+1]}
~~~~~~~~~~~
${s[+a+2]}
 -> ${l}`}).join(`
`)}return{step:"vertex",message:n}}return t.getShaderParameter(this._fragmentShader,t.COMPILE_STATUS)?t.getProgramParameter(this._program,t.LINK_STATUS)?(this._state=2,null):{step:"link",message:t.getProgramInfoLog(this._program)||""}:{step:"fragment",message:t.getShaderInfoLog(this._fragmentShader)||""}}};function GA(t,e,n){const i=Object.keys(e),s=Object.keys(n);for(let r=0;r<i.length;++r){const o=i[r],a=e[o];t=t.replace(`#define ${o} 0`,`#define ${o} ${a}`)}for(let r=0;r<s.length;++r){const o=s[r],a=n[o],l=a+(a%1==0?".0":"");t=t.replace(`const float ${o} = 0.0;`,`const float ${o} = ${l};`)}return t}function MG(){return typeof window<"u"&&!!window.FORCE_WEBGL}/** @preserve instance id */var VA=PM(),NG={stencil:!0,antialias:!1,alpha:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!MG()},RG=0,FG=1,OG={NO_WEBGL:'Unable to create a WebGL context: `canvas.getContext("webgl")` and `canvas.getContext("experimental-webgl")` returned `null`',NO_ANGLE_INSTANCED_ARRAYS:'WebGL extension "ANGLE_instanced_arrays" unavailable: `gl.getExtension("ANGLE_instanced_arrays")` returned `null`'},JM=class extends Error{};function hy(t,e){if(!t&&e){const n=new JM(OG[e]);throw n.code=e,n}}var DG=class KM extends jr{constructor(e){super(e),this._2dcanvas=ei(),this._ctx=this._2dcanvas.getContext("2d"),this._bufferDrawers=[],this._mustResize=!1,this._error=null,this._onContextLost=l=>{l.preventDefault(),this._error=new JM("WebGL context lost"),this.fire("error",this._error)};const n=KM.createInitData(),{canvas:i,gl:s,ext:r,staticProgramWrapper:o,animationProgramWrapper:a}=n;hy(s,"NO_WEBGL"),hy(r,"NO_ANGLE_INSTANCED_ARRAYS"),this._glCanvas=i,this._gl=s,this._ext=r,this._staticProgramWrapper=o,this._animationProgramWrapper=a,this._shapeTexture=new IG(this._gl,RG),this._patternTexture=new kG(this._gl,FG),this._initCanvas(this._glCanvas),this._computeShaderInfo(),this._initSpecialGlBuffers(),this._initGlPrograms(),this._initGl()}_initCanvas(e){super._initCanvas(e),e.addEventListener("webglcontextlost",this._onContextLost,!1)}static isAvailable(){return VA||hy(null,"NO_WEBGL"),VA}static createInitData(){const e=ei(),n=l1(e,NG,"webgl"),i=n&&typeof n.getExtension=="function"?n.getExtension("ANGLE_instanced_arrays"):null,s=UG(),r=new jA(n,{vertex:dy,fragment:uy,constants:s,macros:{ANIMATED:0}}),o=new jA(n,{vertex:dy,fragment:uy,constants:s,macros:{ANIMATED:1}});return n&&i&&(r.compile(),n.flush()),{canvas:e,gl:n,ext:i,staticProgramWrapper:r,animationProgramWrapper:o}}static getName(){return"WebGL"}_beforeFirstFrame(){this._animationProgramWrapper.getState()===0&&this._animationProgramWrapper.compile()}ensureAnimationsReady(){const e=this._animationProgramWrapper.getState();e!==2&&(e===0&&this._animationProgramWrapper.compile(),this._animationProgramWrapper.getError())}getDomElement(){return this._glCanvas}_initGl(){const e=this._gl;e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}_computeShaderInfo(){this._shaderMetadata=zG(dy,uy)}_initGlPrograms(){this._staticProgram=new zA({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._staticProgramWrapper}),this._animationProgram=new zA({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._animationProgramWrapper})}_initSpecialGlBuffers(){const e=this._gl,n=e.createBuffer(),i=new Int8Array(18*xi);for(let s=0;s<xi;++s){const r=[-1,-1,s,1,-1,s,1,1,s,-1,-1,s,-1,1,s,1,1,s],o=s*r.length;for(let a=0;a<r.length;a++)i[a+o]=r[a]}e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),this._specialGlBuffers={vertexInfo:n}}_computeUniforms(){return{viewWidth:this._width,viewHeight:this._height,viewX:this._viewX,viewY:this._viewY,viewZoom:this._viewZoom,viewAngle:this._viewAngle,currentTime:this._currentTime,pixelRatio:this._pixelRatio,backgroundColor:this._backgroundRgba,patternInfoTexture:this._patternTexture.getInfoTextureUnit(),patternNearestTexture:this._patternTexture.getNearestTextureUnit(),patternLinearTexture:this._patternTexture.getLinearTextureUnit(),patternLinearSdfTexture:this._patternTexture.getLinearSdfTextureUnit(),patternMipmapTexture:this._patternTexture.getMipmapTextureUnit(),shapeTexture:this._shapeTexture.getTextureUnit(),BYTES_TO_COORD:this._scales.bytesToActualCoord,BYTES_TO_SCALED_SIZE:this._scales.bytesToActualScaledSize,BYTES_TO_MIN_VISIBLE_SIZE:this._scales.bytesToActualMinVisibleSize,BYTES_TO_SYMBOLIC_SIZE:this._scales.bytesToActualSymbolicSize,BYTES_TO_DASH_LENGTH:this._scales.bytesToActualDashLength,BYTES_TO_GAP_LENGTH:this._scales.bytesToActualGapLength,BYTES_TO_PATTERN_SCALE:this._scales.bytesToActualPatternScale,PATTERN_INFO_TEXTURE_SIZE:this._patternTexture.getInfoTextureSize(),PATTERN_NEAREST_TEXTURE_SIZE:this._patternTexture.getNearestTextureSize(),PATTERN_LINEAR_TEXTURE_SIZE:this._patternTexture.getLinearTextureSize(),PATTERN_LINEAR_SDF_TEXTURE_SIZE:this._patternTexture.getLinearSdfTextureSize(),PATTERN_MIPMAP_TEXTURE_SIZE:this._patternTexture.getMipmapTextureSize(),PATTERN_POSITION_UNIT_SIZE:di,ROUNDED_BOX_RADIUS:this._textManager.getCornerRadius(),SHAPE_TEXTURE_SIZE:this._shapeTexture.getTextureSize(),SHAPE_SAMPLING_SIZE:this._shapeTexture.getSamplingSize(),SHAPE_SAMPLING_BUFFER_RATIO:this._shapeTexture.getBufferRatio(),NB_SHAPES_BY_SIDE:this._shapeTexture.getTextureSize()/this._shapeTexture.getSamplingSize(),SHAPE_DIMENSIONS:this._shapeTexture.getSamplingSize()/this._shapeTexture.getTextureSize(),SHAPE_ACTUAL_RATIO:1-this._shapeTexture.getBufferRatio()}}_render({shapesChanged:e,patternsChanged:n,dimensionsChanged:i,backgroundColorChanged:s}){const r=this._gl;if(this._error)throw this._error;if(e&&(this._shapeTexture.refresh(this._shapeManager),this._patternTexture.bindMetaDataTexture()),n&&this._patternTexture.refresh(this._patternManager),i&&(this._mustResize=!0),s){const[l,d,h,c]=this._renderBackground?this._backgroundRgba:[0,0,0,0];r.clearColor(l*c,d*c,h*c,c)}const o=this._computeUniforms(),a=this._getSortedBufferList();this._mustResize&&a.length&&(hm(this._glCanvas,this._width,this._height,this._pixelRatio),r.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),this._mustResize=!1),r.clear(r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT);for(let l=0;l<a.length;++l)this._displayBuffer(a[l],o);this._endFrame()}_displayBuffer(e,n){const i=e.getProgram();i!==this._currentProgram&&(this._currentProgram&&this._currentProgram.endPass(),this._currentProgram=i,this._currentProgram.startPass(n)),e.markAsUsed(),e.draw()}_getSortedBufferList(){const e=this._bufferList.getBuffersByAscendingDepth(),n=[];for(let i=0;i<this._bufferDrawers.length;++i){const s=this._bufferDrawers[i];s&&s.markAsUnused()}for(let i=0;i<e.length;++i){const s=e[i],r=this._getBufferDrawer(s);r.markAsUsed(),!s.isEmpty()&&this._isBufferDisplayable(s)&&n.push(r)}for(let i=0;i<this._bufferDrawers.length;++i){const s=this._bufferDrawers[i];s&&!s.isUsed()&&(s.destroy(),this._bufferDrawers[i]=void 0)}return n}_endFrame(){this._currentProgram&&(this._currentProgram.endPass(),this._currentProgram=null)}_getBufferDrawer(e){const n=e.getId();let i=this._bufferDrawers[n];if(!i){for(;this._bufferDrawers.length<=n;)this._bufferDrawers.push(void 0);i=new mG({gl:this._gl,ext:this._ext,staticProgram:this._staticProgram,animationProgram:this._animationProgram}),this._bufferDrawers[n]=i}return i.setDataBuffer(e),i}destroy(){this._glCanvas&&this._glCanvas.removeEventListener("webglcontextlost",this._onContextLost);const e=this._gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}getImageData(){const e=this._glCanvas.width,n=this._glCanvas.height;return(this._2dcanvas.width<e||this._2dcanvas.height<n)&&(this._2dcanvas.width=e,this._2dcanvas.height=n),this._ctx.clearRect(0,0,e,n),this._ctx.drawImage(this._glCanvas,0,0),this._ctx.getImageData(0,0,e,n)}_getImageDataFlippedYAxis(){const e=this._gl,n=this._glCanvas.width,i=this._glCanvas.height,s=this._ctx.createImageData(n,i),r=new Uint8Array(s.data.buffer);return e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,r),s}setConstant(e,n){this._staticProgramWrapper.setConstant(e,n),this._animationProgramWrapper.setConstant(e,n),this._staticProgramWrapper.compile(),this._animationProgramWrapper.compile(),this._initGlPrograms(),this._bufferDrawers.forEach(i=>{i==null||i.destroy()}),this._bufferDrawers=[]}};function zG(t,e){const n={vertexInfoAttribute:"a_vertexInfo",attributes:[],uniforms:[]};return HA(n,t),HA(n,e),n}var BG={float:1,vec2:2,vec3:3,vec4:4};function HA(t,e){const n=/(?:attribute\s+\/\*\s*(byte|ubyte|short|ushort|float)\s*\*\/\s*(float|vec2|vec3|vec4)\s+(\w+)\s*;)|(?:#if\s*(\w+))|(?:#endif)/g,i=/uniform\s+(float|vec2|vec3|vec4|sampler2D|int)\s+(\w+)\s*;/g,s=[];let r=n.exec(e);for(;r;){const o=r[0];o==="#endif"?s.pop():o.startsWith("#if")?s.push(r[4]):t.attributes.push({name:r[3],size:BG[r[2]],type:r[1],tags:s.slice(),location:null,byteSize:0,glType:null}),r=n.exec(e)}for(r=i.exec(e);r;){if(!t.uniforms.some(({id:o})=>o===r[1])){const o=r[1],a=r[2],l=a.replace("u_","");t.uniforms.push({id:l,name:a,type:o})}r=i.exec(e)}}function UG(){return{BYTES_TO_OFFSET_ANGLE:2*Math.PI/8,BYTES_TO_COLOR:1/15,SDF_FONT_SIZE:zh,CURVATURE_RATIO:Tp,PATTERN_PADDING:Ko,TEXT_WIDTH_MULTIPLIER:lM,TEXT_HEIGHT_MULTIPLIER:wm,SELF_LOOP_CURVATURE_RATIO:Am,EDGE_ARROW_SIZE_RATIO:jr.edgeArrowSizeRatio,EDGE_MIN_TIP_SIZE:jr.minEdgeTipSize,CURVE_SUBDIVISIONS:xi,PIECE_NODE_COMPONENT:As,PIECE_TEXT_BOX:La,PIECE_EDGE_BODY:Cp,PIECE_EDGE_HEAD:e1,PIECE_EDGE_TAIL:n1,PIECE_EDGE_TEXT:pa,MAX_TEXT_SIZE:M4,BYTES_TO_TEXT_OFFSET_X:1/FM,BYTES_TO_TEXT_OFFSET_Y:1/Mv,FILTER_NEAREST:eu,FILTER_LINEAR:oh,FILTER_LINEAR_SDF:ah,FILTER_MIPMAP:_a,SHAPE_TEXTURE_SIZE:Cv,SIMPLE_SHAPE_SAMPLING_SIZE:yf,COMPLEX_SHAPE_SAMPLING_SIZE:wo,SHAPE_SAMPLING_BUFFER_RATIO:Av,MAX_SHAPES:Sm.toString(),FIRST_COMPLEX_SHAPE_ID:wv,SELF_LOOP_TO_CIRCLE_APPROX:hM,SDF_GAMMA:Hj}}var $G={x:0,y:0,zoom:1,angle:0,width:80,height:60,pixelRatio:1,backgroundColor:null,currentTime:0,isBufferDisplayable:Gb,hideImages:!1,renderBackground:!1},pg={webgl:DG,canvas:aG,svg:gG},WA=[0,0,0,0],cy={webgl:null,svg:null,canvas:null},gy=class extends dc{constructor(t){super(),this._view=nn($G),this._domWrapper=Yr?document.createElement("div"):dm(),this._domElement=this._domWrapper.appendChild(Yr?document.createElement("div"):dm()),this._currentElementSize=0,this._currentBlockOffset=0,this._currentByteOffset=0,this._blockIdToAddress=new Uint32Array(0),this._renderersByType={},this._switchMainRenderer=!0,this._refreshTexts=!1,this._backgroundColor=null,this._initData=t||{},this._patternManager=new C4,this._shapeManager=new L4,this._boundariesManager=new Qj,this._textManager=new N4(this._patternManager),this._bufferOffsetToId=new mM,this._memoryManager=new w4(this._patternManager,this._shapeManager,this._textManager,this._bufferOffsetToId,e=>this.parseColor(e)||WA),this._bufferList=new Zj}static createInitData(){const t={};for(const e in pg)t[e]=pg[e].createInitData();return t}static cacheInitData(t){cy=t}static getCachedInitData(){return cy}static clearCachedInitData(){cy={webgl:null,svg:null,canvas:null}}freeBlock(t){this._checkBlockId(t);const e=this._blockIdToAddress[t],n=this._bufferList.freeBlock(e);return this._blockIdToAddress[t]=n,n}_ensureDomElementsFitParent(){const t=this._domElement.parentNode;!t||t.offsetWidth===this._view.width&&t.offsetHeight===this._view.height||qa(t,`${this._view.width}px`,`${this._view.height}px`)}_ensureCorrectBackgroundColor(){const t=this._domElement.parentNode;this._backgroundColor!==this._view.backgroundColor&&t&&(t.style.backgroundColor=this._view.backgroundColor||"",this._backgroundColor=this._view.backgroundColor)}createGroup(){return new Kj}parseColor(t){return fi(t)}clear(){this._blockIdToAddress.fill(0),this._patternManager.reset(),this._boundariesManager.reset(),this._textManager.reset(),this._bufferList.reset(),this._bufferOffsetToId.reset()}notifyFontsReloaded(){this._patternManager.notifyUpdate(),this._textManager.clear(),this._refreshTexts=!0}notifyPatternUpdate(){this._patternManager.notifyUpdate()}getShapePoints(t){return this._shapeManager.getDefinitionFromName(t).points}checkShapeHit(t,e,n){const{getDistanceFromStrokeVertically:i,getDistanceFromStrokeHorizontally:s}=this._shapeManager.getDefinitionFromName(t);return Math.min(i(e,n),s(e,n))>=0}setGlobalBoundaries(t){const{maxBlockId:e=0,maxScaledSize:n,maxMinVisibleSize:i,maxSymbolicSize:s,maxDashLength:r,maxGapLength:o,maxPatternScale:a}=t;return e>this._blockIdToAddress.length&&this._resizeBlockArray(e),!!this._boundariesManager.set(t)&&(this._memoryManager.resizeBoundaries(n,i,s,r,o,a),!0)}_resizeBlockArray(t){const e=new Uint32Array(t);e.set(this._blockIdToAddress),this._blockIdToAddress=e}registerShape(t,e){this._shapeManager.register(t,e)}_bindBlock(t,e,n,i,s,r,o){this._checkBlockId(t);const a=this._blockIdToAddress[t],l=this._bufferList.allocateBlock(a,e,n,i,s,r,o);return this._blockIdToAddress[t]=l.address,this._currentDataView=l.buffer.getDataView(),this._currentElementSize=l.buffer.elementSize,this._currentBlockOffset=l.offset,this._currentByteOffset=this._currentBlockOffset*this._currentElementSize,this._currentSideDataView=l.buffer.getSideDataView(),this._currentSideElementSize=l.buffer.getTotalSideElementsSize(),this._currentSideByteOffset=this._currentBlockOffset*this._currentSideElementSize,l}_setItemIndex(t){const e=this._currentBlockOffset+t;this._currentByteOffset=e*this._currentElementSize,this._currentSideByteOffset=e*this._currentSideElementSize}_checkBlockId(t){t>=this._blockIdToAddress.length&&this._resizeBlockArray(Io(t+1))}_setTextCharacters(t){this._textManager.storeTextInDataView(this._currentSideDataView,this._currentSideByteOffset,this._currentSideByteOffset+this._currentSideElementSize,t)}_storeElement(t,e){this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset,t.end),e&&(this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset+Cu,t.start),this._memoryManager.storeAnimationInformation(this._currentDataView,this._currentByteOffset+2*Cu,t.animation,s1.getCoefficients(t.animation.easing)))}storeGroup(t,e){if(!e||e.size===0)return this.freeBlock(t);const n=e.type,i=e.depth,s=e.size,r=e.getElements(),o=e.animated,a=e.stencilUsage,l=e.getId();let d=0;if(n===Oa)for(let c=0;c<s;++c){const g=r[c],{start:m,end:_}=g;if(_.pattern.type===Qo){const p=_.pattern.attributes.text;d=Math.max(d,p.length)}if(o&&m.pattern.type===Qo){const p=m.pattern.attributes.text;d=Math.max(d,p.length)}}const h=this._bindBlock(t,n,o,i,s,d,a);for(let c=0;c<s;++c){const g=r[c];this._setItemIndex(c),this._storeElement(g,o),this._bufferOffsetToId.set(h.buffer.getId(),h.offset+c,l)}if(n===Oa)for(let c=0;c<s;++c){const g=r[c];this._setItemIndex(c),this._setTextCharacters(g.end.pattern)}return h.address}_refreshTextElements(){const t=this._bufferList.getBuffers();for(const e of t)if(e&&e.type===Oa){const n=e.getSideDataView(),i=e.getTotalSideElementsSize(),s=e.getSize();let r=0,o=i;for(let a=0;a<s;++a){const l=this._textManager.extractTextFromDataView(n,r,o);this._textManager.storeTextInDataView(n,r,o,l),r=o,o+=i}e.triggerUpdate()}}extractElement(t,e=0){if(!t)return null;const n=this._bufferList.getBlockInfo(t);return this._renderer.extractElement(n.buffer,n.offset+e)}getDomElement(){return this._domElement}getDomWrapper(){return this._domWrapper}measureText(t,e,n,i=1){return this._textManager.measureText(t,e,n,i)}setRenderType(t){this._renderType!==t&&(this._renderType=t,this._switchMainRenderer=!0)}setEdgeArrowSizeRatio(t){jr.setEdgeArrowSizeRatio(t),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_ARROW_SIZE_RATIO",t)}setEdgeMinTipSize(t){jr.setMinEdgeTipSize(t),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_MIN_TIP_SIZE",t)}_ensureMainRendererReady(){if(this._switchMainRenderer){this._renderType===null&&(this._renderType="canvas");const t=pg[this._renderType];t&&t.isAvailable()||(this._renderType="canvas"),this._renderer=this._renderersByType[this._renderType],this._renderer||(this._renderer=this._instanciateRenderer(this._renderType),this._renderer.on("error",e=>this.fire("error",e)),this._renderersByType[this._renderType]=this._renderer),this._updateDomElement()}}_updateDomElement(){const t=this._renderer&&this._renderer.getDomElement(),e=this._domElement;for(;e&&e.firstChild;)e.removeChild(e.firstChild);t&&this._appendDomChild(t)}_appendDomChild(t){t.style.position="absolute",t.style.left="0",t.style.top="0",this._domElement.appendChild(t)}_instanciateRenderer(t){return new(t===null?jr:pg[t])({initData:t===null?null:this._initData[t],bufferList:this._bufferList,shapeManager:this._shapeManager,patternManager:this._patternManager,boundariesManager:this._boundariesManager,textManager:this._textManager,memoryManager:this._memoryManager})}setView(t){this._view=wt(wt({},this._view),t)}getTextManager(){return this._textManager}_updateManagers(){this._patternManager.setPixelRatio(this._view.pixelRatio),this._shapeManager.update(),this._patternManager.update(),this._textManager.update(),this._boundariesManager.update(),this._bufferList.update(),this._refreshTexts&&(this._refreshTexts=!1,this._refreshTextElements())}_resizeCanvas(t){yM(t,this._view.width,this._view.height,this._view.pixelRatio)}render(){this._ensureMainRendererReady(),this._ensureDomElementsFitParent(),this._ensureCorrectBackgroundColor(),this._updateManagers(),this._renderer.renderFrame(this._view)}ensureAnimationsReady(){this._ensureMainRendererReady(),this._renderer.ensureAnimationsReady()}export(t,e,n){const i=this._instanciateRenderer(t),s=wt(wt({},this._view),e);return"setViewportClipping"in i&&i.setViewportClipping(!1),this._updateManagers(),i.renderFrame(s),i.export(n).then(()=>i.getDomElement())}getCurrentTime(){return ci()}getImageData(){return this._renderer&&this._renderer.getImageData()}destroy(){for(const t of Object.keys(this._renderersByType)){const e=this._renderersByType[t];e&&e.destroy()}}transparentify(t){const e=this.parseColor(t)||WA;return`rgba(${Math.round(255*e[0])},${Math.round(255*e[1])},${Math.round(255*e[2])},0)`}initDebugRenderingLoop({triggerKey:t="r",start:e=!0}={}){let n=e;document.addEventListener("keydown",({key:s})=>{s===t&&(n=!n)});const i=s=>{(n||s)&&(this.setView({currentTime:ci()}),this.render()),window.requestAnimationFrame(()=>{i()})};window.requestAnimationFrame(()=>{document.body.appendChild(this.getDomElement()),i(!0)})}},jG=mp&&document.fonts,GG=200,fy="/qwerty/ [HELLO] ",XA="serif",VG=16,HG=class{constructor(){this._fontFaceSet=jG?document.fonts:null,this._canvas=ei(),this._ctx=this._canvas.getContext("2d")}_measureText(t,e){return this._ctx.font=`12px ${e}`,this._ctx.measureText(t).width}check(t){if(t===XA)return!0;const e=this._measureText(fy,XA);return this._measureText(fy,t)!==e}load(t){return this._fontFaceSet&&this._fontFaceSet.load?this._fontFaceSet.load(`12px ${t}`):(this._ctx.font=`12px ${t}`,this._ctx.fillText(fy,10,50),Promise.resolve())}},WG=class{constructor(t,e){this._fontLoaderCounter=0,this._loaded=!1,this._value=null,this._timeout=0,this._fontFaceSet=t,this._fontName=e,this._loaded=!1,this._value=null,this._timeout=0,mp&&!this._fontFaceSet.check(this._fontName)||this._setLoaded()}_setLoaded(){this._loaded=!0,this._value=this._fontName}getValue(){return this._value}isLoaded(){return this._loaded}destroy(){clearTimeout(this._timeout)}load(){return this._tryLoad(GG).then(()=>{this._setLoaded()})}_tryLoad(t){return this._fontFaceSet.load(this._fontName).then(()=>{if(!this._fontFaceSet.check(this._fontName)&&this._fontLoaderCounter<VG)return new Promise(e=>{t<6e4&&(this._timeout=setTimeout(e,t))}).then(()=>(this._fontLoaderCounter++,this._tryLoad(1.5*t)))})}},XG=class{constructor(){this._fontFaceSet=new HG,this._fonts={},this._onFontLoaded=[],this._hideUntilFontsLoaded=!0}setHideUntilFontsLoaded(t){this._hideUntilFontsLoaded=t}getFont(t){let e=this._fonts[t];return e||(e=new WG(this._fontFaceSet,t),this._fonts[t]=e,e.isLoaded()||e.load().then(()=>this._triggerFontLoaded(t))),!this._hideUntilFontsLoaded&&t||e.getValue()}onFontLoaded(t){this._onFontLoaded.push(t)}destroy(){this._onFontLoaded=[],Object.keys(this._fonts).forEach(t=>this._fonts[t].destroy())}_triggerFontLoaded(t){this._onFontLoaded.forEach(e=>e(t))}};function ZG(t,e,n,i){_1(t,e,n,i),t.thicknessOrFontSizeScaled=e.widthScaled,t.thicknessOrFontSizeFixed=e.widthFixed,t.strokeWidthScaled=e.stroke.widthScaled,t.strokeWidthFixed=e.stroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.color,t.strokeColor=e.stroke.color,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=e.stroke.minVisibleSize,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function _1(t,e,n,i){t.pieceId=n,t.shape=i,t.x1=e.sourceX,t.y1=e.sourceY,t.x2=e.targetX,t.y2=e.targetY,t.rectWidthOrSourceRadiusScaled=e.sourceRadiusScaled,t.rectWidthOrSourceRadiusFixed=e.sourceRadiusFixed,t.rectHeightOrTargetRadiusScaled=e.targetRadiusScaled,t.rectHeightOrTargetRadiusFixed=e.targetRadiusFixed,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=mi,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.widthScaled,t.curvature=e.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=e.isSelfLoop,t.isText=!1}function YG(t,e,n){const i=e.widthScaled+2*e.halo.widthScaled,s=e.widthFixed+2*e.halo.widthFixed;_1(t,e,n,"line"),t.thicknessOrFontSizeScaled=i,t.thicknessOrFontSizeFixed=s,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.halo.color,t.strokeColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1}function qG(t,e,n,i){_1(t,e,n,i);const s=e.widthFixed*AA+y4;t.thicknessOrFontSizeScaled=e.widthScaled*wA,t.thicknessOrFontSizeFixed=e.widthFixed*wA,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=e.widthScaled*AA,t.offsetFixed=s,t.fillColor=e.outline.color,t.strokeColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,e.outline.minVisibleSize),t.strokeMinVisibleSize=0,t.offsetAngle=Math.PI/2,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function JG(t,e,n){QM(t,e,n),t.pattern.type=Qo,t.pattern.attributes.text=e.content,t.pattern.attributes.size=uc,t.pattern.attributes.font=e.font,t.pattern.attributes.style=e.style,t.pattern.attributes.align=e.align,t.patternColor=e.color,t.patternScale=1,t.thicknessOrFontSizeScaled=e.sizeScaled,t.thicknessOrFontSizeFixed=e.sizeFixed,t.isText=!0}function KG(t,e,n){QM(t,e,n),t.pieceId+=La,t.fillColor=e.backgroundColor,t.shape="square"}function QM(t,e,n){const i=e.position==="centered"?0:(n.widthScaled+e.heightScaled)/2+n.stroke.widthScaled,s=e.position==="centered"?0:(n.widthFixed+e.heightFixed)/2+n.stroke.widthFixed+e.padding+e.margin;if(t.pieceId=pa,t.shape="square",t.x1=n.sourceX,t.y1=n.sourceY,t.x2=n.targetX,t.y2=n.targetY,!n.isSelfLoop&&n.curvature===0){const r=Math.atan2(t.y2-t.y1,t.x2-t.x1),o=n.sourceRadiusScaled-n.targetRadiusScaled,a=Math.cos(r),l=Math.sin(r);t.x1+=a*o,t.y1+=l*o}t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding+1,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=n.sourceRadiusScaled+n.targetRadiusScaled,t.strokeWidthFixed=n.sourceRadiusFixed+n.targetRadiusFixed,t.offsetScaled=i,t.offsetFixed=s,t.pattern.type=mi,t.opacity=n.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,n.minVisibleSize),t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.offsetAngle,t.patternScale=0,t.symbolicSize=n.widthScaled,t.curvature=n.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=n.isSelfLoop,t.isText=!1,t.adjustTextAngle=e.adjustAngle}var QG=t=>!!t||t===0;function Hs(t,e,n=0){return t==="inherit"?Array.isArray(e)?e[((n/(2*Math.PI)*e.length|0)+1)%e.length]:e:t}function tV(t,e,n){return t==="source"?Array.isArray(e)?e[0]:e:t==="target"?Array.isArray(n)?n[0]:n:t}function eV(t){const e=t.depth;return e===xM||e===vM||(e-r1)%a1>=o1}function tN(t){const e=(t.depth-r1)%a1;return e>=0&&e!==bM&&e!==o1}var cc="shifted",nV="centered";Pb(bk());function ZA(t,e,n,i,s,r){iV(t,e,n,i,s,r),YA(t,e,n,i.text,s.texts.primary,r.texts.primary,r),YA(t,e,n,i.text.secondary,s.texts.secondary,r.texts.secondary,r)}function iV(t,e,n,i,s,r){if(i.width.get(n)!==0){if(my(s.body,r,ZG),s.halo.body){const o=i.halo.width.get(n),a=+(i.halo.scalingMethod.get(n)==="scaled");r.halo.widthScaled=o*a,r.halo.widthFixed=o*(1-a),my(s.halo,r,YG)}s.outline.body&&(r.outline.color=i.outline.color.get(n),r.outline.minVisibleSize=i.outline.minVisibleSize.get(n),my(s.outline,r,qG))}}function my(t,e,n){n(t.body,e,Cp,e.shape.body),t.head&&n(t.head,e,e1,e.shape.head),t.tail&&n(t.tail,e,n1,e.shape.tail)}function YA(t,e,n,i,s,r,o){if(s.text&&r.content){const a=i,l=a.scaling.get(n);if(r.font=e.fontManager.getFont(a.font.get(n)),r.color=Hs(a.color.get(n),o.color),r.position=a.position?a.position.get(n):cc,r.style=a.style.get(n),r.minVisibleSize=a.minVisibleSize.get(n),r.margin=a.margin.get(n),r.padding=a.padding.get(n),r.maxLineLength=a.maxLineLength.get(n),r.content=u1(r.content,r.maxLineLength),r.adjustAngle=a.adjustAngle.get(n),r.align=a.align.get(n),l){const h=a.scale.get(n);r.sizeScaled=o.widthScaled*h,r.sizeFixed=o.widthFixed*h}else r.sizeFixed=a.size.get(n),r.sizeScaled=0;const d=t.measureText(r.content,r.font,r.style);r.widthScaled=d.width*r.sizeScaled,r.widthFixed=d.width*r.sizeFixed,r.heightScaled=d.height*r.sizeScaled,r.heightFixed=d.height*r.sizeFixed,r.offsetAngle=r===o.texts.primary?v4:x4,JG(s.text,r,o),s.background&&KG(s.background,r,o)}}function qA(t,e){py(t.body,e,!0,!0),py(t.outline,e,e.outline.enabled,!0),py(t.halo,e,!!e.halo.color,!1),JA(t.texts.primary,e.texts.primary),JA(t.texts.secondary,e.texts.secondary)}function py(t,e,n,i){t.body=n,t.head=n&&i&&!!e.shape.head,t.tail=n&&i&&!!e.shape.tail}function JA(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor}function KA(t,e,n,i,s,r){sV(t,e,n,i,s,r),QA(t,e.texts.primary,n.text,i,e),QA(t,e.texts.secondary,n.text.secondary,i,e)}function sV(t,e,n,i,s,r){const o=s.source,a=s.target,l=n.source.get(i),d=n.target.get(i),h=o.x.get(l),c=o.y.get(l),g=o.radius.get(l),m=o.color.get(l),_=+(o.scalingMethod.get(l)==="scaled"),p=a.x.get(d),v=a.y.get(d),x=a.radius.get(d),b=a.color.get(d),E=+(a.scalingMethod.get(d)==="scaled"),S=tV(n.color.get(i),m,b),A=n.width.get(i),T=n.scalingMethod.get(i)==="scaled"?1:0,P=n.stroke.width.get(i),k=n.stroke.scalingMethod.get(i)==="scaled"?1:0,I=b4[n.shape.style.get(i)],R=n.adjustAnchors.get(i);if(e.source=l,e.target=d,e.sourceX=h,e.sourceY=c,e.targetX=p,e.targetY=v,e.sourceRadiusScaled=g*_,e.sourceRadiusFixed=g*(1-_),e.targetRadiusScaled=x*E,e.targetRadiusFixed=x*(1-E),e.widthScaled=A*T,e.widthFixed=A*(1-T),e.curvature=n.curvature.get(i),e.isSelfLoop=l===d,e.color=S,e.opacity=n.opacity.get(i),e.minVisibleSize=n.minVisibleSize.get(i),e.shape.body=n.shape.body.get(i),e.shape.head=n.shape.head.get(i),e.shape.tail=n.shape.tail.get(i),e.shape.dashLength=I.dash,e.shape.gapLength=I.gap,e.shape.isBodyTriangle=e.shape.body==="triangle",e.stroke.color=Hs(n.stroke.color.get(i),S),e.stroke.widthScaled=P*k,e.stroke.widthFixed=P*(1-k),e.stroke.minVisibleSize=n.stroke.minVisibleSize.get(i),e.halo.color=n.halo.color.get(i),e.outline.enabled=n.outline.enabled.get(i),e.textHidden=n.textHidden.get(i)===1,R&&(e.shape.head||e.shape.tail||e.shape.body==="triangle")){const M=e,z=M.curvature,j=M.sourceX,X=M.sourceY,O=M.targetX,N=M.targetY;let W=1,U=1;if(z){if(!M.isSelfLoop){const K=Mp(j,X,O,N,z/2);W=_g(M,r,o,l,j,X,K.x,K.y),U=_g(M,r,a,d,O,N,K.x,K.y)}}else W=_g(M,r,o,l,j,X,O,N),U=_g(M,r,a,d,O,N,j,X);e.sourceRadiusScaled*=W,e.sourceRadiusFixed*=W,e.targetRadiusScaled*=U,e.targetRadiusFixed*=U}}function QA(t,e,n,i,s){e.hidden=s.textHidden,e.content=t.formatText(n.content.get(i)),e.backgroundColor=Hs(n.backgroundColor.get(i),s.color)}function _g(t,e,n,i,s,r,o,a){const l=e.angle||0;let d,h=Math.atan2(a-r,o-s)-l,c=1,g=0;h<-vs?h+=rh:h>vs&&(h-=rh),h<-vs/2?(g=SM,d=n.badges.topLeft):h<0?(g=wM,d=n.badges.topRight):h<vs/2?(g=TM,d=n.badges.bottomRight):(g=AM,d=n.badges.bottomLeft),g+=l;const m=d.text.content&&d.text.content.get(i),_=d.image.url&&d.image.url.get(i);if(QG(m)||_){const p=d.positionScale.get(i),v=d.scale.get(i),x=Mk(o,a,s,r,s+Math.cos(g)*p,r+Math.sin(g)*p,v);if(x){const b=x.x-s,E=x.y-r,S=Math.sqrt(b*b+E*E);c=Math.max(c,S)}}if(n.shape.get(i)==="square"){const p=Math.abs(Math.cos(h)),v=Math.abs(Math.sin(h)),x=1/Math.max(p,v);c=Math.max(c,x)}return c}function tT(){return{source:0,target:0,sourceX:0,sourceY:0,targetX:0,targetY:0,sourceRadiusScaled:0,sourceRadiusFixed:0,targetRadiusScaled:0,targetRadiusFixed:0,widthScaled:0,widthFixed:0,curvature:0,isSelfLoop:!1,color:"",opacity:0,minVisibleSize:0,shape:{body:"line",head:null,tail:null,dashLength:0,gapLength:0,isBodyTriangle:!1},stroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,color:""},outline:{enabled:!1,color:"",minVisibleSize:0},textHidden:!1,texts:{primary:eT(),secondary:eT()}}}function eT(){return{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,position:cc,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0}}function rV(t){return t===null?t:void 0}function qn(t){return typeof t=="boolean"||t===0||t===1?t:void 0}function Ba(t){return typeof t=="number"&&isFinite(t)?t:void 0}function Ze(t){return typeof t=="number"&&isFinite(t)&&t>=0?t:void 0}var eN=-100,oV=400,nN=t=>typeof t=="number"&&isFinite(t)&&t>=eN&&t<=oV?t:void 0;function zr(t){return t===null||typeof t=="string"||typeof t=="number"?t:void 0}function Mo(t){return t==="fixed"||t==="scaled"?t:void 0}function No(t){return fi(t)?t:void 0}function aV(t){return t===nV||t===cc?t:void 0}function ui(t){return t==="inherit"||fi(t)?t:void 0}function lV(t){return t==="source"||t==="target"||fi(t)?t:void 0}function du(t){return t===null?null:typeof t=="string"?t.split(",").map(e=>{const n=e.trim(),i=n.indexOf(" ")!==-1,s=n[0];return i&&s!=='"'&&s!=="'"?`"${n}"`:n}).join(","):void 0}function hu(t){return t==="none"?"normal":t==="normal"||t==="italic"||t==="bold"||t==="italic bold"||t==="bold italic"?t:void 0}function Cm(t){return t==="left"||t==="center"?t:void 0}function uV(t){return t==="equilateral"?"pentagon":t==="circle"||t==="square"||t==="cross"||t==="diamond"||t==="pentagon"||t==="star"?t:void 0}function dV(t){return["line","tapered","arrow","dashed","dotted"].includes(t)?t:void 0}function hV(t){return t==="line"||t==="triangle"?t:void 0}function nT(t){return[null,"arrow","circle-hole-arrow","triangle-hole-arrow","short-arrow","sharp-arrow","circle","square"].includes(t)?t:void 0}function cV(t){return t==="plain"||t==="dashed"||t==="dotted"?t:void 0}function gV(t){return t==="top"||t==="bottom"||t==="left"||t==="right"||t==="center"?t:void 0}function fV(t){if(fi(t))return t;if(Array.isArray(t)){if(t.length<1)return;for(let e=0;e<t.length;++e)if(!fi(t[e]))return;return t}}function Le(t){return function(e){if(typeof e=="number")return isFinite(e)&&e>=0?e:void 0;if(typeof e!="string"||e.charAt(e.length-1)!=="%")return;const n=parseFloat(e);return isNaN(n)?void 0:t*n/100}}function y1(){return{edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0}}function $h(t,e=y1()){const n=(t-eN)*a1+r1;return e.edgeHalo=c4,e.nodeHaloStroke=vM,e.nodeHalo=xM,e.edgeBody=n+bM,e.edgeTextBackground=n+g4,e.edgeText=n+f4,e.nodeBody=n+o1,e.nodeTextBackground=n+m4,e.nodeText=n+p4,e}var mV=(t,e)=>{e.halo.body=e.halo.body||t.halo.body,e.halo.head=e.halo.head||t.halo.head,e.halo.tail=e.halo.tail||t.halo.tail,e.outline.body=e.outline.body||t.outline.body,e.outline.head=e.outline.head||t.outline.head,e.outline.tail=e.outline.tail||t.outline.tail,e.body.body=e.body.body||t.body.body,e.body.head=e.body.head||t.body.head,e.body.tail=e.body.tail||t.body.tail;const n=e.texts,i=t.texts;n.primary.text=n.primary.text||i.primary.text,n.primary.background=n.primary.background||i.primary.background,n.secondary.text=n.secondary.text||i.secondary.text,n.secondary.background=n.secondary.background||i.secondary.background},iN=t=>(e,n)=>{n.halo.body=e.halo.body[t],n.halo.head=e.halo.head[t],n.halo.tail=e.halo.tail[t],n.outline.body=e.outline.body[t],n.outline.head=e.outline.head[t],n.outline.tail=e.outline.tail[t],n.body.body=e.body.body[t],n.body.head=e.body.head[t],n.body.tail=e.body.tail[t],n.texts.primary.text=e.texts.primary.text[t],n.texts.primary.background=e.texts.primary.background[t],n.texts.secondary.text=e.texts.secondary.text[t],n.texts.secondary.background=e.texts.secondary.background[t]},pV=iN("start"),_V=iN("end"),yV=class{constructor({engine:t,imageManager:e,fontManager:n,formatText:i,view:s,attributes:r,attributesPrev:o,nodeAttributes:a,nodeAttributesPrev:l}){this._fullComponents=fd(),this._startComponents=fd(),this._endComponents=fd(),this._startFlags=fd(),this._endFlags=fd(),this._startInput=tT(),this._endInput=tT(),this._depthInfo=y1(),this._nullElt={id:-1,valid:!0},this._engine=t,this._view=s,this._helper={imageManager:e,fontManager:n,formatText:i},this._attributes=r,this._attributesPrev=o,this._nodeAttributes=a,this._nodeAttributesPrev=l,this._layers=iT(()=>t.createGroup()),this._blockIds=iT(()=>0)}drawEdge(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();const e=this._engine,n=this._helper,i=-t,s=this._attributes,r=$h(s.layer.get(t)-(s.detectable.get(t)?0:1),this._depthInfo),o=s.source.get(t),a=s.target.get(t),l=s.curvature.get(t),d=this._attributesPrev.curvature.get(t),h=s.animationDuration.get(t),c=s.animationStart.get(t),g=s.animationEasing.get(t),m=h>0,_=l!==0||m&&d!==0;this._prepareBlocks(m,r,i,_);const p=this._extremitiesAttributes={source:this._nodeAttributes,target:this._nodeAttributes};if(KA(n,this._endInput,s,t,p,this._view),qA(this._endFlags,this._endInput),m){const v=this._nodeAttributes.animationDuration.get(o)>0,x=this._nodeAttributes.animationDuration.get(a)>0;p.source=v?this._nodeAttributesPrev:this._nodeAttributes,p.target=x?this._nodeAttributesPrev:this._nodeAttributes,KA(n,this._startInput,this._attributesPrev,t,p,this._view),qA(this._startFlags,this._startInput),mV(this._endFlags,this._startFlags)}this._initComponents(this._fullComponents,this._endFlags,this._layers),_V(this._fullComponents,this._endComponents),ZA(e,n,t,this._attributes,this._endComponents,this._endInput),m&&(pV(this._fullComponents,this._startComponents),ZA(e,n,t,this._attributesPrev,this._startComponents,this._startInput),this._setBlocksAnimation(h,c,g)),this._setupHaloMasking(o,a),this._storeBlocks()}_setupHaloMasking(t,e){const n=this._nodeAttributes.halo,i=this._layers,s=n.color.get(t)&&n.hideNonAdjacentEdges.get(t),r=n.color.get(e)&&n.hideNonAdjacentEdges.get(e),o=!s&&!r?_M:uu;i.body.stencilUsage=i.text.stencilUsage=i.textBg.stencilUsage=o}_computeBlockIds(t){const e=t*Lp,n=this._blockIds;n.body=e+a4,n.halo=e+d4,n.text=e+l4,n.textBg=e+u4}_prepareBlocks(t,e,n,i){const s=this._layers;s.body.reset(i?Tm:zs,t,e.edgeBody,n),s.halo.reset(i?Tm:zs,t,e.edgeHalo,n),s.text.reset(Oa,t,e.edgeText,n),s.textBg.reset(zs,t,e.edgeTextBackground,n)}_storeBlocks(){const t=this._engine,e=this._layers,n=this._blockIds;t.storeGroup(n.body,e.body),t.storeGroup(n.halo,e.halo),t.storeGroup(n.text,e.text),t.storeGroup(n.textBg,e.textBg)}_freeBlocks(){const t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.halo),t.freeBlock(e.text),t.freeBlock(e.textBg)}_setBlocksAnimation(t,e,n){const i=this._layers;i.body.setGlobalAnimation(t,e,n),i.halo.setGlobalAnimation(t,e,n),i.text.setGlobalAnimation(t,e,n),i.textBg.setGlobalAnimation(t,e,n)}_initComponents(t,e,n){this._initEdgeComponents(t.halo,e.halo,n.halo),this._initEdgeComponents(t.outline,e.outline,n.body),this._initEdgeComponents(t.body,e.body,n.body),this._initTextComponents(t.texts.primary,e.texts.primary,n),this._initTextComponents(t.texts.secondary,e.texts.secondary,n)}_initEdgeComponents(t,e,n){t.head=this._nextElement(e.head,n),t.tail=this._nextElement(e.tail,n),t.body=this._nextElement(e.body,n)}_initTextComponents(t,e,n){t.background=this._nextElement(e.background,n.textBg),t.text=this._nextElement(e.text,n.text)}_nextElement(t,e){return t?e.next():this._nullElt}};function iT(t){return{body:t(),halo:t(),text:t(),textBg:t()}}function fd(){return{halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}}}function vV(t,e,n){sN(t,e,n),e.imageContent!==null?(t.pattern.type=Xo,t.pattern.attributes.image=e.imageContent,t.pattern.attributes.scaled=!0,t.pattern.attributes.duplicated=!1,t.patternScale=e.imageScale,t.patternMinVisibleSize=0,t.patternColor=null):(t.fillColor=null,t.strokeColor=null)}function xV(t,e,n){sN(t,e,n),e.textContent&&(t.pattern.type=za,t.pattern.attributes.text=e.textContent,t.pattern.attributes.font=e.textFont,t.pattern.attributes.style=e.textStyle,t.pattern.attributes.paddingLeft=e.scale*e.textPaddingLeft*2,t.pattern.attributes.paddingTop=e.scale*e.textPaddingTop*2,t.pattern.attributes.size=uc,t.patternMinVisibleSize=0,t.patternColor=e.textColor,t.patternScale=e.textScale,t.isBadge=!0),!e.imageUrl&&e.textContent||(t.fillColor=null,t.strokeColor=null)}function sN(t,e,n){const i=n.diameterScaled*e.scale,s=n.diameterFixed*e.scale,r=n.diameterScaled*e.positionScale/2,o=n.diameterFixed*e.positionScale/2;t.pieceId=As,t.shape="circle",t.x1=n.x,t.y1=n.y,t.x2=n.x,t.y2=n.y,t.rectWidthOrSourceRadiusScaled=i,t.rectWidthOrSourceRadiusFixed=s,t.rectHeightOrTargetRadiusScaled=i,t.rectHeightOrTargetRadiusFixed=s,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.strokeWidthScaled,t.strokeWidthFixed=e.strokeWidthFixed,t.offsetScaled=r,t.offsetFixed=o,t.pattern.type=mi,t.opacity=n.opacity,t.fillColor=e.color,t.strokeColor=e.strokeColor,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.angle,t.patternScale=0,t.symbolicSize=n.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function bV(t,e,n){Np(t,e),t.fillColor=Array.isArray(e.color)?null:e.color,t.strokeColor=e.innerStroke.color,t.strokeMinVisibleSize=e.innerStroke.minVisibleSize,t.strokeWidthScaled=e.innerStroke.widthScaled,t.strokeWidthFixed=e.innerStroke.widthFixed,n&&(t.pattern.type=mi)}function Np(t,e){t.pieceId=As,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=e.diameterScaled,t.rectWidthOrSourceRadiusFixed=e.diameterFixed,t.rectHeightOrTargetRadiusScaled=e.diameterScaled,t.rectHeightOrTargetRadiusFixed=e.diameterFixed,t.shape=e.shape,t.opacity=e.opacity,t.symbolicSize=e.diameterScaled,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=null,t.strokeColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function EV(t,e){const n=e.diameterScaled+2*e.halo.widthScaled,i=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=As,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=i,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=i,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=mi,t.opacity=e.opacity,t.fillColor=e.halo.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function SV(t,e){const n=e.diameterScaled+2*e.halo.widthScaled,i=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=As,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=i,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=i,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.halo.strokeWidthScaled,t.strokeWidthFixed=e.halo.strokeWidthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=mi,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.halo.strokeColor,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function wV(t,e){Np(t,e),t.pattern.type=Da,t.pattern.attributes.text=e.icon.content,t.pattern.attributes.font=e.icon.font,t.pattern.attributes.style=e.icon.style,t.pattern.attributes.size=uc,t.patternMinVisibleSize=e.icon.minVisibleSize,t.patternColor=e.icon.color,t.patternScale=e.icon.scale}function AV(t,e){const n=e.image.fit&&!e.image.tile;Np(t,e),t.pattern.type=Xo,t.pattern.attributes.image=e.image.content,t.pattern.attributes.scaled=n,t.pattern.attributes.duplicated=e.image.tile,t.patternScale=n?e.image.scale:0,t.patternMinVisibleSize=e.image.minVisibleSize,t.patternColor=null}function TV(t,e){const n=e.diameterScaled+2*e.innerStroke.widthScaled,i=e.diameterFixed+2*e.innerStroke.widthFixed;t.pieceId=As,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=i,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=i,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.outerStroke.widthScaled,t.strokeWidthFixed=e.outerStroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=mi,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.outerStroke.color,t.patternColor=null,t.globalMinVisibleSize=e.outerStroke.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function CV(t,e){const n=e.diameterScaled*EA,i=e.diameterFixed*EA;let s=e.diameterScaled*SA,r=e.diameterFixed*SA+_4;e.outerStroke.color&&(s+=e.outerStroke.widthScaled/2,r+=e.outerStroke.widthFixed/2),t.pieceId=As,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=i,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=i,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=s,t.offsetFixed=r,t.pattern.type=mi,t.opacity=e.opacity,t.fillColor=e.outline.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.outline.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=1.5707963267948966,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function LV(t,e){Np(t,e),Array.isArray(e.color)&&(t.pattern.type=hc,t.pattern.attributes.colors=e.color.join(";"),t.patternScale=1,t.patternMinVisibleSize=0,t.patternColor=null)}function PV(t,e,n){rN(t,e,n),t.pattern.type=Qo,t.pattern.attributes.text=e.content,t.pattern.attributes.font=e.font,t.pattern.attributes.style=e.style,t.pattern.attributes.align=e.align,t.patternMinVisibleSize=0,t.patternColor=e.color,t.thicknessOrFontSizeScaled=e.sizeScaled,t.thicknessOrFontSizeFixed=e.sizeFixed,t.isText=!0}function kV(t,e,n){rN(t,e,n),t.fillColor=e.backgroundColor,t.pieceId=La,t.shape="square"}function IV(t,e,n){const i=Math.ceil(e.margin/2),s=n.diameterScaled/2,r=n.diameterFixed/2+i,o=S4[e.position],a=Math.cos(o),l=Math.sin(o),d=e.margin<12?1:e.margin<30?1-(e.margin-12)/18*.7:.25;t.pieceId=As,t.shape="triangle",t.x1=n.x-a,t.y1=n.y-l,t.x2=n.x+a,t.y2=n.y+l,t.rectWidthOrSourceRadiusScaled=0,t.rectWidthOrSourceRadiusFixed=e.margin,t.rectHeightOrTargetRadiusScaled=0,t.rectHeightOrTargetRadiusFixed=e.margin*d,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=s,t.offsetFixed=r,t.pattern.type=mi,t.opacity=n.opacity,t.fillColor=e.backgroundColor,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.positionAngle,t.patternScale=0,t.symbolicSize=n.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1}function rN(t,e,n){let i=0,s=0;if(e.isPositionCenter||(i+=n.diameterScaled/2,s+=n.diameterFixed/2+e.margin+e.padding),e.isPositionVertical){if(i+=e.heightScaled/2,s+=e.heightFixed/2,e===n.texts.secondary&&n.texts.primary.position==="bottom"){const o=n.texts.primary;i+=o.heightScaled,s+=o.heightFixed+o.margin+2*o.padding}}else e.isPositionHorizontal&&(i+=e.widthScaled/2,s+=e.widthFixed/2);const r=uc;t.pieceId=As,t.shape="square",t.x1=n.x,t.y1=n.y,t.x2=n.x,t.y2=n.y,t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=i,t.offsetFixed=s,t.pattern.type=mi,t.pattern.attributes.size=r,t.opacity=n.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.positionAngle,t.patternScale=1,t.symbolicSize=n.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function sT(t,e,n,i,s,r){const o=s.badges,a=i.badges,l=r.badges;MV(t,e,n,i,s,r),rT(t,e,n,i.text,s.texts.primary,r.texts.primary,r),rT(t,e,n,i.text.secondary,s.texts.secondary,r.texts.secondary,r),yg(t,e,n,a.topLeft,o.topLeft,l.topLeft,r),yg(t,e,n,a.topRight,o.topRight,l.topRight,r),yg(t,e,n,a.bottomLeft,o.bottomLeft,l.bottomLeft,r),yg(t,e,n,a.bottomRight,o.bottomRight,l.bottomRight,r)}function MV(t,e,n,i,s,r){if(s.halo){const o=i.halo.width.get(n),a=+(i.halo.scalingMethod.get(n)==="scaled");r.halo.widthScaled=o*a,r.halo.widthFixed=o*(1-a),EV(s.halo,r),s.haloStroke&&(r.halo.strokeWidthScaled=0,r.halo.strokeWidthFixed=i.halo.strokeWidth.get(n),SV(s.haloStroke,r))}if(s.outline&&(r.outline.color=i.outline.color.get(n),r.outline.minVisibleSize=i.outline.minVisibleSize.get(n),CV(s.outline,r)),s.outerStroke&&(r.outerStroke.minVisibleSize=i.outerStroke.minVisibleSize.get(n),TV(s.outerStroke,r)),s.pieChart&&LV(s.pieChart,r),s.image&&(r.image.content=e.imageManager.getImage(r.image.url),r.image.fit=i.image.fit.get(n),r.image.tile=i.image.tile.get(n),r.image.scale=i.image.scale.get(n),r.image.minVisibleSize=i.image.minVisibleSize.get(n),AV(s.image,r)),s.icon&&(r.icon.font=e.fontManager.getFont(i.icon.font.get(n)),r.icon.style=i.icon.style.get(n),r.icon.color=i.icon.color.get(n),r.icon.scale=i.icon.scale.get(n),r.icon.minVisibleSize=i.icon.minVisibleSize.get(n),wV(s.icon,r)),s.body){const o=!s.pieChart&&!s.image&&!s.icon;bV(s.body,r,o)}}function yg(t,e,n,i,s,r,o){if(s.image||s.text){const a=i.stroke.width.get(n),l=+(i.stroke.scalingMethod.get(n)==="scaled");r.color=Hs(i.color.get(n),o.color,r.angle),r.strokeColor=i.stroke.color.get(n),r.strokeWidthScaled=a*l,r.strokeWidthFixed=a*(1-l),r.minVisibleSize=i.minVisibleSize.get(n),r.positionScale=i.positionScale.get(n),r.scale=i.scale.get(n)}if(s.image&&(r.imageContent=e.imageManager.getImage(r.imageUrl),r.imageScale=i.image.scale.get(n),vV(s.image,r,o)),s.text){if(r.textFont=e.fontManager.getFont(i.text.font.get(n)),r.textStyle=i.text.style.get(n),r.textColor=Hs(i.text.color.get(n),o.color),r.textScale=i.text.scale.get(n),r.textPaddingTop=i.text.paddingTop.get(n),r.textPaddingLeft=i.text.paddingLeft.get(n),t.measureText(r.textContent,r.textFont,r.textStyle,r.textScale).width>1){let a=0,l=0;for(;l<r.textContent.length&&a<1;)a+=t.measureText(r.textContent[l],r.textFont,r.textStyle,r.textScale).width,l+=1;l!==r.textContent.length&&(r.textContent=r.textContent.substring(0,l-1)+"‥")}xV(s.text,r,o)}}function rT(t,e,n,i,s,r,o){if(s.text&&r.content){const a=i,l=a.scaling.get(n);if(r.font=e.fontManager.getFont(a.font.get(n)),r.color=Hs(a.color.get(n),o.color),r.style=a.style.get(n),r.align=a.align.get(n),r.minVisibleSize=a.minVisibleSize.get(n),r.margin=a.margin.get(n),r.padding=a.padding.get(n),r.maxLineLength=a.maxLineLength.get(n),r.content=u1(r.content,r.maxLineLength),l){const h=a.scale.get(n);r.sizeScaled=o.diameterScaled*h,r.sizeFixed=o.diameterFixed*h}else r.sizeFixed=a.size.get(n),r.sizeScaled=0;const d=t.measureText(r.content,r.font,r.style);r.widthScaled=d.width*r.sizeScaled,r.widthFixed=d.width*r.sizeFixed,r.heightScaled=d.height*r.sizeScaled,r.heightFixed=d.height*r.sizeFixed,r.positionAngle=E4[r.position],r.isPositionCenter=r.position==="center",r.isPositionVertical=r.position==="top"||r.position==="bottom",r.isPositionHorizontal=r.position==="left"||r.position==="right",PV(s.text,r,o),s.background&&(kV(s.background,r,o),s.tip&&IV(s.tip,r,o))}}function oT(t,e){NV(t,e),aT(t.texts.primary,e.texts.primary),aT(t.texts.secondary,e.texts.secondary),vg(t.badges.topLeft,e.badges.topLeft),vg(t.badges.topRight,e.badges.topRight),vg(t.badges.bottomLeft,e.badges.bottomLeft),vg(t.badges.bottomRight,e.badges.bottomRight)}function NV(t,e){t.body=!0,t.icon=!!e.icon.content,t.image=!!e.image.url,t.pieChart=Array.isArray(e.color),t.outerStroke=!!e.outerStroke.color,t.outline=!!e.outline.enabled,t.halo=!!e.halo.color,t.haloStroke=t.halo&&!!e.halo.strokeColor}function aT(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor,t.tip=t.background&&e.tip&&e.position!=="center"}function vg(t,e){t.text=!!e.textContent,t.image=!!e.imageUrl}function lT(t,e,n,i){RV(t,e,n,i),uT(t,e.texts.primary,n.text,i,e),uT(t,e.texts.secondary,n.text.secondary,i,e),xg(t,e.badges.topLeft,n.badges.topLeft,i),xg(t,e.badges.topRight,n.badges.topRight,i),xg(t,e.badges.bottomLeft,n.badges.bottomLeft,i),xg(t,e.badges.bottomRight,n.badges.bottomRight,i)}function RV(t,e,n,i){const s=+(n.scalingMethod.get(i)==="scaled"),r=2*n.radius.get(i),o=n.innerStroke.width.get(i),a=+(n.innerStroke.scalingMethod.get(i)==="scaled"),l=n.outerStroke.width.get(i),d=+(n.outerStroke.scalingMethod.get(i)==="scaled");e.x=n.x.get(i),e.y=n.y.get(i),e.shape=n.shape.get(i),e.color=n.color.get(i),e.opacity=n.opacity.get(i),e.diameterScaled=r*s,e.diameterFixed=r*(1-s),e.innerStroke.color=Hs(n.innerStroke.color.get(i),e.color),e.innerStroke.widthScaled=o*a,e.innerStroke.widthFixed=o*(1-a),e.innerStroke.minVisibleSize=n.innerStroke.minVisibleSize.get(i),e.outerStroke.color=Hs(n.outerStroke.color.get(i),e.color),e.outerStroke.widthScaled=l*d,e.outerStroke.widthFixed=l*(1-d),e.halo.color=n.halo.color.get(i),e.halo.strokeColor=n.halo.strokeColor.get(i),e.icon.content=t.formatText(n.icon.content.get(i)),e.image.url=n.image.url.get(i),e.outline.enabled=n.outline.enabled.get(i),e.textHidden=n.textHidden.get(i)===1}function uT(t,e,n,i,s){if(e.hidden=s.textHidden,e.content=t.formatText(n.content.get(i)),e.backgroundColor=Hs(n.backgroundColor.get(i),s.color),e===s.texts.primary){const r=n;e.tip=r.tip.get(i),e.position=r.position.get(i)}else e.position="bottom"}function xg(t,e,n,i){const s=n.text.content.get(i);e.textContent=t.formatText(s),e.imageUrl=n.image.url.get(i)}function dT(){return{x:0,y:0,shape:"",color:"",opacity:0,diameterScaled:0,diameterFixed:0,innerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},outerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},icon:{content:"",font:"",color:"",scale:0,size:0,style:"none",minVisibleSize:0},image:{url:"",content:null,scale:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,color:"",strokeColor:""},outline:{enabled:!1,color:"",minVisibleSize:0},badges:{topLeft:bg(SM),topRight:bg(wM),bottomLeft:bg(AM),bottomRight:bg(TM)},textHidden:!1,texts:{primary:hT(),secondary:hT()}}}function bg(t){return{angle:t,color:"",scale:0,positionScale:0,minVisibleSize:0,strokeColor:"",strokeWidthScaled:0,strokeWidthFixed:0,textContent:"",textFont:"",textColor:"",textScale:0,textStyle:"none",imageUrl:"",imageContent:null,imageScale:0,textPaddingLeft:0,textPaddingTop:0}}function hT(){return{hidden:!1,content:"",position:"",backgroundColor:"",tip:!1,font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",align:"left",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,isPositionCenter:!1,isPositionVertical:!1,isPositionHorizontal:!1}}var FV=(t,e)=>{e.haloStroke=e.haloStroke||t.haloStroke,e.halo=e.halo||t.halo,e.outline=e.outline||t.outline,e.outerStroke=e.outerStroke||t.outerStroke,e.body=e.body||t.body,e.pieChart=e.pieChart||t.pieChart,e.image=e.image||t.image,e.icon=e.icon||t.icon;const n=t.badges,i=e.badges;i.topLeft.text=i.topLeft.text||n.topLeft.text,i.topLeft.image=i.topLeft.image||n.topLeft.image,i.topRight.text=i.topRight.text||n.topRight.text,i.topRight.image=i.topRight.image||n.topRight.image,i.bottomLeft.text=i.bottomLeft.text||n.bottomLeft.text,i.bottomLeft.image=i.bottomLeft.image||n.bottomLeft.image,i.bottomRight.text=i.bottomRight.text||n.bottomRight.text,i.bottomRight.image=i.bottomRight.image||n.bottomRight.image;const s=t.texts,r=e.texts;r.primary.text=r.primary.text||s.primary.text,r.primary.background=r.primary.background||s.primary.background,r.primary.tip=r.primary.tip||s.primary.tip,r.secondary.text=r.secondary.text||s.secondary.text,r.secondary.background=r.secondary.background||s.secondary.background,r.secondary.tip=r.secondary.tip||s.secondary.tip},oN=t=>(e,n)=>{n.haloStroke=e.haloStroke[t],n.halo=e.halo[t],n.outline=e.outline[t],n.outerStroke=e.outerStroke[t],n.body=e.body[t],n.pieChart=e.pieChart[t],n.image=e.image[t],n.icon=e.icon[t];const i=e.badges,s=n.badges;s.topLeft.text=i.topLeft.text[t],s.topLeft.image=i.topLeft.image[t],s.topRight.text=i.topRight.text[t],s.topRight.image=i.topRight.image[t],s.bottomLeft.text=i.bottomLeft.text[t],s.bottomLeft.image=i.bottomLeft.image[t],s.bottomRight.text=i.bottomRight.text[t],s.bottomRight.image=i.bottomRight.image[t];const r=e.texts,o=n.texts;o.primary.text=r.primary.text[t],o.primary.background=r.primary.background[t],o.primary.tip=r.primary.tip[t],o.secondary.text=r.secondary.text[t],o.secondary.background=r.secondary.background[t],o.secondary.tip=r.secondary.tip[t]},OV=oN("start"),DV=oN("end"),zV=class{constructor({engine:t,imageManager:e,fontManager:n,formatText:i,attributes:s,attributesPrev:r}){this._fullComponents=md(),this._startComponents=md(),this._endComponents=md(),this._startFlags=md(),this._endFlags=md(),this._startInput=dT(),this._endInput=dT(),this._depthInfo=y1(),this._nodePatternAssigned=!1,this._nullElt={id:-1,valid:!0},this._engine=t,this._attributes=s,this._attributesPrev=r,this._helper={imageManager:e,fontManager:n,formatText:i},this._layers=cT(()=>t.createGroup()),this._blockIds=cT(()=>0)}drawNode(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();const e=this._engine,n=this._helper,i=t,s=this._attributes,r=$h(s.layer.get(t)-(s.detectable.get(t)?0:1),this._depthInfo),o=s.animationDuration.get(t),a=o>0;if(this._prepareBlocks(a,r,i),lT(n,this._endInput,s,t),oT(this._endFlags,this._endInput),a&&(lT(n,this._startInput,this._attributesPrev,t),oT(this._startFlags,this._startInput),FV(this._endFlags,this._startFlags)),this._initComponents(this._fullComponents,this._endFlags,this._layers),DV(this._fullComponents,this._endComponents),sT(e,n,t,s,this._endComponents,this._endInput),a&&(OV(this._fullComponents,this._startComponents),sT(e,n,t,this._attributesPrev,this._startComponents,this._startInput)),a){const l=this._attributes.animationStart.get(t),d=this._attributes.animationEasing.get(t);this._setBlocksAnimation(o,l,d)}this._endFlags.halo&&this._attributes.halo.hideNonAdjacentEdges.get(t)&&(this._layers.halo.stencilUsage=this._layers.haloStroke.stencilUsage=pM),this._storeBlocks()}_computeBlockIds(t){const e=t*Lp,n=this._blockIds;n.body=e+n4,n.text=e+i4,n.textBg=e+s4,n.halo=e+r4,n.haloStroke=e+o4}_prepareBlocks(t,e,n){const i=this._layers;i.body.reset(zs,t,e.nodeBody,n),i.text.reset(Oa,t,e.nodeText,n),i.textBg.reset(zs,t,e.nodeTextBackground,n),i.halo.reset(zs,t,e.nodeHalo,n),i.haloStroke.reset(zs,t,e.nodeHaloStroke,n)}_storeBlocks(){const t=this._engine,e=this._layers,n=this._blockIds;t.storeGroup(n.body,e.body),t.storeGroup(n.text,e.text),t.storeGroup(n.textBg,e.textBg),t.storeGroup(n.halo,e.halo),t.storeGroup(n.haloStroke,e.haloStroke)}_freeBlocks(){const t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.text),t.freeBlock(e.textBg),t.freeBlock(e.halo),t.freeBlock(e.haloStroke)}_setBlocksAnimation(t,e,n){const i=this._layers;i.body.setGlobalAnimation(t,e,n),i.text.setGlobalAnimation(t,e,n),i.textBg.setGlobalAnimation(t,e,n),i.halo.setGlobalAnimation(t,e,n),i.haloStroke.setGlobalAnimation(t,e,n)}_initComponents(t,e,n){this._nodePatternAssigned=!1,this._initBaseComponents(t,e,n),this._initBadgeComponents(t.badges.topLeft,e.badges.topLeft,n),this._initBadgeComponents(t.badges.topRight,e.badges.topRight,n),this._initBadgeComponents(t.badges.bottomLeft,e.badges.bottomLeft,n),this._initBadgeComponents(t.badges.bottomRight,e.badges.bottomRight,n),this._initTextComponents(t.texts.primary,e.texts.primary,n),this._initTextComponents(t.texts.secondary,e.texts.secondary,n)}_initBaseComponents(t,e,n){t.haloStroke=this._nextElement(e.haloStroke,n.haloStroke),t.halo=this._nextElement(e.halo,n.halo),t.outline=this._nextElement(e.outline,n.body),t.outerStroke=this._nextElement(e.outerStroke,n.body),t.body=this._nextElement(e.body,n.body),t.pieChart=this._getNodePatternElement(e.pieChart,n),t.image=this._getNodePatternElement(e.image,n),t.icon=this._getNodePatternElement(e.icon,n)}_initBadgeComponents(t,e,n){t.image=this._nextElement(e.image,n.body),t.text=this._nextElement(e.text,n.body)}_initTextComponents(t,e,n){t.background=this._nextElement(e.background,n.textBg),t.tip=this._nextElement(e.tip,n.textBg),t.text=this._nextElement(e.text,n.text)}_nextElement(t,e){return t?e.next():this._nullElt}_getNodePatternElement(t,e){return t?this._nodePatternAssigned?e.body.next():(this._nodePatternAssigned=!0,e.body.getCurrentElement()):this._nullElt}};function cT(t){return{body:t(),text:t(),textBg:t(),halo:t(),haloStroke:t()}}function md(){return{haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}}}function BV({graph:t,elements:e,engine:n,imageManager:i,fontManager:s,view:r,attributes:o,boundaries:a,formatText:l}){const{nodeAttributes:d,nodeAttributesPrev:h,edgeAttributes:c,edgeAttributesPrev:g}=UV(o),{nodes:m,edges:_}=e,{maxSize:p,maxMinVisibleSize:v}=a;if(!m.size&&!_.size)return;const x=(Math.max(t.getNodeMaxIndex(),t.getEdgeMaxIndex())+1)*Lp,b=n.setGlobalBoundaries({maxBlockId:Io(x),maxScaledSize:Io(8*p),maxMinVisibleSize:Io(v),maxSymbolicSize:Io(p),maxDashLength:3,maxGapLength:1,maxPatternScale:2,maxCoord:-1/0}),E=(b?t.getNodes("_all"):m)._indexes,S=(b?t.getEdges("_all"):_)._indexes;if(E.length){const A=new zV({engine:n,imageManager:i,fontManager:s,formatText:l,attributes:d,attributesPrev:h});for(let T=0;T<E.length;++T)A.drawNode(E[T])}if(S.length){const A=new yV({engine:n,imageManager:i,fontManager:s,formatText:l,view:r,attributes:c,attributesPrev:g,nodeAttributes:d,nodeAttributesPrev:h});for(let T=0;T<S.length;++T)A.drawEdge(S[T])}}function UV(t){const e=Zl(t.nodes.current,{text:{secondary:{scaling:t.nodes.current.text.scaling,maxLineLength:t.nodes.current.text.maxLineLength}}});return{nodeAttributes:e,nodeAttributesPrev:Zl(t.nodes.previous,{textHidden:e.textHidden,text:{secondary:{scaling:t.nodes.previous.text.scaling,maxLineLength:t.nodes.previous.text.maxLineLength}}}),edgeAttributes:Zl(t.edges.current,{text:{secondary:{scaling:t.edges.current.text.scaling,maxLineLength:t.edges.current.text.maxLineLength,adjustAngle:t.edges.current.text.adjustAngle}}}),edgeAttributesPrev:Zl(t.edges.previous,{source:t.edges.current.source,target:t.edges.current.target,textHidden:t.edges.current.textHidden,text:{secondary:{scaling:t.edges.previous.text.scaling,maxLineLength:t.edges.previous.text.maxLineLength,adjustAngle:t.edges.previous.text.adjustAngle}}})}}function jh(t,e,n){const i=n.length;let s=i-1,r=!1;for(let o=0;o<i;++o)(n[o].y<e&&n[s].y>=e||n[s].y<e&&n[o].y>=e)&&(n[o].x<=t||n[s].x<=t)&&(r=r!==n[o].x+(e-n[o].y)/(n[s].y-n[o].y)*(n[s].x-n[o].x)<t),s=o;return r}function Eg(t){const e=t.x*t.x+t.y*t.y;return{x:t.x/e,y:t.y/e}}function gT(t,e){let n=1/0,i=-1/0;for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.x*e.x+o.y*e.y;a<n&&(n=a),a>i&&(i=a)}return{x:n,y:i}}function $V(t,e){let n=t[1],i=t[0],s=Eg({x:n.x-i.x,y:n.y-i.y}),r=s.x;s.x=-s.y,s.y=r;const o=s;n=t[2],i=t[1],s=Eg({x:n.x-i.x,y:n.y-i.y}),r=s.x,s.x=-s.y,s.y=r;const a=s;n=e[1],i=e[0],s=Eg({x:n.x-i.x,y:n.y-i.y}),r=s.x,s.x=-s.y,s.y=r;const l=s;return n=e[2],i=e[1],s=Eg({x:n.x-i.x,y:n.y-i.y}),r=s.x,s.x=-s.y,s.y=r,[o,a,l,s]}function aN(t,e){const n=$V(t,e);for(let i=0,s=n.length;i<s;i++){const r=n[i],o=gT(t,r),a=gT(e,r);if((o.x<=a.y&&o.y>=a.x?Math.min(o.y,a.y)-Math.max(o.x,a.x):0)===0)return!1}return!0}function jV(t){let e=0,n=0;const i=t.length;if(i===0)throw new Error("Compute centroid: at least one point is required");for(let s=0;s<i;++s){const r=t[s];e+=r.x,n+=r.y}return e/=i,n/=i,{x:e,y:n}}var GV=v1(4),VV=v1(5),HV=v1(10,.4),Ro=1/3,WV=[{x:-1,y:-Ro},{x:0,y:-Ro},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:0,y:Ro},{x:-1,y:Ro}],XV=[{x:-1,y:-Ro},{x:-.55,y:-Ro},{x:-1,y:-1},{x:1,y:0},{x:-1,y:1},{x:-.55,y:Ro},{x:-1,y:Ro}],fT=[{x:-.6,y:-.3},{x:.1,y:0},{x:-.6,y:.3}],ZV={circle:{getDistanceFromStrokeVertically:(t,e)=>1,getDistanceFromStrokeHorizontally:(t,e)=>1-Math.sqrt(t*t+e*e),points:[{x:0,y:0,r:1}],isSimple:!0},square:{getDistanceFromStrokeVertically:(t,e)=>.996-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>.996-Math.abs(t),points:[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],isSimple:!0},line:{getDistanceFromStrokeVertically:(t,e)=>1-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1,points:[{x:-1,y:0},{x:1,y:0}],isSimple:!0},triangle:{getDistanceFromStrokeVertically:(t,e)=>(1-t)/2-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},arrow:{getDistanceFromStrokeVertically:(t,e)=>(1-t)/2-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},"circle-hole-arrow":{getDistanceFromStrokeVertically:(t,e)=>Math.min(Math.sqrt((t+.4)*(t+.4)+e*e)-.27,(1-t)/2-Math.abs(e)),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:[{x:-.4,y:0,r:.3}],isSimple:!0},"triangle-hole-arrow":{getDistanceFromStrokeVertically:(t,e)=>{const n=Math.min((1-t)/2-Math.abs(e),1-Math.abs(t)),i=-lN(t,e,fT);return Math.min(n,i)},getDistanceFromStrokeHorizontally:(t,e)=>1,points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:fT,isSimple:!0},"short-arrow":pd(WV,!1),"sharp-arrow":pd(XV,!1),cross:{getDistanceFromStrokeVertically:(t,e)=>1,getDistanceFromStrokeHorizontally:(t,e)=>{const n=Math.abs(t),i=Math.abs(e),s=.31-Math.min(n,i),r=1-Math.max(n,i);return Math.min(s,r)},points:[{x:-1,y:.31},{x:-1,y:-.31},{x:-.31,y:-.31},{x:-.31,y:-1},{x:.31,y:-1},{x:.31,y:-.31},{x:1,y:-.31},{x:1,y:.31},{x:.31,y:.31},{x:.31,y:1},{x:-.31,y:1},{x:-.31,y:.31}],isSimple:!1},diamond:pd(GV),pentagon:pd(VV),star:pd(HV)},YV=["circle","square","triangle","line"],qV=["cross","diamond","pentagon","star"],JV=["arrow","triangle-hole-arrow","circle-hole-arrow","short-arrow","sharp-arrow"];function mT(t,e){for(const r of YV)_y(t,r);const n=e.nodes.current.shape.getValues(),i=e.edges.current.shape.head.getValues(),s=e.edges.current.shape.tail.getValues();for(const r of qV)n.includes(r)&&_y(t,r);for(const r of JV)r&&(i.includes(r)||s.includes(r))&&_y(t,r)}function _y(t,e){t.registerShape(e,ZV[e])}function lN(t,e,n){let i=1/0;const s={x:t,y:e};for(let r=0;r<n.length;++r){const o=n[r],a=n[(r+1)%n.length];i=Math.min(i,jM(s,o,a))}return i*(jh(t,e,n)?1:-1)}function v1(t,e=1){const n=-Math.PI/2+EM,i=[],s=2*Math.PI/t;let r=n;for(let o=0;o<t;++o){const a=o%2==1?e:1;i.push({x:Math.cos(r)*a,y:Math.sin(r)*a}),r+=s}return i}function pd(t,e=!1){return{getDistanceFromStrokeVertically:()=>1,getDistanceFromStrokeHorizontally:(n,i)=>lN(n,i,t),points:t,isSimple:e}}var KV=class extends dc{constructor(t,e){super(),this.isDummy=!0,this.width=0,this.height=0}set src(t){t&&(this._src=t,setTimeout(()=>{this.onload&&this.onload.call(this),this.width=1,this.height=1,this.fire("load")},10))}get src(){return this._src}addEventListener(t,e){this.on(t,e)}};function QV(t,e){return new(typeof Image<"u"?Image:KV)(t,e)}var t6=class{constructor(){this._images={},this._crossOrigin="anonymous",this._whenReady=[],this._onFetch=[],this._nbLoaded=0,this._nbToLoad=0}setImgCrossOrigin(t){this._crossOrigin=t}clear(){this._images={},this._nbLoaded=0,this._nbToLoad=0}getImage(t){let e=this._images[t];return e===void 0&&(this._nbToLoad+=1,e=QV(),e.crossOrigin=this._crossOrigin,e.onload=()=>this._onImgLoad(t),e.onerror=()=>{this._onImgLoad(t),this._images[t]=null},e.src=t,this._images[t]=e),e}_onImgLoad(t){this._nbLoaded+=1,this._onFetch.forEach(e=>e(t)),this._nbLoaded===this._nbToLoad&&(this._whenReady.forEach(e=>e()),this._whenReady=[])}onFetch(t){this._onFetch.push(t)}whenReady(){return this._nbLoaded===this._nbToLoad?Promise.resolve():new Promise(t=>this._whenReady.push(t))}destroy(){this._whenReady=[],this._onFetch=[]}},x1={};function e6(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].cssText+`
`;return e}function uN(){const t=qr(),e=t.styleSheets||[],n=xI(t),i=[],s=[];for(let o=0;o<e.length;o++){const a=e[o];a.href==null?i.push({href:n,content:e6(a.cssRules)}):s.push(a.href)}const r=/@font-face\s*\{[^}]+\}/g;return Promise.all(s.map(o=>$u(o).then(a=>({href:o,content:a})).catch(um))).then(o=>o.concat(i)).then(o=>{const a=[];for(let l=0;l<o.length;l++){const d=o[l];if(d!==null){const{href:h,content:c}=d,g=c.match(r);if(g){const m=i6(g,h);a.push.apply(a,m)}}}return a})}function dN(t,e){return Promise.all(t.map(({formats:n,originalRule:i})=>Promise.all(n.map(({format:s,url:r})=>e?vI(r).then(o=>({format:s,src:o})).catch(um):{format:s,src:r})).then(s=>{const r=[];for(const o of s)o!==null&&r.push(`url('${o.src}') format('${o.format}')`);if(r.length!==0){const o=`src: ${r.join(",")}`;return i.replace(/@font-face\s*{([^}]*);?}/,`@font-face{$1;${o}}`).replace(/\s+/," ").replace(/;+/,";")}return i})))}sc(x1,{BUTTON_MAPPING:()=>Xb,BoundingBox:()=>Ai,DummyCanvas:()=>CM,DummyCanvasRenderingContext2D:()=>LM,DummyDomElement:()=>hI,DummyFileReader:()=>lI,DummyTextNode:()=>_N,DummyXHR:()=>aI,ElementSet:()=>gc,EventTarget:()=>dc,FlexArray:()=>Em,IndexList:()=>QI,MOUSE_WHEEL_THROTTLE:()=>Yk,Map2:()=>mM,PathMap:()=>cN,PrioritySet:()=>Zk,SVG_NS:()=>Hb,Table:()=>yv,XLINK:()=>fI,XML_NS:()=>lv,applyCursorStyle:()=>cm,baseURI:()=>xI,binaryIndexOf:()=>Ak,cancelAnimFrame:()=>qk,clamp:()=>ws,clearCanvas:()=>Iv,componentsToRGBA:()=>cM,computeMax:()=>ql,computeMin:()=>Dr,concatenateArrays:()=>bU,createBlob:()=>Fh,createCanvas:()=>ei,createDummyDomElement:()=>dm,createDummyXmlDocument:()=>vN,createElement:()=>uv,createSvgElement:()=>Ce,createTextNode:()=>Wb,createWebGL2Context:()=>kM,createWorker:()=>mN,createXmlDocument:()=>xN,dataUrlToBlob:()=>cI,debounce:()=>j$,deepCopy:()=>nn,displayPixelsOnScreen:()=>c6,ensureTransferable:()=>vp,escapeDOMAttribute:()=>Yl,extendList:()=>H$,fadeElement:()=>bI,fetch:()=>$u,fetchBinary:()=>yI,fetchBinaryAsBase64:()=>vI,flatten:()=>Rh,flattenArray:()=>wk,forEach:()=>hr,formatAngle:()=>pm,formatHex:()=>xf,formatWorkerMessage:()=>fN,getBaseLog:()=>jI,getCurrentTime:()=>ci,getDate:()=>sI,getDocument:()=>qr,getDocumentFontRules:()=>uN,getEmbeddedFontRules:()=>dN,getFlattenedKeys:()=>Za,getGlContext:()=>IM,getImage:()=>mI,getLeafValues:()=>yp,getOptions:()=>rs,getPixelRatio:()=>Vi,getProperty:()=>Qe,getResizeObserver:()=>uI,getStyle:()=>dI,getTime:()=>rI,getValues:()=>nh,getWebglContext:()=>l1,hash8:()=>nv,indexArrayToArray:()=>Mh,indexByName:()=>W$,insertSortAsc:()=>Cd,insertSortDesc:()=>xU,isArray:()=>Qn,isBlob:()=>K$,isHTMLElement:()=>_I,isInteger:()=>$$,isLittleEndian:()=>_p,isObject:()=>An,isRawObject:()=>Xa,isWebGLSupported:()=>PM,lerp:()=>Te,mapKeys:()=>gM,mapValues:()=>fM,merge:()=>Zl,mergeValues:()=>am,mix:()=>hv,nextPowerOfTwo:()=>Io,objToValueList:()=>Rp,parseColor:()=>fi,parseColorHex:()=>t1,parseColorRgba:()=>Qb,pick:()=>sv,processQueue:()=>G$,promiseQueue:()=>Kk,promptDownload:()=>ra,propertyPathToString:()=>ev,removeFromArray:()=>EU,requestAnimFrame:()=>$b,resizeElement:()=>hm,resolvePath:()=>hN,rgbaToRgb:()=>Ml,serializeXMLDocument:()=>b1,setAttributes:()=>Vb,setCtxFont:()=>ta,setElementSize:()=>qa,setKeys:()=>a6,setProperty:()=>$r,setValues:()=>Fd,smartRequire:()=>Ss,throttle:()=>pp,toArray:()=>K0,toHexa:()=>Lv,toPropertyPath:()=>Wa,traverse:()=>tI,unflatten:()=>iv,unorderedHash:()=>V$,workerIsAvailable:()=>gN});var n6={"embedded-opentype":!0,svg:!0};function i6(t,e){const n=/url\(['"]?([^'")]+)['"]?\)\s+format\(['"]?([^'")]+)['"]?\)/g,i=/font-family\s*:\s*['"]?([^;'"]+)['"]?;/,s=[];for(let r=0;r<t.length;r++){const o=t[r],a=o.match(i);if(a){const l=a[1],d=[];let h;for(;h=n.exec(o);){const c=h[1],g=h[2];n6[g.toLowerCase()]||d.push({format:g,url:hN(c,e)})}s.push({name:l,formats:d,originalRule:o})}}return s}function hN(t,e){if(/^http(s)?:/.test(t))return t;if(t[0]==="/"){const s=e.match(/((\w+:\/\/)([^/]+))/);return s?s[1]+t:t}const n=t.split("/"),i=e.split("/");for(e[e.length-1]!=="/"&&i.pop();n[0]==="..";)n.shift(),i.pop();return i.concat(n).join("/").replace(/[\w](\/{2,})/g,s=>s[0]+"/")}function s6(t){return t instanceof RegExp||t instanceof Date}var r6=typeof HTMLElement>"u"?t=>!1:t=>t instanceof HTMLElement,o6=function(t){return typeof t!="object"||t===null||Qn(t)||s6(t)};function Rp(t,e=[],n=[]){if(!r6(t)){if(o6(t))e.push({path:n.slice(),value:t});else{const i=Object.keys(t);for(let s=0;s<i.length;++s){const r=i[s],o=n.slice();o.push(r),Rp(t[r],e,o)}}return e}}var cN=class{constructor(){this._keys=[],this._values=[],this._size=0,this._cachedPath=[],this._cachedIndex=-1}get size(){return this._size}set(t,e){const n=this._getIndex(t);n!==-1?this._values[n]=e:(yy(this._cachedPath,t)&&(this._cachedIndex=this._keys.length),this._keys.push(t),this._values.push(e),this._size+=1)}get(t){const e=this._getIndex(t);if(e!==-1)return this._values[e]}has(t){return this._getIndex(t)!==-1}keys(){return this._keys.slice()}_getIndex(t){if(yy(t,this._cachedPath))return this._cachedIndex;this._cachedPath=t.slice();const e=this._keys;for(let n=0;n<e.length;++n)if(yy(e[n],t))return this._cachedIndex=n,n;return this._cachedIndex=-1,-1}};function yy(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}var Ov,a6=function(e){return Array.from(e.keys())},Fd=function(e){return Array.from(e.values())},Gh=Ss("web-worker"),gN=!!Gh||typeof Worker<"u"&&typeof Blob<"u";function fN(t){return Gh?Dv(t):t}function Dv(t){if(ArrayBuffer.isView(t))return Array.from(t);if(Array.isArray(t)){for(let e=0;e<t.length;e++)t[e]=Dv(t[e]);return t}if(An(t)){const e=Object.keys(t);for(const n of e)t[n]=Dv(t[n]);return t}return t}function mN(t){return Gh?u6(t):l6(t)}function l6(t){const e=new Blob([t],{type:"application/javascript"}),n=URL.createObjectURL(e);return new Worker(n)}function u6(t){if(Gh)return new Gh("data:application/javascript,"+t.replace(/\n/g,""))}var pT=Ss("xmldom");Ov=typeof XMLSerializer<"u"?XMLSerializer:pT?pT.XMLSerializer:null;var d6=class pN{constructor(e){this._attributes={},this._children=[],this._name=e}setAttribute(e,n){this._attributes[e]=n}appendChild(e){this._children.push(e)}get tagName(){return this._name}get children(){return this._children}get childNodes(){return this._children}get firstChild(){return this._children[0]||null}serialize(){const e=this._name,n=this._attributes,i=this._children,s=Object.keys(n).filter(o=>n[o]!==void 0).map(o=>` ${o}="${""+n[o]}"`).join(""),r=i.map(o=>o.serialize()).join("");return r.length?`<${e}${s}>${r}</${e}>`:`<${e}${s}/>`}cloneNode(e){const n=new pN(this._name),i=Object.keys(this._attributes);for(const s of i)n.setAttribute(s,this._attributes[s]);if(e)for(let s=0;s<this._children.length;s++)n.appendChild(this._children[s].cloneNode(e));return n}},_N=class yN{constructor(e){this._text=e}serialize(){return this._text}cloneNode(){return new yN(this._text)}},h6=class{constructor(){this._children=[],this._meta=[],this._children=[],this._meta=[]}appendChild(t){this._children.push(t)}serialize(){return this._meta.concat(this._children.map(t=>t.serialize())).join("")}createElement(t){return new d6(t)}createTextNode(t){return new _N(t)}},vN=()=>new h6;function b1(t){if(Ov)return new Ov().serializeToString(t)}var xN=()=>qr().implementation.createDocument("","",null),gc=class{constructor(t,e){this._graph=t,this._nodes={elementList:t.nodeList,flexArray:t.createNodeAttribute({storage:1,name:e},!!e),indexList:t.createIndexList(!0)},this._edges={elementList:t.edgeList,flexArray:t.createEdgeAttribute({storage:1,name:e},!!e),indexList:t.createIndexList(!1)}}_get(t){return t.isNode?this._nodes:this._edges}addOrRemoveElements(t,e){return e?this.addElements(t):this.removeElements(t)}addElements(t){const{elementList:e,flexArray:n,indexList:i}=this._get(t),s=i.getLength();for(let r=0;r<t._indexes.length;r++){const o=t._indexes[r];n.get(o)!==1&&(n.set(o,1),i.pushUnchecked(o))}return e(i.slice(s))}removeElements(t){const{elementList:e,flexArray:n,indexList:i}=this._get(t),s=i.getLength(),r=i.getBuffer();if(s>r.length)return this.clear(),this.addElements(t),t;let o=0;for(let a=0;a<t._indexes.length;a++){const l=t._indexes[a];n.get(l)!==0&&(n.set(l,0),o+=1)}if(o===s)return e(i.sliceAndReset());if(o===0)return e();{const a=this._graph.acquireIndexList(t.isNode);let l=0;for(let d=0;d<s;++d){const h=r[d];n.get(h)===0?(l+=1,a.pushUnchecked(h)):r[d-l]=h}return i.setLength(s-o),e(a.sliceAndReset())}}hasElement(t){return!!this._get(t).flexArray.get(t._index)}clear(){this._nodes.indexList.isEmpty()||(this._nodes.indexList.reset(),this._nodes.flexArray.reset()),this._edges.indexList.isEmpty()||(this._edges.indexList.reset(),this._edges.flexArray.reset())}isEmpty(){return this._nodes.indexList.isEmpty()&&this._edges.indexList.isEmpty()}getElements(){return{nodes:this._nodes.elementList(this._nodes.indexList.slice()),edges:this._edges.elementList(this._edges.indexList.slice())}}};function c6(t,e,n,i=0){e===void 0&&(e=n=Math.sqrt(t.length/4)),n===void 0&&(n=e);const s=document.createElement("canvas"),r=s.getContext("2d");if(r){const o=r.createImageData(e,n);s.style.imageRendering="pixelated",s.style.border="1px solid black",s.style.margin="2px",s.style.position="absolute",s.style.top=s.style.left="0px",s.width=e,s.height=n,o.data.set(t),r.putImageData(o,0,0);const a=document.getElementById("graph-container");a&&(a.style.position="static"),setTimeout(()=>document.body.appendChild(s),i)}}var g6=class{constructor(t,e){this._attributesManager=t,this._id=e}getDefinition(){return this._attributesManager.getAttributeLayerDefinition(this._id)}update(t){this._attributesManager.updateAttributeLayer(this._id,t)}destroy(){this._attributesManager.destroyAttributeLayer(this._id)}updateElements(t){this._attributesManager.updateElementsForAttributeLayer(this._id,t)}updateAll(){this._attributesManager.updateAllForAttributeLayer(this._id)}setAttributeValues(t,e,n){this._attributesManager.setAttributeLayerValues(this._id,t,e,n)}getUsedAttributeNames(t){return this._attributesManager.getUsedAttributeLayerAttributes(this._id,t)}getFlexArrays(){return this._attributesManager.getAttributeLayerFlexArrays(this._id)}},E1={};sc(E1,{cubicIn:()=>_6,cubicInOut:()=>v6,cubicOut:()=>y6,linear:()=>Lm,quadraticIn:()=>f6,quadraticInOut:()=>p6,quadraticOut:()=>m6});var Lm=t=>t,f6=t=>t*t,m6=t=>t*(2-t),p6=t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1),_6=t=>t*t*t,y6=t=>--t*t*t+1,v6=t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2),x6={name:"animationStart",storage:32,default:0},b6={name:"animationDuration",storage:16,default:0},E6={name:"animationEasing",storage:"resource",default:"linear"},S6={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentNodes:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},w6={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},extremities:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},parallelEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},A6={x:1,y:1,radius:1,"halo.hideNonAdjacentEdges":1};function uh(t){return typeof t=="string"}var Si="Arial",ea="black",Pm="rgba(255,255,255,0)",ku=12,Vh=3,S1=7,T6=!0,w1=10,C6=5,bN=.08,EN="rgba(255,255,255,0)",SN="normal",wN="center",AN=!1,TN=0,zv="red",CN="rgb(220, 220, 220)",LN="red",PN="rgb(220, 220, 220)",Bv=1,kN="scaled",IN="grey",MN=1,NN=0,RN=0,FN=!0,ON=0,DN=!0,zN="line",BN=null,UN=null,$N="plain",jN="inherit",Uv=0,GN="fixed",VN=0,HN=null,$v=10,WN="fixed",XN=1e3,ZN=800,YN="rgba(0, 0, 0, 0.6)",qN="rgba(0, 0, 0, 0)",JN=10,KN=1,QN=2,tR="rgba(0, 0, 0, 0.36)",eR=0,L6=1,nR="normal",iR="center",sR=2,jv=2,rR=cc,oR=4,aR=!0,lR=4,Gv=2,Vv=12,uR=2;function P6(t,e,n){let i,s,r,o;n==="line"?(i="line",s="plain",r=null,o=null):n==="arrow"?(i="line",s="plain",r="arrow",o=null):n==="tapered"?(i="triangle",s="plain",r=null,o=null):n==="dashed"?(i="line",s="dashed",r=null,o=null):n==="dotted"&&(i="line",s="dotted",r=null,o=null),t.shape.body.set(e,i),t.shape.style.set(e,s),t.shape.head.set(e,r),t.shape.tail.set(e,o)}var dR={width:{_flexArray:Bv,_check:Le(Bv)},scalingMethod:{_flexArray:kN,_check:Mo},color:{_flexArray:IN,_check:lV},opacity:{_flexArray:MN,_check:Ze},minVisibleSize:{_flexArray:NN,_check:Ze},layer:{_flexArray:RN,_check:nN},detectable:{_flexArray:FN,_check:qn},curvature:{_flexArray:ON,_check:Ba},adjustAnchors:{_flexArray:DN,_check:qn},shape:{_check:dV,_set:P6,type:"shape.head",body:{_flexArray:zN,_check:hV},head:{_flexArray:BN,_check:nT},tail:{_flexArray:UN,_check:nT},style:{_flexArray:$N,_check:cV}},stroke:{color:{_flexArray:jN,_check:ui},width:{_flexArray:Uv,_check:Le(Uv)},scalingMethod:{_flexArray:GN,_check:Mo},minVisibleSize:{_flexArray:VN,_check:Ze}},strokeWidth:"stroke.width",halo:{_alias:"halo.color",color:{_flexArray:HN,_check:No},width:{_flexArray:$v,_check:Le($v)},scalingMethod:{_flexArray:WN,_check:Mo},size:"halo.width"},pulse:{enabled:{_flexArray:!1,_check:qn},duration:{_flexArray:XN,_check:Ze},interval:{_flexArray:ZN,_check:Ze},startColor:{_flexArray:YN,_check:ui},endColor:{_flexArray:qN,_check:ui},width:{_flexArray:JN,_check:Ze},startRatio:{_flexArray:KN,_check:Ze},endRatio:{_flexArray:QN,_check:Ze}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:qn},color:{_flexArray:tR,_check:No},minVisibleSize:{_flexArray:eR,_check:Ze}},text:{_alias:"text.content",content:{_flexArray:null,_check:zr},font:{_flexArray:Si,_check:du},color:{_flexArray:ea,_check:No},size:{_flexArray:ku,_check:Le(ku)},scale:{_flexArray:1,_check:Ze},style:{_flexArray:nR,_check:hu},align:{_flexArray:iR,_check:Cm},margin:{_flexArray:sR,_check:Ba},padding:{_flexArray:jv,_check:Le(jv)},backgroundColor:{_flexArray:Pm,_check:ui},minVisibleSize:{_flexArray:oR,_check:Ze},position:{_flexArray:rR,_check:aV},adjustAngle:{_flexArray:aR,_check:qn},scaling:{_flexArray:AN,_check:qn},maxLineLength:{_flexArray:TN,_check:Ze},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:zr},font:{_flexArray:Si,_check:du},color:{_flexArray:ea,_check:No},size:{_flexArray:Vv,_check:Le(Vv)},scale:{_flexArray:bN,_check:Ze},style:{_flexArray:SN,_check:hu},align:{_flexArray:wN,_check:Cm},margin:{_flexArray:uR,_check:Ba},padding:{_flexArray:Gv,_check:Le(Gv)},backgroundColor:{_flexArray:EN,_check:ui},minVisibleSize:{_flexArray:lR,_check:Ze}}}},hR="grey",cR="white",A1=2,gR=null,T1=5,Hv=0,fR="rgba(0, 0, 0, 0.36)",k6=1,I6="circle",Wv=12,Od="white",Sg=12,Dd="black",nu=2,zd="black",C1=40,mR=null,pR=null,L1=1,_R="black",yR=1e3,vR=800,xR=1,bR=2,ER="rgba(0, 0, 0, 0.0)",SR="rgba(0, 0, 0, 0.6)",wR=50,M6=.1,Ao=12,wg=24,Hh=1,_T=Hh/2,yT=.45,vT=.7,N6=10,AR=N6/2,TR=5,R6=Le(TR),F6=Le(ku),O6=Le(w1),D6=Le(A1),z6=Le(T1),B6=Le(S1),xT=Le(Vh),U6=Le(AR),$6=Le(C1),j6=Le(L1);function Ag(t){return{_check:zr,_set:(e,n,i)=>{e.badges[t].text.content.set(n,i),i==null&&e.badges[t].image.url.set(n,i)},_get:(e,n)=>e.badges[t].text.content.get(n),color:{_flexArray:Od,_check:ui},scale:{_flexArray:yT,_check:Le(yT)},positionScale:{_flexArray:1,_check:Ze},minVisibleSize:{_flexArray:Ao,_check:Le(Ao)},image:{_alias:`badges.${t}.image.url`,url:{_flexArray:null,_check:zr},scale:{_flexArray:Hh,_check:Le(Hh)}},stroke:{color:{_flexArray:Dd,_check:ui},width:{_flexArray:nu,_check:Le(nu)},scalingMethod:{_flexArray:"fixed",_check:Mo}},text:{_alias:`badges.${t}.text.content`,content:{_flexArray:null,_check:zr},color:{_flexArray:zd,_check:ui},font:{_flexArray:Si,_check:du},style:{_flexArray:"normal",_check:hu},scale:{_flexArray:_T,_check:Le(_T)},paddingLeft:{_flexArray:0,_check:Ba},paddingTop:{_flexArray:0,_check:Ba}}}}var CR={x:{_flexArray:0,_check:Ba,_disableMemoryOptimization:!0},y:{_flexArray:0,_check:Ba,_disableMemoryOptimization:!0},radius:{_flexArray:TR,_check:R6},scalingMethod:{_flexArray:"scaled",_check:Mo},color:{_flexArray:hR,_check:fV},opacity:{_flexArray:1,_check:Ze},shape:{_flexArray:"circle",_check:uV},layer:{_flexArray:0,_check:nN},detectable:{_flexArray:!0,_check:qn},draggable:{_flexArray:!0,_check:qn},layoutable:{_flexArray:!0,_check:qn},innerStroke:{_alias:"innerStroke.color",width:{_flexArray:A1,_check:D6},scalingMethod:{_flexArray:"fixed",_check:Mo},color:{_flexArray:cR,_check:ui},minVisibleSize:{_flexArray:Wv,_check:Le(Wv)}},outerStroke:{_alias:"outerStroke.color",width:{_flexArray:T1,_check:z6},scalingMethod:{_flexArray:"fixed",_check:Mo},color:{_flexArray:gR,_check:ui},minVisibleSize:{_flexArray:Hv,_check:Le(Hv)}},badges:{_check:rV,_set(t,e,n){t.badges.topLeft.text.content.set(e,n),t.badges.topLeft.image.url.set(e,n),t.badges.topRight.text.content.set(e,n),t.badges.topRight.image.url.set(e,n),t.badges.bottomLeft.text.content.set(e,n),t.badges.bottomLeft.image.url.set(e,n),t.badges.bottomRight.text.content.set(e,n),t.badges.bottomRight.image.url.set(e,n)},topLeft:Ag("topLeft"),topRight:Ag("topRight"),bottomLeft:Ag("bottomLeft"),bottomRight:Ag("bottomRight")},halo:{_alias:"halo.color",color:{_flexArray:mR,_check:No},width:{_flexArray:C1,_check:$6},scalingMethod:{_flexArray:"fixed",_check:Mo},strokeColor:{_flexArray:pR,_check:No},strokeWidth:{_flexArray:L1,_check:j6},clustering:{_flexArray:!1,_check:qn},hideNonAdjacentEdges:{_flexArray:!1,_check:qn}},pulse:{enabled:{_flexArray:!1,_check:qn},duration:{_flexArray:yR,_check:Ze},interval:{_flexArray:vR,_check:Ze},startColor:{_flexArray:SR,_check:ui},endColor:{_flexArray:ER,_check:ui},width:{_flexArray:wR,_check:Ze},startRatio:{_flexArray:xR,_check:Ze},endRatio:{_flexArray:bR,_check:Ze}},icon:{_alias:"icon.content",content:{_flexArray:null,_check:zr},font:{_flexArray:Si,_check:du},color:{_flexArray:_R,_check:No},scale:{_flexArray:vT,_check:Le(vT)},style:{_flexArray:"normal",_check:hu},minVisibleSize:{_flexArray:Ao,_check:Le(Ao)}},image:{_alias:"image.url",url:{_flexArray:null,_check:zr},scale:{_flexArray:Hh,_check:Le(Hh)},fit:{_flexArray:!0,_check:qn},tile:{_flexArray:!1,_check:qn},minVisibleSize:{_flexArray:Ao,_check:Le(Ao)}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:qn},color:{_flexArray:fR,_check:No},minVisibleSize:{_flexArray:Ao,_check:Le(Ao)}},text:{_alias:"text.content",content:{_flexArray:null,_check:zr},font:{_flexArray:Si,_check:du},color:{_flexArray:ea,_check:ui},size:{_flexArray:ku,_check:F6},scale:{_flexArray:M6,_check:Ze},style:{_flexArray:"normal",_check:hu},align:{_flexArray:"center",_check:Cm},margin:{_flexArray:S1,_check:B6},padding:{_flexArray:Vh,_check:xT},backgroundColor:{_flexArray:null,_check:ui},tip:{_flexArray:!0,_check:qn},minVisibleSize:{_flexArray:wg,_check:Le(wg)},scaling:{_flexArray:!1,_check:qn},position:{_flexArray:"bottom",_check:gV},maxLineLength:{_flexArray:0,_check:Ze},truncateLength:{_flexArray:0,_check:Ze},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:zr},font:{_flexArray:Si,_check:du},color:{_flexArray:ea,_check:ui},size:{_flexArray:w1,_check:O6},scale:{_flexArray:.08,_check:Ze},style:{_flexArray:"normal",_check:hu},align:{_flexArray:"center",_check:Cm},margin:{_flexArray:AR,_check:U6},padding:{_flexArray:Vh,_check:xT},backgroundColor:{_flexArray:null,_check:ui},minVisibleSize:{_flexArray:wg,_check:Le(wg)}}}},G6=t=>(e,n)=>e[t].get(n),V6=(t,e)=>(n,i)=>n[t][e].get(i),H6=(t,e,n)=>(i,s)=>i[t][e][n].get(s),W6=(t,e,n,i)=>(s,r)=>s[t][e][n][i].get(r),X6=t=>(e,n,i)=>e[t].set(n,i),Z6=(t,e)=>(n,i,s)=>n[t][e].set(i,s),Y6=(t,e,n)=>(i,s,r)=>i[t][e][n].set(s,r),q6=(t,e,n,i)=>(s,r,o)=>s[t][e][n][i].set(r,o),J6=[G6,V6,H6,W6],K6=[X6,Z6,Y6,q6];function bT(t,e){if(!t._check)throw new Error(`error somewhere for ${e}`);const n=e.split("."),i=n.length-1,s=J6[i].apply(null,n),r=K6[i].apply(null,n);return{check:t._check,set:r,get:s,nested:{}}}function km(t,e){const n=e?CR:dR,i=typeof t=="string"?[t]:Za(t,"",[]);let s=!1;const r=[];for(let o=0;o<i.length;o++){const a=i[o].split(".");let l=n[a[0]];for(let h=1;h<a.length;h++)l=l[a[h]];l.type&&(i[o]=l.type),l._alias&&(i[o]=l._alias),i[o]==="badges"&&(i[o]="badges.topLeft.text.content",s=!0);const d=a[a.length-1];d!=="topLeft"&&d!=="topRight"&&d!=="bottomLeft"&&d!=="bottomRight"||(i[o]=`badges.${d}.text.content`,r.push(`badges.${d}.image.url`)),i[o]==="strokeWidth"&&(i[o]="stroke.width")}return s&&(i.push("badges.topLeft.image.url"),i.push("badges.topRight.text.content"),i.push("badges.topRight.image.url"),i.push("badges.bottomLeft.text.content"),i.push("badges.bottomLeft.image.url"),i.push("badges.bottomRight.text.content"),i.push("badges.bottomRight.image.url")),i.push(...r),i}var Tg=t=>(e,n)=>({url:e.badges[t].image.url.get(n),scale:e.badges[t].image.scale.get(n)}),Cg=t=>(e,n)=>({color:e.badges[t].stroke.color.get(n),width:e.badges[t].stroke.width.get(n),scalingMethod:e.badges[t].stroke.scalingMethod.get(n)}),Lg=t=>(e,n)=>({content:e.badges[t].text.content.get(n),color:e.badges[t].text.color.get(n),font:e.badges[t].text.font.get(n),style:e.badges[t].text.style.get(n),scale:e.badges[t].text.scale.get(n),paddingLeft:e.badges[t].text.paddingLeft.get(n),paddingTop:e.badges[t].text.paddingTop.get(n)}),Pg=t=>(e,n)=>({color:e.badges[t].color.get(n),scale:e.badges[t].scale.get(n),positionScale:e.badges[t].positionScale.get(n),minVisibleSize:e.badges[t].minVisibleSize.get(n),image:{url:e.badges[t].image.url.get(n),scale:e.badges[t].image.scale.get(n)},stroke:{color:e.badges[t].stroke.color.get(n),width:e.badges[t].stroke.width.get(n),scalingMethod:e.badges[t].stroke.scalingMethod.get(n)},text:{content:e.badges[t].text.content.get(n),color:e.badges[t].text.color.get(n),font:e.badges[t].text.font.get(n),style:e.badges[t].text.style.get(n),scale:e.badges[t].text.scale.get(n),paddingLeft:e.badges[t].text.paddingLeft.get(n),paddingTop:e.badges[t].text.paddingTop.get(n)}}),yo={topLeft:Pg("topLeft"),topRight:Pg("topRight"),bottomLeft:Pg("bottomLeft"),bottomRight:Pg("bottomRight")},Ns={stroke:(t,e)=>({color:t.stroke.color.get(e),width:t.stroke.width.get(e),scalingMethod:t.stroke.scalingMethod.get(e),minVisibleSize:t.stroke.minVisibleSize.get(e)}),innerStroke:(t,e)=>({width:t.innerStroke.width.get(e),scalingMethod:t.innerStroke.scalingMethod.get(e),color:t.innerStroke.color.get(e),minVisibleSize:t.innerStroke.minVisibleSize.get(e)}),outerStroke:(t,e)=>({width:t.outerStroke.width.get(e),scalingMethod:t.outerStroke.scalingMethod.get(e),color:t.outerStroke.color.get(e),minVisibleSize:t.outerStroke.minVisibleSize.get(e)}),pulse:(t,e)=>({enabled:t.pulse.enabled.get(e),duration:t.pulse.duration.get(e),interval:t.pulse.interval.get(e),startColor:t.pulse.startColor.get(e),endColor:t.pulse.endColor.get(e),width:t.pulse.width.get(e),startRatio:t.pulse.startRatio.get(e),endRatio:t.pulse.endRatio.get(e)}),outline:(t,e)=>({enabled:t.outline.enabled.get(e),color:t.outline.color.get(e),minVisibleSize:t.outline.minVisibleSize.get(e)}),halo:(t,e)=>({color:t.halo.color.get(e),width:t.halo.width.get(e),scalingMethod:t.halo.scalingMethod.get(e),strokeColor:t.halo.strokeColor.get(e),strokeWidth:t.halo.strokeWidth.get(e),clustering:t.halo.clustering.get(e),hideNonAdjacentEdges:t.halo.hideNonAdjacentEdges.get(e)}),"text.secondary":(t,e)=>({content:t.text.secondary.content.get(e),font:t.text.secondary.font.get(e),color:t.text.secondary.color.get(e),size:t.text.secondary.size.get(e),scale:t.text.secondary.scale.get(e),style:t.text.secondary.style.get(e),align:t.text.secondary.align.get(e),margin:t.text.secondary.margin.get(e),padding:t.text.secondary.padding.get(e),backgroundColor:t.text.secondary.backgroundColor.get(e),minVisibleSize:t.text.secondary.minVisibleSize.get(e)}),text:(t,e)=>({content:t.text.content.get(e),font:t.text.font.get(e),color:t.text.color.get(e),size:t.text.size.get(e),scale:t.text.scale.get(e),style:t.text.style.get(e),align:t.text.align.get(e),margin:t.text.margin.get(e),padding:t.text.padding.get(e),backgroundColor:t.text.backgroundColor.get(e),tip:t.text.tip.get(e),minVisibleSize:t.text.minVisibleSize.get(e),scaling:t.text.scaling.get(e),position:t.text.position.get(e),maxLineLength:t.text.maxLineLength.get(e),truncateLength:t.text.truncateLength.get(e),secondary:Ns["text.secondary"](t,e)}),image:(t,e)=>({url:t.image.url.get(e),scale:t.image.scale.get(e),fit:t.image.fit.get(e),tile:t.image.tile.get(e),minVisibleSize:t.image.minVisibleSize.get(e)}),icon:(t,e)=>({content:t.icon.content.get(e),font:t.icon.font.get(e),color:t.icon.color.get(e),scale:t.icon.scale.get(e),style:t.icon.style.get(e),minVisibleSize:t.icon.minVisibleSize.get(e)}),badges:(t,e)=>({topLeft:yo.topLeft(t,e),topRight:yo.topRight(t,e),bottomLeft:yo.bottomLeft(t,e),bottomRight:yo.bottomRight(t,e)}),"badges.topLeft":yo.topLeft,"badges.topRight":yo.topRight,"badges.bottomLeft":yo.bottomLeft,"badges.bottomRight":yo.bottomRight,"badges.topLeft.image":Tg("topLeft"),"badges.topLeft.stroke":Cg("topLeft"),"badges.topLeft.text":Lg("topLeft"),"badges.topRight.image":Tg("topRight"),"badges.topRight.stroke":Cg("topRight"),"badges.topRight.text":Lg("topRight"),"badges.bottomLeft.image":Tg("bottomLeft"),"badges.bottomLeft.stroke":Cg("bottomLeft"),"badges.bottomLeft.text":Lg("bottomLeft"),"badges.bottomRight.image":Tg("bottomRight"),"badges.bottomRight.stroke":Cg("bottomRight"),"badges.bottomRight.text":Lg("bottomRight"),all:(t,e)=>({x:t.x.get(e),y:t.y.get(e),radius:t.radius.get(e),scalingMethod:t.scalingMethod.get(e),color:t.color.get(e),opacity:t.opacity.get(e),shape:t.shape.get(e),layer:t.layer.get(e),detectable:t.detectable.get(e),draggable:t.draggable.get(e),layoutable:t.layoutable.get(e),innerStroke:Ns.innerStroke(t,e),outerStroke:Ns.outerStroke(t,e),badges:Ns.badges(t,e),halo:Ns.halo(t,e),pulse:Ns.pulse(t,e),icon:Ns.icon(t,e),image:Ns.image(t,e),outline:Ns.outline(t,e),text:Ns.text(t,e)})},vo={shape:(t,e)=>({body:t.shape.body.get(e),head:t.shape.head.get(e),tail:t.shape.tail.get(e),style:t.shape.style.get(e)}),"text.secondary":(t,e)=>({content:t.text.secondary.content.get(e),font:t.text.secondary.font.get(e),color:t.text.secondary.color.get(e),size:t.text.secondary.size.get(e),scale:t.text.secondary.scale.get(e),style:t.text.secondary.style.get(e),align:t.text.secondary.align.get(e),margin:t.text.secondary.margin.get(e),padding:t.text.secondary.padding.get(e),backgroundColor:t.text.secondary.backgroundColor.get(e),minVisibleSize:t.text.secondary.minVisibleSize.get(e)}),text:(t,e)=>({content:t.text.content.get(e),font:t.text.font.get(e),color:t.text.color.get(e),size:t.text.size.get(e),scale:t.text.scale.get(e),style:t.text.style.get(e),align:t.text.align.get(e),margin:t.text.margin.get(e),padding:t.text.padding.get(e),position:t.text.position.get(e),backgroundColor:t.text.backgroundColor.get(e),minVisibleSize:t.text.minVisibleSize.get(e),adjustAngle:t.text.adjustAngle.get(e),scaling:t.text.scaling.get(e),maxLineLength:t.text.maxLineLength.get(e),secondary:vo["text.secondary"](t,e)}),outline:(t,e)=>({enabled:t.outline.enabled.get(e),color:t.outline.color.get(e),minVisibleSize:t.outline.minVisibleSize.get(e)}),pulse:(t,e)=>({enabled:t.pulse.enabled.get(e),duration:t.pulse.duration.get(e),interval:t.pulse.interval.get(e),startColor:t.pulse.startColor.get(e),endColor:t.pulse.endColor.get(e),width:t.pulse.width.get(e),startRatio:t.pulse.startRatio.get(e),endRatio:t.pulse.endRatio.get(e)}),stroke:(t,e)=>({color:t.stroke.color.get(e),width:t.stroke.width.get(e),scalingMethod:t.stroke.scalingMethod.get(e),minVisibleSize:t.stroke.minVisibleSize.get(e)}),halo:(t,e)=>({color:t.halo.color.get(e),width:t.halo.width.get(e),scalingMethod:t.halo.scalingMethod.get(e)}),all:(t,e)=>({width:t.width.get(e),scalingMethod:t.scalingMethod.get(e),color:t.color.get(e),opacity:t.opacity.get(e),minVisibleSize:t.minVisibleSize.get(e),layer:t.layer.get(e),detectable:t.detectable.get(e),curvature:t.curvature.get(e),adjustAnchors:t.adjustAnchors.get(e),shape:vo.shape(t,e),stroke:vo.stroke(t,e),halo:vo.halo(t,e),pulse:vo.pulse(t,e),outline:vo.outline(t,e),text:vo.text(t,e)})};function P1(t,e,n,i=!0){if((e=e||t)._flexArray!==void 0)return bT(e,n);let s={check:Gs,get:he,set:he,nested:{}};if(uh(e)||e._alias){const r=uh(e)?e:e._alias;s=bT(Qe(t,r),r)}else{if(e._set?(s.set=e._set,s.check=e._check):(s.set=he,s.check=he),e._get)s.get=e._get;else{const r=i?Ns:vo;s.get=r[n||"all"]}s.nested={}}if(!uh(e)){const r=Object.keys(e);for(const o of r){const a=e[o];o.startsWith("_")||(s.nested[o]=P1(t,a,n?n+"."+o:o,i))}}return s}var Q6=P1(CR,void 0,void 0,!0),t8=P1(dR,void 0,void 0,!1),e8=[];function ET(t){let e=e8;return t.output===void 0?(typeof t.attributes=="function"&&(e="all"),An(t.attributes)&&(e=Za(t.attributes))):t.output&&(e=t.output.attributes),k1(e,t.allAttributePaths)}function n8(t,e,n,i){if(i>n){for(const s of e.attributes)for(const r of t.attributes)if(r===s)return!0}for(const s of e.tags)for(const r of t.tags)if(s===r)return!0;return!1}function Qs(t,e,n,i,s,r){n8(n,i,s,r)&&t.push(e)}function i8(t){let e=t.dependencies;e===void 0?e=S6:An(e)||(e={});const n=yp(t.attributes).some(o=>typeof o=="function"),i=t.selector&&!t.standaloneSelector,s=!(!n&&!i);let r=e.adjacentEdges;return!r&&e.adjacentNodes&&(r=!0),{self:ur(e.self,s,t.allAttributePaths),adjacentNodes:ur(e.adjacentNodes,s,t.allAttributePaths),adjacentEdges:ur(r,s,t.allAttributePaths),allNodes:ur(e.allNodes,s,t.allAttributePaths),allEdges:ur(e.allEdges,s,t.allAttributePaths)}}function s8(t){let e=t.dependencies;e===void 0?e=w6:An(e)||(e={});const n=yp(t.attributes).some(r=>typeof r=="function"),i=t.selector&&!t.standaloneSelector,s=!(!n&&!i);return{self:ur(e.self,s,t.allAttributePaths),extremities:ur(e.extremities,s,t.allAttributePaths),parallelEdges:ur(e.parallelEdges,s,t.allAttributePaths),allNodes:ur(e.allNodes,s,t.allAttributePaths),allEdges:ur(e.allEdges,s,t.allAttributePaths)}}function ur(t,e,n){if(!e)return{attributes:[],tags:[]};if(t===!0)return{attributes:[],tags:[vv]};const i={attributes:k1((t=t||{}).attributes,n),tags:a8(t.tags)};return t.data&&i.tags.push(xv),t.selection&&i.tags.push(Xe),t.hover&&i.tags.push(sh),i}function r8(t){return Array.isArray(t)?t.join("."):t}function o8(t){return t.map(r8).filter(uh)}function k1(t,e){if(t==="all")return e.slice();if(!Array.isArray(t))return[];const n=o8(t);return e?e.filter(i=>n.some(s=>i.startsWith(s))):n}function a8(t){return Array.isArray(t)?t.filter(uh):[]}var ST={storage:1,default:0},Im=class{constructor({graph:t,isNode:e,includeRemovedElements:n}){this._all=!1,this._isNode=e,this._graph=t,this._includeRemovedElements=n,this._eltList=e?this._graph.nodeList:this._graph.edgeList,this._flexArray=e?t.createNodeAttribute(ST,!1):t.createEdgeAttribute(ST,!1),this._all=!1,this._indexList=t.createIndexList(e)}_getAllIndexes(){const t=this._isNode?this._graph.getNodeMaxIndex():this._graph.getEdgeMaxIndex(),e=new Uint32Array(t);for(let n=1;n<=t;++n)e[n-1]=n;return e}addAll(){this._all=!0}add(t){if(!this._all)for(let e=0;e<t._indexes.length;e++){const n=t._indexes[e];this.addIndex(n)}}addIndex(t){this._flexArray.get(t)===0&&(this._flexArray.set(t,1),this._indexList.push(t))}isEmpty(){return!this._all&&this._indexList.isEmpty()}isFull(){return this._all}getListAndClear(){const t=this.getList();return this.clear(),t}getList(){let t;if(this._all&&!this._includeRemovedElements)t=this._isNode?this._graph.getNodes("all"):this._graph.getEdges("all");else{const e=this._all?this._getAllIndexes():this._indexList.slice();t=this._eltList(e)}return t}clear(){this._all=!1,this._indexList.isEmpty()||(this._indexList.reset(),this._flexArray.reset())}addSet(t){if(t._all)this.addAll();else{const e=t._indexList.getBuffer(),n=t._indexList.getLength();for(let i=0;i<n;++i)this.addIndex(e[i])}}};function LR(t,e=[],n=""){return t.constructor===Em?t.isInitialized()&&e.push(n):t.constructor===Object&&Object.keys(t).forEach(i=>{LR(t[i],e,n?n+"."+i:i)}),e}var wT=class{constructor(t,e,n){this._updatedAttributes=new Set,this._updatedAttributesTmp=new Set,this._allUsedAttributes=new Set,this._graph=t,this._eltName=e?"node":"edge",this._accessors=e?Q6:t8,this._createFlexArrays=n;const i=this._createFlexArrays(t,{original:!0,useDefaultValues:!0});this._finalFlexArrays=i;const s=this._createFlexArrays(t,{original:!1,useDefaultValues:!0});this._prevFlexArrays=s;const r=this._createFlexArrays(t,{original:!1,useDefaultValues:!0});this._defaultFlexArrays=r,this._currentFlexArrays=this._defaultFlexArrays,this.setLastFlexArrays(this._defaultFlexArrays),this._elementsToRedraw=new Im({graph:t,isNode:e,includeRemovedElements:!0}),this._elementsUpdated=new Im({graph:t,isNode:e,includeRemovedElements:!1}),this._finalFlexArraysWrapped=wt(ue(wt({},this._finalFlexArrays),{excluded:t.getAttribute(e,"excluded"),textHidden:t.getAttribute(e,"textHidden"),animationStart:t.createAttribute(e,x6),animationDuration:t.createAttribute(e,b6),animationEasing:t.createAttribute(e,E6),id:this._graph.getAttribute(e,"id")}),!e&&{source:t.getEdgeAttribute("source"),target:t.getEdgeAttribute("target")})}clear(){this._elementsToRedraw.clear(),this._elementsUpdated.clear(),this._updatedAttributes.clear(),this._updatedAttributesTmp.clear()}getAttributeFlexArrays(){return this._finalFlexArraysWrapped}getPrevAttributeFlexArrays(){return this._prevFlexArrays}getAnimationInformation(t){const e=t._indexes,n=Array(e.length),i=this._finalFlexArraysWrapped;for(let s=0;s<e.length;s++){const r=e[s];n[s]={duration:i.animationDuration.get(r),start:i.animationStart.get(r),easing:i.animationEasing.get(r)}}return n}setDefaultAttributes(t){Za(t).forEach(e=>{const n=Qe(this._currentFlexArrays,e),i=Qe(this._prevFlexArrays,e),s=Qe(this._defaultFlexArrays,e),r=Qe(this._finalFlexArrays,e);if(!n)return;const o=Qe(t,e);n.setDefaultValue(o),s.setDefaultValue(o),i.setDefaultValue(o),r.setDefaultValue(o)}),this.redrawAll()}startUpdate(){}prepareFlexArraysUpdate(t){this._currentFlexArrays=t.inputFlexArrays}setLastFlexArrays(t){this._lastFlexArrays=t}updateFlexArrays(t){const{attributes:e,selector:n,context:i,outputFlexArrays:s,toUpdate:r,formattedOutput:o}=t;this._elementsUpdated.addSet(r),this._elementsToRedraw.addSet(r);const a=r.getListAndClear();if(e&&a.size){const{valid:l,invalid:d}=kI(this._graph,a,n,i);for(const h of o.attributes){const c=Qe(s,h);for(let g=0;g<d._indexes.length;g++){const m=d._indexes[g];c.set(m,void 0)}}this._assignAttributesToFlexArrays(this._accessors,s,l,e,i),this._addUpdatedAttributes(t)}}endUpdate(){const t=this._elementsUpdated.getList(),e=Fd(this._updatedAttributesTmp);for(const n of e){const i=Qe(this._lastFlexArrays,n),s=Qe(this._finalFlexArrays,n);for(let r=0;r<t._indexes.length;r++){const o=t._indexes[r];s.set(o,i.get(o))}}this._updatedAttributesTmp.clear(),this._currentFlexArrays=this._finalFlexArrays}setAttributeValues(t,e,n,i,s){const r=t.outputFlexArrays,o=this._accessors;this._assignAttributesToFlexArrays(o,r,e,n,null),this._addUpdatedAttributes(t,i),this._elementsUpdated.add(e),this._elementsToRedraw.add(e)}notifyLayerDestroyed(t){this._addUpdatedAttributes(t)}_addUpdatedAttributes(t,e){const{outputFlexArrays:n,formattedOutput:i}=t,s=Array.isArray(e)?k1(e):i.attributes;for(const r of s)Qe(n,r).isInitialized()&&(this._updatedAttributes.add(r),this._updatedAttributesTmp.add(r),this._allUsedAttributes.add(r))}addUpdatedAttribute(t){this._updatedAttributes.add(t),this._updatedAttributesTmp.add(t),this._allUsedAttributes.add(t)}getUsedAttributeNames(t){return LR(t.outputFlexArrays)}redrawElements(t){this._elementsToRedraw.add(t)}redrawAll(){this._elementsToRedraw.addAll()}getAndResetElementsToRedraw(){return this._elementsToRedraw.getListAndClear()}getAndResetElementsUpdated(){return this._elementsUpdated.getListAndClear()}getAndResetAttributesUpdated(){const t=Fd(this._updatedAttributes);return this._updatedAttributes.clear(),t}getUpdatedAttributes(){return this._updatedAttributes}getUpdatedElementsList(){return this._elementsUpdated.getList()}getUpdatedAttributesSet(){return new Set(this._updatedAttributes)}createFlexArrays(){return this._createFlexArrays(this._graph,{original:!1,useDefaultValues:!1})}getAttributeValues(t,e,n,i){const s=i?this._prevFlexArrays:this._currentFlexArrays;return n?this._getMultipleAttributeValues(t,e,s):this._getSingleAttributeValues(t,e,s)}_getAccessor(t=""){let e=this._accessors;const n=Wa(t);for(const i of n)if(e=e.nested[i],!e)throw new Error(`${this._eltName} attribute "${n.join("")}" does not exist`);return e}_getSingleAttributeValues(t,e,n){const i=this._getAccessor(e),s=t._indexes,r=Array(s.length);for(let o=0;o<s.length;o++)r[o]=i.get(n,s[o]);return r}_getMultipleAttributeValues(t,e,n){if(!e||e==="all")return this._getSingleAttributeValues(t,"",n);const i=Array(t.size);for(let s=0;s<i.length;++s)i[s]={};for(let s=0;s<e.length;s++){const r=e[s],o=this._getSingleAttributeValues(t,r,n);for(let a=0;a<i.length;++a)$r(i[a],r,o[a])}return i}setAnimationAttributes(t,{duration:e,startTime:n,easing:i}){const s=t._indexes,r=this._finalFlexArraysWrapped,o=r.animationDuration,a=r.animationStart,l=r.animationEasing,d=Fd(this._allUsedAttributes);if(e){let h=!1;for(const c of d){if(c==="x"||c==="y"){h=!0;continue}const g=Qe(this._finalFlexArrays,c),m=Qe(this._prevFlexArrays,c);for(let _=0;_<s.length;_++){const p=s[_];m.set(p,g.get(p))}}if(h){const c=ci(),g=this._finalFlexArrays.x,m=this._finalFlexArrays.y,_=this._prevFlexArrays.x,p=this._prevFlexArrays.y;for(let v=0;v<s.length;v++){const x=s[v],b=o.get(x);if(b){const E=a.get(x),S=l.get(x),A=(E1[S]||Lm)(Math.min((c-E)/b,1)),T=hv(_.get(x),g.get(x),A),P=hv(p.get(x),m.get(x),A);_.set(x,T),p.set(x,P)}else _.set(x,g.get(x)),p.set(x,m.get(x))}}}o.fill(s,e),a.fill(s,n),l.fill(s,i)}resetAnimationAttributes(t){this._finalFlexArraysWrapped.animationDuration.fill(t._indexes,0)}getUsedAttributes(){return Fd(this._allUsedAttributes)}getDefaultFlexArrays(){return this._defaultFlexArrays}_assignAttributesToFlexArrays(t,e,n,i,s,r=[]){if(typeof i=="function"){const o=r.join(".");for(let a=0;a<n.size;++a){const l=n.get(a);if(l){const d=i(l,s,o);this._assignSingleValueToFlexArray(e,l,t,d,r)}}}else if(An(i)){const o=Object.keys(i);for(let a=0;a<o.length;++a){const l=o[a];r.push(l);const d=this._getNestedAccessor(t,l,r),h=i[l];this._assignAttributesToFlexArrays(d,e,n,h,s,r),r.pop()}}else if((Array.isArray(i)||ArrayBuffer.isView(i))&&r[0]!=="color")if(r.length===0)for(let o=0;o<n.size;++o)this._assignSingleValueToFlexArray(e,n.get(o),t,i[o],r);else for(let o=0;o<n.size;++o){const a=n._indexes[o],l=t.check(i[o]);t.set(e,a,l)}else{const o=t.check(i);for(let a=0;a<n.size;++a){const l=n.get(a);t.set(e,l._index,o)}}}_getNestedAccessor(t,e,n){const i=t.nested[e];if(!i)throw new Error(`${this._eltName} attribute "${n.join(".")}" does not exist`);return i}_assignSingleValueToFlexArray(t,e,n,i,s){if(An(i)){const r=Object.keys(i);for(const o of r){s.push(o);const a=i[o],l=this._getNestedAccessor(n,o,s);this._assignSingleValueToFlexArray(t,e,l,a,s),s.pop()}}else{const r=n.check(i);n.set(t,e._index,r)}}};function l8(t,{original:e,useDefaultValues:n}){const i="resource";return{width:t.createAttribute(!1,{storage:i,default:n?Bv:void 0,name:"width"},e),scalingMethod:t.createAttribute(!1,{storage:i,default:n?kN:void 0,name:"scalingMethod"},e),color:t.createAttribute(!1,{storage:i,default:n?IN:void 0,name:"color"},e),opacity:t.createAttribute(!1,{storage:i,default:n?MN:void 0,name:"opacity"},e),minVisibleSize:t.createAttribute(!1,{storage:i,default:n?NN:void 0,name:"minVisibleSize"},e),layer:t.createAttribute(!1,{storage:i,default:n?RN:void 0,name:"layer"},e),detectable:t.createAttribute(!1,{storage:i,default:n?FN:void 0,name:"detectable"},e),curvature:t.createAttribute(!1,{storage:i,default:n?ON:void 0,name:"curvature"},e),adjustAnchors:t.createAttribute(!1,{storage:i,default:n?DN:void 0,name:"adjustAnchors"},e),shape:{body:t.createAttribute(!1,{storage:i,default:n?zN:void 0,name:"shape.body"},e),head:t.createAttribute(!1,{storage:i,default:n?BN:void 0,name:"shape.head"},e),tail:t.createAttribute(!1,{storage:i,default:n?UN:void 0,name:"shape.tail"},e),style:t.createAttribute(!1,{storage:i,default:n?$N:void 0,name:"shape.style"},e)},stroke:{color:t.createAttribute(!1,{storage:i,default:n?jN:void 0,name:"stroke.color"},e),width:t.createAttribute(!1,{storage:i,default:n?Uv:void 0,name:"stroke.width"},e),scalingMethod:t.createAttribute(!1,{storage:i,default:n?GN:void 0,name:"stroke.scalingMethod"},e),minVisibleSize:t.createAttribute(!1,{storage:i,default:n?VN:void 0,name:"stroke.minVisibleSize"},e)},halo:{color:t.createAttribute(!1,{storage:i,default:n?HN:void 0,name:"halo.color"},e),width:t.createAttribute(!1,{storage:i,default:n?$v:void 0,name:"halo.width"},e),scalingMethod:t.createAttribute(!1,{storage:i,default:n?WN:void 0,name:"halo.scalingMethod"},e)},pulse:{enabled:t.createAttribute(!1,{storage:i,default:!n&&void 0,name:"pulse.enabled"},e),duration:t.createAttribute(!1,{storage:i,default:n?XN:void 0,name:"pulse.duration"},e),interval:t.createAttribute(!1,{storage:i,default:n?ZN:void 0,name:"pulse.interval"},e),startColor:t.createAttribute(!1,{storage:i,default:n?YN:void 0,name:"pulse.startColor"},e),endColor:t.createAttribute(!1,{storage:i,default:n?qN:void 0,name:"pulse.endColor"},e),width:t.createAttribute(!1,{storage:i,default:n?JN:void 0,name:"pulse.width"},e),startRatio:t.createAttribute(!1,{storage:i,default:n?KN:void 0,name:"pulse.startRatio"},e),endRatio:t.createAttribute(!1,{storage:i,default:n?QN:void 0,name:"pulse.endRatio"},e)},outline:{enabled:t.createAttribute(!1,{storage:i,default:!n&&void 0,name:"outline.enabled"},e),color:t.createAttribute(!1,{storage:i,default:n?tR:void 0,name:"outline.color"},e),minVisibleSize:t.createAttribute(!1,{storage:i,default:n?eR:void 0,name:"outline.minVisibleSize"},e)},text:{content:t.createAttribute(!1,{storage:i,default:n?null:void 0,name:"text.content"},e),font:t.createAttribute(!1,{storage:i,default:n?Si:void 0,name:"text.font"},e),color:t.createAttribute(!1,{storage:i,default:n?ea:void 0,name:"text.color"},e),size:t.createAttribute(!1,{storage:i,default:n?ku:void 0,name:"text.size"},e),scale:t.createAttribute(!1,{storage:i,default:n?L6:void 0,name:"text.scale"},e),style:t.createAttribute(!1,{storage:i,default:n?nR:void 0,name:"text.style"},e),align:t.createAttribute(!1,{storage:i,default:n?iR:void 0,name:"text.align"},e),margin:t.createAttribute(!1,{storage:i,default:n?sR:void 0,name:"text.margin"},e),padding:t.createAttribute(!1,{storage:i,default:n?jv:void 0,name:"text.padding"},e),position:t.createAttribute(!1,{storage:i,default:n?rR:void 0,name:"text.position"},e),backgroundColor:t.createAttribute(!1,{storage:i,default:n?Pm:void 0,name:"text.backgroundColor"},e),minVisibleSize:t.createAttribute(!1,{storage:i,default:n?oR:void 0,name:"text.minVisibleSize"},e),adjustAngle:t.createAttribute(!1,{storage:i,default:n?aR:void 0,name:"text.adjustAngle"},e),scaling:t.createAttribute(!1,{storage:i,default:n?AN:void 0,name:"text.scaling"},e),maxLineLength:t.createAttribute(!1,{storage:i,default:n?TN:void 0,name:"text.maxLineLength"},e),secondary:{content:t.createAttribute(!1,{storage:i,default:n?null:void 0,name:"text.secondary.content"},e),font:t.createAttribute(!1,{storage:i,default:n?Si:void 0,name:"text.secondary.font"},e),color:t.createAttribute(!1,{storage:i,default:n?ea:void 0,name:"text.secondary.color"},e),size:t.createAttribute(!1,{storage:i,default:n?Vv:void 0,name:"text.secondary.size"},e),scale:t.createAttribute(!1,{storage:i,default:n?bN:void 0,name:"text.secondary.scale"},e),style:t.createAttribute(!1,{storage:i,default:n?SN:void 0,name:"text.secondary.style"},e),align:t.createAttribute(!1,{storage:i,default:n?wN:void 0,name:"text.secondary.align"},e),margin:t.createAttribute(!1,{storage:i,default:n?uR:void 0,name:"text.secondary.margin"},e),padding:t.createAttribute(!1,{storage:i,default:n?Gv:void 0,name:"text.secondary.padding"},e),backgroundColor:t.createAttribute(!1,{storage:i,default:n?EN:void 0,name:"text.secondary.backgroundColor"},e),minVisibleSize:t.createAttribute(!1,{storage:i,default:n?lR:void 0,name:"text.secondary.minVisibleSize"},e)}}}}function u8(t,{original:e,useDefaultValues:n}){const i="resource";return{x:t.createAttribute(!0,{storage:"any",default:n?0:void 0,name:"x"},e),y:t.createAttribute(!0,{storage:"any",default:n?0:void 0,name:"y"},e),radius:t.createAttribute(!0,{storage:i,default:n?5:void 0,name:"radius"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"scaled":void 0,name:"scalingMethod"},e),color:t.createAttribute(!0,{storage:i,default:n?hR:void 0,name:"color"},e),opacity:t.createAttribute(!0,{storage:i,default:n?k6:void 0,name:"opacity"},e),shape:t.createAttribute(!0,{storage:i,default:n?I6:void 0,name:"shape"},e),layer:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"layer"},e),detectable:t.createAttribute(!0,{storage:i,default:!!n||void 0,name:"detectable"},e),draggable:t.createAttribute(!0,{storage:i,default:!!n||void 0,name:"draggable"},e),layoutable:t.createAttribute(!0,{storage:i,default:!!n||void 0,name:"layoutable"},e),innerStroke:{width:t.createAttribute(!0,{storage:i,default:n?A1:void 0,name:"innerStroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:"innerStroke.scalingMethod"},e),color:t.createAttribute(!0,{storage:i,default:n?cR:void 0,name:"innerStroke.color"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Wv:void 0,name:"innerStroke.minVisibleSize"},e)},outerStroke:{width:t.createAttribute(!0,{storage:i,default:n?T1:void 0,name:"outerStroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:"outerStroke.scalingMethod"},e),color:t.createAttribute(!0,{storage:i,default:n?gR:void 0,name:"outerStroke.color"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Hv:void 0,name:"outerStroke.minVisibleSize"},e)},badges:{topLeft:{color:t.createAttribute(!0,{storage:i,default:n?Od:void 0,name:"badges.topLeft.color"},e),scale:t.createAttribute(!0,{storage:i,default:n?.45:void 0,name:"badges.topLeft.scale"},e),positionScale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.topLeft.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Sg:void 0,name:"badges.topLeft.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.topLeft.image.url"},e),scale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.topLeft.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:i,default:n?Dd:void 0,name:"badges.topLeft.stroke.color"},e),width:t.createAttribute(!0,{storage:i,default:n?nu:void 0,name:"badges.topLeft.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:"badges.topLeft.stroke.scalingMethod"},e)},text:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.topLeft.text.content"},e),color:t.createAttribute(!0,{storage:i,default:n?zd:void 0,name:"badges.topLeft.text.color"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"badges.topLeft.text.font"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"badges.topLeft.text.style"},e),scale:t.createAttribute(!0,{storage:i,default:n?.5:void 0,name:"badges.topLeft.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.topLeft.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.topLeft.text.paddging.top"},e)}},topRight:{color:t.createAttribute(!0,{storage:i,default:n?Od:void 0,name:"badges.topRight.color"},e),scale:t.createAttribute(!0,{storage:i,default:n?.45:void 0,name:"badges.topRight.scale"},e),positionScale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.topRight.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Sg:void 0,name:"badges.topRight.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.topRight.image.url"},e),scale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.topRight.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:i,default:n?Dd:void 0,name:"badges.topRight.stroke.color"},e),width:t.createAttribute(!0,{storage:i,default:n?nu:void 0,name:"badges.topRight.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:"badges.topRight.stroke.scalingMethod"},e)},text:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.topRight.text.content"},e),color:t.createAttribute(!0,{storage:i,default:n?zd:void 0,name:"badges.topRight.text.color"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"badges.topRight.text.font"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"badges.topRight.text.style"},e),scale:t.createAttribute(!0,{storage:i,default:n?.5:void 0,name:"badges.topRight.text.scale"},e),paddingTop:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.topRight.text.paddging.left"},e),paddingLeft:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.topRight.text.paddging.top"},e)}},bottomLeft:{color:t.createAttribute(!0,{storage:i,default:n?Od:void 0,name:"badges.bottomLeft.color"},e),scale:t.createAttribute(!0,{storage:i,default:n?.45:void 0,name:"badges.bottomLeft.scale"},e),positionScale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.bottomLeft.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Sg:void 0,name:"badges.bottomLeft.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.bottomLeft.image.url"},e),scale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.bottomLeft.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:i,default:n?Dd:void 0,name:"badges.bottomLeft.stroke.color"},e),width:t.createAttribute(!0,{storage:i,default:n?nu:void 0,name:"badges.bottomLeft.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:e?"badges.bottomLeft.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.bottomLeft.text.content"},e),color:t.createAttribute(!0,{storage:i,default:n?zd:void 0,name:"badges.bottomLeft.text.color"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"badges.bottomLeft.text.font"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"badges.bottomLeft.text.style"},e),scale:t.createAttribute(!0,{storage:i,default:n?.5:void 0,name:"badges.bottomLeft.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.bottomLeft.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.bottomLeft.text.paddging.top"},e)}},bottomRight:{color:t.createAttribute(!0,{storage:i,default:n?Od:void 0,name:"badges.bottomRight.color"},e),scale:t.createAttribute(!0,{storage:i,default:n?.45:void 0,name:"badges.bottomRight.scale"},e),positionScale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.bottomRight.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?Sg:void 0,name:"badges.bottomRight.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.bottomRight.image.url"},e),scale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"badges.bottomRight.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:i,default:n?Dd:void 0,name:"badges.bottomRight.stroke.color"},e),width:t.createAttribute(!0,{storage:i,default:n?nu:void 0,name:"badges.bottomRight.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:e?"badges.bottomRight.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"badges.bottomRight.text.content"},e),color:t.createAttribute(!0,{storage:i,default:n?zd:void 0,name:"badges.bottomRight.text.color"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"badges.bottomRight.text.font"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"badges.bottomRight.text.style"},e),scale:t.createAttribute(!0,{storage:i,default:n?.5:void 0,name:"badges.bottomRight.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.bottomRight.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"badges.bottomRight.text.paddging.top"},e)}}},halo:{color:t.createAttribute(!0,{storage:i,default:n?mR:void 0,name:"halo.color"},e),width:t.createAttribute(!0,{storage:i,default:n?C1:void 0,name:"halo.width"},e),scalingMethod:t.createAttribute(!0,{storage:i,default:n?"fixed":void 0,name:"halo.scalingMethod"},e),strokeColor:t.createAttribute(!0,{storage:i,default:n?pR:void 0,name:"halo.strokeColor"},e),strokeWidth:t.createAttribute(!0,{storage:i,default:n?L1:void 0,name:"halo.strokeWidth"},e),clustering:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"halo.clustering"},e),hideNonAdjacentEdges:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"halo.hideNonAdjacentEdges"},e)},pulse:{enabled:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"pulse.enabled"},e),duration:t.createAttribute(!0,{storage:i,default:n?yR:void 0,name:"pulse.duration"},e),interval:t.createAttribute(!0,{storage:i,default:n?vR:void 0,name:"pulse.interval"},e),startColor:t.createAttribute(!0,{storage:i,default:n?SR:void 0,name:"pulse.startColor"},e),endColor:t.createAttribute(!0,{storage:i,default:n?ER:void 0,name:"pulse.endColor"},e),width:t.createAttribute(!0,{storage:i,default:n?wR:void 0,name:"pulse.width"},e),startRatio:t.createAttribute(!0,{storage:i,default:n?xR:void 0,name:"pulse.startRatio"},e),endRatio:t.createAttribute(!0,{storage:i,default:n?bR:void 0,name:"pulse.endRatio"},e)},icon:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"icon.content"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"icon.font"},e),color:t.createAttribute(!0,{storage:i,default:n?_R:void 0,name:"icon.color"},e),scale:t.createAttribute(!0,{storage:i,default:n?.7:void 0,name:"icon.scale"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"icon.style"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?12:void 0,name:"icon.minVisibleSize"},e)},image:{url:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"image.url"},e),scale:t.createAttribute(!0,{storage:i,default:n?1:void 0,name:"image.scale"},e),fit:t.createAttribute(!0,{storage:i,default:!!n||void 0,name:"image.fit"},e),tile:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"image.tile"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?12:void 0,name:"image.minVisibleSize"},e)},outline:{enabled:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"outline.enabled"},e),color:t.createAttribute(!0,{storage:i,default:n?fR:void 0,name:"outline.color"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?12:void 0,name:"outline.minVisibleSize"},e)},text:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"text.content"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"text.font"},e),color:t.createAttribute(!0,{storage:i,default:n?ea:void 0,name:"text.color"},e),size:t.createAttribute(!0,{storage:i,default:n?ku:void 0,name:"text.size"},e),scale:t.createAttribute(!0,{storage:i,default:n?.1:void 0,name:"text.scale"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"text.style"},e),align:t.createAttribute(!0,{storage:i,default:n?"center":void 0,name:"text.align"},e),margin:t.createAttribute(!0,{storage:i,default:n?S1:void 0,name:"text.margin"},e),padding:t.createAttribute(!0,{storage:i,default:n?Vh:void 0,name:"text.padding"},e),backgroundColor:t.createAttribute(!0,{storage:i,default:n?Pm:void 0,name:"text.backgroundColor"},e),tip:t.createAttribute(!0,{storage:i,default:n?T6:void 0,name:"text.tip"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?24:void 0,name:"text.minVisibleSize"},e),scaling:t.createAttribute(!0,{storage:i,default:!n&&void 0,name:"text.scaling"},e),position:t.createAttribute(!0,{storage:i,default:n?"bottom":void 0,name:"text.position"},e),maxLineLength:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"text.maxLineLength"},e),truncateLength:t.createAttribute(!0,{storage:i,default:n?0:void 0,name:"text.truncateLength"},e),secondary:{content:t.createAttribute(!0,{storage:i,default:n?null:void 0,name:"text.secondary.content"},e),font:t.createAttribute(!0,{storage:i,default:n?Si:void 0,name:"text.secondary.font"},e),color:t.createAttribute(!0,{storage:i,default:n?ea:void 0,name:"text.secondary.color"},e),size:t.createAttribute(!0,{storage:i,default:n?w1:void 0,name:"text.secondary.size"},e),scale:t.createAttribute(!0,{storage:i,default:n?.08:void 0,name:"text.secondary.scale"},e),style:t.createAttribute(!0,{storage:i,default:n?"normal":void 0,name:"text.secondary.style"},e),align:t.createAttribute(!0,{storage:i,default:n?"center":void 0,name:"text.secondary.align"},e),margin:t.createAttribute(!0,{storage:i,default:n?C6:void 0,name:"text.secondary.margin"},e),padding:t.createAttribute(!0,{storage:i,default:n?Vh:void 0,name:"text.secondary.padding"},e),backgroundColor:t.createAttribute(!0,{storage:i,default:n?Pm:void 0,name:"text.secondary.backgroundColor"},e),minVisibleSize:t.createAttribute(!0,{storage:i,default:n?24:void 0,name:"text.secondary.minVisibleSize"},e)}}}}var d8=class{constructor(t){this.nodes=new wT(t,!0,u8),this.edges=new wT(t,!1,l8)}setNodeDefaultAttributes(t){this.nodes.setDefaultAttributes(t)}setEdgeDefaultAttributes(t){this.edges.setDefaultAttributes(t)}getFlexArrays(){return{nodes:{current:this.nodes.getAttributeFlexArrays(),previous:this.nodes.getPrevAttributeFlexArrays()},edges:{current:this.edges.getAttributeFlexArrays(),previous:this.edges.getPrevAttributeFlexArrays()}}}redrawAll(){this.nodes.redrawAll(),this.edges.redrawAll()}clear(){this.nodes.clear(),this.edges.clear()}redrawElements(t){this._fetch(t).redrawElements(t)}getAnimationInformation(t){return this._fetch(t).getAnimationInformation(t)}redrawNodes(t){this.nodes.redrawElements(t)}getUsedAttributes(t,e){return this._fetch(e).getUsedAttributeNames(e.isNode?t.nodes:t.edges)}startUpdate(){this.nodes.startUpdate(),this.edges.startUpdate()}notifyDestroyed(t){this.nodes.notifyLayerDestroyed(t.nodes),this.edges.notifyLayerDestroyed(t.edges)}prepareUpdate(t){this.nodes.prepareFlexArraysUpdate(t.nodes),this.edges.prepareFlexArraysUpdate(t.edges)}onUpdate(t){this.nodes.updateFlexArrays(t.nodes),this.edges.updateFlexArrays(t.edges)}afterLayersUpdate(){this.nodes.endUpdate(),this.edges.endUpdate()}getAndResetElementsToRedraw(){return{nodes:this.nodes.getAndResetElementsToRedraw(),edges:this.edges.getAndResetElementsToRedraw()}}getAndResetElementsUpdated(){const t=this.nodes,e=this.edges;return{nodes:t.getAndResetElementsUpdated(),edges:e.getAndResetElementsUpdated(),nodeAttributesSet:t.getUpdatedAttributesSet(),nodeAttributes:t.getAndResetAttributesUpdated(),edgeAttributes:e.getAndResetAttributesUpdated()}}setAnimationAttributes({nodes:t,edges:e},n){this.nodes.setAnimationAttributes(t,n),this.edges.setAnimationAttributes(e,n)}resetAnimationAttributes({nodes:t,edges:e}){this.nodes.resetAnimationAttributes(t),this.edges.resetAnimationAttributes(e)}setLastOutput(t,e){this.nodes.setLastFlexArrays(t),this.edges.setLastFlexArrays(e)}getCurrentInput(){const t=nn(this.nodes.getDefaultFlexArrays()),e=nn(this.edges.getDefaultFlexArrays());return{currentNodeFlexArrays:t,currentEdgeFlexArrays:e,allNodeAttributePaths:Za(t),allEdgeAttributePaths:Za(e)}}initializeLayer(t,e,n){t.nodes.allAttributePaths=e,t.edges.allAttributePaths=n,t.nodes.formattedDependencies=i8(t.nodes),t.edges.formattedDependencies=s8(t.edges),t.nodes.formattedOutput={attributes:ET(t.nodes),tags:t.tag?[t.tag]:[]},t.edges.formattedOutput={attributes:ET(t.edges),tags:t.tag?[t.tag]:[]},t.nodes.redrawAdjacentEdges=t.nodes.formattedOutput.attributes.some(i=>A6[i]),t.initialized=!0}connectLayerInputOutput(t,e,n){const i=t.nodes.formattedOutput,s=t.edges.formattedOutput;for(const r of i.attributes){const o=Qe(e,r),a=Qe(t.nodes.outputFlexArrays,r);a.setFallback(o),$r(e,r,a)}for(const r of s.attributes){const o=Qe(n,r),a=Qe(t.edges.outputFlexArrays,r);a.setFallback(o),$r(n,r,a)}}setupLayerDependencies(t,e){if(t===e)return;const n=t.priority,i=e.priority,s=t.nodes.formattedOutput,r=t.edges.formattedOutput,o=e.nodes.formattedDependencies,a=e.edges.formattedDependencies;Qs(t.depsNodeSelf,e,s,o.self,n,i),Qs(t.depsNodeAdjacentNodes,e,s,o.adjacentNodes,n,i),Qs(t.depsNodeAdjacentEdges,e,r,a.extremities,n,i),Qs(t.depsNodeAllNodes,e,s,o.allNodes,n,i),Qs(t.depsNodeAllEdges,e,r,a.allNodes,n,i),Qs(t.depsEdgeSelf,e,r,a.self,n,i),Qs(t.depsEdgeExtremities,e,s,o.adjacentEdges,n,i),Qs(t.depsEdgeParallelEdges,e,r,a.parallelEdges,n,i),Qs(t.depsEdgeAllNodes,e,s,o.allEdges,n,i),Qs(t.depsEdgeAllEdges,e,r,a.allEdges,n,i)}createAttributeLayerData(t,e,n,{tag:i,onBeforeUpdate:s,standaloneSelectors:r}){const o=!!r;return{index:-1,id:e,name:t,tag:i||null,priority:0,depsNodeSelf:[],depsNodeAdjacentNodes:[],depsNodeAdjacentEdges:[],depsNodeAllNodes:[],depsNodeAllEdges:[],depsEdgeSelf:[],depsEdgeExtremities:[],depsEdgeParallelEdges:[],depsEdgeAllNodes:[],depsEdgeAllEdges:[],initialized:!1,onBeforeUpdate:s,nodes:{type:"node",name:t,standaloneSelector:o,toUpdate:new Im({graph:n,isNode:!0,includeRemovedElements:!1}),outputFlexArrays:this.nodes.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null},edges:{type:"edge",name:t,standaloneSelector:o,toUpdate:new Im({graph:n,isNode:!1,includeRemovedElements:!1}),outputFlexArrays:this.edges.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null}}}setAttributeValues(t,e,n,i,s){this._fetch(e).setAttributeValues(t,e,n,i,s)}getAttributeValues(t,e,n,i){return this._fetch(t).getAttributeValues(t,e,n,i)}_fetch(t){return t.isNode?this.nodes:this.edges}},h8=(t,e)=>new g6(t,e),c8=class{constructor(t,{graph:e,dom:n}){this._layerIdCounter=0,this._layers=[],this._destroyedLayers=[],this._layersNeedUpdate=!1,this._updateOngoing=!1,this._needUpdate=!1,this._ogma=t,this._graph=e,this._dom=n,this._emptySubgraph={nodes:t.nodeList(),edges:t.edgeList()},this._textHiddenSet=new gc(this._graph,"textHidden"),this._layerController=new d8(this._graph)}_getLayerById(t){for(let e=0;e<this._layers.length;++e){const n=this._layers[e];if(n.id===t)return n.index=e,n}throw new Error("usage of a destroyed style rule or class")}setDefaultAttributes(t,e){this._layerController.setNodeDefaultAttributes(t),this._layerController.setEdgeDefaultAttributes(e)}getFlexArrays(){return this._layerController.getFlexArrays()}clear(){this._updateOngoing=!1,this._needUpdate=!1,this._destroyedLayers=[],this._layerController.clear(),this.updateAllForAllAttributeLayers()}redrawElements(t){t.size&&(this._layerController.redrawElements(t),this._dom.refresh())}redrawAll(){this._layerController.redrawAll(),this._dom.refresh()}_triggerUpdate(){this._needUpdate=!0,this._dom.refresh()}_reconstructAttributeLayersIfNecessary(){return!!this._layersNeedUpdate&&(this._reconstructAttributeLayers(),this._layersNeedUpdate=!1,this._dom.refresh(),!0)}getAnimationInformation(t){return this._layerController.getAnimationInformation(t)}update(){if(!this._needUpdate||this._updateOngoing||!this._ogma._token)return!1;this._reconstructAttributeLayersIfNecessary(),this._updateOngoing=!0,this._layerController.startUpdate();for(const t of this._destroyedLayers)t.initialized&&this._layerController.notifyDestroyed(t);for(const t of this._layers)this._layerController.prepareUpdate(t),typeof t.onBeforeUpdate=="function"&&t.onBeforeUpdate(t,this,this._layerController),this._layerController.onUpdate(t);return this._layerController.afterLayersUpdate(),this._updateOngoing=!1,this._needUpdate=!1,!0}setAttributeLayerValues(t,e,n,i){const s=this._getLayerById(t),r=e.isNode?s.nodes:s.edges;this._reconstructAttributeLayersIfNecessary(),this._layerController.setAttributeValues(r,e,n,i,s),this._updateElementsForAttributeLayers([s],e)}getAttributeLayerFlexArrays(t){const e=this._getLayerById(t);return{nodes:e.nodes.outputFlexArrays,edges:e.edges.outputFlexArrays}}getUsedAttributeLayerAttributes(t,e){const n=this._getLayerById(t);return this._layerController.getUsedAttributes(n,e)}getUpdatedElements(){return{elementsToRedraw:this._layerController.getAndResetElementsToRedraw(),elementsUpdated:this._layerController.getAndResetElementsUpdated()}}addAttributeLayer(t){const{name:e,layerFactory:n=h8}=t;if(!e)throw new Error("Attribute layer must have a name");if(e&&this._layers.find(s=>s.name===e))throw new Error(`attribute layer with name "${t.name}" already exists`);const i=this._layerController.createAttributeLayerData(e,++this._layerIdCounter,this._graph,t);return this._layers.push(i),this._updateLayer(i,t),n(this,this._layerIdCounter)}_reconstructAttributeLayers(){this._layers.sort((s,r)=>s.priority-r.priority);const{currentNodeFlexArrays:t,currentEdgeFlexArrays:e,allNodeAttributePaths:n,allEdgeAttributePaths:i}=this._layerController.getCurrentInput();for(const s of this._layers)this._layerController.initializeLayer(s,n,i);for(const s of this._layers){s.nodes.inputFlexArrays=nn(t),s.edges.inputFlexArrays=nn(e),s.depsNodeSelf=[],s.depsNodeAdjacentNodes=[],s.depsNodeAdjacentEdges=[],s.depsNodeAllNodes=[],s.depsNodeAllEdges=[],s.depsEdgeSelf=[],s.depsEdgeExtremities=[],s.depsEdgeParallelEdges=[],s.depsEdgeAllNodes=[],s.depsEdgeAllEdges=[],s.nodes.toUpdate.addAll(),s.edges.toUpdate.addAll(),this._layerController.connectLayerInputOutput(s,t,e);for(const r of this._layers)this._layerController.setupLayerDependencies(s,r)}this._layerController.setLastOutput(t,e);for(const s of this._layers)s.nodes.needAdjacentElements=s.nodes.redrawAdjacentEdges||s.depsNodeAdjacentNodes.length>0||s.depsNodeAdjacentEdges.length>0,s.edges.needAdjacentElements=s.depsEdgeExtremities.length>0||s.depsEdgeParallelEdges.length>0}_updateLayer(t,{priority:e,fullOverwrite:n,nodeAttributes:i,nodeSelector:s,nodeContext:r,nodeDependencies:o,nodeOutput:a,edgeAttributes:l,edgeSelector:d,edgeContext:h,edgeDependencies:c,edgeOutput:g}={}){i!==void 0&&(t.nodes.attributes=n?i:am(t.nodes.attributes,i)),s!==void 0&&(t.nodes.selector=s),r!==void 0&&(t.nodes.context=r),o!==void 0&&(t.nodes.dependencies=o),a!==void 0&&(t.nodes.output=a),l!==void 0&&(t.edges.attributes=n?l:am(t.edges.attributes,l)),d!==void 0&&(t.edges.selector=d),h!==void 0&&(t.edges.context=h),c!==void 0&&(t.edges.dependencies=c),g!==void 0&&(t.edges.output=g),e!==void 0&&(t.priority=e),this._triggerLayerUpdate()}_triggerLayerUpdate(){this._layersNeedUpdate=!0,this._triggerUpdate()}updateAllForAttributeLayer(t){const e=this._getLayerById(t);this._updateAllForAttributeLayer(e)}updateAllForAllAttributeLayers(){for(const t of this._layers)this._updateAllForAttributeLayer(t)}_updateAllForAttributeLayer(t,e=!0,n=!0){if(e&&!t.nodes.toUpdate.isFull()){t.nodes.toUpdate.addAll();for(const i of t.depsNodeSelf)this._updateAllForAttributeLayer(i,!0,!1);for(const i of t.depsNodeAdjacentNodes)this._updateAllForAttributeLayer(i,!0,!1);for(const i of t.depsNodeAdjacentEdges)this._updateAllForAttributeLayer(i,!1,!0);for(const i of t.depsNodeAllNodes)this._updateAllForAttributeLayer(i,!0,!1);for(const i of t.depsNodeAllEdges)this._updateAllForAttributeLayer(i,!1,!0)}if(n&&!t.edges.toUpdate.isFull()){t.edges.toUpdate.addAll();for(const i of t.depsEdgeSelf)this._updateAllForAttributeLayer(i,!1,!0);for(const i of t.depsEdgeExtremities)this._updateAllForAttributeLayer(i,!0,!1);for(const i of t.depsEdgeParallelEdges)this._updateAllForAttributeLayer(i,!1,!0);for(const i of t.depsEdgeAllNodes)this._updateAllForAttributeLayer(i,!0,!1);for(const i of t.depsEdgeAllEdges)this._updateAllForAttributeLayer(i,!1,!0)}this._triggerUpdate()}updateElementsForAttributeLayer(t,e){const n=this._getLayerById(t);this._updateElementsForAttributeLayers([n],e)}updateForAllAttributeLayers(t){this._updateElementsForAttributeLayers(this._layers,t)}_updateElementsForAttributeLayers(t,e){let n=this._emptySubgraph;if(e.isNode){for(const i of t)if(!i.nodes.toUpdate.isFull()){i.nodes.needAdjacentElements&&(n=n===this._emptySubgraph?e.fastGetAdjacentElements():n),i.nodes.toUpdate.add(e);for(const s of i.depsNodeSelf)s.nodes.toUpdate.add(e);for(const s of i.depsNodeAdjacentNodes)s.nodes.toUpdate.add(n.nodes);for(const s of i.depsNodeAdjacentEdges)s.edges.toUpdate.add(n.edges);for(const s of i.depsNodeAllNodes)this._updateAllForAttributeLayer(s,!0,!1);for(const s of i.depsNodeAllEdges)this._updateAllForAttributeLayer(s,!1,!0);i.nodes.redrawAdjacentEdges&&this._layerController.redrawElements(n.edges)}}else for(const i of t)if(!i.edges.toUpdate.isFull()){i.edges.needAdjacentElements&&(n=n===this._emptySubgraph?e.fastGetAdjacentElements():n),i.edges.toUpdate.add(e);for(const s of i.depsEdgeSelf)s.edges.toUpdate.add(e);for(const s of i.depsEdgeExtremities)s.nodes.toUpdate.add(n.nodes);for(const s of i.depsEdgeParallelEdges)s.edges.toUpdate.add(n.edges);for(const s of i.depsEdgeAllNodes)this._updateAllForAttributeLayer(s,!0,!1);for(const s of i.depsEdgeAllEdges)this._updateAllForAttributeLayer(s,!1,!0)}this._triggerUpdate()}destroyAttributeLayer(t){const e=this._getLayerById(t);this._destroyedLayers.push(e),this._layers.splice(e.index,1),this._triggerLayerUpdate()}updateAttributeLayer(t,e){const n=this._getLayerById(t);this._updateLayer(n,e)}getAttributeLayerDefinition(t){const e=this._getLayerById(t),{priority:n,nodes:i,edges:s}=e;return{priority:n,nodeAttributes:i.attributes,nodeSelector:i.selector,nodeContext:i.context,nodeDependencies:i.dependencies,nodeOutput:i.output,edgeAttributes:s.attributes,edgeSelector:s.selector,edgeContext:s.context,edgeDependencies:s.dependencies,edgeOutput:s.output}}getAttributeValues(t,e,n,i){return this.update(),this._layerController.getAttributeValues(t,e,n,i)}setAnimationAttributes(t,e){return this._layerController.setAnimationAttributes(t,e)}resetAnimationAttributes(t){return this._layerController.resetAnimationAttributes(t)}setTextHidden(t,e){const n=this._textHiddenSet.addOrRemoveElements(t,e);this.redrawElements(n)}resetTextHidden(){const{nodes:t,edges:e}=this._textHiddenSet.getElements();this._textHiddenSet.clear(),this._layerController.redrawElements(t),this._layerController.redrawElements(e)}getUsedNodeAttributes(){return this._layerController.nodes.getUsedAttributes()}getUsedEdgeAttributes(){return this._layerController.edges.getUsedAttributes()}interpolateAttributes(t){const e=ci(),n=this._ogma.modules.graphics.getAttributesManager(),i=this._layerController,s=t.isNode?n.getUsedNodeAttributes():n.getUsedEdgeAttributes(),{animationDuration:r,animationEasing:o,animationStart:a}=i.getFlexArrays().nodes.current,l=r.getMultiple(t._indexes),d=o.getMultiple(t._indexes),h=a.getMultiple(t._indexes),c=[];for(let g=0;g<t.size;g++){const m={};s.forEach(_=>{const p=typeof _=="string"?_:_.join("."),v=Qe(i.getFlexArrays().nodes.previous,_),x=Qe(i.getFlexArrays().nodes.current,_);if(!x)return;const b=HM(e,h[g],l[g],d[g]);isNaN(b)?m[p]=x.get(t._indexes[g]):p.match(/color/gi)?m[p]=Rd(v.get(t._indexes[g]),x.get(t._indexes[g]),b,b):m[p]=Te(v.get(t._indexes[g]),x.get(t._indexes[g]),b)}),c.push(m)}return c}},g8=1e-12;function AT(t){return((t=Math.exp(t))+1/t)/2}function f8(t){return((t=Math.exp(t))-1/t)/2}function m8(t){return((t=Math.exp(2*t))-1)/(t+1)}var p8=function t(e,n,i){function s(r,o){var a,l,d=r[0],h=r[1],c=r[2],g=o[0],m=o[1],_=o[2],p=g-d,v=m-h,x=p*p+v*v;if(x<g8)l=Math.log(_/c)/e,a=function(P){return[d+P*p,h+P*v,c*Math.exp(e*P*l)]};else{var b=Math.sqrt(x),E=(_*_-c*c+i*x)/(2*c*n*b),S=(_*_-c*c-i*x)/(2*_*n*b),A=Math.log(Math.sqrt(E*E+1)-E),T=Math.log(Math.sqrt(S*S+1)-S);l=(T-A)/e,a=function(P){var k=P*l,I=AT(A),R=c/(n*b)*(I*m8(e*k+A)-f8(A));return[d+R*p,h+R*v,c*I/AT(e*k+A)]}}return a.duration=1e3*l*e/Math.SQRT2,a}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o;return t(o,a,a*a)},s}(Math.SQRT2,2,4),_8="cubicOut",y8=({graphWidth:t,graphHeight:e,viewWidth:n,viewHeight:i})=>.2*Math.min(n/t,i/e),v8=({smallestNodeSize:t,viewWidth:e,viewHeight:n})=>t===1/0?1/0:Math.min(e,n)/t*.5;function x8(t,e,n){return e===void 0?b8(t):e==="alt"?t.altKey:e==="shift"?t.shiftKey:e==="space"?n.isPressed("space"):void 0}function b8(t){return!t.altKey&&(U$?t.metaKey:t.ctrlKey)&&!t.shiftKey}var Xv=Math.SQRT2,Zv=.15,E8=class extends ee{constructor(t,e){super(t),this._zooming=!1,this.debug=!1,this._smoothZoom=pp((n,i,s)=>{const r=this._modules.settings,o=r.get("interactions.zoom.duration"),a=r.get("interactions.zoom.easing"),l=this._modules.camera.getZoom(),d={duration:o,easing:a};this._zooming||(this._zooming=!0,this._updateVisibility("zoom",!0));const h=r.get("interactions.zoom.speed")||Zv;let c=OM(n,h);n<0&&c!==0&&(c=1/c);const g=l*c;this._modules.camera.setZoom(g,d,{x:i,y:s}).then(()=>{this._zooming&&(this._zooming=!1,this._updateVisibility("zoom",!1))})},Yk),this.debug=e}onMounted(){const t=this._modules.settings;t.register("interactions.zoom.enabled",!0),t.register("interactions.zoom.onDoubleClick",!1),t.register("interactions.zoom.duration",150),t.register("interactions.zoom.modifier",Xv),t.register("interactions.zoom.speed",Zv),t.register("interactions.zoom.easing",_8),t.register("interactions.zoom.minValue",this.debug?null:y8),t.register("interactions.zoom.maxValue",this.debug?null:v8),t.register("interactions.zoom.hideNodes",!1),t.register("interactions.zoom.hideEdges",!1),t.register("interactions.zoom.hideNodeTexts",!1),t.register("interactions.zoom.hideEdgeTexts",!1),t.register("interactions.zoom.scrollToPan",!1),t.register("interactions.zoom.metaKey",void 0),t.register("interactions.pan.enabled",!0),t.register("interactions.pan.hideNodes",!1),t.register("interactions.pan.hideEdges",!1),t.register("interactions.pan.hideNodeTexts",!1),t.register("interactions.pan.hideEdgeTexts",!1),t.register("interactions.rotation.enabled",!0),t.register("interactions.rotation.hideNodes",!1),t.register("interactions.rotation.hideEdges",!1),t.register("interactions.rotation.hideNodeTexts",!1),t.register("interactions.rotation.hideEdgeTexts",!1),t.register("interactions.gesture.enabled",!0),t.register("interactions.gesture.hideNodes",!1),t.register("interactions.gesture.hideEdges",!1),t.register("interactions.gesture.hideNodeTexts",!1),t.register("interactions.gesture.hideEdgeTexts",!1),this._setupInteractions()}_setupInteractions(){this._modules.interactions.onMouseWheel({priority:"zoom",check:()=>!!this._modules.settings.get("interactions.zoom.enabled"),handler:({x:t,y:e,delta:n,dx:i,dy:s,domEvent:r})=>{const o=i%1!=0||s%1!=0,a=this._modules.settings;!a.get("interactions.zoom.scrollToPan")||x8(r,a.get("interactions.zoom.metaKey"),this._modules.keyboard)||o?this._smoothZoom(n,t,e):this._modules.camera.move({x:i,y:s})}}),this._modules.interactions.onDoubleClick({priority:"zoom",check:()=>{const t=this._modules.settings.get("interactions.zoom.enabled"),e=this._modules.settings.get("interactions.zoom.onDoubleClick");return!(!t||!e)},handler:({x:t,y:e})=>this._smoothZoom(1,t,e)}),this._modules.interactions.onDrag({priority:"panning",disableDetection:!0,check:({button:t})=>{const e=!!this._modules.settings.get("interactions.pan.enabled");return t==="left"&&e},onStart:()=>this._updateVisibility("pan",!0),onProgress:({dx:t,dy:e})=>this._modules.camera.move({x:-t,y:-e}),onStop:()=>this._updateVisibility("pan",!1)}),this._modules.interactions.onDrag({priority:"rotation",disableDetection:!0,check:({button:t,domEvent:e})=>(t==="right"||e&&e.buttons===2)&&!!this._modules.settings.get("interactions.rotation.enabled"),onStart:({x:t,y:e})=>{this._rotationStart={x:t,y:e},this._updateVisibility("rotation",!0)},onProgress:({x:t,y:e})=>this._rotate({x:t,y:e}),onStop:()=>this._updateVisibility("rotation",!1)}),this._modules.interactions.onGesture({priority:"gesture",disableDetection:!0,check:()=>!!this._modules.settings.get("interactions.gesture.enabled"),onStart:()=>this._updateVisibility("gesture",!0),onProgress:({dx:t,dy:e,rotation:n,scale:i,x:s,y:r})=>{this._modules.settings.get("interactions.rotation.enabled")&&this._modules.camera.rotate(-n),this._modules.camera.zoomIn({modifier:i},{x:s,y:r}),this._modules.camera.move({x:-t,y:-e})},onStop:()=>this._updateVisibility("gesture",!0)})}_rotate({x:t,y:e}){const{width:n,height:i}=this._modules.camera.getSize(),s=n/2,r=i/2,o=this._rotationStart.x-s,a=this._rotationStart.y-r,l=t-s,d=e-r,h=Math.atan2(a,o)-Math.atan2(d,l);this._rotationStart.x=t,this._rotationStart.y=e,this._modules.camera.rotate(h)}_updateVisibility(t,e){const n=!e,i=this._modules.settings,s=i.get(`interactions.${t}.hideNodes`),r=i.get(`interactions.${t}.hideEdges`),o=i.get(`interactions.${t}.hideNodeTexts`),a=i.get(`interactions.${t}.hideEdgeTexts`);s&&this._modules.graphics.setNodesVisibility(n),o&&this._modules.graphics.setNodeTextsVisibility(n),r&&this._modules.graphics.setEdgesVisibility(n),a&&this._modules.graphics.setEdgeTextsVisibility(n)}},TT=1e-8,CT=1e8,vy={duration:0,startAfter:0,ignoreZoomLimits:!1,callback:he,easing:"quadraticOut"};function kg(t){return Math.abs(t)<1e-9}var S8=80,w8=class PR extends ee{constructor(){super(...arguments),this._minZoom=TT,this._maxZoom=CT,this._timeout=0}onMounted(){this._reset(),this._modules.settings.register("minZoom",TT,e=>{this._minZoom=e,this._zoom<e&&(this._zoom=e,this._modules.events.fire("move"))}),this._modules.settings.register("maxZoom",CT,e=>{this._maxZoom=e,this._zoom>e&&(this._zoom=e,this._modules.events.fire("move"))}),this._modules.events.on("setContainer",()=>{this._reset(),this._modules.events.fire("move")}).on("resize",()=>{this._reloadDimensions(),this._modules.events.fire("move")})}get x(){return this._x}get y(){return this._y}get zoom(){return this._zoom}get angle(){return this._angle}get width(){return this._dimensions.width}get height(){return this._dimensions.height}moveEnd(e){this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._modules.events.fire("viewChanged",{type:e})},S8)}getSize(){return{width:this._dimensions.width,height:this._dimensions.height}}getCenter(){return{x:this._x,y:this._y}}setCenter({x:e,y:n},i){const s=this._x,r=this._y,o=e-this._x,a=n-this._y;return kg(o)&&kg(a)?Promise.resolve():new Promise(l=>{this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const d=this._modules.animations.play(h=>{this._x=s+o*h,this._y=r+a*h,this._modules.events.fire("move").fire("pan")},ue(wt(wt({},vy),i),{callback:()=>this.moveEnd("pan"),resolve:l}));d&&(this._moveAnimation=d)})}move({x:e,y:n},i){const s=LT({x:e,y:n},this._zoom,this._sinAngle,this._cosAngle);return this.setCenter({x:this._x+s.x,y:this._y+s.y},i)}getZoom(){return this._zoom}setZoom(e,n,i={x:void 0,y:void 0}){const{x:s,y:r}=i;let o=ws(e,this._minZoom,this._maxZoom);return n&&n.ignoreZoomLimits||(o=this._applyZoomLimits(o)),kg(this._zoom-o)?Promise.resolve():new Promise(a=>{const l=ue(wt(wt({},vy),n),{callback:()=>this.moveEnd("zoom"),resolve:a}),d=this._dimensions.width/2,h=this._dimensions.height/2,c=this._zoom,g=d/c-d/o;if(s!==void 0&&r!==void 0){const _=(s-d)/c-(s-d)/o,p=(r-h)/c-(r-h)/o,v=this._cosAngle,x=this._sinAngle,b=v*_-x*p,E=x*_+v*p;this.setCenter({x:this._x+b,y:this._y+E},n)}this._zoomAnimation&&this._modules.animations.cancel(this._zoomAnimation),this._modules.dom.afterNextFrame().then(()=>{this._modules.events.fire("zoomStart",{duration:l.duration,easing:l.easing,startZoom:c,endZoom:o})});const m=this._modules.animations.play(_=>{this._zoom=d/(d/c-g*_),this._modules.events.fire("move").fire("zoom")},l);m&&(this._zoomAnimation=m)})}_applyZoomLimits(e){const n=this._modules.settings.get("interactions.zoom.minValue"),i=this._modules.settings.get("interactions.zoom.maxValue"),{minScaledSize:s,maxScaledSize:r,width:o,height:a,cx:l}=this._modules.locate.getGraphBoundingBox(),d=this._zoom,h=this.getSize();let c=e;if(!isNaN(l)){const g={smallestNodeSize:s,biggestNodeSize:r,graphWidth:o+r,graphHeight:a+r,viewWidth:h.width,viewHeight:h.height},m=n&&n(g),_=i&&i(g);PT(m)&&c<m?c<d&&(c=Math.min(d,m)):PT(_)&&c>_&&c>d&&(c=Math.max(d,_))}return c}zoomIn(e,n={x:void 0,y:void 0}){let i=1;return e===void 0&&(e={}),typeof e=="number"&&(e={modifier:e}),i=typeof e.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Xv:e.modifier,this.setZoom(this._zoom*i,e,n)}moveToBounds(e,n={}){const i=this._modules.locate.computeConfigForBounds(e,{ignoreZoomLimits:!0});return this.moveTo(i,n)}moveTo(e,n={}){const i=this.getZoom(),s=this.getCenter(),r=e.zoom||this._zoom;return n.duration===0?this.setView(e):new Promise(o=>{const a=Math.min(this.width,this.height),l=p8([s.x,s.y,a/i],[e.x,e.y,a/r]),d=l.duration,h=n.duration||d;this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const c=this._modules.animations.play(g=>{const[m,_,p]=l(g);this._x=m,this._y=_,this._zoom=a/p,this._modules.events.fire("move"),this._modules.events.fire("pan")},{duration:h,easing:n.easing,callback:()=>this.moveEnd("pan"),resolve:o});c&&(this._moveAnimation=c)})}zoomOut(e,n={x:void 0,y:void 0}){let i=1;return e===void 0&&(e={}),typeof e=="number"&&(e={modifier:e}),i=typeof e.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Xv:e.modifier,this.setZoom(this._zoom/i,e,n)}getAngle(){return this._angle}setAngle(e,n){const i=this._angle,s=e-i;return kg(s)?Promise.resolve():new Promise(r=>{this._rotateAnimation&&this._modules.animations.cancel(this._rotateAnimation);const o=this._modules.animations.play(a=>{for(this._angle=i+s*a;this._angle>Math.PI;)this._angle-=2*Math.PI;for(;this._angle<-Math.PI;)this._angle+=2*Math.PI;this._sinAngle=Math.sin(this._angle),this._cosAngle=Math.cos(this._angle),this._modules.events.fire("move").fire("rotate")},ue(wt(wt({},vy),n),{callback:()=>this.moveEnd("rotate"),resolve:r}));o&&(this._rotateAnimation=o)})}rotate(e,n){return this.setAngle(this._angle+e,n)}getScreenCenter(){return{x:this._dimensions.width/2,y:this._dimensions.height/2}}graphToScreenCoordinates({x:e,y:n},i={x:0,y:0}){const s=this._dimensions.width/2,r=this._dimensions.height/2;return om((e-this._x)*this._zoom+s,(n-this._y)*this._zoom+r,s,r,-this._angle,i)}screenToGraphCoordinates({x:e,y:n},i={x:0,y:0}){return om(this._x+(e-this._dimensions.width/2)/this._zoom,this._y+(n-this._dimensions.height/2)/this._zoom,this._x,this._y,this._angle,i)}projectBounds(e,n=e){const[i,s,r,o]=e,a=this._x,l=this._y,d=this._dimensions.width/2,h=this._dimensions.height/2,c=this._sinAngle,g=this._cosAngle,m=1/this._zoom;let _=1/0,p=1/0,v=-1/0,x=-1/0;const b=[i,s,i,o,r,o,r,s];for(let E=0;E<b.length;E+=2){let S=b[E],A=b[E+1];S=a+(S-d)*m,A=l+(A-h)*m;const T=S-a,P=A-l;S=g*T-c*P+a,A=c*T+g*P+l,S<_&&(_=S),S>v&&(v=S),A<p&&(p=A),A>x&&(x=A)}return n[0]=_,n[1]=p,n[2]=v,n[3]=x,n}screenToGraphVector({x:e,y:n}){return LT({x:e,y:n},this._zoom,this._sinAngle,this._cosAngle)}getView(){return{x:this._x,y:this._y,zoom:this._zoom,angle:this._angle,width:this._dimensions.width,height:this._dimensions.height}}setView(e,n){const{x:i,y:s,zoom:r,angle:o}=wt({x:this._x,y:this._y,zoom:this._zoom,angle:this._angle},e);return Promise.all([this.setCenter({x:i,y:s},n),this.setZoom(r,n),this.setAngle(o,n)]).then(he)}_reloadDimensions(){this._dimensions=this._modules.dom.getDimensions()}animationInProgress(){const e=this._moveAnimation,n=this._zoomAnimation,i=this._rotateAnimation;return!!(e&&!e.done||n&&!n.done||i&&!i.done)}getProjectedScreenBounds(e=0){const{width:n,height:i}=this._dimensions,s=Math.max(n,i)*e;return this.projectBounds([0-s,0-s,n+s,i+s])}_reset(){this._zoom=1,this._x=0,this._y=0,this._angle=0,this._sinAngle=0,this._cosAngle=1,this._dimensions=this._modules.dom.getDimensions()}clone(e){const n=new PR(this._ogma);return n._zoom=e.zoom||this._zoom,n._x=e.x||this._x,n._y=e.y||this._y,n._angle=e.angle||this._angle,n._sinAngle=Math.sin(n._angle),n._cosAngle=Math.cos(n._angle),n._dimensions={width:e.width||this._dimensions.width,height:e.height||this._dimensions.height},n}};function LT({x:t,y:e},n,i,s){return{x:s*(t/=n)-i*(e/=n),y:i*t+s*e}}function PT(t){return typeof t=="number"&&isFinite(t)}function A8(t){const e=t.filter(n=>isFinite(n)&&n>0);return e.length?Dr(e):1}var T8="anonymous",C8="white",L8="default",P8={maxBlockId:1024,maxCoord:-1/0,maxScaledSize:16,maxPixelSize:255,maxMinVisibleSize:64,maxDashOffset:4,maxDashLength:3,maxGapLength:1,maxSymbolicSize:0,maxPatternScale:0},k8=fp?"webgl":null,kT=5,I8=class extends ee{constructor(){super(...arguments),this._debug=!1,this._initDone=!1,this._boundaries={maxSize:10,maxMinVisibleSize:64},this._visibility={nodes:0,edges:0,nodeTexts:0,edgeTexts:0},this._nextAnimationId=1,this._animations=[],this._rendererState={type:null,code:null,state:"ok",message:""},this._cursorStyle=[],this._fontsNewlyLoaded=[],this._nextGeIndex=1,this._availableGeIndexes=[],this._renderOnNewFrame=!0,this._isBufferDisplayable=t=>{const e=eV(t),n=tN(t),i=e?this._visibility.nodes:this._visibility.edges,s=e?this._visibility.nodeTexts:this._visibility.edgeTexts;return i===0&&(!n||s===0)},this._onRendererChange=t=>{this._updateRendererState({type:t,state:"requested",code:null,message:void 0}),this._engine.setRenderType(t),this._modules.dom.refresh()},this._onNewFrame=()=>{this._processAnimations(),this._loadGraphInGraphicsEngine(),this._renderOnNewFrame&&this._render()},this._applyCursorStyle=()=>{const t=this._cursorStyle[this._cursorStyle.length-1]||this._modules.settings.get("cursor.default");cm(this._domWrapper,t)},this._updateImageCrossOrigin=()=>{this._imageManager.setImgCrossOrigin(this._modules.settings.get("imgCrossOrigin")||null)}}onMounted(){this._debug=this._ogma.isDebug(),this._renderOnNewFrame=!0,this._formatText=RM().applyArabicShaping,this._attributesManager=new c8(this._ogma,this._modules),this._imageManager=new t6,this._fontManager=new XG,this._engine=new gy(gy.getCachedInitData()),this._domWrapper=this._engine.getDomWrapper(),this._engine.on("error",this._onNewFrame),this._nodeAnimationMap=new Map,this._edgeAnimationMap=new Map,this._movingNodes=new Set,this._movingEdges=new Set,this._modules.events.register(["reloadFonts","rendererStateChange","beforeUpdateAttributes","updateAttributes","animate","move","pan","zoom","rotate","viewExportStart","viewExportEnd","afterImageExport","viewChanged","zoomStart"]),this._modules.settings.register("renderer",k8,this._onRendererChange),this._modules.settings.register("edgeTipRatio",uM,t=>{this._engine.setEdgeArrowSizeRatio(t),this._modules.dom.refresh()}),this._modules.settings.register("edgeMinTipSize",dM,t=>{this._engine.setEdgeMinTipSize(t),this._modules.dom.refresh()}),this._modules.settings.register("backgroundColor",C8,t=>{this._engine.parseColor(t)?this._modules.dom.refresh():(Wo(`Invalid background color "${t}" specified; will default to black.`),this._modules.settings.set("backgroundColor","black"))}),this._modules.settings.register("texts.hideUntilFontsLoaded",!0,t=>{this._fontManager.setHideUntilFontsLoaded(!!t)}),this._modules.settings.register("texts.cornerRadius",kT,t=>{this._engine.getTextManager().setCornerRadius(typeof t=="number"?t:kT),this._modules.dom.refresh()}),this._modules.settings.register("imgCrossOrigin",T8,this._updateImageCrossOrigin),this._modules.settings.register("cursor.default",L8,this._applyCursorStyle),this._modules.dom.setLayer("graphics",this._domWrapper),this._engine.setGlobalBoundaries(P8),this._modules.dom.beforeNextFrame().then(()=>{this._initDone=!0,this._fireRendererStateChangeEvent()}),this._imageManager.onFetch(()=>{this._engine.notifyPatternUpdate(),this._modules.dom.refresh()}),this._fontManager.onFontLoaded(t=>{this._fontsNewlyLoaded.push(t),this._engine.notifyPatternUpdate(),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}),this._modules.dom.addMediaListener("(min-resolution: 2dppx)",()=>this._modules.dom.refresh()),this._visibleAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${vv})`,tag:vv,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._dataAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${xv})`,tag:xv,nodeDependencies:void 0,edgeDependencies:void 0}),mT(this._engine,this._attributesManager.getFlexArrays()),this._modules.events.on("move",()=>this._modules.dom.refresh()).on("frame",this._onNewFrame).on("viewExportStart",()=>{this._renderOnNewFrame=!1}).on("viewExportEnd",()=>{this._renderOnNewFrame=!0}).on("clearGraph",()=>{this._nextGeIndex=1,this._availableGeIndexes=[],this._engine.clear(),this._attributesManager.clear(),this._modules.dom.refresh(),this._animations=[],this._nodeAnimationMap.clear(),this._edgeAnimationMap.clear()}).on("viewChanged",({type:t})=>{if(t==="rotate"){const e=this._modules.graph.getEdges().filter(n=>n.getAttribute("adjustAnchors"));this._attributesManager.redrawElements(e)}}).on("addNodes",t=>{this._attributesManager.updateForAllAttributeLayers(t.nodes)}).on("addEdges",t=>{this._attributesManager.updateForAllAttributeLayers(t.edges)}).on("excludedStateChange",t=>{this._visibleAttributeLayer.updateElements(t.elements)}).on("setData",t=>{this._dataAttributeLayer.updateElements(t.elements)}),gy.clearCachedInitData(),this._modules.dom.addWindowEventListener("unload",()=>this.destroy())}onReady(t){t.renderer!==void 0&&this._ogma.setOptions({renderer:t.renderer}),t.imgCrossOrigin!==void 0&&this._ogma.setOptions({imgCrossOrigin:t.imgCrossOrigin})}getTransparentBackgroundColor(){const t=this._modules.settings.get("backgroundColor");return t?this._engine.transparentify(t):null}_render(){const t=this._modules.dom.getDimensions(),e=this._modules.camera.getView(),n=Vi(),i=ci(),s=this._modules.settings.get("backgroundColor"),r=this._isBufferDisplayable;this._engine.setView({x:e.x,y:e.y,zoom:e.zoom,angle:e.angle,width:t.width,height:t.height,pixelRatio:n,currentTime:i,backgroundColor:s,isBufferDisplayable:r});try{this._engine.render(),this._rendererState.state==="requested"&&this._updateRendererState({state:"ok"})}catch(o){if(this._debug)throw o;const{message:a,code:l="OTHER"}=o,d=this._rendererState.type,h=Z4(d);let c=this._rendererState.state==="requested"?`Error while initializing the ${h} renderer`:`The ${h} renderer encountered an unexpected runtime error`,g=null;d==="webgl"&&(c+="; fallbacking on canvas renderer",g="canvas"),Wo(a||""),Wo(c),this._updateRendererState({state:"error",code:l,message:a}),this._modules.settings.set("renderer",g)}}_fireRendererStateChangeEvent(){const t=this._rendererState;this._modules.events.fire("rendererStateChange",{type:t.type,state:t.state,code:t.code,message:t.message})}_updateRendererState({type:t,state:e,code:n,message:i}){let s=!1;t!==void 0&&this._rendererState.type!==t&&(this._rendererState.type=t,s=!0),e!==void 0&&this._rendererState.state!==e&&(this._rendererState.state=e,s=!0),n!==void 0&&this._rendererState.code!==n&&(this._rendererState.code=n,s=!0),i!==void 0&&this._rendererState.message!==i&&(this._rendererState.message=i,s=!0),s&&this._initDone&&this._fireRendererStateChangeEvent()}getImageData(){return this._modules.dom.afterNextFrame().then(()=>this._engine.getImageData())}getNodeAttributes(){return this._attributesManager.getFlexArrays().nodes.current}getEdgeAttributes(){return this._attributesManager.getFlexArrays().edges.current}getGraphicsEngine(){return this._engine}getImageManager(){return this._imageManager}getFontManager(){return this._fontManager}allocateGraphicsEngineBlockId(){return this._availableGeIndexes.length?this._availableGeIndexes.pop():this._nextGeIndex++*Lp+h4}releaseGraphicsEngineBlockId(t){this._engine.freeBlock(t),this._availableGeIndexes.push(t),this._modules.dom.refresh()}addCursorStyle(t){t&&(this._cursorStyle.push(t),this._applyCursorStyle())}removeCursorStyle(t){if(!t)return;const e=this._cursorStyle.lastIndexOf(t);e!==-1&&(this._cursorStyle.splice(e,1),this._applyCursorStyle())}reloadFonts(){this._modules.events.fire("reloadFonts"),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}getDomElement(){return this._domWrapper}setTextHidden(t,e){this._attributesManager.setTextHidden(t,e)}resetTextHidden(){this._attributesManager.resetTextHidden(),this._modules.dom.refresh()}getAttributesManager(){return this._attributesManager}_checkFontsNewlyLoaded(){return!!this._fontsNewlyLoaded.length&&(this._fontsNewlyLoaded=[],!0)}_loadGraphInGraphicsEngine(){this._attributesManager.update(),this._checkFontsNewlyLoaded()&&this._attributesManager.redrawAll(),this._modules.events.fire("beforeUpdateAttributes");const{elementsToRedraw:t,elementsUpdated:e}=this._attributesManager.getUpdatedElements(),n=e.nodes.size>0||e.edges.size>0;(e.nodeAttributesSet.has("radius")||e.edgeAttributes.includes("width"))&&(this._boundaries.maxSize=X4(this._modules.graph)),(e.nodeAttributesSet.has("shape")||e.edgeAttributes.includes("shape.head")||e.edgeAttributes.includes("shape.tail"))&&mT(this._engine,this._attributesManager.getFlexArrays()),BV({graph:this._modules.graph,elements:t,engine:this._engine,imageManager:this._imageManager,fontManager:this._fontManager,view:this._modules.camera.getView(),attributes:this._attributesManager.getFlexArrays(),boundaries:this._boundaries,formatText:this._formatText}),n&&this._modules.events.fire("updateAttributes",e)}_forceCompleteGraphRefresh(){this._attributesManager.redrawAll(),this._loadGraphInGraphicsEngine()}export(t,e,n,i){let s;return Promise.all([this._modules.graph.getNodes().addClass(Ta),this._modules.graph.getEdges().addClass(Ta)]).then(()=>this.resolveAtNextFrame()).then(()=>this._imageManager.whenReady()).then(()=>{n==="all"?(s=R8(this._modules.graph),this._forceCompleteGraphRefresh()):this._loadGraphInGraphicsEngine();const r=this._modules.camera.clone(wt({},e));return this._modules.events.fire("viewExportStart",{preventOverlap:i.preventOverlap,camera:r,view:r.getView()}),this._ogma.view.afterNextFrame().then(()=>this._engine.export(t,e,i))}).then(r=>Promise.all([this._modules.graph.getNodes().removeClass(Ta),this._modules.graph.getEdges().removeClass(Ta)]).then(()=>r)).then(r=>(n==="all"&&(F8(s),this._forceCompleteGraphRefresh()),this._modules.events.fire("viewExportEnd"),r))}addAttributeLayer(t){return this._attributesManager.addAttributeLayer(t)}getAttributeValues(t,e,n,i){return this._attributesManager.getAttributeValues(t,e,n,i)}forceAttributesComputation(){this._attributesManager.update()}resolveAtNextFrame(t){return this._modules.dom.afterNextFrame().then(()=>t)}isMoving(t){return(t.isNode?this._movingNodes:this._movingEdges).has(t._index)}animate(t,e,n,i){const s=M8(i);return s.duration&&this._engine.ensureAnimationsReady(),this._animate(t,e,n,s)}isAnimating(){return this._animations.length>0}getAnimationInformation(t){return this._attributesManager.getAnimationInformation(t)}_toSubGraph(t){if(t instanceof to||t instanceof fr)return{nodes:t.toList(),edges:t.getAdjacentEdges()};if(t instanceof tl||t instanceof Jo)return{nodes:this._modules.graph.nodeList(),edges:t.toList()};const e=t,n={nodes:e.nodes||this._modules.graph.nodeList(),edges:e.edges||this._modules.graph.edgeList()};return n.nodes.size&&(n.edges.size?n.edges=n.edges.concat(n.nodes.getAdjacentEdges()).dedupe():n.edges=n.nodes.getAdjacentEdges()),n}_animate(t,e,n,{duration:i,easing:s}){if((!this._animations.length||n)&&!i)return e(t),Promise.resolve(t);const r=this._toSubGraph(t),o=r.nodes,a=r.edges;if(o.size===0&&a.size===0)return e(t),Promise.resolve(t);if(o.size){if(n)for(let g=0;g<o._indexes.length;g++)this._movingNodes.add(o._indexes[g]);this._modules.events.fire("animate",{elements:o,duration:i,updatesPositions:n,easing:s})}if(a.size){if(n)for(let g=0;g<a._indexes.length;g++)this._movingEdges.add(a._indexes[g]);this._modules.events.fire("animate",{elements:a,duration:i,updatesPositions:n,easing:s})}const l={id:this._nextAnimationId++,startTime:ci(),finished:!1,func:()=>e(t),duration:i,easing:s,nodes:o,edges:a,started:!1,updatesPositions:n,resolve:he};let d=l;const h=new Set;if(d=this._getLongestAnimation(d,l.nodes,h),d=this._getLongestAnimation(d,l.edges,h),d.updatesPositions){for(let g=0;g<o._indexes.length;g++)this._nodeAnimationMap.set(o._indexes[g],d);for(let g=0;g<a._indexes.length;g++)this._edgeAnimationMap.set(a._indexes[g],d);l.duration=d.duration,l.startTime=d.startTime}if(l.duration===0&&d.id===l.id)return e(t),Promise.resolve(t);const c=new Promise(g=>l.resolve=()=>g(t));return this._animations.push(l),this._modules.dom.refresh(),i||this._processAnimations(),c}_removeFinishedAnimations(){this._animations=this._animations.filter(t=>!t.finished)}_getAnimationElements(t){return{nodes:t.nodes,edges:t.edges}}_resetAnimationAttributes({nodes:t,edges:e}){this._attributesManager.resetAnimationAttributes({nodes:t,edges:e});for(let n=0;n<t._indexes.length;n++)this._nodeAnimationMap.delete(t._indexes[n]),this._movingNodes.delete(t._indexes[n]);for(let n=0;n<e._indexes.length;n++)this._edgeAnimationMap.delete(e._indexes[n]),this._movingEdges.delete(t._indexes[n])}_getLongestAnimation(t,e,n){const i=e.isNode?this._nodeAnimationMap:this._edgeAnimationMap;for(let s=0;s<e._indexes.length;s++){const r=i.get(e._indexes[s]);r&&!n.has(r.id)&&(n.add(r.id),(t.updatesPositions||!r.updatesPositions)&&r.duration+r.startTime<t.duration+t.startTime||(t=r))}return t}_processAnimations(){if(!this._animations.length)return;const t=ci(),e=[];this._attributesManager.update();for(const n of this._animations)n.started||(n.started=!0,e.push(n.func),this._attributesManager.setAnimationAttributes(this._getAnimationElements(n),n));for(const n of e)n();for(const n of this._animations)t>=n.startTime+n.duration&&(this._resetAnimationAttributes(this._getAnimationElements(n)),n.resolve(n.elements),n.finished=!0);this._removeFinishedAnimations(),this._animations.length&&this._modules.dom.refresh()}hideTexts(){this.setNodeTextsVisibility(!1),this.setEdgeTextsVisibility(!1)}showTexts(){this.setNodeTextsVisibility(!0),this.setEdgeTextsVisibility(!0)}setNodesVisibility(t){return this._updateVisibilityCounter("nodes",t)}setNodeTextsVisibility(t){return this._updateVisibilityCounter("nodeTexts",t)}setEdgesVisibility(t){return this._updateVisibilityCounter("edges",t)}setEdgeTextsVisibility(t){return this._updateVisibilityCounter("edgeTexts",t)}_updateVisibilityCounter(t,e){this._visibility[t]+=e?-1:1,this._modules.dom.refresh()}detectNode(t,e,n,i,s,r){return H4(t,e,n,i,s,r,this._modules.graph,this._attributesManager,this._modules.camera,this._engine,this._movingNodes,this._formatText)}detectEdge(t,e,n,i,s){return W4(t,e,n,i,s,this._modules.graph,this._modules.camera,this._movingNodes,this._attributesManager)}getVisibilityCounters(){return this._visibility}destroy(){this.getGraphicsEngine().destroy(),this.getImageManager().destroy(),this.getFontManager().destroy()}};function M8(t){return typeof t=="number"?t={duration:t}:typeof t=="object"&&t!==null||(t={duration:0}),{duration:N8(t.duration),easing:t.easing||"linear",chain:!!t.chain}}function N8(t){return typeof t!="number"||!isFinite(t)||t<0?0:t}function IT(t,e){const n=e?t.getNodeAttribute("excluded"):t.getEdgeAttribute("excluded"),i=(e?t.getNodes("all"):t.getEdges("all"))._indexes,s=n.getMultiple(i);return n.fill(i,0),{excludedList:n,indexes:i,values:s}}function MT({excludedList:t,indexes:e,values:n}){t.setMultiple(e,n)}function R8(t){return{nodes:IT(t,!0),edges:IT(t,!1)}}function F8({nodes:t,edges:e}){MT(t),MT(e)}var O8=250,D8=50,z8=class extends ee{constructor(){super(...arguments),this._onAnyEvents=[],this._registeredEvents={},this.onIdle=pp(()=>this.fire("idle"),D8)}onMounted(){this._registeredEvents={},this.register(["idle"]),this._ogma.onReady(()=>{this.on(["viewChanged","layoutEnd","addNodes","addEdges","removeNodes","removeEdges","animate","setMultipleAttributes","transformationRefresh"],()=>{this._modules.dom.clearTimeout(this._idleTimeout),this._idleTimeout=this._modules.dom.setTimeout(this.onIdle,O8)})})}isRegistered(t){return!!this._registeredEvents[t]}register(t,e=[]){t.forEach(n=>{if(this._registeredEvents[n])throw new Error(`event "${n}" already exists`);this._registeredEvents[n]=new B8(!1,n)})}onAnyEvent(t){this._onAnyEvents.push(t)}on(t,e){return Array.isArray(t)?(t.forEach(n=>this.on(n,e)),this):this._registeredEvents[t]?(this._registeredEvents[t].on(e),this):this}off(t){return Object.values(this._registeredEvents).forEach(e=>{e.off(t)}),this}fire(t,e=null){const n=this._getEvent(t);return this._onAnyEvents.forEach(i=>i(e,t)),n.trigger(e),this}once(t,e){const n=this,i=function(){e.apply(null,arguments),n.off(i)};return this.on(t,i)}_getEvent(t){if(!(t in this._registeredEvents))throw new Error(`Event ${t} does not exist`);return this._registeredEvents[t]}destroy(){Object.values(this._registeredEvents).forEach(t=>{t.destroy()})}},B8=class{constructor(t,e){this._subscribers=[],this._handlers=[],this._reverseOrder=t,this._name=e}trigger(t){for(const e of this._handlers)e(t,this._name);return this}on(t){if(typeof t!="function")throw new Error("handler is not a function");const e=this._reverseOrder?0:this._subscribers.length;return this._handlers.splice(e,0,t),this._subscribers.splice(e,0,t),this}off(t){let e;for(;(e=this._subscribers.indexOf(t))!==-1;)this._subscribers.splice(e,1),this._handlers.splice(e,1);return this}destroy(){this._subscribers=[],this._handlers=[]}},U8=class extends ee{onMounted(){this._graphics=this._modules.graphics,this._modules.events.register(["setMultipleAttributes"]),this._modules.events.on(["addNodes","addEdges"],({nodes:t,edges:e,objects:n})=>{this._onAddElements(t||e,n)}),this._originalAttributesLayer=this._graphics.addAttributeLayer({name:"original-attributes",priority:Cj,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._individualAttributesLayer=this._graphics.addAttributeLayer({name:"individual-attributes",priority:kj,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0})}_onAddElements(t,e){const n=e.map(i=>i.attributes);this._originalAttributesLayer.setAttributeValues(t,n)}getOriginalAttributes(){return this._originalAttributesLayer.getFlexArrays()}getIndividualAttributes(){return this._individualAttributesLayer.getFlexArrays()}setMultipleAttributes(t,e,n){const i=Array.isArray(e)?e.length&&e[0]?km(e[0],t.isNode):[]:km(e,t.isNode),s=i.includes("x")||i.includes("y"),r=[];return this._modules.events.fire("setMultipleAttributes",{elements:t,values:e,updatedAttributes:i,options:n,promises:r}),this._graphics.animate(t,()=>{this._individualAttributesLayer.setAttributeValues(t,e)},s,n).then(o=>Promise.all(r).then(()=>o))}setSingleAttribute(t,e,n,i){const s={};return $r(s,e,n),this.setMultipleAttributes(t,s,i)}resetMultipleAttributes(t,e,n){const i=e||this._individualAttributesLayer.getUsedAttributeNames(t),s=i&&(i.includes("x")||i.includes("y")),r={};for(const o of i)$r(r,o,void 0);return this._graphics.animate(t,()=>{this._individualAttributesLayer.setAttributeValues(t,r)},s,n)}getMultipleAttributes(t,e){return this._graphics.getAttributeValues(t,e,!0,!1)}getSingleAttribute(t,e){return this._graphics.getAttributeValues(t,e,!1,!1)}replaceOriginalAttributes(t,e,n=[]){const i={},s=this._originalAttributesLayer.getUsedAttributeNames(t).filter(r=>!n.includes(r));for(let r=0;r<s.length;++r)$r(i,s[r],void 0);this._originalAttributesLayer.setAttributeValues(t,i),this._originalAttributesLayer.setAttributeValues(t,e)}getSinglePreviousAttribute(t,e){return this._graphics.getAttributeValues(t,e,!1,!0)}getMultiplePreviousAttributes(t,e){return this._graphics.getAttributeValues(t,e,!0,!0)}},$8=class extends ee{constructor(){super(...arguments),this._currentValue={},this._onChange={},this._defaultValues={},this._keys=[]}onReady(t){t.renderer&&this.update({renderer:t.renderer}),t.options&&this.update(t.options)}register(t,e,n,i){return i===void 0&&(i=!0),this._keys.push(t),this._currentValue[t]=e,this._defaultValues[t]=e,this._onChange[t]=n||he,n&&i&&n(e),this}update(t){t=Rh(t);const e=this._keys,n={},i=this._currentValue;for(let r=0;r<e.length;++r){const o=e[r];if(o in t){let a=t[o];a===void 0&&(a=this._defaultValues[o]),n[o]=i[o],i[o]=a}}const s=Object.keys(n);for(let r=0;r<s.length;++r){const o=s[r],a=this._currentValue[o],l=n[o];a!==l&&this._onChange[o](a,l)}return iv(n)}get(t){return arguments.length===0?iv(this._currentValue):this._currentValue[t]}set(t,e){const n=this._currentValue[t],i=this._onChange[t];this._currentValue[t]=e,i&&i(e,n)}},j8=class{constructor(t,e){this._classes=t,this._name=e}getName(){return this._name}getIndex(){return this._classes.getIndex(this._name)}setIndex(t){return this._classes.setIndex(this._name,t)}update(t){return this._classes.update(this._name,t),this}getDefinition(){return this._classes.getDefinition(this._name)}getNodes(t){return this._classes.getElementsByClass(this._name,t).nodes}getEdges(t){return this._classes.getElementsByClass(this._name,t).edges}clearNodes(t){this.getNodes(t).removeClass(this._name)}clearEdges(t){this.getEdges(t).removeClass(this._name)}add(t){t.addClass(this._name)}remove(t){t.removeClass(this._name)}destroy(){const t=this._classes.getElementsByClass(this._name);return Promise.all([t.nodes.removeClass(this._name),t.edges.removeClass(this._name)]).then(()=>this._classes.removeClass(this._name))}},G8=1e3,V8=.5/G8,H8=class extends ee{constructor(){super(...arguments),this._builtinClasses=[],this._userClasses=[],this._classesByName={},this._onExcludedStateChange=({elements:t,value:e})=>{if(e){const n=this._builtinClasses.map(i=>i.name);this._addOrRemoveClassesToElements(n,t,!1)}},this._onClearGraph=()=>{this._builtinClasses.concat(this._userClasses).forEach(t=>t.elementSet.clear())},this._onRemoveElements=({nodes:t,edges:e})=>{const n=t||e;this._builtinClasses.concat(this._userClasses).forEach(i=>i.elementSet.removeElements(n))}}onMounted(){this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on("clearGraph",this._onClearGraph).on("removeEdges",this._onRemoveElements).on("removeNodes",this._onRemoveElements)}_getClassList(t){return t?this._builtinClasses:this._userClasses}createClass({name:t,isBuiltin:e=!1,after:n,nodeAttributes:i,nodeDependencies:s,nodeOutput:r,edgeAttributes:o,edgeDependencies:a,edgeOutput:l}={}){if(typeof t!="string")throw new Error('the "name" argument should be a string');const d=this._getClassList(e),h=n?W8(d,n)+1:d.length;if(h===-1)throw new Error(`createClass: class specified as \`after\` parameter "${n}" does not exist`);if(e&&!t.startsWith("_"))throw new Error(`invalid builtin class name "${t}": builtin classes should start with '_'`);const c=new gc(this._modules.graph),g=new j8(this,t),m={name:t,elementSet:c,attributeLayer:this._modules.graphics.addAttributeLayer({name:`class(${t})`,tag:t,standaloneSelectors:!0,nodeAttributes:i||void 0,edgeAttributes:o||void 0,nodeSelector:(_,p)=>p.hasElement(_),edgeSelector:(_,p)=>p.hasElement(_),nodeContext:c,edgeContext:c,nodeOutput:r,edgeOutput:l,nodeDependencies:s,edgeDependencies:a}),isBuiltin:e,wrapper:g};return d.splice(h,0,m),e&&d.sort((_,p)=>yA.indexOf(_.name)-yA.indexOf(p.name)),this._updatePriorities(e),this._classesByName[t]=m,this._modules.events.register([Sl(t,!0,!0),Sl(t,!0,!1),Sl(t,!1,!0),Sl(t,!1,!1)]),g}removeClass(t){const e=this._get(t),n=this._getClassList(e.isBuiltin),i=n.indexOf(e);if(i===-1)throw new Error(`class "${t}" does not exist`);return n.splice(i,1),e.attributeLayer.destroy(),delete this._classesByName[t],this._updatePriorities(e.isBuiltin),Promise.resolve(void 0)}_updatePriorities(t){const e=this._getClassList(t),n=Ij+(t?.5:0);for(let i=0;i<e.length;++i){const s=e[i],r=n+V8*i;s.attributeLayer.update({priority:r})}}_get(t){const e=this._classesByName[t];if(!e)throw new Error(`class "${t}" does not exist`);return e}getIndex(t){const e=this._get(t);return this._getClassList(e.isBuiltin).indexOf(e)}setIndex(t,e){const n=this._get(t),i=this._getClassList(n.isBuiltin),s=i.indexOf(n),r=ws(e,0,i.length-1);i.splice(s,1),i.splice(r,0,n),this._updatePriorities(n.isBuiltin)}update(t,{nodeAttributes:e,edgeAttributes:n,nodeDependencies:i,edgeDependencies:s,nodeOutput:r,edgeOutput:o,fullOverwrite:a}={}){this._get(t).attributeLayer.update({nodeAttributes:e,edgeAttributes:n,nodeDependencies:i,edgeDependencies:s,nodeOutput:r,edgeOutput:o,fullOverwrite:a})}getDefinition(t){const e=this._get(t),{nodeAttributes:n,nodeDependencies:i,nodeOutput:s,edgeAttributes:r,edgeDependencies:o,edgeOutput:a}=e.attributeLayer.getDefinition();return{nodeAttributes:n||void 0,edgeAttributes:r||void 0,nodeDependencies:i,edgeDependencies:o,nodeOutput:s,edgeOutput:a}}_addOrRemoveClassesToElements(t,e,n){const i=e.isNode;for(let s=0;s<t.length;++s){const r=t[s],{elementSet:o,attributeLayer:a}=this._get(r),l=o.addOrRemoveElements(e,n),d=Sl(r,i,n);l.size&&(a.updateElements(l),this._modules.events.fire(d,i?{nodes:l}:{edges:l}))}}_animatedAttributesUpdatePositions(t,e){for(let n=0;n<t.length;++n){const i=t[n],s=this.getDefinition(i);if(e.isNode&&s.nodeAttributes&&(s.nodeAttributes.x||s.nodeAttributes.y))return!0}return!1}_getAnimatedAtrributes(t,e){return t.reduce((n,i)=>{const s=this.getDefinition(i);return e.isNode&&s.nodeAttributes&&n.push(...km(s.nodeAttributes,!0)),!e.isNode&&s.edgeAttributes&&n.push(...km(s.edgeAttributes,!1)),n},[])}addClassesToElements(t,e,n){const i=e.toList(),s=this._animatedAttributesUpdatePositions(t,i);return this._modules.graphics.animate(e,()=>{this._addOrRemoveClassesToElements(t,i,!0)},s,n)}removeClassesFromElements(t,e,n){const i=e.toList(),s=this._animatedAttributesUpdatePositions(t,i);return this._modules.graphics.animate(e,()=>{this._addOrRemoveClassesToElements(t,i,!1)},s,n)}hasSingleElementClass(t,e){return this._get(t).elementSet.hasElement(e)}getElementsClassList(t,e={}){const{includeBuiltinClasses:n=!1}=e,i=new Array(t.size);for(let s=0;s<i.length;++s)i[s]=[];return this._addClassNamesToList(i,t,this._userClasses),n&&this._addClassNamesToList(i,t,this._builtinClasses),i}_addClassNamesToList(t,e,n){const i=e.toList();for(let s=0;s<n.length;++s){const{name:r,elementSet:o}=n[s];for(let a=0;a<i.size;++a){const l=i.get(a);o.hasElement(l)&&t[a].push(r)}}}getClassByName(t,e=!1){const n=this._classesByName[t]||null;if(e&&!n)throw new Error(`class "${t}" does not exist`);return n&&n.wrapper}getClassList(){return this._userClasses.map(t=>t.wrapper)}getElementsByClass(t,e="visible"){const{elementSet:n}=this._get(t),i=n.getElements();let s=i.nodes,r=i.edges;return e==="visible"?(s=s.filter(o=>o.isVisible()),r=r.filter(o=>o.isVisible())):e==="raw"&&(s=s.filter(o=>!o.isVirtual()),r=r.filter(o=>!o.isVirtual())),{nodes:s,edges:r}}_onClassEvent(t,e,n,i){const s=Sl(t,n,i);this._modules.events.on(s,e)}onNodeClassAdded(t,e){this._onClassEvent(t,e,!0,!0)}onNodeClassRemoved(t,e){this._onClassEvent(t,e,!0,!1)}onEdgeClassAdded(t,e){this._onClassEvent(t,e,!1,!0)}onEdgeClassRemoved(t,e){this._onClassEvent(t,e,!1,!1)}};function Sl(t,e,n){return`${e?"node":"edge"}Class${n?"Added":"Removed"}_${t}`}function W8(t,e){for(let n=0;n<t.length;++n)if(t[n].name===e)return n;return-1}var kR=()=>({x:0,y:0,x1:0,y1:0,x2:0,y2:0});function NT(t,e,n,{cells:i=!0,boxes:s=!0,query:r=!0}={}){const o=e.keys().map(l=>e.keyToBBox(Number(l))),a=e.getBoxes();if(i&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#707070",o.forEach(l=>{t.rect(l[0],l[1],l[2]-l[0],l[3]-l[1])}),t.stroke()),s&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#ff7070",a.forEach(l=>{t.rect(l[0],l[1],l[2]-l[0],l[3]-l[1])}),t.closePath(),t.stroke()),r&&n){const l=n;t.beginPath(),t.lineWidth=2,t.strokeStyle="#3030ff",t.rect(l[0],l[1],l[2]-l[0],l[3]-l[1]),t.closePath(),t.stroke()}}function X8(t){const[e,n,i]=t.getNodeAttributes(["x","y","radius"]),[s,r,o]=t.getEdgeAttributes(["source","target","curvature"]),a=kR(),l=d1();return d=>{if(d<0){d=-d;const h=s.get(d),c=r.get(d),g=o.get(d),m=e.get(h),_=n.get(h),p=e.get(c),v=n.get(c);h===c?(Pp(m,_,g,i.get(h),0,a),Ip(m,_,a.x1,a.y1,a.x2,a.y2,p,v,l)):g===0?(l.minX=Math.min(m,p),l.minY=Math.min(_,v),l.maxX=Math.max(m,p),l.maxY=Math.max(_,v)):(el(m,_,p,v,g,a),c1(m,_,a.x,a.y,p,v,l))}else{const h=e.get(d),c=n.get(d),g=i.get(d);l.minX=h-g,l.minY=c-g,l.maxX=h+g,l.maxY=c+g}return[l.minX,l.minY,l.maxX,l.maxY]}}var Z8=["x","y","radius"],Y8=["width","curvature"],q8=.5,J8=class extends ee{constructor(){super(...arguments),this._minCellSize=8,this._clear=()=>{this._index.clear(),this._elementsToUpdate.clear()},this._onGraphUpdate=t=>{if(t.nodes&&(!t.nodeAttributes||t.nodeAttributes.some(e=>Z8.includes(e)))){const e=t.nodes.fastGetAdjacentElements().edges;this._elementsToUpdate.addElements(t.nodes),this._elementsToUpdate.addElements(e)}t.edges&&(t.edgeAttributes&&!t.edgeAttributes.some(e=>Y8.includes(e))||this._elementsToUpdate.addElements(t.edges))}}onMounted(){this._index=new s$(this._getIntersector(),X8(this._modules.graph),this._minCellSize,1e6),this._elementsToUpdate=new gc(this._modules.graph),this._removedNodes=this._modules.graph.getNodeAttribute("removed"),this._removedEdges=this._modules.graph.getEdgeAttribute("removed"),this._excludedNodes=this._modules.graph.getNodeAttribute("excluded"),this._excludedEdges=this._modules.graph.getEdgeAttribute("excluded"),this._queryResult={edges:[],nodes:[]},this._queryBounds=[0,0,0,0],this._modules.events.on(["addNodes","addEdges","removeNodes","removeEdges","updateAttributes"],this._onGraphUpdate).on("excludedStateChange",({elements:t})=>{this._elementsToUpdate.addElements(t)}).on("clearGraph",this._clear)}_getIntersector(){const t=this._modules.graph,[e,n,i]=t.getNodeAttributes(["x","y","radius"]),[s,r,o,a]=t.getEdgeAttributes(["source","target","width","curvature"]),l=kR();return(d,h,c,g,m)=>{if(d<0){d=-d;const _=s.get(d),p=r.get(d),v=a.get(d),x=o.get(d)/2,b=e.get(_),E=n.get(_),S=e.get(p),A=n.get(p);return _===p?(Pp(b,E,v,i.get(_),0,l),Ok(b,E,l.x1,l.y1,l.x2,l.y2,S,A,h-x,c-x,g+x,m+x)):v===0?g1(b,E,S,A,h-x,c-x,g+x,m+x):(el(b,E,S,A,v,l),Fk(b,E,l.x,l.y,S,A,h-x,c-x,g+x,m+x))}return zb(e.get(d),n.get(d),i.get(d),h,c,g,m)}}reindex(){this._modules.graphics.forceAttributesComputation(),this._index.clear(),this._elementsToUpdate.clear(),this._updateItems(this._modules.graph.getNodes("all")._indexes,this._modules.graph.getEdges("all")._indexes)}getSize(){return this._index.size}_updateIndex(){if(!this._elementsToUpdate.isEmpty()){const{nodes:t,edges:e}=this._elementsToUpdate.getElements();if(t._indexes.length/this._modules.graph.getNodes("all").size>q8)return void this.reindex();this._updateItems(t._indexes,e._indexes),this._elementsToUpdate.clear()}}_updateItems(t,e){const n=this._index,i=this._removedNodes,s=this._removedEdges,r=this._excludedNodes,o=this._excludedEdges,a=[],l=[];if(i&&r)for(let d=0;d<t.length;d++){const h=t[d];i.get(h)!==0||r.get(h)!==0?a.push(h):(n.has(h)&&a.push(h),l.push(h))}if(s&&o)for(let d=0;d<e.length;d++){const h=-e[d];s.get(-h)!==0||o.get(-h)!==0?a.push(h):(n.has(h)&&a.push(h),l.push(h))}for(const d of a)n.remove(d);for(const d of l)n.insert(d)}getNodesInScreenByDistance(t){const{x:e,y:n}=t.getPositionOnScreen();return this._modules.graph.getNodes().filter(i=>i.isInScreen()&&i!==t).sort((i,s)=>{const r=i.getPositionOnScreen(),o=s.getPositionOnScreen();return wn(r.x,r.y,e,n)-wn(o.x,o.y,e,n)})}getNearestNodesForNode(t,e=240,n){const{x:i,y:s}=t.getPosition();return this.getNearestNodes(i,s,e,n,t)}getNearestNodes(t,e,n,i,s){if(this._updateIndex(),i){const r=this._modules.camera.screenToGraphVector({x:n,y:n});n=wn(0,0,r.x,r.y)}return this._getNearestNodes(t,e,n,s)}_getNearestNodes(t,e,n,i){const s=[],r=n*n,o=i?i._index:0,a=this._modules.graph.getNodes()._indexes,[l,d]=this._modules.graph.getNodeAttributes(["x","y"]);for(let h=0,c=a.length;h<c;h++){const g=a[h];if(g===o)continue;const m=t-l.get(g),_=e-d.get(g);m*m+_*_<=r&&s.push(g)}return this._modules.graph.nodeList(new Uint32Array(s))}queryRaw(t,e,n,i){this._updateIndex();const s=this._queryBounds;s[0]=t,s[1]=e,s[2]=n,s[3]=i;const r=this._index.query(t,e,n,i),{nodes:o,edges:a}=this._queryResult;o.length=a.length=0;for(let l=0;l<r.length;l++){const d=r[l];d<0?a.push(-d):o.push(d)}return this._queryResult}queryRawProjected(t,e,n,i){const s=this._queryBounds;return s[0]=t,s[1]=e,s[2]=n,s[3]=i,this._modules.camera.projectBounds(s),this.queryRaw(s[0],s[1],s[2],s[3])}query(t,e,n,i){const s=this._modules.graph,{nodes:r,edges:o}=this.queryRaw(t,e,n,i);return{nodes:s.nodeList(new Uint32Array(r.slice())),edges:s.edgeList(new Uint32Array(o.slice()))}}queryProjected(t,e,n,i){const s=this._modules.graph,{nodes:r,edges:o}=this.queryRawProjected(t,e,n,i);return{nodes:s.nodeList(new Uint32Array(r.slice())),edges:s.edgeList(new Uint32Array(o.slice()))}}getNodesByBoundingBox(t,e,n,i,s){if(this._updateIndex(),s){let c;c=this._modules.camera.screenToGraphVector({x:t,y:e}),t=c.x,e=c.y,c=this._modules.camera.screenToGraphVector({x:n,y:i}),n=c.x,i=c.y}const r=this._modules.graph,o=r.getNodes()._indexes,a=[],l=r.getNodeAttribute("excluded"),[d,h]=r.getNodeAttributes(["x","y"]);for(let c=0,g=o.length;c<g;c++){const m=o[c];if(l&&l.get(m))continue;const _=d&&d.get(m),p=h&&h.get(m);_>=t&&_<=n&&p>=e&&p<=i&&a.push(m)}return r.nodeList(new Uint32Array(a))}toggleDebug(t){t?(this._layer=this._modules.layers.addCanvasLayer(e=>{NT(e,this._index,this._queryBounds)},{isStatic:!1,noClear:!1}),this._layer.moveToTop()):this._layer&&(this._layer.destroy(),this._layer=null)}renderDebug(t){if(!this._layer)return this.toggleDebug(!0);this._layer.refresh(e=>{NT(e,this._index,this._queryBounds,t)})}},IR={};function Fp(t,e,n,i,s=0,r=Math.sin(s),o=Math.cos(s),a=[0,0,0,0]){const l=n/2,d=i/2,h=t+l,c=e+d;if(s===0)return a[0]=t,a[1]=e,a[2]=t+n,a[3]=e+i,a;let g,m,_,p,v,x,b,E;return _=-l,p=-d,g=h+_*o-p*r,m=c+_*r+p*o,v=b=g,x=E=m,_=-l,p=d,g=h+_*o-p*r,m=c+_*r+p*o,g<v?v=g:g>b&&(b=g),m<x?x=m:m>E&&(E=m),_=l,p=d,g=h+_*o-p*r,m=c+_*r+p*o,g<v?v=g:g>b&&(b=g),m<x?x=m:m>E&&(E=m),_=l,p=-d,g=h+_*o-p*r,m=c+_*r+p*o,g<v?v=g:g>b&&(b=g),m<x?x=m:m>E&&(E=m),a[0]=v,a[1]=x,a[2]=b,a[3]=E,a}function fc(t,e,n,i,s=0){const r=n/2,o=i/2,a=t+r,l=e+o;if(s===0)return[{x:t,y:e},{x:t+n,y:e},{x:t+n,y:e+i},{x:t,y:e+i}];const d=Math.sin(s),h=Math.cos(s);let c,g,m,_;m=-r,_=-o,c=a+m*h-_*d,g=l+m*d+_*h;const p={x:c,y:g};m=-r,_=o,c=a+m*h-_*d,g=l+m*d+_*h;const v={x:c,y:g};m=r,_=o,c=a+m*h-_*d,g=l+m*d+_*h;const x={x:c,y:g};return m=r,_=-o,c=a+m*h-_*d,g=l+m*d+_*h,[p,v,x,{x:c,y:g}]}function Yv(t,e=0,n=1,i=Pk.slice()){const s=n*Math.sin(e),r=n*Math.cos(e);return i[0]=t[0]+s,i[1]=t[1]+r,i[2]=t[2]+s,i[3]=t[3]+r,i}function K8(t,e){return Ik(t,e)}function Q8(t,e){return MR(t[0],t[1],t[2],t[3],e[0],e[1],e[2],e[3])}function tH(t,e,n,i,s,r,o,a){return t>s&&t<o&&e>r&&e<a||n>s&&n<o&&i>r&&i<a}function MR(t,e,n,i,s,r,o,a){return i>=r&&e<=a&&n>=s&&t<=o}sc(IR,{angle:()=>U4,circleCircleIntersection:()=>Ob,circleContainsCircle:()=>$U,circleContainsPoint:()=>UU,circleIntersectsBox:()=>zb,circleLineIntersection:()=>Mk,circleSortCompare:()=>Db,computeCentroid:()=>jV,cubicBezierAABB:()=>Ok,defaultAABB:()=>Pk,degreesToRadians:()=>BU,distToSegmentSquared:()=>f1,distance:()=>wn,distancePointSegment:()=>jM,extendBounds:()=>Ik,getAABB:()=>Fp,getBezierCurveBoundingBox:()=>Ip,getClosestPointOnLine:()=>j4,getClosestPointOnSegment:()=>GM,getNormalOnEdge:()=>O4,getNormalOnQuadraticCurve:()=>DM,getOBBPoints:()=>fc,getPointOnBezierCurve:()=>Uh,getPointOnEdge:()=>F4,getPointOnQuadraticCurve:()=>kp,getQuadraticBezierCurveLength:()=>z4,getQuadraticCurveBoundingBox:()=>c1,getQuadraticCurveControlPoint:()=>el,getSelfLoopControlPoints:()=>Pp,getTangentOnEdge:()=>D4,getTangentOnQuadraticCurve:()=>h1,intersects:()=>tH,isPointInLine:()=>UM,isPointInPolygon:()=>jh,isPointOnBezierCurve:()=>BM,isPointOnQuadraticCurve:()=>zM,lineAABB:()=>g1,lineAngle:()=>Lu,lineIntersection:()=>$4,lineLine:()=>tu,move:()=>zU,moveAABB:()=>Yv,normalize:()=>kk,overlaps:()=>MR,overlapsAABB:()=>Q8,padBounds:()=>K8,polygonsIntersect:()=>aN,quadBezierAABB:()=>Fk,radiansToDegrees:()=>Q0,rotate:()=>om,segmentIntersection:()=>Nd,segmentRectangleIntersection:()=>$M,squaredDistance:()=>gf,twoSegmentsIntersect:()=>B4});var Ig=40;function NR(t,e){const n=t.getAttribute("curvature"),i=t.getSource(),s=t.getTarget(),r=i.getPositionOnScreen();if(i===s){const p=(n+i.getAttribute("radius"))*Am*e,v=r.x,x=r.y,b=v-p,E=x,S=v,A=x+p;return[r,...[.2,.4,.6,.8].map(T=>Uh(T,v,x,v,x,b,E,S,A)),r]}const o=s.getPositionOnScreen();if(n===0)return[r,o];const a=o.x-r.x,l=o.y-r.y,d=Math.sqrt(a*a+l*l),h=(r.x+o.x)/2,c=(r.y+o.y)/2,g=n*(d/Tp)*2,m=h+l/d*g,_=c+-a/d*g;return[r,...[.25,.5,.75].map(p=>kp(p,r.x,r.y,o.x,o.y,m,_)),o]}function eH(t,e,n){const i=t.getSource(),s=t.getTarget(),r=i.getPositionOnScreen(),o=s.getPositionOnScreen();if(jh(r.x,r.y,e)||jh(o.x,o.y,e))return!0;const a=NR(t,n);for(let l=0;l<a.length-1;++l){const d=a[l],h=a[l+1];for(let c=0;c<e.length-1;++c){const g=e[c],m=e[c+1];if(tu(d.x,d.y,h.x,h.y,g.x,g.y,m.x,m.y))return!0}}return!1}function nH(t,e,n){const i=t.getPositionOnScreen(),s=Number(t.getAttribute("radius"))*n;return RR(i.x,i.y,s,e)}function RR(t,e,n,i){const s=t-n,r=e-n,o=e+n;return t+n>=i.minX&&s<=i.maxX&&o>=i.minY&&r<=i.maxY}function iH(t,e,n){const i=NR(t,n);for(let s=0;s<i.length-1;++s){const r=i[s],o=i[s+1];if(g1(r.x,r.y,o.x,o.y,e.minX,e.minY,e.maxX,e.maxY))return!0}return!1}function RT(t,e,n,i){typeof n=="number"&&(n={left:n,right:n,top:n,bottom:n});const s=n.left===void 0?Ig:n.left,r=n.right===void 0?Ig:n.right,o=n.top===void 0?Ig:n.top,a=n.bottom===void 0?Ig:n.bottom,l=s+r,d=o+a,h=t.width===0?t.maxFixedSize:t.width,c=t.height===0?t.maxFixedSize:t.height,g=A8([(e.width-l)/(h+t.maxScaledSize),(e.height-d)/(c+t.maxScaledSize),(e.width-l-t.maxFixedSize)/h,(e.height-d-t.maxFixedSize)/c,i/t.maxScaledSize||NaN]);return{x:t.cx+(r-s)/(2*g),y:t.cy+(a-o)/(2*g),zoom:g}}var sH="cubicOut",FT=200,rH=class extends ee{constructor(){super(...arguments),this._isLocating=!1,this._cacheValid=!0,this._cachedGraphBoundingBox=new Ai,this._onLocateStart=()=>{this._isLocating=!0},this._onLocated=()=>{this._isLocating=!1,this._modules.events.fire("locate")},this._invalidCache=()=>{this._cacheValid=!1}}onMounted(){this._modules.events.register(["locate"]),this._modules.events.on(["addNodes","removeNodes","addEdges","removeEdges","excludedStateChange","clearGraph","updateAttributes"],this._invalidCache)}onReady(){this.locateGraph({},!0)}locateGraph(t,e=!1){return this._onLocateStart(),e?this._locateGraph(t):this._modules.transformations.whenApplied().then(()=>this._locateGraph(t))}_locateGraph(t){return this._locateBoundingBox(this.getGraphBoundingBox(),t).then(this._onLocated)}locateElements(t,e){return this._modules.transformations.whenApplied().then(()=>this._locateBoundingBox(this.getBoundingBox(t),e)).then(this._onLocated)}locateRawGraph(t,e){return this._onLocateStart(),this._locateBoundingBox(this.getRawGraphBoundingBox(t),e).then(this._onLocated)}isLocating(){return this._isLocating}getGraphBoundingBox(t=!1){return t?this.getBoundingBox(this._ogma.getNodes(),!0,t):(this._cacheValid||this._updateCache(),Object.assign({},this._cachedGraphBoundingBox))}forceInvalidCache(){this._invalidCache()}_updateCache(){this._cacheValid=!0,this._cachedGraphBoundingBox=this.getBoundingBox(this._modules.graph.getNodes())}getBoundingBox(t,e=!1,n=!1,i){let s;if(s=t.isNode?this._getNodesBoundingBox(t.toList(),e):this._getEdgesBoundingBox(t.toList(),i),n){const r=this._ogma.modules.labels.getTextsBoundingBox(t.isNode?t.toList():null,t.isNode?null:t.toList());s=s.extend(r)}return s}_getNodesBoundingBox(t,e=!1){this._modules.graphics.forceAttributesComputation();const n=this._modules.graphics.getNodeAttributes(),i=[],s=[],r=[],o=[];for(let a=0;a<t.size;++a){const l=t._indexes[a];if(n.excluded.get(l)===0){const d=n.x.get(l),h=n.y.get(l),c=n.radius.get(l),g=2*c;n.scalingMethod.get(l)==="scaled"?r.push(g):o.push(g),e?(i.push(d-c,d+c),s.push(h-c,h+c)):(i.push(d),s.push(h))}}return new Ai({xValues:i,yValues:s,scaledSizeValues:r,fixedSizeValues:o})}_getEdgesBoundingBox(t,e=!1){this._modules.graphics.forceAttributesComputation();const n=this._modules.graphics.getEdgeAttributes(),i=this._modules.graphics.getNodeAttributes(),s={x1:0,y1:0,x2:0,y2:0},r={x:0,y:0},o={minX:0,minY:0,maxX:0,maxY:0},a=[],l=[],d=[],h=[];for(let c=0;c<t.size;++c){const g=t._indexes[c],m=n.source.get(g),_=n.target.get(g),p=n.curvature.get(g),v=i.x.get(m),x=i.y.get(m),b=i.scalingMethod.get(m)==="scaled",E=2*i.radius.get(m),S=i.x.get(_),A=i.y.get(_),T=i.scalingMethod.get(_)==="scaled",P=2*i.radius.get(_);b?d.push(E):h.push(E),T?d.push(P):h.push(P),e||p===0?(a.push(v,S),l.push(x,A)):m===_?(m1(v,x,p,E/2,0,s),Ip(v,x,s.x1,s.y1,s.x2,s.y2,S,A,o),a.push(o.minX,o.maxX),l.push(o.minY,o.maxY)):(Mp(v,x,S,A,p,r),c1(v,x,r.x,r.y,S,A,o),a.push(o.minX,o.maxX),l.push(o.minY,o.maxY))}return new Ai({xValues:a,yValues:l,scaledSizeValues:d,fixedSizeValues:h})}getRawGraphBoundingBox(t){const e=t.nodes.length,n=new Array(e),i=new Array(e),s=new Array(e);for(let r=0;r<e;r++){const o=t.nodes[r].attributes||{};n[r]=o.x||0,i[r]=o.y||0,s[r]=o.radius||5}return new Ai({xValues:n,yValues:i,scaledSizeValues:s})}_locateBoundingBox(t,e={}){if(isNaN(t.cx))return Promise.resolve();const{padding:n={},easing:i=sH,duration:s=0,maxNodeSizeOnScreen:r=FT,ignoreZoomLimits:o=!1}=e,a=RT(t,this._modules.dom.getDimensions(),n,r),l=a.x,d=a.y,h=a.zoom,c=h/this._modules.camera.getZoom();return this._moveCamera(l,d,h,s,i,c,o)}_moveCamera(t,e,n,i,s,r,o){const a={duration:i,easing:s,ignoreZoomLimits:o},l=this._modules.camera.setCenter({x:t,y:e},a);return r>1.01||r<.99?this._modules.camera.setZoom(n,a):l}computeConfigForBounds(t,e={}){const{padding:n={},maxNodeSizeOnScreen:i=FT}=e;return RT(t,this._modules.dom.getDimensions(),n,i)}layoutDataBoundingBox({x:t,y:e,indexes:n}){const i=this._modules.graphics.getNodeAttributes(),s=[],r=[],o=[],a=[];for(let l=0;l<n.length;++l){const d=n[l],h=t[l],c=e[l],g=2*i.radius.get(d),m=i.scalingMethod.get(d)==="scaled";s.push(h),r.push(c),m?o.push(g):a.push(g)}return new Ai({xValues:s,yValues:r,scaledSizeValues:o,fixedSizeValues:a})}isEdgeInPolygon(t,e){return eH(t,e,this._modules.camera.getZoom())}isElementInView(t,{margin:e=0}={}){const{width:n,height:i}=this._modules.camera.getSize(),s={minX:-e,minY:-e,maxX:n+e,maxY:i+e};return t.isNode?this.isNodeInRectangle(t,s):this.isEdgeInRectangle(t,s)}isNodeInRectangle(t,e){if(this._modules.geo.isEnabled()){const n=this._modules.geo.getContainerCoord(t);return RR(n.x,n.y,Number(t.getAttribute("radius")),e)}return nH(t,e,this._modules.camera.getZoom())}isNodeInPolygon(t,e){const n=t.getPositionOnScreen();return jh(n.x,n.y,e)}isEdgeInRectangle(t,e){return iH(t,e,this._modules.camera.getZoom())}},oH=qo&&typeof navigator<"u"&&"msLaunchUri"in navigator&&Yr&&!("documentMode"in document);function aH(t){return oH?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Vi():t.deltaY&&t.deltaMode===1?20*-t.deltaY:t.deltaY&&t.deltaMode===2?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var lH=6,uH=class extends ee{constructor(){super(...arguments),this._px=0,this._py=0,this._pressX=0,this._pressY=0,this._left=!1,this._middle=!1,this._right=!1,this._clickCounter={left:0,middle:0,right:0},this._buttons={left:!1,middle:!1,right:!1},this._skipNextMove=!1,this._onMouseWheel=t=>{this._isEnabled()&&this._isWheelEnabled()&&(!this._disableWheelUntilMouseDown()||this._modules.dom.hasFocus())&&(t.preventDefault(),t.stopPropagation(),this._applyMouseWheelZoom(t))},this._onMouseMove=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,n=this._modules.position.y,i=e-this._px,s=n-this._py;i===0&&s===0||(this._skipNextMove?this._skipNextMove=!1:wn(e,n,this._pressX,this._pressY)>=lH&&(this._resetClickCounter(),this._modules.events.fire("mousemoveInternal",{x:e,y:n,dx:i,dy:s,domEvent:this._evt})))},this._onDocumentMouseMove=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,n=this._modules.position.y,i=this._bounds,s=e-this._px,r=n-this._py;(e<0||e>i.width||n<0||n>i.height)&&this._modules.events.fire("documentMouseMove",{x:e,y:n,dx:s,dy:r,domEvent:this._evt})},this._onMouseUp=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,n=this._modules.position.y,i=this._button,s=this._evt;this._buttons[i]=!1,this._clickCounter[this._button]===1?this._modules.events.fire("clickInternal",{button:i,x:e,y:n,domEvent:s}):this._clickCounter[i]>1&&(this._modules.events.fire("doubleclickInternal",{button:i,x:e,y:n,domEvent:s}),this._resetClickCounter(i)),this._modules.events.fire("mouseupInternal",{button:i,x:e,y:n,domEvent:s})},this._onDocumentMouseup=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,n=this._modules.position.y,i=this._button;this._buttons[i]=!1;const s=this._modules.dom;this._modules.events.fire("documentMouseUp",{button:i,x:e,y:n,domEvent:this._evt}),s.removeDirectWindowEventListener("mousemove",this._onDocumentMouseMove),s.removeDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onMouseDown=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,n=this._modules.position.y,i=this._button,s=this._modules.dom;this._skipNextMove=!0,this._pressX=e,this._pressY=n,this._lastMouseDownTarget=t.target,s.focus(),this._buttons[i]=!0,this._clickCounter[i]+=1;const r=i;this._dbclickTimer=s.setTimeout(()=>{this._resetClickCounter(r,0)},this._getDoubleClickTimer()),this._modules.events.fire("mousedownInternal",{button:i,x:e,y:n,domEvent:this._evt}),s.addDirectWindowEventListener("mousemove",this._onDocumentMouseMove),s.addDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onDrop=t=>{if(!this._isEnabled()||!this._setXY(t))return;t.preventDefault();const{x:e,y:n}=this._modules.camera.screenToGraphCoordinates(this._modules.position);this._modules.events.fire("drop",{domEvent:this._evt,x:e,y:n})}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("mouse.enabled",!0),this._modules.settings.register("mouse.wheelEnabled",!0),this._modules.settings.register("mouse.disableWheelUntilMouseDown",!1),this._modules.settings.register("mouse.doubleClickTimer",500),this._modules.events.register(["mousedownInternal","mouseupInternal","mousemoveInternal","mousewheelInternal","clickInternal","doubleclickInternal","mouseoverInternal","mouseoutInternal","documentMouseUp","documentMouseMove","drop"]),this._modules.dom.afterNextFrame().then(()=>this._initializeListeners())}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get left(){return this._left}get right(){return this._right}get middle(){return this._middle}_isEnabled(){return this._modules.settings.get("mouse.enabled")}_isWheelEnabled(){return this._modules.settings.get("mouse.wheelEnabled")}_disableWheelUntilMouseDown(){return this._modules.settings.get("mouse.disableWheelUntilMouseDown")}_getDoubleClickTimer(){return this._modules.settings.get("mouse.doubleClickTimer")}_resetClickCounter(t,e=0){t?this._clickCounter[t]=e:(this._clickCounter.left=e,this._clickCounter.middle=e,this._clickCounter.right=e),this._modules.dom.clearTimeout(this._dbclickTimer),this._lastMouseDownTarget=null}_setXY(t){const e=this._domElt.getBoundingClientRect();return this._bounds=e,!!e&&(this._evt=t,this._button=Xb[t.button],this._px=this._modules.position.x,this._py=this._modules.position.y,this._modules.position.x=t.clientX-e.left,this._modules.position.y=t.clientY-e.top,this._left=this._buttons.left,this._right=this._buttons.right,this._middle=this._buttons.middle,!0)}_applyMouseWheelZoom(t){this._setXY(t)&&this._modules.events.fire("mousewheelInternal",{delta:aH(t),dx:t.deltaX,dy:t.deltaY,x:this._modules.position.x,y:this._modules.position.y,domEvent:this._evt})}_initializeListeners(){const t=this._domElt,e=this._modules.dom;mp&&this._modules.dom.addElementEventListener(document,"contextmenu",i=>{this._lastMouseDownTarget&&i.target!==this._lastMouseDownTarget&&i.preventDefault()}),e.addElementEventListener(t,"contextmenu",i=>{this._setXY(i),this._modules.dom.hasFocus()&&this._modules.settings.get("mouse.enabled")&&i.preventDefault()},!1);const n="onwheel"in t?"wheel":t.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";e.addElementEventListener(t,n,this._onMouseWheel),e.addElementEventListener(t,"mousemove",this._onMouseMove),e.addElementEventListener(t,"mouseleave",i=>{if(!this._isEnabled())return;this._modules.dom.blur();const s=t.getBoundingClientRect();i.clientX>=s.left+1&&i.clientX<=s.right-1&&i.clientY>=s.top+1&&i.clientY<=s.bottom-1||this._modules.events.fire("mouseout",{domEvent:this._evt})}),e.addElementEventListener(t,"mousedown",this._onMouseDown),e.addElementEventListener(t,"mouseup",this._onMouseUp),e.addElementEventListener(t,"dragover",i=>{i.preventDefault()}),e.addElementEventListener(t,"drop",this._onDrop)}},dH={doubleTapTimer:500,touchEventRate:15},hH=class extends ee{constructor(){super(...arguments),this._pressed=!1,this._addEvent=(t,e,n,i)=>{this._modules.dom.addElementEventListener(t,e,n,i)},this._addWinEvent=(t,e,n,i)=>{this._modules.dom.addDirectWindowEventListener(e,n,i)},this._removeWinEvent=(t,e,n)=>{this._modules.dom.removeDirectWindowEventListener(e,n)}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("touch.enabled",!0),this._modules.events.register(["touchDown","touchUp","touchTap","touchDoubleTap","touchMove","touchStartGesture","touchProgressGesture","touchEndGesture","documentTouchMove","documentTouchUp"]),this._modules.dom.afterNextFrame().then(()=>{this._initialize(this)})}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get pressed(){return this._pressed}_listen(t,e,n){if(EI){if(e==="touchstart")return i5(this._addEvent,t,n);if(e==="touchmove")return r5(this._addWinEvent,t,n);if(e==="touchend")return o5(this._addWinEvent,t,n);if(e==="touchcancel")return s5(this._addWinEvent,t,n)}return this._modules.dom.addElementEventListener(t,e,n)}_initialize(t){let e=0,n=0,i=0,s=0,r=!1,o="left",a=0,l=!1,d=!1,h=0,c=null,g=null;const m=()=>{this._modules.position.x=e,this._modules.position.y=n,this._pressed=r},_=(S,A)=>{const T=this._domElt.getBoundingClientRect();if(!T||S.touches==null)return null;const[P,k]=S.touches,I=P.clientX-T.left,R=P.clientY-T.top,M=k.clientX-T.left,z=k.clientY-T.top,j=(I+M)/2,X=(R+z)/2,O=j-e,N=X-n,W=wn(I,R,M,z),U=this._modules.settings.get("interactions.zoom.speed")||Zv,K=OM(W,U),Z=Lu(I,R,M,z),rt={dx:O,dy:N,rotation:Z-h,scale:K};return((vt,St,ut,_t)=>{h=St,e=ut,n=_t,m()})(0,Z,j,X),rt},p=S=>{if(S.touches&&S.touches.length===2&&d){const A=_(S);if(A){const{dx:T,dy:P,rotation:k,scale:I}=A;this._modules.events.fire("touchProgressGesture",{dx:T,dy:P,rotation:k,scale:I,x:e,y:n,domEvent:c,button:o})}}},v=S=>{if(o=Xb[S.button],!S.touches)return!1;if(S.touches.length!==1)return r=!1,S.touches.length>1&&this._modules.events.fire("touchUp",{x:e,y:n,domEvent:c,button:o}),!1;const A=this._domElt.getBoundingClientRect();return A&&(i=e,s=n,e=S.touches[0].clientX-A.left|0,n=S.touches[0].clientY-A.top|0,r=!0,c=S,m()),!0},x=()=>{a=0,this._modules.dom.clearTimeout(g)},b=S=>{if(S.preventDefault(),!S.touches)return;if(S.touches.length!==2&&d&&(d=!1,this._modules.events.fire("touchEndGesture",{domEvent:c})),v(S),S.touches.length===0){const T={x:e,y:n,domEvent:c,button:o};a===1&&this._modules.events.fire("touchTap",T),a>1&&(this._modules.events.fire("touchDoubleTap",T),x()),this._modules.events.fire("touchUp",T)}const A=qr().documentElement;Bw(this._removeWinEvent,A,"touchmove",this._onMove),Bw(this._removeWinEvent,A,"touchend",this._onEnd)},E=S=>{p(S),l?l=!1:(x(),v(S)&&this._modules.events.fire("touchMove",{x:e,y:n,dx:e-i,dy:n-s,domEvent:c,button:o}))};this._listen(this._domElt,"touchstart",S=>{if(!S.touches)return;S.touches.length!==2||d||_(S)&&(d=!0,this._modules.events.fire("touchStartGesture",{domEvent:c})),v(S)&&(this._modules.dom.focus(),this._modules.events.fire("touchDown",{x:e,y:n,domEvent:c,button:o}),a+=1,g=this._modules.dom.setTimeout(x,dH.doubleTapTimer),l=!0);const A=qr().documentElement;this._onMove=this._listen(A,"touchmove",E),this._onEnd=this._listen(A,"touchend",b)})}},cH=class{getHoveredElement(){return this.modules.captor.getPointedElement()}getPointerInformation(){return this.modules.captor.getCursorInformation()}},gH=class{getNodesByClassName(t,e){return this.modules.classes.getClassByName(t,!0).getNodes(e)}getEdgesByClassName(t,e){return this.modules.classes.getClassByName(t,!0).getEdges(e)}},I1={};sc(I1,{gexf:()=>FR,gexfFromUrl:()=>M1,graphml:()=>BR,graphmlFromUrl:()=>UR,janus:()=>OR,json:()=>DR,jsonFromUrl:()=>N1,mtx:()=>fH,mtxFromUrl:()=>mH,neo4j:()=>zR});var _r=Pb(bk()),FR=t=>Promise.resolve(_r.gexf(t)),M1=t=>$u(t).then(e=>_r.gexf(e)),OR=t=>Promise.resolve(_r.janus(t)),DR=(t,e)=>Promise.resolve(_r.json(t,e)),N1=(t,e)=>$u(t).then(n=>_r.json(n,e)),zR=t=>Promise.resolve(_r.neo4j(t)),BR=t=>Promise.resolve(_r.graphml(t)),UR=t=>$u(t).then(e=>_r.graphml(e)),fH=t=>Promise.resolve(_r.mtx(t)),mH=t=>$u(t).then(e=>_r.mtx(e)),pH=class extends Ge{constructor(){super(...arguments),this.wait=t=>new Promise(e=>setTimeout(e,t)),this.initRandomGraph=t=>this._ogma.generate.random(t).then(this._ogma.setGraph).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.initGrid=t=>{const e=Math.ceil(Math.sqrt(t));return this._ogma.generate.grid({rows:e,columns:e}).then(n=>this._ogma.setGraph(n)).then(()=>this._ogma.view.locateGraph())},this.initLine=t=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}},{id:1,attributes:t?{x:0,y:50}:{x:50,y:0}}],edges:[{id:0,source:1,target:0}]}),this._ogma.view.locateGraph()),this.initSingleNode=()=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}}],edges:[]}),this._ogma.view.locateGraph()),this.initContinuousRenderLoop=({triggerKey:t="r",start:e=!0}={})=>{let n=e;const i=()=>{n&&this._ogma.modules.dom.beforeNextFrame().then(i)};document.addEventListener("keydown",({key:s})=>{s===t&&(n=!n,i())}),i()},this.appendToBody=()=>{const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.bottom="0",t.style.right="0",document.body.appendChild(t),this._ogma.setContainer(t)},this.loadFile=t=>(t.endsWith(".gexf")?M1(t):N1(t)).then(e=>this._ogma.setGraph(e)).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.enableLasso=t=>{this._ogma.events.on("dragStart",()=>{this._ogma.keyboard.isKeyPressed("ctrl")&&this._ogma.tools.lasso.enable(t)})},this.randomizeGraph=({minX:t=0,minY:e=0,maxX:n=500,maxY:i=500}={})=>this._ogma.getNodes().setAttributes(this._ogma.getNodes().map(()=>({x:t+Math.random()*(n-t),y:e+Math.random()*(i-e)})))}},_H=class{setContainer(t){this.modules.dom.setContainer(t)}getContainer(){return this.modules.dom.getContainer()}},yH=class extends Ge{constructor(){super(...arguments),this.once=(t,e)=>(this._ogma.modules.events.once(t,e),this),this.removeListener=t=>{this._ogma.modules.events.off(t)},this.onNodesAdded=t=>(this._ogma.events.on("addNodes",t),this._ogma),this.onBeforeNodesRemoved=t=>(this._ogma.events.on("beforeRemoveNodes",t),this._ogma),this.onNodesRemoved=t=>(this._ogma.events.on("removeNodes",t),this._ogma),this.onEdgesAdded=t=>(this._ogma.events.on("addEdges",t),this._ogma),this.onBeforeEdgesRemoved=t=>(this._ogma.events.on("beforeRemoveEdges",t),this._ogma),this.onEdgesRemoved=t=>(this._ogma.events.on("removeEdges",t),this._ogma),this.onGraphCleared=t=>(this._ogma.events.on("clearGraph",t),this._ogma),this.onNodesClassAdded=(t,e)=>(this._ogma.modules.classes.onNodeClassAdded(t,e),this._ogma),this.onNodesClassRemoved=(t,e)=>(this._ogma.modules.classes.onNodeClassRemoved(t,e),this._ogma),this.onEdgesClassAdded=(t,e)=>(this._ogma.modules.classes.onEdgeClassAdded(t,e),this._ogma),this.onEdgesClassRemoved=(t,e)=>(this._ogma.modules.classes.onEdgeClassRemoved(t,e),this._ogma),this.onNodeDragStart=t=>(this._ogma.events.on("nodesDragStart",t),this._ogma),this.onNodeDragProgress=t=>(this._ogma.events.on("nodesDragProgress",t),this._ogma),this.onNodeDragEnd=t=>(this._ogma.events.on("nodesDragEnd",t),this._ogma),this.onDrop=t=>(this._ogma.events.on("drop",t),this._ogma),this.onNodesSelected=t=>this.onNodesClassAdded(Xe,t),this.onNodesUnselected=t=>this.onNodesClassRemoved(Xe,t),this.onEdgesSelected=t=>this.onEdgesClassAdded(Xe,t),this.onEdgesUnselected=t=>this.onEdgesClassRemoved(Xe,t),this.onNodeDataChange=t=>(this._ogma.events.on("updateNodeData",t),this._ogma),this.onEdgeDataChange=t=>(this._ogma.events.on("updateEdgeData",t),this._ogma),this.onAnimate=t=>(this._ogma.events.on("animate",t),this._ogma),this.onMouseMove=t=>(this._ogma.events.on("mousemove",t),this._ogma),this.onMouseButtonDown=t=>(this._ogma.events.on("mousedown",t),this._ogma),this.onMouseButtonUp=t=>(this._ogma.events.on("mouseup",t),this._ogma),this.onClick=t=>(this._ogma.events.on("click",t),this._ogma),this.onDoubleClick=t=>(this._ogma.events.on("doubleclick",t),this._ogma),this.onMouseWheel=t=>(this._ogma.events.on("mousewheel",t),this._ogma),this.onHover=t=>(this._ogma.events.on("mouseover",t),this._ogma),this.onUnhover=t=>(this._ogma.events.on("mouseout",t),this._ogma),this.onDragStart=t=>(this._ogma.events.on("dragStart",t),this._ogma),this.onDragProgress=t=>(this._ogma.events.on("dragProgress",t),this._ogma),this.onDragEnd=t=>(this._ogma.events.on("dragEnd",t),this._ogma),this.onGestureStart=t=>(this._ogma.events.on("gestureStart",t),this._ogma),this.onGestureProgress=t=>(this._ogma.events.on("gestureProgress",t),this._ogma),this.onGestureEnd=t=>(this._ogma.events.on("gestureEnd",t),this._ogma),this.onRendererStateChange=t=>(this._ogma.events.on("rendererStateChange",t),this._ogma),this.onZoomProgress=t=>(this._ogma.events.on("zoom",t),this._ogma),this.onViewChanged=t=>(this._ogma.events.on("viewChanged",t),this._ogma),this.onNodesConnected=t=>(this._ogma.events.on("connectNodes",t),this._ogma),this.onGeoModeEnabled=t=>(this._ogma.events.on("geoEnabled",t),this._ogma),this.onGeoModeDisabled=t=>(this._ogma.events.on("geoDisabled",t),this._ogma),this.onGeoModeLoaded=t=>(this._ogma.events.on("geoLoaded",t),this._ogma),this.onLayoutStart=t=>(this._ogma.events.on("layoutStart",t),this._ogma),this.onLayoutComplete=t=>(this._ogma.events.on("layoutEnd",t),this._ogma),this.onLayoutComputed=t=>(this._ogma.events.on("layoutComputed",t),this._ogma),this.onTooltipShown=t=>(this._ogma.events.on("tooltipShow",t),this._ogma),this.onTooltipHidden=t=>(this._ogma.events.on("tooltipHide",t),this._ogma),this.onTransformationEnabled=t=>(this._ogma.events.on("transformationEnabled",t),this._ogma),this.onTransformationDisabled=t=>(this._ogma.events.on("transformationDisabled",t),this._ogma),this.onTransformationSetIndex=t=>(this._ogma.events.on("transformationSetIndex",t),this._ogma),this.onTransformationDestroyed=t=>(this._ogma.modules.events.on("transformationDestroyed",t),this._ogma),this.onTransformationRefreshed=t=>(this._ogma.events.on("transformationRefresh",t),this._ogma)}on(t,e){return this._ogma.modules.events.on(t,e),this}off(t){return this._ogma.modules.events.off(t),this}onKeyPress(t,e){return this._ogma.modules.keyboard.onKeyPress(t,e),this._ogma}};function Mm(t,e,n){if(t!=null)return Array.isArray(t)?t[0]:t}function qv(t){return t==null?null:typeof t=="string"||typeof t=="number"?`${t}`:t&&qv(t.content)}function vH(t){if(t!=null)return typeof t=="string"?t:t.style||"line"}var xH=["color","radius","shape","text.content","x","y"],bH=["color","width","shape.body","text.content"];function EH(t){return t!=="all"?{nodes:["x","y"],edges:[]}:{nodes:xH,edges:bH}}function SH(t,{nodes:e,edges:n}){const i=t.getOriginalAttributes();return{nodes:e.reduce((s,r)=>(s[r.getId()]={x:i.nodes.x.get(r._index),y:i.nodes.y.get(r._index),color:Mm(i.nodes.color.get(r._index)),radius:i.nodes.radius.get(r._index),shape:i.nodes.shape.get(r._index),text:{content:i.nodes.text.content.get(r._index)}},s),{}),edges:n.reduce((s,r)=>(s[r.getId()]={color:Mm(i.edges.color.get(r._index)),width:i.edges.width.get(r._index),shape:{type:i.edges.shape.body.get(r._index)},text:{content:i.edges.text&&i.edges.text.content&&i.edges.text.content.get(r._index)}},s),{})}}function wH(t){return{nodes:t.nodes.map(({id:e,attributes:n={},data:i})=>{const{color:s,radius:r,shape:o,text:a,x:l,y:d}=n;return{id:e,x:l,y:d,color:Mm(s),size:r,shape:o,text:qv(a),data:i}}),edges:t.edges.map(({id:e,source:n,target:i,attributes:s={},data:r})=>{const{color:o,width:a,text:l,shape:d}=s;return{id:e,source:n,target:i,color:Mm(o),size:a,shape:vH(d),text:qv(l),data:r}})}}function OT(t){return t instanceof fr?t.getId():t}function DT(t){return t instanceof Jo?t.getId():t}function zT(t){return t instanceof to?t.getId():t instanceof fr?[t.getId()]:Qn(t)?t.map(OT):[OT(t)]}function BT(t){return t instanceof tl?t.getId():t instanceof Jo?[t.getId()]:Qn(t)?t.map(DT):[DT(t)]}var R1="visible";function AH(t,e){return t?zT(t):typeof e=="object"?zT(e.nodes):e||R1}function TH(t,e){return t?BT(t):typeof e=="object"?BT(e.edges):e||R1}function $R(t,e,n,i){const s=AH(e,i),r=TH(n,i);return{nodes:t.getNodes(s),edges:t.getEdges(r)}}function jR(t,{nodeAttributes:e,edgeAttributes:n,nodes:i,edges:s,filter:r,nodeData:o,edgeData:a}){const l=$R(t,i,s,r);return{nodes:l.nodes.toJSON({attributes:e,data:o}),edges:l.edges.toJSON({attributes:n,data:a})}}function Op(t,e,{styles:n,nodes:i,edges:s,filter:r,nodeData:o,edgeData:a}){const{nodes:l,edges:d}=EH(n),h=jR(t,{nodeAttributes:l,edgeAttributes:d,nodes:i,edges:s,filter:r,nodeData:o,edgeData:a});if(n==="original"){const c=SH(e,$R(t,i,s,r));for(const g of h.nodes)g.id!=null&&(g.attributes=c[g.id]);for(const g of h.edges)g.id!=null&&(g.attributes=c[g.id])}return n==="all"&&h.edges.forEach(({source:c,target:g,attributes:m})=>{if(m){const _=t.getNode(c);if(m.color==="source"&&_){const v=_.getAttribute("color");m.color=Array.isArray(v)?v[0]:v}const p=t.getNode(g);if(m.color==="target"&&p){const v=p.getAttribute("color");m.color=Array.isArray(v)?v[0]:v}}}),wH(h)}function CH(t,e){for(let n=0;n<e.length;++n){if(t==null)return;t=t[e[n]]}return t}function LH(t,e,n){for(let i=0;i<e.length-1;++i){const s=e[i];let r=t[s];r===void 0&&(r={},t[s]=r),t=r}t[e[e.length-1]]=n}function PH(t){const e=wt({},t[0]);for(const n of t)for(const i of Object.keys(n))i in e||(e[i]=void 0);return Object.keys(e)}function UT(t,e){return t==null||Array.isArray(t)&&!t.length?e:t}function kH(t){return typeof t=="string"}function IH(t,e,n,i,s){const r=e==="edges",o={};return t.forEach((a,l)=>{const d=s.get(l),h=K0(UT(n(d),e));if(!h.every(kH))throw Error(`The tab ${e} function returned an invalid value.`);const c=K0(i(a.data,h));h.forEach((g,m)=>{const _=UT(c[m],{}),p=Rp(wt(wt({internal___id:a.id},r?{internal___source:a.source,internal___target:a.target}:{}),_)).reduce((v,{path:x,value:b})=>(v[x.join(".")]=b,v),{});o[g]=o[g]||[],o[g].push(p)})}),o}function MH(t){if(!t.length)return[];const e=PH(t),n=[e];for(const i of t)n.push(e.map(s=>i[s]));return n[0]=n[0].map(i=>i.replace("internal___","")),n}function NH(t,e,n){const i=new cN;let s=e?1:3;const r=[];for(let a=0;a<t.length;++a){const l=t[a],d=new Array(s);let h=l.data;if(n){const g={};n.forEach(m=>{const _=Wa(m),p=CH(h,_);LH(g,_,p)}),h=g}const c=Rp(h);d[0]=l.id,e||(d[1]=l.source,d[2]=l.target);for(let g=0;g<c.length;++g){const{path:m,value:_}=c[g];m.length&&(i.has(m)?d[i.get(m)]=_:(i.set(m,s),d[s]=_,s++))}r.push(d)}const o=[];return o.push("id"),e||(o.push("source"),o.push("target")),i.keys().forEach(a=>o.push(a[a.length-1])),r.unshift(o),r.forEach(a=>a.length=s),r}var RH=/[=+\-@|%]/,FH=t=>t.length>0&&RH.test(t[0])?`'${t=t.replace("|","|")}`:t;function GR(t){return t===void 0?"":t instanceof Date?t.toISOString():FH(""+t)}var OH={what:void 0,dataProperties:void 0,separator:",",textSeparator:'"',download:!0,filename:"graph.csv",filter:"visible",nodes:void 0,edges:void 0,nodeData:Gs,edgeData:Gs,styles:"none"};function DH(t,e){const{what:n,dataProperties:i,nodes:s,edges:r,separator:o,textSeparator:a,download:l,nodeData:d,edgeData:h,filename:c,filter:g}=rs(typeof e=="string"?{what:e}:e,OH),m=Op(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:s,edges:r,filter:g,nodeData:d,edgeData:h});try{const _=zH(m,{what:n,separator:o,textSeparator:a,dataProperties:i});return l&&ra(_,c,"text"),Promise.resolve(_)}catch(_){return Promise.reject(_)}}function zH(t,{what:e,separator:n,textSeparator:i,dataProperties:s}){const r=new RegExp(i,"g");if(i&&i!=='"'&&i!=="'")throw new TypeError(`Invalid argument :"textSeparator" is not single-quote or double-quote, was ${i}`);if(e!=="nodes"&&e!=="edges")throw new TypeError('missing argument: "what": should have value "nodes" or "edges"');const o=e==="nodes";return NH(o?t.nodes:t.edges,o,s).map(a=>a.map(l=>function(h){return i+GR(h).replace(r,`${i}${i}`).replace(/\n/g,"\\n").replace(/\r/g,"")+i}(l))).map(a=>a.join(n)).join(`
`)}var wl=t=>Math.round(255*t);function $T(t,e){if(e==="integer"&&typeof t=="number"){if(t%1!=0)return"float"}else if(typeof t!="number")return typeof t=="boolean"?"boolean":"string";return e}var Jv=t=>typeof t=="object"&&t!==null&&t.constructor===Object;function Kv(t,e={}){return hr(t,(n,i)=>{Jv(n)?Kv(n,e):e[i]=n}),e}var BH={creator:void 0,description:void 0,styles:"all",download:!0,filename:"graph.gexf",nodes:void 0,edges:void 0,nodeData:t=>t,edgeData:t=>t,filter:"visible"};function UH(t,e={}){const{styles:n,nodes:i,edges:s,download:r,filename:o,creator:a,description:l,filter:d,nodeData:h,edgeData:c}=rs(e,BH),g=$H(Op(t.modules.graph,t.modules.individualAttributes,{styles:n,nodes:i,edges:s,filter:d,nodeData:h,edgeData:c}),{creator:a,description:l});return r&&ra(g,o,"text"),Promise.resolve(g)}function $H(t,e){const n=vN(),i={},s={};let r,o=0,a=0;const l=n.createElement("gexf");l.setAttribute("xmlns","http://www.gexf.net/1.2draft"),l.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),l.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),l.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),l.setAttribute("version","1.2");const d=n.createElement("meta");if(d.setAttribute("lastmodifieddate",sI()),e.creator){const p=n.createElement("creator");r=n.createTextNode(""+e.creator),p.appendChild(r),d.appendChild(p)}if(e.description){const p=n.createElement("description");r=n.createTextNode(""+e.description),p.appendChild(r),d.appendChild(p)}const h=n.createElement("graph");h.setAttribute("mode","static");const c=n.createElement("nodes");t.nodes.forEach(p=>{const v=n.createElement("node");if(v.setAttribute("id",String(p.id)),p.text&&v.setAttribute("label",Yl(p.text)),Jv(p.data)){const b=Kv(p.data),E=n.createElement("attvalues");Object.keys(b).forEach(S=>{S in i||(i[S]={id:o,type:"integer"},o++);const A=b[S];i[S].type=$T(A,i[S].type);const T=n.createElement("attvalue");T.setAttribute("for",i[S].id),T.setAttribute("value",Yl(A)),E.appendChild(T)}),v.appendChild(E)}if(p.color){const b=fi(p.color);if(b){const E=n.createElement("viz:color");E.setAttribute("r",wl(b[0])),E.setAttribute("g",wl(b[1])),E.setAttribute("b",wl(b[2])),E.setAttribute("a",b[3]),v.appendChild(E)}}const x=n.createElement("viz:position");if(x.setAttribute("x",p.x),x.setAttribute("y",-p.y),v.appendChild(x),p.size){const b=n.createElement("viz:size");b.setAttribute("value",p.size),v.appendChild(b)}c.appendChild(v)});const g=n.createElement("attributes");g.setAttribute("class","node"),Object.keys(i).forEach(p=>{const v=n.createElement("attribute");v.setAttribute("id",i[p].id),v.setAttribute("title",p),v.setAttribute("type",i[p].type),g.appendChild(v)});const m=n.createElement("edges");t.edges.forEach(p=>{const v=n.createElement("edge");if(v.setAttribute("id",p.id.toString()),v.setAttribute("source",p.source),v.setAttribute("target",p.target),p.size&&v.setAttribute("weight",p.size),p.text&&v.setAttribute("label",Yl(p.text)),Jv(p.data)){const x=Kv(p.data),b=n.createElement("attvalues");Object.keys(x).forEach(E=>{E in s||(s[E]={id:a,type:"integer"},a++);const S=x[E];s[E].type=$T(S,s[E].type);const A=n.createElement("attvalue");A.setAttribute("for",s[E].id),A.setAttribute("value",Yl(S)),b.appendChild(A)}),v.appendChild(b)}if(p.color){const x=fi(p.color);if(x){const b=n.createElement("viz:color");b.setAttribute("r",wl(x[0])),b.setAttribute("g",wl(x[1])),b.setAttribute("b",wl(x[2])),b.setAttribute("a",x[3]),v.appendChild(b)}}if(p.size){const x=n.createElement("viz:size");x.setAttribute("value",p.size),v.appendChild(x)}m.appendChild(v)});const _=n.createElement("attributes");return _.setAttribute("class","edge"),Object.keys(s).forEach(p=>{const v=n.createElement("attribute");v.setAttribute("id",s[p].id),v.setAttribute("title",p),v.setAttribute("type",s[p].type),_.appendChild(v)}),h.appendChild(g),h.appendChild(_),h.appendChild(c),h.appendChild(m),l.appendChild(d),l.appendChild(h),n.appendChild(l),`<?xml version="1.0" encoding="UTF-8"?>${n.serialize()}`}var jH={graphId:"G",directedEdges:!0,styles:"all",download:!0,filename:"graph.graphml",nodes:void 0,edges:void 0,nodeData:t=>t,edgeData:t=>t,filter:"visible"};function GH(t,e){const{styles:n,nodes:i,edges:s,download:r,filename:o,graphId:a,directedEdges:l,filter:d,nodeData:h,edgeData:c}=rs(e,jH),g=VH(Op(t.modules.graph,t.modules.individualAttributes,{styles:n,nodes:i,edges:s,filter:d,nodeData:h,edgeData:c}),{graphId:a,directedEdges:l,noStyles:n==="none"});return r&&ra(g,o,"text"),Promise.resolve(g)}function VH(t,e){const n=xN();function i(g,m,_,p,v){_=_||{};const x=n.createElement(m);for(const b in _){if(!Object.prototype.hasOwnProperty.call(_,b))continue;const E=_[b];E!==void 0&&x.setAttribute(b,E)}return(p!==void 0||v)&&(Object.prototype.toString.call(p)==="[object Object]"&&(p=JSON.stringify(p)),x.appendChild(n.createTextNode(p))),g.appendChild(x),x}const s=["id","source","target"],r=["size","x","y","shape","text","color"],o={size:{for:"all",type:"double"},x:{for:"node",type:"double"},y:{for:"node",type:"double"},shape:{for:"all",type:"string"},color:{for:"all",type:"string"},r:{for:"all",type:"int"},g:{for:"all",type:"int"},b:{for:"all",type:"int"},a:{for:"all",type:"double"},text:{for:"all",type:"string"}};e.noStyles&&(delete o.color,delete o.r,delete o.g,delete o.b,delete o.a,delete o.shape,r.pop());const a=[],l=[];function d(g,m){const _={id:g.id};r.forEach(p=>{let v=g[p];p==="y"&&v&&(v=-parseFloat(v)),v!==void 0&&(_[(m==="edge"?"edge_":"")+p]=v,p==="color"&&function(b,E){const S=fi(E);S&&(b.r=S[0],b.g=S[1],b.b=S[2])}(_,v))}),hr(g.data||{},(p,v)=>{r.indexOf(v)===-1&&s.indexOf(v)===-1&&(o[v]?o[v].for!==m&&(o[v].for="all"):o[v]={for:m,type:"string"},_[v]=p)}),m==="edge"?(_.source=g.source,_.target=g.target,l.push(_)):a.push(_)}t.nodes.forEach(g=>d(g,"node")),t.edges.forEach(g=>d(g,"edge"));const h=i(n,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});hr(o,(g,m)=>{g.for!=="node"&&g.for!=="all"||i(h,"key",{"attr.name":m,"attr.type":g.type,for:"node",id:m}),g.for!=="edge"&&g.for!=="all"||i(h,"key",{"attr.name":m,"attr.type":g.type,for:"edge",id:"edge_"+m})}),i(h,"key",{id:"nodegraphics",for:"node","yfiles.type":"nodegraphics","attr.type":"string"}),i(h,"key",{id:"edgegraphics",for:"edge","yfiles.type":"edgegraphics","attr.type":"string"});const c=i(h,"graph",{edgedefault:e.directedEdges||e.directedEdges===void 0?"directed":"undirected",id:e.graphId?e.graphId:"G","parse.nodes":t.nodes.length,"parse.edges":t.edges.length,"parse.order":"nodesfirst"});return a.forEach(g=>{const m=i(c,"node",{id:g.id});(function(p,v){const x=i(p,"data",{key:"nodegraphics"}),b=i(x,"y:ShapeNode");i(b,"y:Geometry",{x:v.x,y:v.y,width:v.size,height:v.size}),e.noStyles||i(b,"y:Fill",{color:Lv(v.color),transparent:!1}),i(b,"y:NodeLabel",null,v.text||""),i(b,"y:Shape",{type:v.shape})})(m,g),hr(g,(_,p)=>{s.indexOf(p)===-1&&i(m,"data",{key:p},_,!0)})}),l.forEach(g=>{const m=i(c,"edge",{id:g.id,source:g.source,target:g.target});(function(p,v){const x=i(p,"data",{key:"edgegraphics"}),b=i(x,"y:PolyLineEdge");i(b,"y:LineStyle",{type:v.edge_type,color:e.noStyles?void 0:Lv(v.edge_color),width:v.edge_size}),i(b,"y:EdgeLabel",null,v.edge_label)})(m,g),hr(g,(_,p)=>{s.indexOf(p)===-1&&i(m,"data",{key:p},_,!0)})}),`<?xml version="1.0" encoding="UTF-8"?>
${b1(n)}`}var HH={nodeAttributes:["x","y","color","radius","shape","text"],edgeAttributes:["color","width","text"],nodeData:Gs,edgeData:Gs,filter:"visible",pretty:!1,download:!0,filename:"graph.json",anonymize:!1};function WH(t,e={}){e.anonymize&&(e={nodeAttributes:"all",edgeAttributes:"all",nodeData:um,edgeData:um,filter:e.filter||"all",download:e.download,pretty:e.pretty,filename:e.filename});const{nodeAttributes:n,edgeAttributes:i,nodeData:s,edgeData:r,filter:o,pretty:a,download:l,filename:d}=rs(e,HH),h=jR(t.modules.graph,{nodeAttributes:n,edgeAttributes:i,filter:o,nodeData:s,edgeData:r}),c=a?JSON.stringify(h,null," "):JSON.stringify(h);return l&&ra(c,d,"text"),Promise.resolve(h)}function XH(t,e){return t.getBoundingBox().computeForZoom(e).extend(Ai.fromValues(t.getAttribute("x"),t.getAttribute("y"),t.map(n=>n.getAttribute("radius")+n.getAttribute("innerStroke.width")+n.getAttribute("outerStroke.width"))))}function ZH(t,e,n){const i=e.view.graphToScreenCoordinates(n.bottomLeft()),s=e.view.graphToScreenCoordinates(n.topRight()),r=Math.abs(s.x-i.x),o=Math.abs(s.y-i.y),a=Math.min(t.width/r,t.height/o);t.width=r*a,t.height=o*a}function VR(t,e={}){const n=t.view.get(),i=typeof e.margin=="number"?e.margin:0,s={pixelRatio:e.pixelRatio||Vi(),angle:0,backgroundColor:null,zoom:0,x:0,y:0,width:0,height:0,hideImages:!1,renderBackground:!0,isBufferDisplayable:lm};if(e.width&&e.height?(s.width=e.width,s.height=e.height):(s.width=n.width,s.height=n.height),e.clip)s.zoom=n.zoom,s.x=n.x,s.y=n.y;else{const r=XH(t.getNodes(e.filter),n.zoom);if(e.texts){const o=t.modules.labels.getTextsBoundingBox();o.isValid()&&r.extend(o)}e.width!=null&&isFinite(e.width)&&e.height!=null&&isFinite(e.height)||ZH(s,t,r),s.width=Math.max(s.width,2*i),s.height=Math.max(s.height,2*i),s.x=r.cx,s.y=r.cy,s.zoom=Math.min((s.width-2*i)/r.width,(s.height-2*i)/r.height)}return t.modules.geo.isEnabled()?s.backgroundColor=null:e.background!==void 0&&(s.backgroundColor=e.background),s}function Qv(t,e,n,i,s=!1){const r=ue(wt({},n),{hideImages:s,angle:n.angle||0,currentTime:ci(),isBufferDisplayable:l=>e.texts||!tN(l)}),o={};if(e.badges===!1){const l={text:null,image:null};o.badges={topLeft:l,topRight:l,bottomRight:l,bottomLeft:l}}const a=t.styles.getClass(Ta);return a&&a.update({nodeAttributes:o}),t.modules.graphics.export(i,r,e.filter||R1,e)}var Mg=t=>({download:!0,filter:"visible",filename:`graph.${t}`,clip:!1,margin:10,width:void 0,height:void 0,background:null,badges:!0,legend:void 0,texts:!0,preventOverlap:!0,images:!0,textWatermark:{content:"",fontFamily:"Arial",fontSize:48,fontStyle:void 0,fontColor:"red",repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageWatermark:{url:void 0,width:void 0,height:void 0,repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageCrossOrigin:void 0,layers:!0,pixelRatio:void 0}),YH={png:Mg("png"),jpg:Mg("jpg"),tiff:Mg("tiff"),gif:Mg("gif")};function qH(t){const{canvas:e,parameters:n}=t;return n.textWatermark.content&&jT(e,n.textWatermark,sW,rW),n.imageWatermark.url?mI(n.imageWatermark.url).then(i=>(i&&(n.imageWatermark.content=i,jT(e,n.imageWatermark,aW,oW)),t)):t}function JH(t){const{ogma:e,canvas:n,parameters:i}=t,s=e.modules.legend;let r=null;return i.legend===void 0&&(r=!!s.enabled()&&s.getCurrentOptions()),i.legend===!0&&(r={}),r&&s.exportOnCanvas(n,r,t.parameters.pixelRatio),t}function KH(t){const{canvas:e,parameters:n,view:i}=t;if(!i.renderBackground)return t;i.renderBackground=!1;const s=e.getContext("2d");return s.fillStyle=n.background,s.fillRect(0,0,e.width,e.height),t}function QH(t){const{ogma:e,view:n}=t;return e.modules.geo.isEnabled()?e.modules.geo.exportBackground(n).then(i=>{const s=n.width*n.pixelRatio,r=n.height*n.pixelRatio,o=ei(s,r),a=o.getContext("2d");return a.drawImage(i,(s-i.width)/2,(r-i.height)/2),a.drawImage(t.canvas,0,0),t.canvas=o,t}):t}function tW(t){const{ogma:e,view:n,canvas:i,parameters:s}=t;return s.layers?e.modules.layers.export({view:n,canvas:i,below:!0}).then(()=>t):t}function eW(t){const{ogma:e,view:n,canvas:i,parameters:s}=t;return s.layers?e.modules.layers.export({view:n,below:!1,canvas:i}).then(()=>t):t}function nW(t){const{ogma:e,parameters:n,canvas:i,view:s}=t,r=i.getContext("2d");return Qv(e,n,s,"canvas",!n.images).then(o=>{try{const a=o.getContext("2d");if(!a)throw new Error("Failed to render graph");return a.getImageData(0,0,1,1),r.drawImage(o,0,0,i.width,i.height),t}catch(a){return Wo(a),Qv(e,n,s,"canvas",!0).then(l=>(r.drawImage(l,0,0,i.width,i.height),t))}})}function iW({canvas:t,parameters:e,type:n}){const i=t.toDataURL("image/"+n);return e.download&&ra(i,e.filename,"dataURL"),i}function Ng(t,e,n){const i=rs(e,YH[n]);i.filename.endsWith(n)||(i.filename+="."+n),i.background===null&&(i.background=t.modules.graphics.getTransparentBackgroundColor());const s=VR(t,i);i.pixelRatio=s.pixelRatio;const r=ei(s.width*s.pixelRatio,s.height*s.pixelRatio),o={ogma:t,parameters:i,canvas:r,view:s,type:n};return Promise.resolve().then(()=>o).then(KH).then(QH).then(tW).then(nW).then(eW).then(qH).then(JH).then(iW).then(a=>(t.modules.events.fire("afterImageExport"),a))}function sW(t,e,n,i){t.textAlign="center",t.textBaseline="middle",t.fillText(e,n,i)}function rW(t,e,n){return{width:t.measureText(e).width,height:n}}function oW(t,e,n,i,s){return{width:i===void 0?e.width:i,height:s===void 0?e.height:s}}function aW(t,e,n,i,s,r){t.drawImage(e,n-s/2,i-r/2,s,r)}function jT(t,e,n,i){if(!e)return;if(typeof e!="object")e={content:e};else if(!e.content)return;const{fontFamily:s,fontSize:r,fontStyle:o,fontColor:a,repeat:l,alpha:d,space:h,content:c}=e;let g=e.angle;const m=t.getContext("2d"),_=t.width,p=t.height,v=e.x===void 0?_/2:e.x,x=e.y===void 0?p/2:e.y,b=e.height,E=e.width;g=g/180*Math.PI,ta(m,s,r,o),m.fillStyle=a,m.globalAlpha=d;const S=i(m,c,r,E,b);if(l){const A=S.width+h,T=S.height+h,P=Math.sqrt(_*_+p*p);m.save(),m.translate(0,0),m.rotate(g);for(let k=0;k<P;k+=A)for(let I=0;I<P;I+=T)n(m,c,k,I,S.width,S.height),I!==0&&n(m,c,k,-I,S.width,S.height);m.restore()}else m.save(),m.translate(v,x),m.rotate(g),n(m,c,0,0,S.width,S.height),m.restore()}var lW={download:!0,filename:"graph.svg",width:void 0,height:void 0,background:null,texts:!0,preventOverlap:!0,groupSemantically:!0,images:!0,badges:!0,embedFonts:!1,layers:!0,clip:!1,margin:10,prefix:"ogma"};function uW(t,e){const n=rs(e,lW),{background:i,filename:s,download:r,layers:o}=n,a=t.modules.graphics;i===null&&(n.background=a.getTransparentBackgroundColor());const l=VR(t,n);return Qv(t,n,l,"svg",!n.images).then(d=>(d.removeAttribute("pointer-events"),d.setAttribute("version","1.1"),d.setAttributeNS(lv,"xmlns",Hb),d.setAttributeNS(lv,"xmlns:xlink",fI),d)).then(d=>n.groupSemantically?hW(t,d,n):d).then(d=>gW(d,n)).then(d=>dW(t,l,d)).then(d=>GT(t,l,d,o,!0)).then(d=>GT(t,l,d,o,!1)).then(d=>(t.modules.events.fire("afterImageExport"),d)).then(d=>{const h=`<?xml version="1.0" encoding="utf-8"?>${b1(d)}`;return r&&ra(h,s,"text/xml"),h})}function dW(t,e,n){return t.modules.geo.isEnabled()?t.modules.geo.exportBackground(ue(wt({},e),{pixelRatio:1})).then(i=>{const s=Ce("image",{width:i.width,height:i.height,x:0,y:0,href:i.toDataURL()});return n.insertBefore(s,n.children[0]),n}):Promise.resolve(n)}function GT(t,e,n,i,s=!1){return i?t.modules.layers.export({view:e,svg:n,below:s}).then(()=>n):Promise.resolve(n)}function hW(t,e,n){const i=e.childNodes[2],s=i.childNodes,r={},o=n.prefix;for(let m=0;m<s.length;m++){const _=s[m],p=_.getAttribute(fs);p!=null&&(r[p]=r[p]||[],r[p].push(_))}const a=Object.keys(r),l=t.modules.graph,d=l.getNodeAttribute("id"),h=l.getEdgeAttribute("id"),c=Ce("g",{class:`${o}-edges`}),g=Ce("g",{class:`${o}-nodes`});for(let m=0;m<a.length;m++){const _=a[m],p=_.charAt(0)==="n",v=parseInt(_.substring(1)),x=r[_],b=Yl((p?d:h).get(v).toString()),E=Ce("g");E.setAttribute(`data-${p?"node":"edge"}-id`,b),E.setAttribute("class",`${o}-${p?"node":"edge"}`);for(let S=0;S<x.length;S++){const A=x[S];E.appendChild(A),A.removeAttribute(fs)}(p?g:c).appendChild(E)}return i.appendChild(c),i.appendChild(g),e}function cW(t){const e=[].concat(Array.prototype.slice.call(t.getElementsByTagName("text")||[])),n=[],i={};for(let s=0;s<e.length;s++){const r=e[s].parentNode.getAttribute("font-family");if(typeof r=="string"){const o=r.split(",");for(let a=0;a<o.length;a++){const l=o[a].replace(/['"]/g,"");l===""||i[l]||(i[l]=!0,n.push(l))}}}return{list:n,map:i}}function gW(t,e){const n=cW(t).map;return uN().then(i=>i.filter(s=>n[s.name])).then(i=>dN(i,!!e.embedFonts)).then(i=>{if(i.length!==0){const s=Ce("style");for(let r=0;r<i.length;r++)s.appendChild(Wb(i[r]));t.childNodes[0].appendChild(s)}return t})}var fW={what:void 0,dataProperties:void 0,filter:"visible",nodes:void 0,edges:void 0,download:!0,filename:"graph.xlsx",tab:void 0,nodeData:void 0,edgeData:void 0};function mW(t,e={}){typeof e=="string"&&(e={what:e});const{what:n,nodes:i,edges:s,tab:r={nodes:()=>"nodes",edges:()=>"edges"},download:o,filename:a,dataProperties:l,filter:d,nodeData:h,edgeData:c}=rs(e,fW);r.nodes||(r.nodes=()=>"nodes"),r.edges||(r.edges=()=>"edges");const g=Op(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:i,edges:s,filter:d,nodeData:_=>_,edgeData:_=>_}),m=pW(g,{what:n,tabFunctions:r,tabContentFunctions:{nodes:h||(_=>sv(Rh(_||{}),l)),edges:c||(_=>sv(Rh(_||{}),l))}},{nodes:t.modules.graph.getNodes(g.nodes.map(({id:_})=>_)),edges:t.modules.graph.getEdges(g.edges.map(({id:_})=>_))});return o&&ra(m,a,"blob"),Promise.resolve(m)}function pW(t,{what:e,tabFunctions:n,tabContentFunctions:i},s){const r=Ss("XLSX")||Ss("xlsx",{throwOnError:!0});if(!r)throw Error('The xlsx exports requires the "xlsx" peer dependency to be associated');const o=new yW;if(e){if(e!=="nodes"&&e!=="edges")throw new TypeError(`Invalid argument: "what" is not "nodes" or "edges", was ${e}`);e==="nodes"&&(t.edges=[]),e==="edges"&&(t.nodes=[])}const a={};for(const l of["nodes","edges"]){const d=IH(t[l],l,n[l],i[l],s[l]);for(const h of Object.keys(d))a[h]=[...a[h]||[],...d[h]]}for(const l of Object.keys(a))o.SheetNames.push(l),o.Sheets[l]=_W(r,MH(a[l]));return o.SheetNames.length===0&&(o.SheetNames=["nodes","edges"],o.Sheets.nodes={},o.Sheets.edges={}),Fh([vW(r.write(o,{bookType:"xlsx",bookSST:!1,type:"binary"}))])}function _W(t,e){const n={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let s=0;s!==e.length;++s){const r=e[s];for(let o=0;o!==r.length;++o){const a=r[o];i.s.r>s&&(i.s.r=s),i.s.c>o&&(i.s.c=o),i.e.r<s&&(i.e.r=s),i.e.c<o&&(i.e.c=o);const l={v:GR(a)};n[t.utils.encode_cell({c:o,r:s})]=l}}return i.s.c<1e7&&(n["!ref"]=t.utils.encode_range(i)),n}var yW=class{constructor(){this.SheetNames=[],this.Sheets={}}};function vW(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i!==t.length;++i)n[i]=255&t.charCodeAt(i);return e}var xW=class extends Ge{constructor(t){super(t),this.csv=e=>DH(this._ogma,e),this.xlsx=e=>(e&&e.dataProperties&&void 0,mW(this._ogma,e)),this.gexf=e=>UH(this._ogma,e),this.graphml=(e={})=>GH(this._ogma,e),this.json=(e={})=>WH(this._ogma,e),this.svg=(e={})=>uW(this._ogma,e),this.png=(e={})=>Ng(this._ogma,e,"png"),this.jpg=(e={})=>Ng(this._ogma,e,"jpg"),this.tiff=(e={})=>Ng(this._ogma,e,"tiff"),this.gif=(e={})=>Ng(this._ogma,e,"gif"),t.styles.createClass({name:Ta,isBuiltin:!0})}},li=Pb(yU()),bW=class extends Ge{constructor(){super(...arguments),this.balancedTree=t=>Promise.resolve(li.balancedTree.generate(li.balancedTree.configure(t))),this.barabasiAlbert=t=>Promise.resolve(li.barabasiAlbert.generate(li.barabasiAlbert.configure(t))),this.erdosRenyi=t=>Promise.resolve(li.erdosRenyi.generate(li.erdosRenyi.configure(t))),this.flower=t=>Promise.resolve(li.flower.generate(li.flower.configure(t))),this.grid=t=>Promise.resolve(li.grid.generate(li.grid.configure(t))),this.path=t=>Promise.resolve(li.path.generate(li.path.configure(t))),this.random=t=>Promise.resolve(li.random.generate(li.random.configure(t))),this.randomTree=t=>Promise.resolve(li.randomTree.generate(li.randomTree.configure(t)))}},EW=class extends Ge{constructor(){super(...arguments),this.enable=t=>this._ogma.modules.geo.enable(t),this.disable=t=>this._ogma.modules.geo.disable(t),this.setOptions=t=>this._ogma.modules.geo.setOptions(t),this.getOptions=()=>this._ogma.modules.geo.getOptions(),this.getMap=()=>this._ogma.modules.geo.getMap(),this.enabled=()=>this._ogma.modules.geo.isEnabled(),this.getCenter=()=>this._ogma.modules.geo.getCenter(),this.getView=()=>this._ogma.modules.geo.getView(),this.getZoom=()=>this._ogma.modules.geo.getZoom(),this.setZoom=t=>this._ogma.modules.geo.setZoom(t),this.setView=(t,e,n)=>this._ogma.modules.geo.setView(t,e,n),this.setCenter=(t,e)=>this._ogma.modules.geo.setCenter(t,e),this.toggle=t=>this._ogma.modules.geo.toggle(t),this.resetCoordinates=()=>this._ogma.modules.geo.resetCoordinates(),this.getUnprojectedCoordinates=t=>this._ogma.modules.geo.getUnprojectedCoordinates(this._ogma.getNodes(t)),this.runLayout=t=>Ha(this,[t],function*({type:e,nodes:n,latitudePath:i=ar,longitudePath:s=lr,options:r,center:o}){if(e===void 0||r===void 0)throw new Error("Ogma.geo.runLayout: Both layout type and options are required");if(n=this._ogma.getNodes(n),o===void 0){let a=0;if(o=n.reduce((l,d)=>{const h=d.getData(i),c=d.getData(s);return isNaN(h)||isNaN(c)||(l.latitude+=h,l.longitude+=c,a++),l},{latitude:0,longitude:0}),isNaN(o.latitude)||isNaN(o.longitude))throw new Error("Ogma.geo.runLayout: No valid center coordinates found");o.latitude/=a,o.longitude/=a}return this._ogma.modules.geo.runLayout({center:o,nodes:n,type:e,options:r,latitudePath:i,longitudePath:s})})}},SW=class{reloadFonts(){this.modules.graphics.reloadFonts()}},wW=class extends Ge{constructor(){super(...arguments),this.gexf=t=>FR(t),this.gexfFromUrl=t=>M1(t),this.janus=t=>OR(t),this.json=(t,e)=>DR(t,e),this.jsonFromUrl=(t,e)=>N1(t,e),this.neo4j=t=>zR(t),this.graphml=t=>BR(t),this.graphmlFromUrl=t=>UR(t)}},AW=class extends Ge{constructor(){super(...arguments),this.isKeyPressed=t=>this._ogma.modules.keyboard.isPressed(t),this.resetKeys=()=>{this._ogma.modules.keyboard.resetKeys()}}},TW=class extends Ge{addLayer(t,e){return this._ogma.modules.layers.addLayer(t,"layer",e)}addCanvasLayer(t,e,n){return this._ogma.modules.layers.addCanvasLayer(t,e,n)}addOverlay(t,e){if(!t.position)throw new Error("options.position argument is required");return this._ogma.modules.layers.addOverlay(t,e)}addSVGLayer(t,e){return t.element||(t.element=document.createElementNS("http://www.w3.org/2000/svg","svg")),t.draw||(t.draw=()=>{}),this._ogma.modules.layers.addSVGLayer(t,e)}},VT={name:"concentric",configure:function(t,{graph:e,data:n}){if(t.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');const i=ue(wt({},t),{centralNode:function(S,A){return A instanceof fr?A:S.getNode(A)}(e,t.centralNode)}),{centralNode:s,nodes:r}=i,o=e.getNode(s);if(o===void 0)throw new Error('concentric layout: "centralNode" parameter is not valid');const a=o._index,{x:l,y:d}=o.getPosition(),h=r.getAttribute("layoutable"),c=e.getNodes(r)._indexes,g=Array.from(c.filter((E,S)=>h[S]));g.indexOf(a)===-1&&g.push(a);const m=e.getNodeAttribute("radius").getMultiple(c),_=function(S,A,T,P){if(A)return A==="random"?"random":A==="radius"?P.slice():A==="degree"?T.getDegree():S.getProperty(T,A)}(n,i.sortBy,r,m),p=g.reduce((E,S,A)=>(E[S]=A,E),{}),v=g.map((E,S)=>S),x=new Set(t.edges.getExtremities()._indexes),b=g.map(E=>e.topology.getAdjacentElements(!0,new Uint32Array([E])).filter(S=>x.has(S)).map(S=>p[S]));return{sourceNodeIndex:g.indexOf(a),centerX:typeof i.centerX=="number"?i.centerX:l,centerY:typeof i.centerY=="number"?i.centerY:d,list:g,indexes:v,size:g.length,totalSize:g.length,attributes:{adjacentNodes:b,size:m},sortAttr:_,clockwise:i.clockwise===void 0||i.clockwise,circleHopRatio:i.circleHopRatio||5,allowOverlap:!!i.allowOverlap}},context:function(){return{dijkstra:function(t,e,n,i,s){const r=Math.pow(2,31)-1,o=new Int32Array(i),a=new Int32Array(i),l=new Int8Array(i);o.fill(r),a.fill(-1);for(let h=0;h<i;++h){const c=e[h];c!==void 0&&(o[c]=r,a[c]=-1)}o[s]=0;let d=0;for(;d!==-1;){let h=r;d=-1;for(let c=0;c<n;++c){const g=e[c],m=o[g];!l[g]&&m<h&&(h=m,d=g,l[g]=1)}if(d>-1){const c=t[d],g=h+1;c.forEach(m=>{const _=o[m];g<_&&(o[m]=g,a[m]=d)})}}return o},determinePropertyType:function(t,e,n){return e.some(i=>t[i]!=="number")?"string":"number"}}},update:function(t,e){const{attributes:n,indexes:i,size:s}=t,{sourceNodeIndex:r,centerX:o,centerY:a,sortAttr:l}=t,d=n.adjacentNodes,h=n.size,c=new Array(t.totalSize),g=new Array(t.totalSize),m=e.dijkstra(d,i,t.size,t.totalSize,r);let _=0;const p={};for(let T=0;T<s;T++){const P=h[i[T]];P>_&&(_=P)}const v=_*t.circleHopRatio;let x=0,b=0;const E=Math.PI/9;for(let T=0;T<s;T++){const P=i[T],k=m[P];let I=p[k];I||(I=[],p[k]=I),I.push(P)}const S=function(P,k,I){if(P==="random")return function(){return Math.random()-.5};if(P)return I.determinePropertyType(P,k,k.length)==="number"?function(R,M){return P[R]-P[M]}:function(R,M){return P[R]<P[M]?-1:1}}(l,i,e),A=l==="random"||l;return Object.keys(p).sort((T,P)=>parseInt(T)-parseInt(P)).forEach((T,P)=>{const k=p[T],I=k.length;let R=0,M=b;const z=2*Math.PI/I;if(P!==0&&!t.allowOverlap){const j=2*Math.PI*x;let X=0;R+=k.reduce((O,N)=>O+h[N],0),X=2*R*Math.SQRT2,X>j&&(x+=X/(2*Math.PI)-x)}A&&(k.sort(S),t.clockwise||k.reverse());for(let j=0;j<I;j++){const X=k[j];c[X]=Math.cos(M)*x+o,g[X]=Math.sin(M)*x+a;const O=h[X];M+=z*(t.allowOverlap?1:O/R*I)}x+=v,b+=E}),{x:c,y:g,indexes:t.list}},isRunning:function(){return!1},onSync:function({indexes:t,x:e,y:n}){return{indexes:t,x:e,y:n}}},CW=t=>(t.modules.layouts.register(VT),e=>t.modules.layouts.start(VT.name,e)),LW=Object.defineProperty,Wt=(t,e)=>LW(t,"name",{value:e,configurable:!0}),PW=Wt((t,e)=>t.map(n=>e*n),"Z"),kW=Wt((t,e)=>t.map(e),"g"),IW=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),MW=Wt(()=>({[WebGL2RenderingContext.FLOAT]:"uniform1f",[WebGL2RenderingContext.FLOAT_VEC2]:"uniform2fv",[WebGL2RenderingContext.FLOAT_VEC3]:"uniform3fv",[WebGL2RenderingContext.FLOAT_VEC4]:"uniform4fv",[WebGL2RenderingContext.INT]:"uniform1i",[WebGL2RenderingContext.INT_VEC2]:"uniform2iv",[WebGL2RenderingContext.INT_VEC3]:"uniform3iv",[WebGL2RenderingContext.INT_VEC4]:"uniform4iv",[WebGL2RenderingContext.UNSIGNED_INT]:"uniform1ui",[WebGL2RenderingContext.UNSIGNED_INT_VEC2]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC3]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC4]:"uniform2uiv",[WebGL2RenderingContext.FLOAT_MAT2]:"uniformMatrix2fv",[WebGL2RenderingContext.FLOAT_MAT3]:"uniformMatrix3fv",[WebGL2RenderingContext.FLOAT_MAT4]:"uniformMatrix4fv",[WebGL2RenderingContext.SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.UNSIGNED_INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.SAMPLER_CUBE]:"uniform1i"}),"te"),ka=new Map,xy=new Map,NW=Wt((t,e,n,i)=>{ka.has(t)||ka.set(t,ka.size);const s=`${ka.get(t)}:${e}:${n}`;return xy.has(s)||xy.set(s,i()),xy.get(s)},"re"),by=new Map,RW=Wt((t,e)=>(ka.has(t)||ka.set(t,ka.size),by.has(t)||by.set(t,e()),by.get(t)),"oe"),FW=Wt(t=>{const e=t.createBuffer();if(!e)throw new Error("Could not create buffer");return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,IW,t.STATIC_DRAW),e},"ne"),nl=Wt((t,e)=>RW(t,()=>{const n=t.getAttribLocation(e,"position");return t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),n}),"w"),HT=Wt((t,e,n)=>{const i=t.createShader(e);if(i===null)throw new Error("Cannot create WebGL shader.");return t.shaderSource(i,n),t.compileShader(i),i},"X"),il=Wt((t,e,n)=>NW(t,e,n,()=>{const i=t.createProgram();if(i===null)throw new Error("Cannot create WebGL program.");if(t.attachShader(i,HT(t,t.VERTEX_SHADER,e)),t.attachShader(i,HT(t,t.FRAGMENT_SHADER,n)),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const s=t.getProgramInfoLog(i);throw t.deleteProgram(i),new Error(`Could not link WebGL program: 
${s}`)}return i}),"R"),yr=Wt((t,{size:e,data:n,type:i,internalFormat:s=t.RGBA32F,format:r=t.RGBA})=>{const o=t.createTexture();if(!o)throw new Error("Cannot create WebGL texture.");const[a,l]=kW(e,d=>Math.max(1,d));return n instanceof Float32Array&&n.byteLength===0?n=new Float32Array(a*l*4):n instanceof Uint32Array&&n.byteLength===0&&(n=new Uint32Array(a*l*4)),t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,s,a,l,0,r,i,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),{size:e,data:n,type:i,format:r,handle:o}},"F"),pr=Wt((t,e)=>{const n=t.createFramebuffer();if(!n)throw new Error("Cannot create WebGL frame buffer.");t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);if(i!==t.FRAMEBUFFER_COMPLETE)switch(i){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("Framebuffer: Attachment is NOT complete.");case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("Framebuffer: No valid attachment.");case t.FRAMEBUFFER_UNSUPPORTED:throw new Error("Framebuffer: Attachment types are not supported.");default:throw new Error(`Framebuffer: Unknown reason (status: ${i}).`)}return n},"l"),Iu=Wt((t,e)=>()=>([t,e]=[e,t],t),"A"),sl=Wt((t,e,n)=>{t.useProgram(e);const i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<s;r++){const o=t.getActiveUniform(e,r);if(!o)throw new Error(`Cannot get GL active uniform ${r}.`);const{name:a,size:l,type:d}=o,h=t.getUniformLocation(e,a);if(!h)throw new Error(`Cannot get GL uniform location ${a}.`);i[a]={size:l,data:n[a],type:d,location:h}}return i},"M");function oa(t,e,n={}){let i=0;const s=MW();return Object.entries(e).forEach(([r,{location:o,type:a,data:l}])=>{let d=n[r]!==void 0?n[r]:l;(a===t.SAMPLER_2D||a===t.INT_SAMPLER_2D||a===t.UNSIGNED_INT_SAMPLER_2D)&&(t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,d),d=i,i++),t[s[a]](o,d)})}Wt(oa,"b");var Dp=Wt(t=>Math.ceil(Math.sqrt(t)),"D"),HR=Wt(t=>Math.ceil(Math.sqrt(2*t)),"Y"),OW=Wt((t,e,n,i)=>{const s=Dp(e),r=new Float32Array(4*s**2);for(let o=0;o<e;o++){const a=4*o;r[a]=n[o],r[a+1]=i[o]}return yr(t,{size:[s,s],data:r,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"ue"),DW=Wt((t,e,n,i)=>{const s=Dp(e),r=HR(n),o=new Uint32Array(3*s**2);let a=0;for(let l=0;l<e;l++){const d=3*l,h=a,c=Math.floor(h/r),g=h%r;o[d]=g,o[d+1]=c,o[d+2]=i[l],a+=i[l]}return yr(t,{size:[s,s],data:o,type:t.UNSIGNED_INT,format:t.RGB_INTEGER,internalFormat:t.RGB32UI})},"ie"),zW=Wt((t,e,n,i,s)=>{const r=Dp(e),o=HR(n),a=new Uint32Array(2*o**2),l=Array.from({length:e},()=>[]);i.forEach((h,c)=>{l[h].push(s[c]),l[s[c]].push(h)});let d=0;for(let h=0;h<e;h++)for(const c of l[h]){const g=Math.floor(c/r),m=c%r;a[d]=m,a[d+1]=g,d+=2}return yr(t,{size:[o,o],data:a,type:t.UNSIGNED_INT,format:t.RG_INTEGER,internalFormat:t.RG32UI})},"ae"),BW=Wt((t,e,n,i=new Float32Array(e),s=new Uint8Array(e))=>{const r=Dp(e),o=new Float32Array(4*r**2);for(let a=0;a<e;a++){const l=4*a;o[l]=n[a],o[l+1]=i[a],o[l+2]=s[a],o[l+3]=0}return yr(t,{size:[r,r],data:o,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"ce"),WT=Wt(t=>{const e=new Map,n={nodes:[],edges:[]};return t.nodes.forEach((i,s)=>{e.has(i.id)&&console.warn(`Duplicated ID ${i.id}@${s}`),n.nodes.push(ue(wt({},i),{id:s})),e.set(i.id,s)}),t.edges.forEach(i=>{const s=e.get(i.source),r=e.get(i.target);return s===void 0||r===void 0?console.warn(`Missing source ${i.source}`):void n.edges.push({source:Math.min(s,r),target:Math.max(s,r)})}),n.edges.sort((i,s)=>i.source-s.source||i.target-s.target),n},"De"),XT=Wt(({nodes:t,edges:e},[n,i]=[0,0])=>{const s=Math.PI*(3-Math.sqrt(5)),r=t.map(a=>(a.x=(a.x||0)-n,a.y=(a.y||0)-i,a)).map(a=>({n:a,key:a.pinned?0:1+1e6*a.y+a.x})).sort((a,l)=>a.key-l.key);let o=0;return r.forEach(({n:a,key:l},d)=>{if(l*d==0||l!==r[d-1].key)return o=d;const h=Math.sqrt(d-o);a.x=r[o].n.x+h*Math.cos(s*(d-o)),a.y=r[o].n.y+h*Math.sin(s*(d-o))}),{nodes:t,edges:e}},"Be"),ZT=Wt((t,e)=>{const{nodes:n,edges:i}=e,s=n.length,r=i.length,o=new Uint32Array(r),a=new Uint32Array(r),l=new Uint32Array(s);for(let _=0;_<r;_++){const{source:p,target:v}=i[_];o[_]=p,a[_]=v,l[p]++,l[v]++}const d=new Float32Array(n.map(({x:_})=>_||0)),h=new Float32Array(n.map(({y:_})=>_||0)),c=new Float32Array(n.map(({r:_})=>isNaN(_)?1:_)),g=new Float32Array(n.map((_,p)=>l[p]+1)),m=new Uint8Array(n.map(({pinned:_})=>_?1:0));return{N:s,E:r,bodyTexture:OW(t,s,d,h),nodeTexture:DW(t,s,r,l),topologyTexture:zW(t,s,r,o,a),propertyTexture:BW(t,s,g,c,m)}},"Oe"),YT=Wt((t,e)=>{t.deleteTexture(e.bodyTexture.handle),t.deleteTexture(e.nodeTexture.handle),t.deleteTexture(e.topologyTexture.handle),t.deleteTexture(e.propertyTexture.handle)},"We"),rl=`#version 300 es

in vec2 position;

void main() {
  gl_Position = vec4(position, 0.0f, 1.0f);
}`,UW=`#version 300 es
precision highp float;uniform int u_0;uniform lowp sampler2D u_1,u_2;uniform int u_3,u_4;out vec4 outColor;void main(){ivec2 o=ivec2(gl_FragCoord.xy);if((o&65535<<u_3)!=o)return;if(outColor=vec4(1e9,1e9,-1e9,-1e9),u_3>0)for(int e;e<4;e++){ivec2 i=o+(ivec2(e&1,e>>1)<<u_3-1);vec4 t=texelFetch(u_2,i,0);outColor=vec4(min(outColor.xy,t.xy),max(outColor.zw,t.zw));}else if(textureSize(u_1,0).x*o.y+o.x<u_0)outColor.xy=outColor.zw=texelFetch(u_1,o,0).xy;if(u_3==u_4){vec2 o=outColor.zw-outColor.xy;o=vec2(max(o.x,o.y),max(o.x,o.y)),outColor=vec4(outColor.xy-vec2(1),o+vec2(2));}}`,$W=Wt(t=>1<<Math.ceil(Math.log2(Math.sqrt(t))),"fe"),qT=Wt((t,e,n)=>{const i=$W(e),s=new Float32Array(4*i**2);return n&&n.forEach((r,o)=>s[o]=r),yr(t,{size:[i,i],data:s,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"j"),jW=Wt(t=>Math.ceil(Math.log2(Math.sqrt(t)))+1,"_e"),GW=Wt((t,e,n)=>{const i=il(t,rl,UW);nl(t,i);const s=qT(t,e),r=qT(t,e),o=Iu(s,r),a=pr(t,r.handle),l=pr(t,s.handle),d=Iu(a,l),h=sl(t,i,{u_0:e,u_1:n().handle,u_2:s.handle,u_3:0,u_4:0});let c=s;return{step:(g=jW(e))=>{t.viewport(0,0,s.size[0],s.size[1]),t.useProgram(i);for(let m=0;m<g;m++){t.bindFramebuffer(t.FRAMEBUFFER,d());const _=o();c=_===s?r:s,oa(t,h,{u_2:_.handle,u_1:n().handle,u_4:g-1,u_3:m}),t.drawArrays(t.TRIANGLES,0,6)}},texture:()=>c,destroy:()=>{t.deleteFramebuffer(a),t.deleteFramebuffer(l),t.deleteTexture(r.handle),t.deleteTexture(s.handle)}}},"xe"),VW=`#version 300 es
precision lowp float;vec2 r(vec2 r,vec2 e){return vec2(r.x*e.x-r.y*e.y,r.x*e.y+r.y*e.x);}vec2 r(vec2 r){return r.y=-r.y,r;}vec2 r(vec2 u[8],vec2 i,vec2 o){vec2 t,c=i-o,e=vec2(1,0);for(int i;i<8;++i)t+=r(u[i],e),e=r(e,c);return t;}vec2 r(vec2 e,vec4 r){return(e-r.xy)/r.zw;}uniform float u_c,u_d,u_e,u_f,u_g,u_h,u_9,u_a,u_b;uniform int u_0;uniform lowp sampler2D u_1;uniform lowp usampler2D u_i,u_j;uniform lowp sampler2D u_k;uniform int u_5,u_l;uniform lowp sampler2D u_2;uniform lowp usampler2D u_m,u_n;uniform lowp sampler2D u_o;out vec4 outColor;void main(){uint a=uint(textureSize(u_1,0).x);int d=textureSize(u_j,0).x;ivec2 o=ivec2(gl_FragCoord.xy);if(int(a)*o.y+o.x>=u_0)return;vec3 u=texelFetch(u_k,o,0).xyz;if(u.z>0.)return;vec4 x=texelFetch(u_1,o,0);vec2 i=x.xy,e=x.zw;ivec4 t=ivec4(texelFetch(u_i,o,0));float c=float(t.z)+1.;vec4 v=texelFetch(u_2,ivec2(0),0);uint y=uint(textureSize(u_m,0).x);float p=float(1<<u_l-1);ivec2 m=ivec2(u_5,1),n=ivec2(p*r(i,v));vec2 g=(vec2(n)+.5)/p;ivec2 s=n-ivec2(1);for(int r;r<9;++r){ivec2 t=s+ivec2(r%3,r/3);if(t>>u_l-1!=ivec2(0))continue;uvec2 o=texelFetch(u_n,t,0).xy;for(uint r=o.x;r<o.y;r++){uint n=texelFetch(u_m,ivec2(r%y,r/y),0).x;ivec2 l=ivec2(n%a,n/a);vec2 t=texelFetch(u_1,l,0).xy-i;float v=dot(t,t)+1e-4;if(u_g>0.&&u_9<.5){float i=texelFetch(u_k,l,0).y,r=max(u.y+i+u_h,.01);if(v<r*r){float u=sqrt(v);e-=(r-u)*u_g*i/r*t/u;}}float x=float(texelFetch(u_i,l,0).z)+1.;e-=u_9*u_c*x*c*t/v/u.x;}}vec2 f[8];for(int r;r<8;r++)f[r]=r<u_5?texelFetch(u_o,m*n+ivec2(r,0),0).xy:vec2(0);vec2 F=r(r(f,g,r(i,v))/v.z);e-=u_9*u_c*F*c/u.x;ivec2 l;for(int a;a<t.z;a++){l=ivec2(texelFetch(u_j,t.xy,0).xy);vec2 r=texelFetch(u_1,l,0).xy-i;r*=1.-(u_f+u.y+texelFetch(u_k,l,0).y)/(length(r)+1e-4);float o=float(texelFetch(u_i,l,0).z)+1.,v=u_9*u_e*c*o/(min(c,o)*(o+c));if(e+=v*r/u.x,t.x+=1,t.x>=d)t.x=0,t.y+=1;}e=u_a*(e-u_9*u_d*i);float h=dot(e,e);if(h>u_b)e*=sqrt(u_b/h);outColor=vec4(i+e,e);}`,HW=Wt((t,e,n,i,s,{handle:r},{handle:o},{N:a,bodyTexture:l,nodeTexture:d,topologyTexture:h,propertyTexture:c},{charge:g,gravity:m,inertia:_,edgeStrength:p,edgeLength:v,elasticity:x,margin:b,maxDisplacement:E})=>{const S=il(t,rl,VW);nl(t,S);const A=yr(t,{type:t.FLOAT,size:l.size,data:new Float32Array(l.data.buffer.slice(0)),format:t.RGBA,internalFormat:t.RGBA32F}),T=Iu(l,A),P=pr(t,A.handle),k=pr(t,l.handle),I=Iu(P,k),R=sl(t,S,{u_9:1,u_a:_,u_b:E**2,u_c:g,u_d:m,u_e:p,u_f:v,u_g:x,u_h:b,u_0:a,u_1:l.handle,u_i:d.handle,u_j:h.handle,u_k:c.handle,u_5:n,u_l:e,u_2:i().handle,u_m:s().handle,u_n:r,u_o:o});let M=l;return{step:z=>{t.viewport(0,0,l.size[0],l.size[1]),t.useProgram(S),t.bindFramebuffer(t.FRAMEBUFFER,I());const j=T();M=j===l?A:l,oa(t,R,{u_9:z,u_1:j.handle,u_2:i().handle,u_m:s().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>M,destroy:()=>{t.deleteFramebuffer(P),t.deleteFramebuffer(k),t.deleteTexture(A.handle)}}},"me"),WW=Wt((t,e)=>PW([e,1],1<<t),"ve"),WR=Wt((t,e,n,i)=>{const s=WW(e,n),r=new Float32Array(2*s[0]*s[1]);return i&&i.forEach((o,a)=>r[a]=o),yr(t,{size:s,data:r,type:t.FLOAT,format:t.RG,internalFormat:t.RG32F})},"H"),XW=`#version 300 es
precision lowp float;vec2 v(vec2 v,vec2 t){return vec2(v.x*t.x-v.y*t.y,v.x*t.y+v.y*t.x);}vec2 t(vec2 t,vec2 v){return vec2(dot(t,v),t.y*v.x-t.x*v.y)/dot(v,v);}vec2 v(vec2 v){return t(vec2(1,0),v);}const float f[64]=float[64](1.,1.,1.,1.,1.,1.,1.,1.,1.,2.,3.,4.,5.,6.,7.,8.,1.,3.,6.,10.,15.,21.,28.,36.,1.,4.,10.,20.,35.,56.,84.,120.,1.,5.,15.,35.,70.,126.,210.,330.,1.,6.,21.,56.,126.,252.,462.,792.,1.,7.,28.,84.,210.,462.,924.,1716.,1.,8.,36.,120.,330.,792.,1716.,3432.);uniform int u_5,u_6;uniform lowp sampler2D u_7,u_8;out vec2 outColor;void main(){float i=float(1<<u_6);ivec2 l=ivec2(u_5,1),c=ivec2(gl_FragCoord.xy)/l;vec2 d=(vec2(c)+.5)/i;uint o=uint(gl_FragCoord.x)%uint(u_5);if(u_6>2){ivec2 y=c>>1;vec2 e=(vec2(c&65534)+1.)/i-d,t=vec2(1,0);for(uint c;c<uint(u_5-int(o));++c)outColor+=f[c+(o<<3)]*v(texelFetch(u_7,l*y+ivec2(c+o,0),0).xy,t),t=v(t,e);}ivec2 y=(c&65534)-2;for(int r;r<36;r++){ivec2 u=y+ivec2(r%6,r/6);vec2 x=vec2(u-c);if(dot(x,x)<=2.||u>>u_6!=ivec2(0))continue;vec2 n=(vec2(u)+.5)/i-d,e=vec2(1,0);for(uint t;t<o;++t)e=v(e,-n);vec2 m=v(n),a;for(uint c;c<uint(u_5);++c){if(dot(e,e)<1e-20)break;a+=f[c+(o<<3)]*t(texelFetch(u_8,l*u+ivec2(c,0),0).xy,e),e=v(e,n);}outColor+=v(a,m);}}`,ZW=Wt((t,e,n,i)=>{const s=il(t,rl,XW);nl(t,s);const r=Array.from({length:e},(l,d)=>WR(t,d,n)),o=r.map(({handle:l})=>pr(t,l)),a=sl(t,s,{u_5:n,u_6:e-1,u_7:r[0].handle,u_8:i(0).handle});return{step:()=>{t.useProgram(s);for(let l=2;l<e;l++){const{handle:d}=r[l-1],h=i(l);t.viewport(0,0,h.size[0],h.size[1]),t.bindFramebuffer(t.FRAMEBUFFER,o[l]),oa(t,a,{u_6:l,u_7:d,u_8:h.handle}),t.drawArrays(t.TRIANGLES,0,6)}},texture:l=>r[l],destroy:()=>{o.forEach(l=>t.deleteFramebuffer(l)),r.forEach(({handle:l})=>t.deleteTexture(l))}}},"pe"),YW=`#version 300 es
precision lowp float;vec2 e(vec2 e,vec2 u){return vec2(e.x*u.x-e.y*u.y,e.x*u.y+e.y*u.x);}vec2 x(vec2 u,vec2 e){return vec2(dot(u,e),u.y*e.x-u.x*e.y)/dot(e,e);}const vec2 u[8]=vec2[8](vec2(1,0),vec2(-1,0),vec2(2,0),vec2(-6,0),vec2(24,0),vec2(-120,0),vec2(720,0),vec2(-5040,0));const float n[16]=float[16](1.,1.,2.,6.,24.,120.,720.,5040.,40320.,362880.,3628800.,39916800.,479001600.,6.227021e9,8.717829e1,1.3076744e12);vec2 e(vec2 u,vec4 e){return(u-e.xy)/e.zw;}uniform int u_5,u_l,u_6;uniform lowp sampler2D u_p,u_2;uniform lowp usampler2D u_m;uniform lowp sampler2D u_k,u_1;uniform lowp usampler2D u_n;out vec2 outColor;void main(){float i=float(1<<u_6);ivec2 o=ivec2(u_5,1),t=ivec2(gl_FragCoord.xy)/o;vec2 l=(vec2(t)+.5)/i;uint c=uint(gl_FragCoord.x)%uint(u_5);if(u_6==u_l-1){uint u=uint(textureSize(u_1,0).x),x=uint(textureSize(u_m,0).x);vec4 i=texelFetch(u_2,ivec2(0),0);uvec2 n=texelFetch(u_n,t,0).xy;for(uint t=n.x;t<n.y;t++){uint v=texelFetch(u_m,ivec2(t%x,t/x),0).x;ivec2 r=ivec2(v%u,v/u);vec2 d=l-e(texelFetch(u_1,r,0).xy,i),o=vec2(1,0);for(uint u;u<c;++u)o=e(o,d);outColor+=e(vec2(texelFetch(u_k,r,0).x,0),o);}}else for(int v;v<4;++v){ivec2 d=2*t+ivec2(v&1,v>>1);vec2 f=(vec2(d)+.5)/i/2.-l,r=vec2(1,0),y;for(uint t;t<=c;++t)y+=x(e(texelFetch(u_p,o*d+ivec2(c-t,0),0).xy,r),u[c-t]*n[t]),r=e(r,f);outColor+=e(y,u[c]);}}`,qW=Wt((t,e,n,i,s,{handle:r},o,{handle:a})=>{const l=il(t,rl,YW);nl(t,l);const d=Array.from({length:e},(g,m)=>WR(t,m,n)),h=d.map(({handle:g})=>pr(t,g)),c=sl(t,l,{u_5:n,u_l:e,u_6:e-1,u_p:d[0].handle,u_2:i().handle,u_m:s().handle,u_k:r,u_1:o().handle,u_n:a});return{step:()=>{t.useProgram(l);for(let g=e-1;g>=2;g--){const{handle:m}=d[(g+1)%e],_=d[g];t.viewport(0,0,_.size[0],_.size[1]),t.bindFramebuffer(t.FRAMEBUFFER,h[g]),oa(t,c,{u_2:i().handle,u_m:s().handle,u_1:o().handle,u_6:g,u_p:m}),t.drawArrays(t.TRIANGLES,0,6)}},texture:g=>d[g],destroy:()=>{h.forEach(g=>t.deleteFramebuffer(g)),d.forEach(({handle:g})=>t.deleteTexture(g))}}},"Fe"),JW=`#version 300 es
uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 n){return u(n.y)<<1|u(n.x);}uniform uint u_0;uniform lowp usampler2D u_q,u_m;out uvec2 outColor;uint u(uint o,uint e,uint i){uint u,n=u_0;for(;u<n;){uint t=u+n>>1,r=texelFetch(u_m,ivec2(t%i,t/i),0).x;texelFetch(u_q,ivec2(r%e,r/e),0).x<o?u=t+1u:n=t;}return u;}void main(){uint n=uint(textureSize(u_q,0).x),e=uint(textureSize(u_m,0).x),i=u(uvec2(gl_FragCoord.xy));outColor=uvec2(u(i,n,e),u(i+1u,n,e));}`,KW=Wt(t=>1<<t-1,"Ee"),QW=Wt((t,e,n)=>{const i=KW(e),s=new Uint32Array(2*i**2);return n&&n.forEach((r,o)=>s[o]=r),yr(t,{size:[i,i],data:s,type:t.UNSIGNED_INT,format:t.RG_INTEGER,internalFormat:t.RG32UI})},"Te"),t9=Wt((t,e,n,{handle:i},s)=>{const r=il(t,rl,JW);nl(t,r);const o=QW(t,n),a=pr(t,o.handle),l=sl(t,r,{u_0:e,u_q:i,u_m:s()});return{step:()=>{t.viewport(0,0,o.size[0],o.size[1]),t.useProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,a),oa(t,l,{u_m:s().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>o,destroy:()=>{t.deleteFramebuffer(a),t.deleteTexture(o.handle)}}},"Ae"),e9=`#version 300 es
precision lowp float;uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 e){return u(e.y)<<1|u(e.x);}vec2 u(vec2 e,vec4 u){return(e-u.xy)/u.zw;}uniform int u_0,u_l;uniform lowp sampler2D u_2,u_1;out uint outColor;void main(){ivec2 e=ivec2(gl_FragCoord.xy);if(textureSize(u_1,0).x*e.y+e.x>=u_0)return;vec4 t=texelFetch(u_2,ivec2(0),0);vec2 o=u(texelFetch(u_1,e,0).xy,t);outColor=u(uvec2(float(1<<u_l-1)*o));}`,n9=Wt(t=>Math.ceil(Math.sqrt(t)),"Re"),i9=Wt((t,e,n)=>{const i=n9(e),s=new Uint32Array(i**2).fill(4294967295);return n&&n.forEach((r,o)=>s[o]=r),yr(t,{size:[i,i],data:s,type:t.UNSIGNED_INT,format:t.RED_INTEGER,internalFormat:t.R32UI})},"Me"),s9=Wt((t,e,n,i,s)=>{const r=il(t,rl,e9);nl(t,r);const o=i9(t,e),a=pr(t,o.handle),l=sl(t,r,{u_0:e,u_l:n,u_2:i().handle,u_1:s().handle});return{step:()=>{t.viewport(0,0,o.size[0],o.size[1]),t.useProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,a),oa(t,l,{u_2:i().handle,u_1:s().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>o,destroy:()=>{t.deleteFramebuffer(a),t.deleteTexture(o.handle)}}},"be"),r9=`#version 300 es
precision highp int;uniform uint u_r,u_s;uniform highp usampler2D u_u,u_t;out uint outColor;uint u(uint u,uint e,bool o,uint t){uint i=u<4294967295u?texelFetch(u_u,ivec2(u%t,u/t),0).x:u,n=e<4294967295u?texelFetch(u_u,ivec2(e%t,e/t),0).x:e;if(o)return i<n?u:e;return i>n?u:e;}void main(){uint e=uint(textureSize(u_t,0).x),s=uint(textureSize(u_u,0).x);uvec2 t=uvec2(gl_FragCoord.xy);uint c=texelFetch(u_t,ivec2(t),0).x,i=uint(t.x+e*t.y),o=i^1u<<u_r-u_s,x=texelFetch(u_t,ivec2(o%e,o/e),0).x;bool n=(i>>u_r-u_s&1u)==0u;(i>>u_r&2u)==2u&&(n=!n),outColor=u(c,x,n,s);}`,o9=Wt(t=>Math.ceil(Math.sqrt(1<<Math.ceil(Math.log2(t)))),"Ge"),JT=Wt((t,e)=>{const n=o9(e.length),i=new Uint32Array(n**2).fill(4294967295);return e&&e.forEach((s,r)=>i[r]=s),yr(t,{size:[n,n],data:i,type:t.UNSIGNED_INT,format:t.RED_INTEGER,internalFormat:t.R32UI})},"V"),a9=Wt(t=>Math.max(0,Math.ceil(Math.log2(t))),"Le"),l9=Wt(t=>t*(t+1)/2,"Ie"),u9=Wt((t,e,n)=>{const i=il(t,rl,r9);nl(t,i);const s=Array.from({length:e},(v,x)=>x),r=JT(t,s),o=JT(t,s),a=Iu(r,o),l=pr(t,o.handle),d=pr(t,r.handle),h=Iu(l,d),c=sl(t,i,{u_r:0,u_s:0,u_t:r.handle,u_u:n.handle}),g=a9(e);let m=0,_=0,p=r;return{step:(v=l9(g))=>{t.useProgram(i),t.viewport(0,0,r.size[0],r.size[1]);for(let x=0;x<v;x++){t.bindFramebuffer(t.FRAMEBUFFER,h());const b=a();p=b===r?o:r,oa(t,c,{u_r:m,u_s:_,u_t:b.handle}),t.drawArrays(t.TRIANGLES,0,6),_=(_+1)%(m+1),_===0&&(m=(m+1)%g)}},texture:()=>p,destroy:()=>{t.deleteFramebuffer(l),t.deleteFramebuffer(d),t.deleteTexture(o.handle),t.deleteTexture(r.handle)}}},"Ue"),d9=Wt(t=>{let e;return()=>e||t().finally(()=>e=void 0)},"Ne"),h9=Wt((t,e)=>Math.max(.1,1-(t/Math.max(1,e-20))**7.39),"K"),c9=Wt((t,e=25,n=24e3)=>{const i=(n-e)/(e-1);return Math.ceil(e*i*4/(i+t))},"J"),KT={charge:10,edgeStrength:.5,edgeLength:30,elasticity:.9,margin:1,gravity:.002,inertia:.9,maxDisplacement:1e3,steps:300},g9=Wt((t,e,n)=>{let[i,s]=[0,0];const r=FW(t),o=Wt(()=>{t.bindBuffer(t.ARRAY_BUFFER,r),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);for(let l=0;l<e;l++,i++)if(!n(i))return!0},"i"),a=Wt(l=>{o()?l(i):s=requestAnimationFrame(()=>a(l))},"a");return{start:d9(()=>new Promise(l=>(i=0)||a(l))),step:o,stop:()=>cancelAnimationFrame(s)}},"Q"),Ey=Wt((t,e,n)=>{var i,s;let{bodyTexture:r}=e;const{N:o,propertyTexture:a}=e,{steps:l,batch:d}=n,h=(i=n.order)!=null?i:4;if(h<2||h>8)throw new Error("Order must be between 2 and 8");const c=Math.max(1,(s=n.depth)!=null?s:Math.ceil(Math.log2(o)/2)),{step:g,texture:m,destroy:_}=GW(t,o,()=>r),{step:p,texture:v,destroy:x}=s9(t,o,c,m,()=>r),{step:b,texture:E,destroy:S}=u9(t,o,v()),{step:A,texture:T,destroy:P}=t9(t,o,c,v(),E),{step:k,texture:I,destroy:R}=qW(t,c,h,m,E,a,()=>r,T()),{step:M,texture:z,destroy:j}=ZW(t,c,h,I),{step:X,texture:O,destroy:N}=HW(t,c,h,m,E,T(),z(c-1),e,n);return ue(wt({},g9(t,d??c9(o),W=>(r=O(),g(),p(),b(),A(),k(),M(),X(h9(W,l)),W<l))),{destroy:()=>{_(),x(),S(),P(),R(),j(),N()}})},"qe"),QT=0,XR=typeof window>"u",f9=typeof performance<"u"&&performance.now?performance:Date,m9=XR?t=>{const e=f9.now(),n=Math.max(0,16-(e-QT)),i=setTimeout(()=>t(e+n),n);return QT=e+n,i}:window.requestAnimationFrame,p9=XR?t=>clearTimeout(t):window.cancelAnimationFrame;function ZR(t,e,n){for(let i=0;i<t.length;i++){const s=t[i];s.x=e[i],s.y=n[i]}}Wt(ZR,"defaultUpdate");var _9=Wt(()=>{},"noop"),Sy={movementRatio:7e-8,surfaceRatio:.0025},tx=class{constructor(t={}){this.onUpdate=Wt(e=>{},"onUpdate"),this.update=ZR,this.nextTick=m9,this.cancelTick=p9,this.onEnd=_9,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=Sy,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in t?t.autoStop&&(typeof t.autoStop=="boolean"?t.autoStop=Sy:t.autoStop=wt(wt({},t.autoStop),Sy)):t.steps;for(const e in t)t[e]===void 0&&e!=="order"&&e!=="depth"||(this[e]=t[e])}};Wt(tx,"Settings");var t2=class{constructor(t){this.promise=new Promise(t)}then(t){return this.promise.then(t)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function Ef(t,e,n={}){var i;let s,r;e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_color_buffer_float")||(i=e.getExtension("WEBGL_lose_context"))==null||i.loseContext();let o=new tx(wt(wt({},KT),n));const a=t.nodes.length,l=n.cx||t.nodes.reduce((p,v)=>p+(v.x||0),0)/a,d=n.cy||t.nodes.reduce((p,v)=>p+(v.y||0),0)/a,h=[l,d],c=Wt(p=>{if(!s)throw new Error("No graph has been set");const{size:v}=s.bodyTexture;if(v[0]*v[1]<=1)return{X:[0],Y:[0]};const x=new Float32Array(4*v[0]*v[1]);e.readPixels(0,0,v[0],v[1],e.RGBA,e.FLOAT,x),p&&(g(),m());const b=x.filter((S,A)=>A%4==0).map(S=>S+l),E=x.filter((S,A)=>A%4==1).map(S=>S+d);return{X:b,Y:E}},"readLayoutData"),g=Wt(()=>{r&&(r.stop(),r.destroy(),r=void 0)},"simulationCleanup"),m=Wt(()=>{s&&(YT(e,s),s=void 0)},"graphLayoutCleanup"),_={setOptions:(p={})=>(o=new tx(wt(wt({},KT),p)),s&&(g(),r=Ey(e,s,o)),_),setGraph:(p={nodes:[],edges:[]})=>(s&&YT(e,s),s=ZT(e,XT(WT(p),h)),o&&(g(),r=Ey(e,s,o)),_),start:()=>{if(!r)throw new Error("No graph has been set");return r.start().finally(()=>{var p;return(p=n.onEnd)==null?void 0:p.call(n,1)}),_},stop:()=>(r&&r.stop(),_),step:()=>{if(!r)throw new Error("No graph has been set");return r.step(),_},data:p=>c(p),iterations:()=>1};return s=ZT(e,XT(WT(t),h)),r=Ey(e,s,o),_}/**
* @preserve
* @linkurious/force-layout@0.7.0
* Ogma general-purpose force-directed layout
*/function e2(){var t=(()=>{var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,r=(D,G)=>e(D,"name",{value:G,configurable:!0}),o={};((D,G)=>{for(var B in G)e(D,B,{get:G[B],enumerable:!0})})(o,{IntegratorType:()=>Cn,default:()=>os});var a=class{constructor(D){let G=l();this.c=1,this.s0=G(" "),this.s1=G(" "),this.s2=G(" "),this.s0-=G(String(D)),this.s0<0&&(this.s0+=1),this.s1-=G(String(D)),this.s1<0&&(this.s1+=1),this.s2-=G(D),this.s2<0&&(this.s2+=1),G=null}next(){return()=>{const D=2091639*this.s0+23283064365386963e-26*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=D-(this.c=0|D)}}nextDouble(){const D=this.next();return()=>D()+11102230246251565e-32*(2097152*D()|0)}nextInt32(){const D=this.next();return()=>4294967296*D()|0}};function l(){let D=4022871197;return G=>{G=G.toString();for(let B=0;B<G.length;B++){D+=G.charCodeAt(B);let V=.02519603282416938*D;D=V>>>0,V-=D,V*=D,D=V>>>0,V-=D,D+=4294967296*V}return 23283064365386963e-26*(D>>>0)}}function d(D){return new a(D.toString()).next()}r(a,"Alea"),r(l,"Mash"),r(d,"impl");var h=d(42);function c(D){h=d(D)}function g(){return 1e-6*(h()-.5)}function m(D,G,{sources:B,targets:V,X:J,Y:nt,R:Y,fx:ot,fy:it,degrees:et,weights:tt},{edgeStrength:lt,edgeLength:ft}){for(let dt=0;dt<G.length;dt++){const st=G[dt],mt=B[st],Ct=V[st],It=1,Nt=et[mt]+It,pt=et[Ct]+It,At=lt*tt[st];let kt=J[Ct]+ot[Ct]-J[mt]-ot[mt]||g(),Ot=nt[Ct]+it[Ct]-nt[mt]-it[mt]||g();const $t=kt*kt+Ot*Ot,Zt=Math.sqrt($t),Kt=ft+Y[mt]+Y[Ct];if(Zt<=Kt)continue;const Qt=Kt-Zt,qt=1/Math.min(Nt,pt),Ae=Math.min(1,D*At*(Qt*Qt/$t)*qt);kt*=Ae,Ot*=Ae;const be=pt/(pt+Nt);ot[mt]+=kt*be,it[mt]+=Ot*be,ot[Ct]-=kt*(1-be),it[Ct]-=Ot*(1-be)}}r(c,"setSeed"),r(g,"randomize"),r(m,"attraction");var _=r((D,{edgeIds:G,sources:B,targets:V,degrees:J,weights:nt})=>{for(let Y=0;Y<D.length;Y++){const{source:ot,target:it,weight:et=1}=D[Y];B[Y]=ot,V[Y]=it,nt[Y]=et,J[ot]++,J[it]++,G[Y]=Y,nt[Y]=et===void 0?1:et}},"initialize");function p(D,G,{X:B,Y:V,fx:J,fy:nt},{gravity:Y,cx:ot,cy:it}){const et=G.length;for(let tt=0;tt<et;tt++){const lt=G[tt],ft=ot-B[lt]||g(),dt=it-V[lt]||g(),st=Y*D;J[lt]+=ft*st,nt[lt]+=dt*st}}m.initialize=_,r(p,"center");var v=r((D,G,B)=>{const{X:V,Y:J}=G;let nt=B.cx,Y=B.cy;const ot=D.length;if(nt===void 0||Y===void 0){nt=Y=0;for(let it=0;it<ot;it++)nt+=V[it],Y+=J[it];nt/=ot,Y/=ot}B.cx=nt,B.cy=Y},"initialize");p.initialize=v;var x=class{constructor(D,G,B,V){this.left=null,this.right=null,this.data=null,this.code=D,this.data=G,this.left=B,this.right=V}};function b(D,G,B,V,J){const nt=new x(null,null,null,null),Y=[nt],ot=[V,J];for(;Y.length!==0;){const it=ot.pop(),et=ot.pop(),tt=Y.pop();if(it-et==0)tt.code=B[et],tt.data=D[G[et]];else{const lt=A(G,B,et,it);tt.code=lt,et<=lt&&(tt.left=new x(null,null,null,null),Y.push(tt.left),ot.push(et,lt)),it>lt&&(tt.right=new x(null,null,null,null),Y.push(tt.right),ot.push(lt+1,it))}}return nt}function E(D,G,B,V,J,nt){const Y=new x(null,null,null,null),ot=[Y],it=[V,J];for(;ot.length!==0;){const et=it.pop(),tt=it.pop(),lt=ot.pop();if(et-tt<nt){const ft=new Array(et-tt+1);for(let dt=tt,st=0;dt<=et;dt++,st++)ft[st]=D[G[dt]];lt.code=B[tt],lt.data=ft}else{const ft=A(G,B,tt,et);lt.code=ft,tt<=ft&&(lt.left=new x(null,null,null,null),ot.push(lt.left),it.push(tt,ft)),et>ft&&(lt.right=new x(null,null,null,null),ot.push(lt.right),it.push(ft+1,et))}}return Y}r(x,"Node"),r(b,"buildIterative"),r(E,"buildIterativeBuckets");var S=Math.clz32||r(function(G){let B=-2147483648;for(let V=0;V<31;V+=1){if(B&G)return V;B>>>=1}return 32},"clz");function A(D,G,B,V){const J=G[D[B]],nt=G[D[V]];if(J===nt)return B;const Y=S(J^nt);let ot,it,et,tt=B,lt=V-B;do lt=lt+1>>1,ot=tt+lt,ot<V&&(it=G[D[ot]],et=S(J^it),et>Y&&(tt=ot));while(lt>1);return tt}function T(D,G){let B=D^G,V=65535^B,J=65535^(D|G),nt=D&(65535^G),Y=B|V>>1,ot=B>>1^B,it=J>>1^V&nt>>1^J,et=B&J>>1^nt>>1^nt;B=Y,V=ot,J=it,nt=et,Y=B&B>>2^V&V>>2,ot=B&V>>2^V&(B^V)>>2,it^=B&J>>2^V&nt>>2,et^=V&J>>2^(B^V)&nt>>2,B=Y,V=ot,J=it,nt=et,Y=B&B>>4^V&V>>4,ot=B&V>>4^V&(B^V)>>4,it^=B&J>>4^V&nt>>4,et^=V&J>>4^(B^V)&nt>>4,B=Y,V=ot,J=it,nt=et,it^=B&J>>8^V&nt>>8,et^=V&J>>8^(B^V)&nt>>8,B=it^it>>1,V=et^et>>1;let tt=D^G,lt=V|65535^(tt|B);return tt=16711935&(tt|tt<<8),tt=252645135&(tt|tt<<4),tt=858993459&(tt|tt<<2),tt=1431655765&(tt|tt<<1),lt=16711935&(lt|lt<<8),lt=252645135&(lt|lt<<4),lt=858993459&(lt|lt<<2),lt=1431655765&(lt|lt<<1),(lt<<1|tt)>>>0}r(A,"findSplit"),r(T,"hilbert");var P=[0,1],k=[0,2];for(let D=4;D<65535;D<<=2)for(let G=0,B=P.length;G<B;G++)P.push(P[G]|D),k.push((P[G]|D)<<1);function I(D,G){return(k[255&G]|P[255&D])+65536*(k[G>>8&255]|P[D>>8&255])+4294967296*(k[G>>16&255]|P[D>>16&255])}r(I,"morton");var R=new Uint32Array(1024);function M(D,G){const B=new Uint32Array(G.length);for(let J=0;J<1024;J++)R[J]=0;const V=255;for(let J=0;J<G.length;J++){const nt=G[J];R[nt&V]++,R[256+(nt>>8&V)]++,R[512+(nt>>16&V)]++,R[768+(nt>>24&V)]++}for(let J=0;J<4;J++){let nt=0,Y=0;const ot=256*J;for(let it=0;it<256;it++)nt=R[it+ot],R[it+ot]=Y,Y+=nt}for(let J=0;J<G.length;J++){const nt=G[J];B[R[nt&V]++]=J}for(let J=0;J<G.length;J++){const nt=B[J],Y=G[nt];D[R[256+(Y>>8&V)]++]=nt}for(let J=0;J<G.length;J++){const nt=D[J],Y=G[nt];B[R[512+(Y>>16&V)]++]=nt}for(let J=0;J<G.length;J++){const nt=B[J],Y=G[nt];D[R[768+(Y>>24&V)]++]=nt}}r(M,"radixSort");var z=class{constructor(D,{getX:G,getY:B,bucketSize:V=0,sfc:J=1}={}){this.bucketSize=0,this._root=null;const nt=D.length,Y=new Uint32Array(nt);let ot=1/0,it=1/0,et=-1/0,tt=-1/0;this._x=G,this._y=B;const lt=J===1?T:I;this._project=lt;const ft=new Uint32Array(nt);for(let mt=0;mt<nt;mt++){const Ct=D[mt],It=G(Ct),Nt=B(Ct);It<ot&&(ot=It),Nt<it&&(it=Nt),It>et&&(et=It),Nt>tt&&(tt=Nt),ft[mt]=mt}this._minX=ot,this._minY=it,this._maxX=et,this._maxY=tt;const dt=65535/Math.max(et-ot,1),st=65535/Math.max(tt-it,1);this._hw=dt,this._hh=st;for(let mt=0;mt<nt;mt++){const Ct=D[mt];Y[mt]=lt(dt*(G(Ct)-ot),st*(B(Ct)-it))}M(ft,Y),this._root=V===0?b(D,ft,Y,0,nt-1):E(D,ft,Y,0,nt-1,V),this.bucketSize=V}get root(){return this._root}inOrder(D,G){let B=this._root;const V=[];let J=!1;for(;!J;)if(B)V.push(B),B=B.left;else if(V.length!==0){if(B=V.pop(),D.call(G,B))break;B=B.right}else J=!0;return this}preOrder(D,G){const B=[this._root];for(;B.length!==0;){const V=B.pop();D.call(G,V)||(V.right&&B.push(V.right),V.left&&B.push(V.left))}return this}postOrder(D,G){const B=[];let V,J=this._root;do{for(;J;)J.right&&B.push(J.right),B.push(J),J=J.left;J=B.pop(),V=B.length-1,J.right&&B[V]===J.right?(B[V]=J,J=J.right):(D.call(G,J),J=null)}while(B.length!==0);return this}map(D,G){const B=[];return this.inOrder(V=>{B.push(D.call(G,V))}),B}height(){return j(this._root)}toString(D=G=>G.code.toString()){const G=[];return X(this._root,"",!0,B=>G.push(B),D),G.join("")}size(){let D=0;return this.preOrder(()=>{D++}),D}destroy(){return this._root=null,this}};function j(D){return D?1+Math.max(j(D.left),j(D.right)):0}function X(D,G,B,V,J){if(D){V(G+(B?"^-- ":"|-- ")+J(D)+`
`);const nt=G+(B?"    ":"|   ");D.left&&X(D.left,nt,!1,V,J),D.right&&X(D.right,nt,!0,V,J)}}function O(D){for(let G=D.length-1;G>=0;G--){let B=Math.floor(Math.random()*(G+1));B=Math.max(Math.min(B,G),0);const V=D[G];D[G]=D[B],D[B]=V}return D}r(z,"BVH"),r(j,"treeHeight"),r(X,"row"),r(O,"shuffle");var N,W,U,K,Z,rt,vt,St,ut,_t=r(D=>D.x,"getX"),Rt=r(D=>D.y,"getY"),Gt=r(D=>D.r,"getR");function Yt(D,G=_t,B=Rt,V=Gt){const J=O(D.slice()),nt=J.length;let Y,ot=[],it=0;for(;it<nt;){const et=J[it];Y&&re(Y,G(et),B(et),V(et))?it++:(ot=Et(ot,et,G,B,V),Y=se(ot,G,B,V),it=0)}return Y}function Et(D,G,B,V,J){const nt=B(G),Y=V(G),ot=J(G),it={x:nt,y:Y,r:ot};if(Xt(it,D,B,V,J))return[G];for(let et=0;et<D.length;++et){const tt=D[et],lt=B(tt),ft=V(tt),dt=J(tt);if(!Tt(it,lt,ft,dt)&&Xt(q(lt,ft,dt,nt,Y,ot),D,B,V,J))return[D[et],G]}for(let et=0;et<D.length-1;et++)for(let tt=et+1;tt<D.length;tt++){const lt=D[et],ft=D[tt],dt=B(lt),st=V(lt),mt=J(lt),Ct=B(ft),It=V(ft),Nt=J(ft);if(!Tt(q(dt,st,mt,Ct,It,Nt),nt,Y,ot)&&!Tt(q(dt,st,mt,nt,Y,ot),Ct,It,Nt)&&!Tt(q(Ct,It,Nt,nt,Y,ot),dt,st,mt)&&Xt(ht(dt,st,mt,Ct,It,Nt,nt,Y,ot),D,B,V,J))return[D[et],D[tt],G]}throw new Error}function Tt(D,G,B,V){const J=D.r-V,nt=G-D.x,Y=B-D.y;return J>=0&&J*J>nt*nt+Y*Y}function re(D,G,B,V){const J=D.r-V+1e-6,nt=G-D.x,Y=B-D.y;return J>0&&J*J>nt*nt+Y*Y}function Xt(D,G,B,V,J){for(let nt=0;nt<G.length;++nt){const Y=G[nt];if(!re(D,B(Y),V(Y),J(Y)))return!1}return!0}function se(D,G,B,V){return D.length===1?de(G(D[0]),B(D[0]),V(D[0])):D.length===2?q(G(D[0]),B(D[0]),V(D[0]),G(D[1]),B(D[1]),V(D[1])):ht(G(D[0]),B(D[0]),V(D[0]),G(D[1]),B(D[1]),V(D[1]),G(D[2]),B(D[2]),V(D[2]))}function de(D,G,B){return{x:D,y:G,r:B}}function q(D,G,B,V,J,nt){const Y=V-D,ot=J-G,it=nt-B,et=Math.sqrt(Y*Y+ot*ot);return{x:(D+V+Y/et*it)/2,y:(G+J+ot/et*it)/2,r:(et+B+nt)/2}}function ht(D,G,B,V,J,nt,Y,ot,it){const et=D-V,tt=D-Y,lt=G-J,ft=G-ot,dt=nt-B,st=it-B,mt=D*D+G*G-B*B,Ct=mt-V*V-J*J+nt*nt,It=mt-Y*Y-ot*ot+it*it,Nt=tt*lt-et*ft,pt=(lt*It-ft*Ct)/(2*Nt)-D,At=(ft*dt-lt*st)/Nt,kt=(tt*Ct-et*It)/(2*Nt)-G,Ot=(et*st-tt*dt)/Nt,$t=At*At+Ot*Ot-1,Zt=2*(B+pt*At+kt*Ot),Kt=pt*pt+kt*kt-B*B,Qt=-($t?(Zt+Math.sqrt(Zt*Zt-4*$t*Kt))/(2*$t):Kt/Zt);return{x:D+pt+At*Qt,y:G+kt+Ot*Qt,r:Qt}}function bt(D,G,B,{X:V,Y:J,R:nt,fx:Y,fy:ot,bucketSize:it},{elasticity:et}){if(et===0)return B;B||(B=new z(G,{getX:N,getY:W,bucketSize:it})).postOrder(K);for(let tt=0;tt<G.length;tt++)rt=G[tt],vt=V[rt]+Y[rt],St=J[rt]+ot[rt],ut=nt[rt],B.preOrder(Z);return B}r(Yt,"med"),r(Et,"extend"),r(Tt,"contains"),r(re,"containsWeak"),r(Xt,"containsWeakAll"),r(se,"enclose"),r(de,"from1"),r(q,"from2"),r(ht,"from3"),r(bt,"collisionForce");var xt,ct,yt,Dt,Ft,Bt,oe,ne,Fe,Ve=r(({X:D,Y:G,R:B,bucketSize:V})=>J=>{let nt,Y,ot,it;const et=J.data;if(et!==null)if(V!==0){const tt=Yt(et,N,W,U);nt=tt.x,Y=tt.y,ot=tt.r}else{const tt=et;nt=D[tt],Y=G[tt],ot=B[tt]}else if(J.left&&J.right){const tt=J.left.cx,lt=J.left.cy,ft=J.right.cx,dt=J.right.cy,st=J.left.r,mt=J.right.r,Ct=ft-tt,It=dt-lt,Nt=mt-st,pt=Math.sqrt(Ct*Ct+It*It);nt=(tt+ft+Ct/pt*Nt)/2,Y=(lt+dt+It/pt*Nt)/2,ot=(pt+st+mt)/2}else it=J.left||J.right,it&&(nt=it.cx,Y=it.cy,ot=it.r);J.cx=nt,J.cy=Y,J.r=ot},"getMeasureBodies"),Me=r(({X:D,Y:G,R:B,fx:V,fy:J,bucketSize:nt},{elasticity:Y,margin:ot})=>it=>{const et=it.data;if(et===null){const tt=it.cx-vt,lt=it.cy-St,ft=it.r+ut;return tt*tt+lt*lt>ft*ft}if(nt!==0){const tt=et;for(let lt=0;lt<tt.length;lt++){const ft=tt[lt];if(ft>rt){const dt=B[ft];let st=vt-D[ft]-V[ft],mt=St-G[ft]-J[ft];const Ct=ut+dt+ot;let It=st*st+mt*mt;if(It<Ct*Ct){st===0&&(st=g(),It+=st*st),mt===0&&(mt=g(),It+=mt*mt);const Nt=Math.sqrt(It),pt=(Ct-Nt)*Y/Nt,At=dt/Ct;V[rt]+=st*pt*At,J[rt]+=mt*pt*At,V[ft]-=st*pt*(1-At),J[ft]-=mt*pt*(1-At)}}}}else{const tt=it.data;if(tt>rt){const lt=B[tt];let ft=vt-D[tt],dt=St-G[tt];const st=ut+lt+ot;let mt=ft*ft+dt*dt;if(mt<st*st){ft===0&&(ft=g(),mt+=ft*ft),dt===0&&(dt=g(),mt+=dt*dt);const Ct=Math.sqrt(mt),It=(st-Ct)*Y/Ct,Nt=lt/st;V[rt]+=ft*It*Nt,J[rt]+=dt*It*Nt,V[tt]-=ft*It*(1-Nt),J[tt]-=dt*It*(1-Nt)}}}},"getApplyForce"),sn=r((D,G,B)=>{const{X:V,Y:J,R:nt}=G;N=r(Y=>V[Y],"getX"),W=r(Y=>J[Y],"getY"),U=r(Y=>nt[Y],"getR"),K=Ve(G),Z=Me(G,B)},"initialize");function Ke(D,G,{masses:B,X:V,Y:J,fx:nt,fy:Y},{charge:ot}){const it=G.length;let et,tt,lt,ft,dt,st,mt,Ct,It;for(let Nt=0;Nt<it;Nt++){et=G[Nt];for(let pt=Nt+1;pt<it;pt++)if(Nt!==pt){if(tt=G[pt],et===tt)continue;lt=V[et]-V[tt]||g(),ft=J[et]-J[tt]||g(),dt=lt*lt+ft*ft,dt<1&&(dt=Math.sqrt(1*dt)),st=ot*B[tt],mt=D*st/dt,Ct=ot*B[et],It=D*Ct/dt,nt[et]+=lt*mt,Y[et]+=ft*mt,nt[tt]-=lt*It,Y[tt]-=ft*It}}}bt.initialize=sn,r(Ke,"repulsion"),Ke.initialize=()=>{};var le=0;function Pe(D,G,B,{X:V,Y:J,R:nt,bucketSize:Y}){le=D,B===null&&(B=new z(G,{getX:yt,getY:Dt,bucketSize:Y})).postOrder(xt);const ot=G.length;for(let it=0;it<ot;it++)Bt=G[it],oe=V[Bt],ne=J[Bt],Fe=nt[Bt],B.preOrder(ct);return B}r(Pe,"repulsion");var De=r(({fx:D,fy:G,X:B,Y:V,R:J,masses:nt,bucketSize:Y},{charge:ot,theta:it})=>et=>{let tt=0,lt=0,ft=oe-et.cx||g(),dt=ne-et.cy||g(),st=ft*ft+dt*dt,mt=Fe+et.r;const Ct=et.data;if(Ct!==null){if(Ct===Bt)return!1;if(Y!==0){const It=Ct;for(let Nt=0;Nt<It.length;Nt++){const pt=It[Nt];pt!==Bt&&(ft=oe-B[pt]||g(),dt=ne-V[pt]||g(),st=ft*ft+dt*dt,mt=Fe+J[pt],st<1&&(st=Math.sqrt(1*st)),tt=ot*nt[pt],lt=le*tt/st,D[Bt]+=ft*lt,G[Bt]+=dt*lt)}}else st<1&&(st=Math.sqrt(1*st)),tt=ot*et.mass,lt=le*tt/st,D[Bt]+=ft*lt,G[Bt]+=dt*lt}else{const It=mt/it;if(st>It*It)return st<1&&(st=Math.sqrt(1*st)),tt=ot*et.mass,lt=le*tt/st,D[Bt]+=ft*lt,G[Bt]+=dt*lt,!0}},"getApplyForce"),ke=r(({X:D,Y:G,R:B,masses:V,bucketSize:J})=>nt=>{let Y,ot,it=0,et=0,tt=0,lt=0;const ft=nt.data;if(ft!==null)if(J!==0){const dt=ft,st=Yt(dt,yt,Dt,Ft);it=st.x,et=st.y,tt=st.r;for(let mt=0;mt<dt.length;mt++)lt+=V[dt[mt]]}else ot=ft,it=D[ot],et=G[ot],tt=B[ot],lt=V[ot];else if(nt.left&&nt.right){const dt=nt.left.cx,st=nt.left.cy,mt=nt.right.cx,Ct=nt.right.cy,It=nt.left.r,Nt=nt.right.r,pt=mt-dt,At=Ct-st,kt=Nt-It,Ot=Math.sqrt(pt*pt+At*At);it=(dt+mt+pt/Ot*kt)/2,et=(st+Ct+At/Ot*kt)/2,tt=(Ot+It+Nt)/2,lt=nt.left.mass+nt.right.mass}else Y=nt.left||nt.right,it=Y.cx,et=Y.cy,tt=Y.r,lt=Y.mass;nt.cx=it,nt.cy=et,nt.r=tt,nt.mass=lt},"getAccumulateBodies"),_e=r((D,G,B)=>{const V=D.length,{X:J,Y:nt,R:Y,degrees:ot,pinned:it,masses:et,nodeIds:tt}=G,{scaling:lt,defaultRadius:ft,bucketSize:dt}=B;G.bucketSize=dt===void 0?Math.floor(Math.log(V)):dt;let st=1/0,mt=1/0,Ct=-1/0,It=-1/0;const Nt=Math.PI*(3-Math.sqrt(5));let pt=0;for(let At=0;At<D.length;At++){const kt=D[At];let{x:Ot,y:$t,r:Zt}=kt;const{mass:Kt}=kt;if(isNaN(Ot)||isNaN($t)){const Qt=5*Math.sqrt(At),qt=At*Nt;Ot=Qt*Math.cos(qt),$t=Qt*Math.sin(qt)}Zt=Zt||ft,J[At]=Ot,nt[At]=$t,Y[At]=Zt,it[At]=kt.pinned?1:0,et[At]=Kt===void 0?(1+ot[At])*lt:Kt,tt[At]=At,Zt>pt&&(pt=Zt),Ot<st&&(st=Ot),$t<mt&&(mt=$t),Ot>Ct&&(Ct=Ot),$t>It&&(It=$t)}if(D.length>1&&(Ct-st<2*pt||It-mt<2*pt)){const At=(st+Ct)/2,kt=(mt+It)/2;for(let Ot=0;Ot<V;Ot++)if(!it[Ot]){const $t=5*Math.sqrt(Ot),Zt=Ot*Nt,Kt=At+$t*Math.cos(Zt),Qt=kt+$t*Math.sin(Zt);J[Ot]=Kt,nt[Ot]=Qt,Kt<st&&(st=Kt),Qt<mt&&(mt=Qt),Kt>Ct&&(Ct=Kt),Qt>It&&(It=Qt)}}yt=r(At=>J[At],"getX"),Dt=r(At=>nt[At],"getY"),Ft=r(At=>Y[At],"getR"),xt=ke(G),ct=De(G,B)},"initialize");function hn(D,G,{X:B,Y:V,fx:J,fy:nt,vx:Y,vy:ot,masses:it,pinned:et},tt){let lt=0,ft=0;const dt=D.length,st=1/8;for(let mt=0;mt<dt;mt++){const Ct=D[mt],It=it[Ct],Nt=J[Ct]/It,pt=nt[Ct]/It;Y[Ct]+=Nt*st,ot[Ct]+=pt*st;const At=.2*Y[Ct]*st+.5*Nt*st*st,kt=.2*ot[Ct]*st+.5*pt*st*st;J[Ct]=nt[Ct]=0,et[Ct]||(B[Ct]+=At,V[Ct]+=kt,lt+=Math.abs(At)*It,ft+=Math.abs(kt)*It)}return(lt*lt+ft*ft)/dt}function Ne(D,G,{X:B,Y:V,fx:J,fy:nt,vx:Y,vy:ot,pinned:it,masses:et},tt){const lt=D.length;let ft=0;for(let dt=0;dt<lt;dt++){const st=D[dt],mt=et[st],Ct=J[st]/mt,It=nt[st]/mt,Nt=Y[st]+1*Ct,pt=ot[st]+1*It;let At=1*Nt,kt=1*pt;At>1e4&&(At=.1),kt>1e4&&(kt=.1),Y[st]=G*(Nt+Y[st])/2,ot[st]=G*(pt+ot[st])/2,J[st]=nt[st]=0,it[st]||(B[st]+=At,V[st]+=kt),ft+=.5*(At*At+kt*kt)}return ft}function Mn(D,G,{X:B,Y:V,fx:J,fy:nt,pinned:Y,layer:ot,layers:it,surfaces:et,movements:tt},{maxDisplacement:lt}){tt.fill(0);let ft=0;const dt=D.length;let st=1/0,mt=1/0,Ct=-1/0,It=-1/0;const Nt=lt*lt;for(let kt=0;kt<dt;kt++){const Ot=D[kt],$t=J[Ot]*=G,Zt=nt[Ot]*=G,Kt=ot[Ot];let Qt=$t,qt=Zt;const Ae=B[Ot],be=V[Ot];if(Qt*Qt+qt*qt>Nt){const Dn=Math.sqrt(Qt*Qt+qt*qt)/lt;qt/=Dn,Qt/=Dn}Y[Ot]||(B[Ot]+=Qt,V[Ot]+=qt);const on=Math.sqrt(Qt*Qt+qt*qt);Y[Ot]||(Ae<st&&(st=Ae),be<mt&&(mt=be),Ae>st&&(Ct=Ae),be>mt&&(It=be),tt[Kt-1]+=on),ft+=Kt*on}const pt=Math.max(Ct-st,0),At=Math.max(It-mt,0);for(let kt=0;kt<it.length;kt++){const Ot=it[kt],$t=Ot.length;let Zt=1/0,Kt=1/0,Qt=-1/0,qt=-1/0,Ae=0;for(let cn=0;cn<$t;cn++){const Xn=Ot[cn];if(Y[Xn])continue;const ze=B[Xn],Bn=V[Xn];ze<Zt&&(Zt=ze),Bn<Kt&&(Kt=Bn),ze>Qt&&(Qt=ze),Bn>qt&&(qt=Bn),Ae++}const be=Qt-Zt,on=qt-Kt,Dn=Math.max(1,Math.sqrt(be**2+on**2));et[kt]=Dn;const zn=Ae===0?0:tt[kt]/Ae,bn=pt*At||1;tt[kt]=zn>Ae?zn/bn:0}return ft}function Mi(D,G,B){ye(D,G,B),we(B)}function ye(D,G,{sources:B,targets:V,degrees:J,nodeIds:nt,edgeIds:Y}){const ot={};for(let it=0;it<D.length;it++)ot[it]=nt[it]=it;for(let it=0;it<G.length;it++){const{source:et,target:tt}=G[it],lt=ot[et],ft=ot[tt];Y[it]=it,B[it]=lt,V[it]=ft,J[lt]++,J[ft]++}}function we({nodeIds:D,edgeIds:G,sources:B,targets:V,degrees:J,layer:nt,layers:Y,component:ot,components:it,cluster:et,parent:tt}){let lt=0,ft=1;const dt=new Uint32Array(D.length);for(let pt=0;pt<D.length;pt++)dt[pt]=J[pt];const st=new Array(D.length);for(let pt=0;pt<G.length;pt++){const At=G[pt],kt=B[At],Ot=V[At];st[kt]=st[kt]||[],st[Ot]=st[Ot]||[],st[kt].push(Ot),st[Ot].push(kt)}const mt=new Uint8Array(D.length),Ct=new Uint8Array(D.length);tt.fill(-1);let It=0;for(let pt=0;pt<D.length;pt++)if(mt[pt]===0){const At=[pt];for(;At.length!==0;){const kt=At.pop();if(mt[kt]===0&&st[kt]!==void 0){const Ot=st[kt];for(let $t=0;$t<Ot.length;$t++)At.push(Ot[$t])}mt[kt]=1,ot[kt]=It}It++}const Nt=new Array(D.length);for(let pt=0;pt<D.length;pt++)nt[pt]=0,Nt[pt]=pt;for(;Nt.length!==0;){const pt=[],At=[];for(let kt=0;kt<Nt.length;kt++)dt[Nt[kt]]<=lt&&(pt.push(kt),At.push(Nt[kt]));for(let kt=0;kt<At.length;kt++){const Ot=At[kt];Ct[Ot]=lt,nt[Ot]=ft;const $t=st[Ot];if($t)for(let Zt=0;Zt<$t.length;Zt++)dt[$t[Zt]]--}for(let kt=0;kt<At.length;kt++){const Ot=At[kt],$t=st[Ot];if($t)for(let Zt=0;Zt<$t.length;Zt++){const Kt=$t[Zt],Qt=nt[Kt];if(Qt===void 0||Qt>ft){tt[Ot]=Kt;break}}}pt.reverse();for(let kt=0;kt<pt.length;kt++)Nt.splice(pt[kt],1);if(ft+=1,Nt.length>0){let kt=1/0;for(let Ot=0;Ot<Nt.length;Ot++){const $t=dt[Nt[Ot]];$t<kt&&(kt=$t)}kt>=lt+1&&(lt=kt,ft=1)}}mt.fill(0);for(let pt=0;pt<D.length;pt++){const At=D[pt],kt=nt[At];if(tt[At]===-1||nt[tt[At]]===kt){const Ot=[At];for(mt.fill(0);Ot.length!==0;){const $t=Ot.pop();if(mt[$t])continue;if(nt[$t]>kt){tt[At]=$t;break}const Zt=st[$t];if(mt[$t]=1,Zt)for(let Kt=0;Kt<Zt.length;Kt++)Ot.push(Zt[Kt])}}}for(let pt=0;pt<D.length;pt++){const At=D[pt],kt=ot[At];it[kt]=it[kt]||[],it[kt].push(At);const Ot=nt[At]-1;Y[Ot]=Y[Ot]||[],Y[Ot].push(At),et[At]=tt[At]}}Pe.initialize=_e,r(hn,"euler"),r(Ne,"leapfrog"),r(Mn,"velocityVerlet"),r(Mi,"default"),r(ye,"initTopology"),r(we,"decomposition");var rn=class{constructor(D,G=!0){this.bucketSize=0;const B=D.nodes.length,V=D.edges.length;c(B+V),this.X=new Array(B),this.Y=new Array(B),this.R=new Array(B),this.fx=new Float32Array(B),this.fy=new Float32Array(B),this.vx=new Float32Array(B),this.vy=new Float32Array(B),this.pinned=new Uint8Array(B),this.masses=new Float32Array(B),this.weights=new Float32Array(V),this.lengths=new Float32Array(V),this.sources=new Uint32Array(V),this.targets=new Uint32Array(V),this.degrees=new Uint32Array(B),this.layer=new Uint32Array(B),this.parent=new Int32Array(B),this.cluster=new Int32Array(B),this.component=new Uint32Array(B),this.components=[],this.layers=[],this.nodeIds=new Array(B),this.edgeIds=new Array(V),G&&Mi(D.nodes,D.edges,this),this.movements=new Array(this.layers.length).fill(0),this.surfaces=new Array(this.layers.length).fill(0),this.movementsPrev=new Array(this.layers.length).fill(0),this.surfacesPrev=new Array(this.layers.length).fill(0)}};function Nn(D,G){return D<G?D*G+Math.pow(G-D-1,2)/4:D*G+Math.pow(D-G-1,2)/4}function yn(D,G){return(D+G)*(D+G+1)/2+G}function Wn({edgeIds:D,sources:G,targets:B,pinned:V,degrees:J,X:nt,Y,R:ot},it=0,et=.5){const tt={},lt={};for(const ft of D){const dt=G[ft],st=B[ft];dt!==st&&(tt[dt]=tt[dt]||{},tt[st]=tt[st]||{},tt[dt][st]=!0,tt[st][dt]=!0)}Object.keys(tt).forEach(ft=>{const dt=Number(ft),st=Object.keys(tt[Number(dt)]);if(st.length===2){const[mt,Ct]=st,It=Nn(Number(mt),Number(Ct));It in lt||(lt[It]=[Number(Ct),Number(mt)]),V[dt]||lt[It].push(dt)}}),Object.keys(lt).forEach(ft=>{const[dt,st,...mt]=lt[Number(ft)];if(mt.length<3)return;const Ct=nt[dt],It=Y[dt],Nt=nt[st],pt=Y[st],At=J[dt],kt=.25+.5*At/(At+J[st]);let Ot=Ct+(Nt-Ct)*kt,$t=It+(pt-It)*kt,Zt=-(pt-It),Kt=Nt-Ct;const Qt=Math.sqrt(Math.pow(Ct-Nt,2)+Math.pow(It-pt,2));Zt=-2*Zt/Qt,Kt=-2*Kt/Qt;const qt=Math.acos(Zt/Math.sqrt(Zt*Zt+Kt*Kt));it>0&&(qt<it||qt>Math.PI-it&&qt<=Math.PI?(Zt=2*Math.cos(Math.PI-it),Kt=2*Math.sin(Math.PI-it)):(qt>2*Math.PI-it||qt>=Math.PI&&qt<Math.PI+it)&&(Zt=2*Math.cos(it),Kt=2*Math.sin(it)));let Ae=0,be=1;mt.sort((cn,Xn)=>ot[Xn]-ot[cn]);let on=0,Dn=0;const zn=Math.max(ot[mt[0]],ot[mt[1]])/2;mt.length%2==1&&(Ae=1,Ot-=Zt*zn,$t-=Kt*zn);const bn=1+et;for(let cn=0;cn<mt.length;cn++){const Xn=(Ae+cn)%2,ze=mt[cn],Bn=cn>=2?ot[ze]:zn,Un=(Xn?on:Dn)+Bn;nt[ze]=Ot+Zt*be*Un,Y[ze]=$t+Kt*be*Un,Xn?on+=Bn*bn:Dn+=Bn*bn,be=-be}})}function Ni(D){let G=0,B=0;for(const Y of D)G+=Y.w*Y.h,B=Math.max(B,Y.w);D.sort((Y,ot)=>ot.h-Y.h);const V=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(G/.95)),B),h:1/0}];let J=0,nt=0;for(const Y of D)for(let ot=V.length-1;ot>=0;ot--){const it=V[ot];if(!(Y.w>it.w||Y.h>it.h)){if(Y.x=it.x,Y.y=it.y,nt=Math.max(nt,Y.y+Y.h),J=Math.max(J,Y.x+Y.w),Y.w===it.w&&Y.h===it.h){const et=V.pop();ot<V.length&&(V[ot]=et)}else Y.h===it.h?(it.x+=Y.w,it.w-=Y.w):Y.w===it.w?(it.y+=Y.h,it.h-=Y.h):(V.push({x:it.x+Y.w,y:it.y,w:it.w-Y.w,h:Y.h}),it.y+=Y.h,it.h-=Y.h);break}}}function vn(D,G=1){return Ni(D.map(B=>(B.w+=B.maxr+G,B.h+=B.maxr+G,B)).sort((B,V)=>B.w*B.h-V.w*V.h))}r(rn,"LayoutData"),r(Nn,"unorderedPair"),r(yn,"orderedPair"),r(Wn,"alignSiblings"),r(Ni,"potpack"),r(vn,"boxpack");var On=class{constructor(){this.ids=[],this.xmin=1/0,this.ymin=1/0,this.xmax=-1/0,this.ymax=-1/0,this.x=0,this.y=0,this.w=0,this.h=0,this.cx=0,this.cy=0,this.radius=0,this.mx=0,this.my=0,this.m=0,this.maxr=0}add(D,G,B,V){this.ids.push(D),G-V<this.xmin&&(this.xmin=G-V),B-V<this.ymin&&(this.ymin=B-V),G+V>this.xmax&&(this.xmax=G+V),B+V>this.ymax&&(this.ymax=B+V),V>this.maxr&&(this.maxr=V),this.mx+=V*G,this.my+=V*B,this.m+=V}measure(D=0){return this.w=this.xmax-this.xmin+2*D,this.h=this.ymax-this.ymin+2*D,this.cx=this.mx/this.m,this.cy=this.my/this.m,this.x=this.xmin,this.y=this.ymin,this.radius=Math.sqrt(this.w*this.w+this.h*this.h)/2,this}};function Ri(D,G=20,B,V,J){for(const st of D){const{x:mt,y:Ct,r:It}=Yt(st.ids,Nt=>B[Nt],Nt=>V[Nt],Nt=>J[Nt]);st.cx=mt,st.cy=Ct,st.radius=It+G}const nt=D.slice().sort((st,mt)=>st.radius-mt.radius),Y=nt.map(st=>({x:st.cx,y:st.cy,r:st.radius})),ot=nt.pop();let it=3*Math.PI/2,et=ot.radius;const tt=2*Math.PI,{cx:lt,cy:ft}=ot,dt=[ot];for(;nt.length!==0;){const st=nt[nt.length-1],mt=et+st.radius,Ct=lt+Math.cos(it)*mt,It=ft+Math.sin(it)*mt;dt.some(Nt=>{const pt=Nt.cx-Ct,At=Nt.cy-It;return Math.sqrt(pt*pt+At*At)<Nt.radius+st.radius})?et+=1:(st.x=Ct-st.w/2,st.y=It-st.h/2,st.cx=Ct,st.cy=It,Y[nt.length-1].x=Ct,Y[nt.length-1].y=It,dt.push(nt.pop()),it+=(2*st.radius+1)/mt*1%tt)}}function Xs(D,G,B,V){let J=0;const nt=[];for(const Y of V){const ot=new On;for(const it of Y)ot.add(it,D[it],G[it],B[it]);nt.push(ot.measure()),Y.length>nt[J].ids.length&&(J=nt.length-1)}return{boxes:nt,biggest:J}}function Oe(D,G,{X:B,Y:V,R:J,components:nt,pinned:Y,degrees:ot,sources:it,targets:et,edgeIds:tt},{update:lt,onUpdate:ft,placement:dt,placementOffset:st,alignSiblings:mt,siblingsMinAngle:Ct,siblingsOffset:It}){if(mt&&(Wn({X:B,Y:V,R:J,degrees:ot,pinned:Y,sources:it,targets:et,edgeIds:tt},Ct,It),lt(D,B,V)),dt){const{boxes:Nt,biggest:pt}=Xs(B,V,J,nt);if(dt==="spiral")Ri(Nt,st,B,V,J);else{if(dt!=="box")return;vn(Nt,st)}const At=Nt[pt].xmin-Nt[pt].x,kt=Nt[pt].ymin-Nt[pt].y;for(const Ot of Nt){const{xmin:$t,ymin:Zt,x:Kt,y:Qt,ids:qt}=Ot,Ae=$t-Kt-At,be=Zt-Qt-kt;for(const on of qt)B[on]-=Ae,V[on]-=be}lt(D,B,V),ft()}}r(On,"Component"),r(Ri,"spiralpack"),r(Xs,"groupAndMeasure"),r(Oe,"postprocessing");var Cn=(D=>(D[D.verlet=0]="verlet",D[D.euler=1]="euler",D))(Cn||{}),Ln=0,si=typeof window>"u",Vt=typeof performance<"u"&&performance.now?performance:Date,xr=si?D=>{const G=Vt.now(),B=Math.max(0,16-(G-Ln)),V=setTimeout(()=>D(G+B),B);return Ln=G+B,V}:window.requestAnimationFrame,ro=si?D=>clearTimeout(D):window.cancelAnimationFrame;function xn(D,G,B){for(let V=0;V<D.length;V++){const J=D[V];J.x=G[V],J.y=B[V]}}r(xn,"defaultUpdate");var Zs=r(()=>{},"noop"),Cs={movementRatio:7e-8,surfaceRatio:.0025},br=class{constructor(D={}){this.onUpdate=r(G=>{},"onUpdate"),this.update=xn,this.nextTick=xr,this.cancelTick=ro,this.onEnd=Zs,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=Cs,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in D?D.autoStop&&(typeof D.autoStop=="boolean"?D.autoStop=Cs:D.autoStop=wt(wt({},D.autoStop),Cs)):D.steps;for(const G in D)D[G]===void 0&&G!=="order"&&G!=="depth"||(this[G]=D[G])}};function Ie(D,G,{X:B,Y:V,R:J,degrees:nt,nodeIds:Y,edgeIds:ot,layers:it,layer:et,cluster:tt,masses:lt,weights:ft,sources:dt,targets:st},{cx:mt,cy:Ct,nextTick:It,cancelTick:Nt,update:pt,onUpdate:At,batch:kt,maxIterations:Ot,steps:$t,minMovement:Zt},Kt,Qt){const qt=it.slice();kt=kt??1;let Ae,be=0;function on(){Nt(Ae),pt(D,B,V),At(),Qt(be)}r(on,"stop");const Dn={};for(let Pn=0;Pn<G.length;Pn++)Dn[Number(G[Pn].id)||Pn]=Pn;const zn=new Map;for(let Pn=0;Pn<ot.length;Pn++){const as=ot[Pn];zn.set(yn(dt[as],st[as]),as)}for(let Pn=0;Pn<it.length;Pn++){const as=it[Pn],Jt=Pn;for(let gn=0;gn<as.length;gn++){const ie=as[gn],an=tt[ie];an!==-1&&(lt[an]+=lt[ie])}for(let gn=0;gn<G.length;gn++){const ie=G[gn],an=Number(ie.id)||gn,Fi=ie.source,Ls=ie.target,lo=ft[Dn[an]];if(et[Fi]===Jt&&et[Ls]===Jt){const Ys=tt[Fi],cl=tt[Ls];if(Ys!==cl){const uo=zn.get(yn(Ys,cl));uo!==void 0&&(ft[uo]+=lo)}}}}Y.length=0,ot.length=0,Ot=1/0;let bn=1;const cn=1-Math.pow(.1,1/$t/2),Xn=(bn-.1)/$t;let ze,Bn,Un=.5;function hl(){bn+=(0-bn)*cn;const Pn=Kt(bn,Y,ot);let as=bn<=Un||Pn<Zt;if(be===0||as){const Jt=qt.pop();if(Jt){ze&&(Bn=ze.reduce((ie,an)=>Math.max(ie,mt-B[an],Ct-V[an]),0)),Y.push.apply(Y,Jt);for(let ie=0;ie<Jt.length;ie++){const an=Jt[ie],Fi=tt[an];if(Fi!==-1){const Ls=nt[an]>1?2:1,lo=J[Fi]+J[an];lt[Fi]-=lt[an],B[an]=B[Fi]+Ls*lo*(2*h()-1),V[an]=V[Fi]+Ls*lo*(2*h()-1)}else ze&&(B[an]=mt+2*Bn*(1-2*h()),V[an]=Ct+2*Bn*(1-2*h()))}ze=Jt;const gn=Y.reduce((ie,an)=>(ie[an]=!0,ie),{});ot.length=0;for(let ie=0;ie<G.length;ie++){const{source:an,target:Fi,id:Ls}=G[ie];gn[an]&&gn[Fi]&&ot.push(Dn[Number(Ls)])}as=!1,qt.length===0?(bn=.2,Un=.1):(bn=.1+2*Xn,Un=.1)}}be%kt==0&&(pt(D,B,V),At()),++be>=Ot||as?on():Ae=It(hl)}return r(hl,"simulationStep"),{done:!1,start(){return Ae=setTimeout(hl),this},stop(){return on(),this},get iterations(){return be}}}r(br,"Settings"),r(Ie,"multiLevel");var Er=class{constructor(D){this.promise=new Promise(D)}then(D){return this.promise.then(D)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function oo(D,G,{X:B,Y:V,nodeIds:J,edgeIds:nt,layers:Y,movements:ot,movementsPrev:it,surfaces:et,surfacesPrev:tt},lt,ft,dt){var st;const{nextTick:mt,cancelTick:Ct,steps:It,minMovement:Nt,update:pt,onUpdate:At,autoStop:kt}=lt,Ot=(st=lt.batch)!=null?st:1;let $t=0,Zt=1,Kt,Qt=1-Math.pow(.05,1/It),qt=!1;const Ae=r(()=>{qt=!0,Ct(Kt),At(),dt($t)},"stop");let be=!1;const on=r(()=>{Zt+=(.001-Zt)*Qt;const Dn=ft(Zt,J,nt),zn=Y.length;let bn=!1,cn=!1;if(kt){bn=cn=!0;const{movementRatio:ze,surfaceRatio:Bn}=kt;for(let Un=0;Un<zn;Un++)bn&&Math.abs(1-et[Un]/tt[Un])>Bn&&(bn=!1),cn&&Math.abs(ot[Un]-it[Un])>ze&&(cn=!1)}bn&&cn&&!be&&(Qt=1-Math.pow(.001,1/Math.max(10,$t)),be=!0);const Xn=qt||Zt<.05||Dn!==0&&Dn<=Nt;if($t%Ot==0&&(pt(D,B,V),At()),++$t>=It||Xn)return Ae();for(let ze=0;ze<zn;ze++)it[ze]=ot[ze],tt[ze]=et[ze];Kt=mt(on)},"simulationStep");return{done:!1,start(){return Kt=setTimeout(on),this},stop(){return Ae(),this},get iterations(){return $t}}}r(Er,"SimulationPromise"),r(oo,"singleLevel");var ao,ua={euler:hn,verlet:Mn,leapfrog:Ne};function os(D,G={}){let B,V;const J=r((ft={nodes:[],edges:[]})=>(B=ft.nodes,V=ft.edges,c(yn(B.length,V.length)),new rn(ft,!0)),"setGraph"),nt=r((ft={})=>new br(ft),"setOptions");let Y=J(D),ot=nt(G);_(V,Y),_e(B,Y,ot),sn(B,Y,ot),v(B,Y,ot);const it=ua[ot.integrator]||Mn;let et=null;const tt=r((ft,dt,st)=>(et&&(et.destroy(),et=null),dt.length<=1?0:(ot.barnesHutOptimization?et=Pe(ft,dt,et,Y):Ke(ft,dt,Y,ot),m(ft,st,Y,ot),et&&ot.elasticity!==0&&bt(0,dt,et,Y,ot),p(ft,dt,Y,ot),it(dt,ot.inertia,Y,ot))),"step");let lt;return{setOptions:(ft={})=>(ot=nt(ft),this),setGraph:({nodes:ft,edges:dt})=>(Y=J(D),_(dt,Y),_e(ft,Y,ot),sn(ft,Y,ot),v(ft,Y,ot),this),start(){return lt=(ot.multilevel?Ie:oo)(B,V,Y,ot,tt,ft=>{lt.done||Oe(B,0,Y,ot),ot.onEnd(ft),lt.done=!0}).start(),this},iterations:()=>lt.iterations,data:()=>Y,stop(){return lt&&lt.stop(),this},step(ft=1){return tt(ft,Y.nodeIds,Y.edgeIds),ot.update(B,Y.X,Y.Y),this}}}return r(os,"force"),os.run=(D,G)=>{let B;const V=new Er(J=>{G.onEnd=J,B=os(D,G).start()});return V.simulation=B,V.stop=()=>(B.stop(),V),V},ao=o,((D,G,B,V)=>{if(G&&typeof G=="object"||typeof G=="function")for(let J of i(G))s.call(D,J)||J===B||e(D,J,{get:()=>G[J],enumerable:!(V=n(G,J))||V.enumerable});return D})(e({},"__esModule",{value:!0}),ao)})();return t.default.apply(this,arguments)}Wt(t2,"SimulationPromise"),Wt(Ef,"gpuLayout"),Ef.run=(t,e,n)=>{let i;const s=new t2(r=>{n.onEnd=r,i=Ef(t,e,n).start()});return s.simulation=i,s.stop=()=>(i.stop(),s),s};var y9=2,v9=1.25,n2={name:"force",imports:{force:e2},configure(t,{graph:e,events:n}){const i=t.nodes._indexes,s=e.getNodeAttribute("x").getMultiple(i),r=e.getNodeAttribute("y").getMultiple(i),o=e.getNodeAttribute("radius").getMultiple(i),a=e.getNodeAttribute("layoutable").getMultiple(i),l=t.edges,d=[],h=[],c={};t.edgeStrength===void 0&&(t.edgeStrength=.5),t.gpu&&(t.edgeStrength/=y9),t.gravity==null&&(t.gravity=.01),t.siblingsOffset==null&&(t.siblingsOffset=0),t.theta==null&&(t.theta=.62),t.autoStop=!!t.autoStop,t.alignSiblings=!!t.alignSiblings;const g=t.radiusRatio||v9;for(let _=0;_<t.nodes._indexes.length;_++){const p=t.nodes._indexes[_];c[p]=_,d.push({id:_,x:s[_],y:r[_],r:o[_]*g,pinned:!a[_]})}l.forEach(_=>{const p=c[_.getSource()._index],v=c[_.getTarget()._index];p!==v&&p!==void 0&&v!==void 0&&h.push({source:p,target:v})});const m=vp(wt({},t));return delete m.nodes,delete m.edges,{graph:{nodes:d,edges:h},options:m,indexes:t.nodes._indexes,done:!1,x:s,y:r,chunkPeriod:250}},update:function(t,e){if(!e.simulation&&t){let n;e.done=!1,e.graph=t.graph,e.options=t.options,e.indexes=t.indexes;let i=!1;if(t.options.gpu){const l=IM("webgl2",{},()=>{Wo("GPU layout: WebGL context not available. Falling back on CPU."),e.simulation=void 0,e.options.gpu=!1,e.cleanUp&&e.cleanUp(),this._update(t,e)});l&&(n=l.context,e.cleanUp=l.cleanUp),i=!!n}let s=Date.now();i||(t.options.nextTick=l=>Date.now()-s<=e.chunkPeriod?l():(s=Date.now(),setTimeout(l,0))),t.options.update=(l,d,h)=>{e.x=d,e.y=h},t.options.onEnd=()=>{if(i&&n){const{X:l,Y:d}=e.simulation.data(!0);e.x=l,e.y=d}e.done=!0,e.simulation=void 0,e.cleanUp&&e.cleanUp()},t.options.bucketSize=0;const r=i&&n?Ef(t.graph,n,t.options).start():e2(t.graph,t.options).start();e.simulation=r;const{X:o,Y:a}=i&&n?{X:new Float32Array(t.graph.nodes.length),Y:new Float32Array(t.graph.nodes.length)}:r.data();e.x=o,e.y=a}return{graph:e.graph,indexes:e.indexes,x:e.x,y:e.y}},context:function(){return{done:!1,graph:{nodes:[],edges:[]},x:null,y:null,indexes:null,chunkPeriod:250}},stop:function(t){t.done=!0,t.simulation&&(t.simulation.stop(),delete t.simulation)},isRunning:function(t){return!t.done||(t.done=!1,!1)},onSync:function({indexes:t,x:e,y:n}){return{indexes:t,x:e,y:n}}};function x9(t,e,n,i=t.getNodes()){if(!e)return n?t.nodeList():i.filter(s=>s.getMetaNode()===null);if(!(e instanceof to)){if(Array.isArray(e)&&e.length>0)return t.getNodes(e);throw Error("[Layout]: 'nodes' must be a NodeList or an NodeId[]")}return e}function b9(t,e,n=t.getEdges()){if(!e)return n;if(!(e instanceof tl)){if(Array.isArray(e)&&e.length>0)return t.getEdges(e);throw Error("[Layout]: 'edges' must be a EdgeList or a valid EdgeId[]")}return e}function E9(t){if(!t.size)return;const e=new Set(t.getId());return t.getAdjacentEdges().filter(n=>n.getExtremities().getId().every(i=>e.has(i)))}function YR(t,e={},n=!0){n||(e.edges=void 0);const i=x9(t,e.nodes,e.edges),s=b9(t,e.edges,E9(i));return ue(wt({},e),{nodes:i.concat(s.getExtremities()).dedupe(),edges:s})}function S9(t,e,n,i,s){return{x:t+s*(n-t),y:e+s*(i-e)}}var w9=10;function A9(t,e,n){let i,s,r=1/0;for(let o=0,a=e.length;o<a;o++){const l=e[o],d=e[(o+1)%a],h=f1(t[0],t[1],l[0],l[1],d[0],d[1]);h<r&&(r=h,i=l,s=d)}return T9(t[0],t[1],i[0],i[1],s[0],s[1],n)}function T9(t,e,n,i,s,r,o){const a=GM(t,e,n,i,s,r);let l=-(i-r),d=n-s;const h=Math.sqrt(l*l+d*d);return l/=h,d/=h,[a.x-o*l,a.y-o*d]}function C9(t,e,n,i){for(let s=0;s<t.length;s++){const[r,o]=t[s],a=Math.abs(r-e),l=Math.abs(o-n);if(a+l<=i||!(a>i||l>i)&&a*a+l*l<=i*i)return!0}return!1}function L9(t,e,n){const i=$M(n.cx,n.cy,t,e,n.minX,n.minY,n.maxX,n.maxY);let s,r=1/0,o={x:n.maxX,y:e};for(const a of i)s=wn(t,e,a.x,a.y),s<r&&(r=s,o=a);return o}function P9(t){const e=t.bottomLeft(),n=t.topRight();return[[e.x,e.y],[e.x,n.y],[n.x,n.y],[n.x,e.y]]}function k9(t,e,n,i){const s=[],r=[],o=[];return t.forEach((a,l)=>{i[l]&&(s.push(a),r.push(e[l]),o.push(n[l]))}),{ids:s,subgraphPositions:r,radii:o}}function I9(t,e,n){const{duration:i=0,margin:s=5,referenceNodes:r,nodes:o}=e,{ids:a,subgraphPositions:l,radii:d}=k9(o.getId(),n,o.getAttribute("radius"),o.getAttribute("layoutable")),h=t.getNodes(a);let c=r;!c||c instanceof to||(c=t.getNodes(c));const g=c||h.inverse(),m=g.getPosition().map(k=>[k.x,k.y]),_=h.getBoundingBox(),p=g.getBoundingBox();p.pad(p.maxScaledSize);const v={layoutName:"incremental",ids:h.getId(),positions:{before:l,current:l}};if(!h.size)return Promise.resolve(v);const x=Fb(l.map(k=>k.x),l.map(k=>k.y),d),[b,E]=x,S=x[2]+p.maxScaledSize+s;let A,T=0,P=0;if(C9(m,b,E,S))if(g.size<=3){if(zb(b,E,x[2],p.minX,p.minY,p.maxX,p.maxY)){const k=L9(b,E,p);A=wn(p.cx,p.cy,k.x,k.y);const I=S9(p.cx,p.cy,k.x,k.y,(A+S)/A);T=I.x-b,P=I.y-E}}else{const k=Tk.from(m,j=>j[0],j=>j[1]),I=Mh(k.triangles,m),R=m.length>3?Mh(k.hull,m):P9(p),M=Lk(g.getPosition(),w9,S,I,R);let z=A9([b,E],R,S);if(M.length>0){let j=Math.pow(b-z[0],2)+Math.pow(E-z[1],2);for(const X of M)T=b-X[0],P=E-X[1],A=T*T+P*P,A<j&&(j=A,z=X.slice(0,2));T=z[0]-b,P=z[1]-E}else T=z[0]-_.cx,P=z[1]-_.cy}if(T||P){const k=l.map(I=>(I.x+=T,I.y+=P,I));if(e.locate){typeof e.locate=="boolean"&&(e.locate={});const I=t.modules.locate.layoutDataBoundingBox({x:[...m.map(M=>M[0]),...k.map(M=>M.x)],y:[...m.map(M=>M[1]),...k.map(M=>M.y)],indexes:t.getNodes()._indexes}),R=t.modules.locate.computeConfigForBounds(I,e.locate);t.modules.camera.setView(R,{duration:i,easing:e.locate.easing,ignoreZoomLimits:!0})}return v.positions.current=k,h.setAttributes(k,i).then(()=>v)}return h.setAttributes(l,i).then(()=>v)}function M9(t,e,n){const i=nn(e);return i.duration=0,i.dryRun=!0,i.locate=!1,delete i.incremental,n(i).then(s=>I9(t,e,s.positions.current))}function N9(t,e,n){const{nodes:i,duration:s,centralNode:r}=e,o=i,a=o.reduce((d,h)=>(d[h._index]=!0,d),{}),l=t.getNodes();if(e.focusOnGroupShape)return n({nodes:o,duration:0}).then(()=>{const d=o.concat(r),h=d.getAttribute("layoutable");return d.setAttributes({layoutable:!1}),n({nodes:t.getNodes(),duration:s}).then(()=>d.setAttributes(h))});{const d=nn(e);return delete d.centralNode,d.incremental=!1,d.nodes=l,d.nodeMass=(h,c)=>(c+1)*(a[h._index]?1:2),n(d)}}function qR(t,e,n){const i=YR(e.modules.graph,t);if(typeof i.incremental!="boolean"&&"margin"in i.incremental&&!isFinite(i.incremental.margin))throw new Error("Incremental layout: margin has to be a positive number");const s=nn(i);return typeof i.incremental!="boolean"&&(s.margin=i.incremental.margin,s.referenceNodes=i.incremental.referenceNodes),s.centralNode&&!s.centralNode.getAttribute("layoutable")?N9(e,s,n):M9(e,s,n)}var R9=t=>(t.modules.layouts.register(n2),(e={})=>{if(e.incremental)return qR(e,t,t.layouts.force);if(e.edgeStrength!==void 0&&(!isFinite(e.edgeStrength)||e.edgeStrength<0))throw new Error("force layout: edgeStrength must be a positive number");if(e.steps!==void 0&&(!isFinite(e.steps)||e.steps<=0))throw new Error("force layout: 'steps' must be a positive integer");if(e.edgeLength!==void 0&&(!isFinite(e.edgeLength)||e.edgeLength<=0))throw new Error("force layout: 'edgeLength' must be positive");if(e.gravity!==void 0&&(!isFinite(e.gravity)||e.gravity<0||e.gravity>=1))throw new Error("force layout: 'gravity' must be between 0 and 1");if(e.charge!==void 0&&!isFinite(e.charge))throw new Error("force layout: 'charge' must be a number");if(e.radiusRatio!==void 0&&(!isFinite(e.radiusRatio)||e.radiusRatio<0))throw new Error("force layout: 'radiusRatio' must be a positive number");if(e.theta!==void 0&&(!isFinite(e.theta)||e.theta<0||e.theta>1))throw new Error("force layout: 'theta' must be between 0 and 1");if(!(e.cx===void 0&&e.cy===void 0||typeof e.cx=="number"&&typeof e.cy=="number"))throw new Error("force layout: both 'cx' and 'cy' must be numbers");if(e.siblingsOffset!==void 0&&!isFinite(e.siblingsOffset))throw new Error("force layout: 'siblingsOffset' must be a number");return e.gpu=!!e.gpu,e.gpu&&(e.useWebWorker=!1),t.modules.layouts.start(n2.name,e)}),i2={name:"forceLink",configure:function(t,{graph:e,camera:n,graphics:i}){const s=t.nodes._indexes,r=t.edges._indexes,o={},a={},l=s.length,d=r.length;let h;var c=e.getObjectList(!0),g=e.getObjectList(!1);(t.nodes||t.edges)&&(delete(t=nn(t)).nodes,delete t.edges);const m=e.getNodeAttribute("innerStroke.width").getMultiple(s),_=e.getNodeAttribute("outerStroke.width").getMultiple(s),p=e.degrees(s),v=e.getNodeAttribute("x").getMultiple(s),x=e.getNodeAttribute("y").getMultiple(s),b=e.getNodeAttribute("radius").getMultiple(s),E=e.nodeList(s).getAttribute("layoutable"),S=typeof t.nodeMass=="function"?t.nodeMass:function(O,N,W){return N+1};delete t.nodeMass;const A=typeof t.edgeWeight=="function"?t.edgeWeight:function(O){return 1};delete t.edgeWeight,isFinite(t.scalingRatio)||delete t.scalingRatio;const T=s.reduce((O,N,W)=>(E[W]||(O[N]=!0),O),{});let P=0,k=0,I=0;const R=n.getZoom();for(h=0;h<s.length;++h){const O=s[h],N=v[h],W=x[h],U=b[h]+(m[h]+_[h])/R;o[O]={id:O,x:N,y:W,degree:p[h],size:U,pinned:!!T[O],mass:S(c.get(O),p[h],h)},I=Math.max(U,I)}if(l>1)for(h=0;h<l;h++){const O=o[s[h]];P+=O.x,k+=O.y}P/=l,k/=l;const M={x:P,y:k},z=e.edgeList(r),j=z.getSource()._indexes,X=z.getTarget()._indexes;for(h=0;h<d;h++){const O=r[h],N=j[h],W=X[h];o[N]&&o[W]&&(a[O]={source:N,target:W},a[O].weight=A(g.get(O)))}return{nodes:o,edges:a,maxSize:I,config:vp(t),barycentre:M}},context:function(){return{chunkPeriod:250}},update:function(t,e){let n;!e.W&&t?(n={ppn:10,ppe:3,ppr:9,MAX_SUBDIVISION_RETRIES:3,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:100,strongGravityMode:!0,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:10,iterationsPerRender:10,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!0,alignNodeSiblings:!0,nodeSiblingsScale:5,nodeSiblingsAngleMin:0}},e.W=n,function(O,N){const W=function(K,Z){let rt,vt,St,ut=K.nodes,_t=K.edges,Rt=K.maxSize,Gt=Object.keys(K.nodes),Yt=Object.keys(K.edges),Et=Gt.length*n.ppn,Tt=Yt.length*n.ppe,re={};const Xt=Math.pow(10,Math.log(Math.max(Rt,1))-6),se=Xt/2,de=Math.random,q=Z.randomizeFactor||1;let ht;ht=Z.randomize==="locally"?ct=>ct+de()*q:Z.randomize==="globally"?ct=>de()*q:ct=>ct+de()*Xt-se;const bt=new Float32Array(Et),xt=new Float32Array(Tt);for(rt=vt=0,St=Gt.length;rt<St;rt++){const ct=Gt[rt],yt=ut[ct];let Dt=yt.x,Ft=yt.y;yt.pinned||(Dt=ht(Dt),Ft=ht(Ft)),re[ct]=vt,bt[vt]=Dt,bt[vt+1]=Ft,bt[vt+2]=0,bt[vt+3]=0,bt[vt+4]=0,bt[vt+5]=0,bt[vt+6]=yt.mass,bt[vt+7]=1,bt[vt+8]=yt.size,bt[vt+9]=yt.pinned||0,vt+=n.ppn}for(rt=vt=0,St=Yt.length;rt<St;rt++){const ct=_t[Yt[rt]];xt[vt]=re[ct.source],xt[vt+1]=re[ct.target],xt[vt+2]=ct.weight||0,vt+=n.ppe}return{nodes:bt,edges:xt}}(O,N);e.NodeMatrix=W.nodes,e.EdgeMatrix=W.edges,n.nodesLength=e.NodeMatrix.length,n.edgesLength=e.EdgeMatrix.length}(t,t.config),n.settings=function(O,N){for(const W in O)N[W]=O[W];return N}(t.config,n.settings),e.nodes=t.nodes,e.edges=t.edges,e.barycentre=t.barycentre):n=e.W;let i,s=e.NodeMatrix,r=e.EdgeMatrix;const o=0,a=1,l=2,d=3,h=4,c=5,g=6,m=7,_=8,p=9,v=0,x=1,b=2,E=0,S=1,A=2,T=3,P=4,k=5,I=6,R=7,M=8;function z(){let X,O,N,W,U,K,Z,rt,vt,St,ut,_t,Rt,Gt,Yt,Et,Tt;for(N=0;N<n.nodesLength;N+=n.ppn)s[N+h]=s[N+l],s[N+c]=s[N+d],s[N+l]=0,s[N+d]=0;if(n.settings.outboundAttractionDistribution){for(vt=0,N=0;N<n.nodesLength;N+=n.ppn)vt+=s[N+g];vt/=n.nodesLength}if(n.settings.barnesHutOptimize){let ht,bt,xt,ct,yt=1/0,Dt=-1/0,Ft=1/0,Bt=-1/0;for(i=[],N=0;N<n.nodesLength;N+=n.ppn)yt=Math.min(yt,s[N+o]),Dt=Math.max(Dt,s[N+o]),Ft=Math.min(Ft,s[N+a]),Bt=Math.max(Bt,s[N+a]);const oe=Dt-yt,ne=Bt-Ft;for(oe>ne?(Ft-=(oe-ne)/2,Bt=Ft+oe):(yt-=(ne-oe)/2,Dt=yt+ne),i[0+E]=-1,i[0+S]=(yt+Dt)/2,i[0+A]=(Ft+Bt)/2,i[0+T]=Math.max(Dt-yt,Bt-Ft),i[0+P]=-1,i[0+k]=-1,i[0+I]=0,i[0+R]=0,i[0+M]=0,X=1,N=0;N<n.nodesLength;N+=n.ppn)for(O=0,xt=n.MAX_SUBDIVISION_RETRIES;;){if(!(i[O+k]>=0)){if(i[O+E]<0){i[O+E]=N;break}if(i[O+k]=X*n.ppr,Z=i[O+T]/2,rt=i[O+k],i[rt+E]=-1,i[rt+S]=i[O+S]-Z,i[rt+A]=i[O+A]-Z,i[rt+T]=Z,i[rt+P]=rt+n.ppr,i[rt+k]=-1,i[rt+I]=0,i[rt+R]=0,i[rt+M]=0,rt+=n.ppr,i[rt+E]=-1,i[rt+S]=i[O+S]-Z,i[rt+A]=i[O+A]+Z,i[rt+T]=Z,i[rt+P]=rt+n.ppr,i[rt+k]=-1,i[rt+I]=0,i[rt+R]=0,i[rt+M]=0,rt+=n.ppr,i[rt+E]=-1,i[rt+S]=i[O+S]+Z,i[rt+A]=i[O+A]-Z,i[rt+T]=Z,i[rt+P]=rt+n.ppr,i[rt+k]=-1,i[rt+I]=0,i[rt+R]=0,i[rt+M]=0,rt+=n.ppr,i[rt+E]=-1,i[rt+S]=i[O+S]+Z,i[rt+A]=i[O+A]+Z,i[rt+T]=Z,i[rt+P]=i[O+P],i[rt+k]=-1,i[rt+I]=0,i[rt+R]=0,i[rt+M]=0,X+=4,ct=O+E,ht=s[i[ct]+o]<i[O+S]?s[i[ct]+a]<i[O+A]?i[O+k]:i[O+k]+n.ppr:s[i[ct]+a]<i[O+A]?i[O+k]+2*n.ppr:i[O+k]+3*n.ppr,i[O+I]=s[i[ct]+g],i[O+R]=s[i[ct]+o],i[O+M]=s[i[ct]+a],i[ht+E]=i[O+E],i[O+E]=-1,bt=s[N+o]<i[O+S]?s[N+a]<i[O+A]?i[O+k]:i[O+k]+n.ppr:s[N+a]<i[O+A]?i[O+k]+2*n.ppr:i[O+k]+3*n.ppr,ht===bt){if(xt--){O=ht;continue}xt=n.MAX_SUBDIVISION_RETRIES;break}i[bt+E]=N;break}ht=s[N+o]<i[O+S]?s[N+a]<i[O+A]?i[O+k]:i[O+k]+n.ppr:s[N+a]<i[O+A]?i[O+k]+2*n.ppr:i[O+k]+3*n.ppr,i[O+R]=(i[O+R]*i[O+I]+s[N+o]*s[N+g])/(i[O+I]+s[N+g]),i[O+M]=(i[O+M]*i[O+I]+s[N+a]*s[N+g])/(i[O+I]+s[N+g]),i[O+I]+=s[N+g],O=ht}}if(n.settings.barnesHutOptimize)for(St=n.settings.scalingRatio,N=0;N<n.nodesLength;N+=n.ppn)for(O=0;;)if(i[O+k]>=0){if(Et=Math.sqrt((s[N+o]-i[O+R])*(s[N+o]-i[O+R])+(s[N+a]-i[O+M])*(s[N+a]-i[O+M])),2*i[O+T]/Et<n.settings.barnesHutTheta){if(ut=s[N+o]-i[O+R],_t=s[N+a]-i[O+M],n.settings.adjustSizes?Et>0?(Tt=St*s[N+g]*i[O+I]/Et/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt):Et<0&&(Tt=-St*s[N+g]*i[O+I]/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt):Et>0&&(Tt=St*s[N+g]*i[O+I]/Et/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt),i[O+P]<0)break;O=i[O+P];continue}O=i[O+k]}else{if(i[O+E]>=0&&i[O+E]!==N&&(ut=s[N+o]-s[i[O+0]+o],_t=s[N+a]-s[i[O+0]+a],Et=Math.sqrt(ut*ut+_t*_t),n.settings.adjustSizes?Et>0?(Tt=St*s[N+g]*s[i[O+0]+g]/Et/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt):Et<0&&(Tt=-St*s[N+g]*s[i[O+0]+g]/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt):Et>0&&(Tt=St*s[N+g]*s[i[O+0]+g]/Et/Et,s[N+l]+=ut*Tt,s[N+d]+=_t*Tt)),i[O+P]<0)break;O=i[O+P]}else for(St=n.settings.scalingRatio,W=0;W<n.nodesLength;W+=n.ppn)for(U=0;U<W;U+=n.ppn)ut=s[W+o]-s[U+o],_t=s[W+a]-s[U+a],n.settings.adjustSizes?(Et=Math.sqrt(ut*ut+_t*_t)-s[W+_]-s[U+_],Et>0?(Tt=St*s[W+g]*s[U+g]/Et/Et,s[W+l]+=ut*Tt,s[W+d]+=_t*Tt,s[U+l]+=ut*Tt,s[U+d]+=_t*Tt):Et<0&&(Tt=100*St*s[W+g]*s[U+g],s[W+l]+=ut*Tt,s[W+d]+=_t*Tt,s[U+l]-=ut*Tt,s[U+d]-=_t*Tt)):(Et=Math.sqrt(ut*ut+_t*_t),Et>0&&(Tt=St*s[W+g]*s[U+g]/Et/Et,s[W+l]+=ut*Tt,s[W+d]+=_t*Tt,s[U+l]-=ut*Tt,s[U+d]-=_t*Tt));for(rt=n.settings.gravity/n.settings.scalingRatio,St=n.settings.scalingRatio,N=0;N<n.nodesLength;N+=n.ppn)Tt=0,ut=s[N+o],_t=s[N+a],Et=Math.sqrt(ut*ut+_t*_t),n.settings.strongGravityMode?Et>0&&(Tt=St*s[N+g]*rt):Et>0&&(Tt=St*s[N+g]*rt/Et),s[N+l]-=ut*Tt,s[N+d]-=_t*Tt;for(St=1*(n.settings.outboundAttractionDistribution?vt:1),K=0;K<n.edgesLength;K+=n.ppe)W=r[K+v],U=r[K+x],Z=r[K+b],Yt=Math.pow(Z,n.settings.edgeWeightInfluence),ut=s[W+o]-s[U+o],_t=s[W+a]-s[U+a],n.settings.adjustSizes?(Et=Math.sqrt(ut*ut+_t*_t)-s[W+_]-s[U+_],n.settings.linLogMode?n.settings.outboundAttractionDistribution?Et>0&&(Tt=-St*Yt*Math.log(1+Et)/Et/s[W+g]):Et>0&&(Tt=-St*Yt*Math.log(1+Et)/Et):n.settings.outboundAttractionDistribution?Et>0&&(Tt=-St*Yt/s[W+g]):Et>0&&(Tt=-St*Yt)):(Et=Math.sqrt(ut*ut+_t*_t),n.settings.linLogMode?n.settings.outboundAttractionDistribution?Et>0&&(Tt=-St*Yt*Math.log(1+Et)/Et/s[W+g]):Et>0&&(Tt=-St*Yt*Math.log(1+Et)/Et):n.settings.outboundAttractionDistribution?(Et=1,Tt=-St*Yt/s[W+g]):(Et=1,Tt=-St*Yt)),Et>0&&(s[W+l]+=ut*Tt,s[W+d]+=_t*Tt,s[U+l]-=ut*Tt,s[U+d]-=_t*Tt);let re,Xt,se,de,q=0;if(n.settings.adjustSizes)for(N=0;N<n.nodesLength;N+=n.ppn)s[N+p]||(re=Math.sqrt(s[N+l]*s[N+l]+s[N+d]*s[N+d]),re>n.maxForce&&(s[N+l]=s[N+l]*n.maxForce/re,s[N+d]=s[N+d]*n.maxForce/re),Xt=s[N+g]*Math.sqrt((s[N+h]-s[N+l])*(s[N+h]-s[N+l])+(s[N+c]-s[N+d])*(s[N+c]-s[N+d])),se=Math.sqrt((s[N+h]+s[N+l])*(s[N+h]+s[N+l])+(s[N+c]+s[N+d])*(s[N+c]+s[N+d]))/2,de=.1*Math.log(1+se)/(1+Math.sqrt(Xt)),Rt=s[N+o],Gt=s[N+a],s[N+o]=s[N+o]+s[N+l]*(de/n.settings.slowDown),s[N+a]=s[N+a]+s[N+d]*(de/n.settings.slowDown),ut=s[N+o],_t=s[N+a],Et=Math.sqrt((ut-Rt)*(ut-Rt)+(_t-Gt)*(_t-Gt)),q+=Et);else for(N=0;N<n.nodesLength;N+=n.ppn)s[N+p]||(Xt=s[N+g]*Math.sqrt((s[N+h]-s[N+l])*(s[N+h]-s[N+l])+(s[N+c]-s[N+d])*(s[N+c]-s[N+d])),se=Math.sqrt((s[N+h]+s[N+l])*(s[N+h]+s[N+l])+(s[N+c]+s[N+d])*(s[N+c]+s[N+d]))/2,de=s[N+m]*Math.log(1+se)/(1+Math.sqrt(Xt)),s[N+m]=Math.min(1,Math.sqrt(de*(s[N+l]*s[N+l]+s[N+d]*s[N+d])/(1+Math.sqrt(Xt)))),Rt=s[N+o],Gt=s[N+a],s[N+o]=s[N+o]+s[N+l]*(de/n.settings.slowDown),s[N+a]=s[N+a]+s[N+d]*(de/n.settings.slowDown),ut=s[N+o],_t=s[N+a],Et=Math.sqrt((ut-Rt)*(ut-Rt)+(_t-Gt)*(_t-Gt)),q+=Et);if(n.iterations++,n.settings.autoStop&&(n.converged=n.iterations>n.settings.maxIterations||q/n.nodesLength<n.settings.avgDistanceThreshold,n.converged&&n.settings.alignNodeSiblings)){let ht,bt,xt={},ct={};for(K=0;K<n.edgesLength;K+=n.ppe)W=r[K+v],U=r[K+x],W!==U&&(xt[W]=xt[W]||{},xt[U]=xt[U]||{},xt[W][U]=!0,xt[U][W]=!0);Object.keys(xt).forEach(hn=>{var Ne=~~hn;bt=Object.keys(xt[Ne]),bt.length==2&&(ht=bt[0]+";"+bt[1],ht in ct||(ht=bt[1]+";"+bt[0],ct[ht]||(ct[ht]=[~~bt[1],~~bt[0]])),ct[ht].push(Ne))});let yt,Dt,Ft,Bt,oe,ne,Fe,Ve,Me,sn,Ke,le,Pe,De,ke,_e=n.settings.nodeSiblingsAngleMin;Object.keys(ct).forEach(hn=>{if(Dt=ct[hn].shift(),Ft=ct[hn].shift(),yt=ct[hn].filter(ye=>!s[ye+p]),yt.length==1)return;if(ne=s[Dt+o],Fe=s[Dt+a],Ve=s[Ft+o],Me=s[Ft+a],Bt=Object.keys(xt[Dt]).length,oe=Object.keys(xt[Ft]).length,sn=function(we,rn,Nn,yn,Wn){return(Wn-yn)*(we-rn)/(Nn-rn)+yn}(Bt/(Bt+oe),0,1,1/4,3/4),le=function(we,rn,Nn,yn,Wn){return{x:we+(Nn-we)*Wn,y:rn+(yn-rn)*Wn}}(ne,Fe,Ve,Me,sn),Pe=function(we,rn,Nn,yn){return{xi:-(yn-rn),yi:Nn-we,xiPrime:yn-rn,yiPrime:-(Nn-we)}}(ne,Fe,Ve,Me),Ke=function(we,rn,Nn,yn){const Wn=Nn-we,Ni=yn-rn;return Math.sqrt(Wn*Wn+Ni*Ni)}(ne,Fe,Ve,Me),De=function(we,rn){return{x:(we.xiPrime-we.xi)/rn,y:(we.yiPrime-we.yi)/rn}}(Pe,Ke),ke=function(we){return Math.acos(we.x/Math.sqrt(we.x*we.x+we.y*we.y))}(De),2*_e>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");_e>0&&(ke<_e||ke>Math.PI-_e&&ke<=Math.PI?De={x:2*Math.cos(Math.PI-_e),y:2*Math.sin(Math.PI-_e)}:(ke>2*Math.PI-_e||ke>=Math.PI&&ke<Math.PI+_e)&&(De={x:2*Math.cos(_e),y:2*Math.sin(_e)}));let Ne=0,Mn=1,Mi=1;yt.length%2==1&&(Mi=0,Ne=1);for(let ye=0;ye<yt.length;ye++)s[yt[ye]+o]=le.x+Mn*De.x*Mi*(Ne||ye>=2?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),s[yt[ye]+a]=le.y+Mn*De.y*Mi*(Ne||ye>=2?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),Mn=-Mn,Mi+=(ye+Ne)%2})}}function j(X){const O=Object.keys(X),N={};for(let W=0;W<s.length;W+=n.ppn){const U=O[W/n.ppn];N[U]={id:U,x:s[W+o],y:s[W+a],pinned:s[W+p]}}return N}return function(){if(n.settings.autoStop){const O=Date.now();for(;!(n.converged||Date.now()-O>=e.chunkPeriod);)z()}else{const O=n.iterations===0?n.settings.startingIterations:n.iterations+n.settings.iterationsPerRender;for(;n.iterations!==O;)z()}return{nodes:j(e.nodes),barycentre:e.barycentre}}()},isRunning:function(t){return!t.W.settings.autoStop||!t.W.converged||(t.W=void 0,!1)},stop:function(t){t.W&&(t.W.converged=!0)},onSync:function({nodes:t,barycentre:e},{graph:n}){const i=Object.keys(t),s=i.length;let r,o,a,l,d,h,c,g,m=0,_=0;const p=new Array(s),v=new Array(s),x=new Array(s),b=new Array(s),[E,S]=n.getAttributes(!0,["x","y"]);for(r=0;r<s;r++)o=i[r],a=t[o],g=parseInt(o),p[r]=g,b[r]=a.pinned,a.pinned?(l=E.get(g),d=S.get(g)):(l=a.x,d=a.y),v[r]=l,x[r]=d,m+=l,_+=d;for(h=m/s-e.x,c=_/s-e.y,r=0;r<s;r++)b[r]||(v[r]-=h,x[r]-=c);return{indexes:p,x:v,y:x}}},F9=t=>(t.modules.layouts.register(i2),(e={})=>e.incremental?qR(e,t,t.layouts.forceLink):t.modules.layouts.start(i2.name,e)),s2={name:"grid",configure:function(t,{graph:e,camera:n}){function i(T){return T===void 0||typeof T=="number"&&isFinite(T)&&T>0}const s=t.sortBy,r=t,o=r.nodes,a=Array.from(o._indexes),l=a.length,{rows:d,cols:h,rowDistance:c,colDistance:g}=function(P,k,I,R,M){if(!i(k))throw new TypeError('"rows" should be a positive integer');if(!i(I))throw new TypeError('"cols" should be a positive integer');if(!i(R))throw new TypeError('"rowDistance" should be a positive number');if(!i(M))throw new TypeError('"colDistance" should be a positive number');if(k)return{rows:k,cols:Math.ceil(P/k),rowDistance:R,colDistance:M};if(I)return{cols:I,rows:Math.ceil(P/I),rowDistance:R,colDistance:M};const z=Math.ceil(Math.sqrt(P));return{cols:z,rows:Math.ceil(P/z),rowDistance:R,colDistance:M}}(l,r.rows,r.cols,r.colDistance,r.rowDistance),m=function(P,k,I,R,M){return typeof P!="string"?R.map((z,j)=>j):P==="radius"?k.getAttribute(!0,"radius").getMultiple(R):P==="degree"?I.getDegree():P==="random"?R.map(()=>Math.random()):I.getData(P).map(z=>z||M)}(s,e,o,a,t.sortFallbackValue),_=o.getAttribute("layoutable"),p=a.reduce((T,P,k)=>(_[k]&&T.push({id:P,attr:m[k]}),T),[]),v=o.getBoundingBox(),x=.65*Math.max(v.maxScaledSize,v.maxFixedSize/n.getZoom());let b=v.minX+x,E=v.maxX-x,S=v.minY+x,A=v.maxY-x;return v.width<x*h*2&&(b=v.cx-x*h+x,E=v.cx+x*h-x),v.height<x*d*2&&(S=v.cy-x*d+x,A=v.cy+x*d-x),{sort:!!s,nodes:p,reverse:!!r.reverse,cols:h,rows:d,minX:b,maxX:E,minY:S,maxY:A,rowDistance:c,colDistance:g}},update:function({sort:t,nodes:e,maxX:n,minX:i,maxY:s,minY:r,reverse:o,rows:a,cols:l,rowDistance:d,colDistance:h}){t&&e.sort((x,b)=>{const E=x.attr,S=b.attr;return E<S?-1:E>S?1:0}),o&&e.reverse();let c=(n-i)/(l-1),g=(s-r)/(a-1);const m=i,_=r;isFinite(c)||(c=0),isFinite(g)||(g=0),d!==void 0&&isFinite(d)&&(c=d),h!==void 0&&isFinite(h)&&(g=h);let p=0,v=0;return e.forEach(x=>{x.x=m+p*c,x.y=_+v*g,p+=1,p===l&&(v+=1,p=0)}),e},onSync:function(t){return{indexes:t.map(({id:e})=>e),x:t.map(({x:e})=>e),y:t.map(({y:e})=>e)}}},O9=t=>(t.modules.layouts.register(s2),(e={})=>t.modules.layouts.start(s2.name,e));function D9(t){let e=0,n=0;for(const o of t)e+=o.w*o.h,n=Math.max(n,o.w);t.sort((o,a)=>a.h-o.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let s=0,r=0;for(const o of t)for(let a=i.length-1;a>=0;a--){const l=i[a];if(!(o.w>l.w||o.h>l.h)){if(o.x=l.x,o.y=l.y,r=Math.max(r,o.y+o.h),s=Math.max(s,o.x+o.w),o.w===l.w&&o.h===l.h){const d=i.pop();a<i.length&&(i[a]=d)}else o.h===l.h?(l.x+=o.w,l.w-=o.w):o.w===l.w?(l.y+=o.h,l.h-=o.h):(i.push({x:l.x+o.w,y:l.y,w:l.w-o.w,h:o.h}),l.y+=o.h,l.h-=o.h);break}}return{w:s,h:r,fill:e/(s*r)||0}}var z9={down:()=>{},up:t=>t.y=-t.y,left:t=>{const e=t.x;t.x=-t.y,t.y=e},right:t=>{const e=t.x;t.x=t.y,t.y=-e}},wy=(t,e)=>isFinite(t)&&t>0?t:e;function B9(t){return{nodesSeparation:wy(t.nodesSeparation,0),componentsSeparation:wy(t.componentsSeparation,25),layerSeparation:wy(t.layerSeparation,50)}}function U9(t,{componentsSeparation:e,packing:n}){const i=[];for(let s=0;s<t.length;s++){const r=t[s],o=r.nodes;if(r.isFake&&r.w!==void 0&&r.h!==void 0){i.push({w:r.w,h:r.h,x:void 0,y:void 0,dag:r});continue}if(r.nodes.length===1){const g=2*o[0].data.radius;i.push({w:g+e/2,h:g+e/2,x:void 0,y:void 0,dag:r});continue}const{minX:a,maxX:l,minY:d,maxY:h}=o.reduce((g,{x:m,y:_,data:p})=>{const v=p.radius||0;return g.minX=Math.min(g.minX,m-v),g.maxX=Math.max(g.maxX,m+v),g.minY=Math.min(g.minY,_-v),g.maxY=Math.max(g.maxY,_+v),g},{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),c=(l+a)/2;o.forEach(g=>{g.x-=c}),i.push({w:Math.abs(l-a)+e/2,h:Math.abs(h-d)+e/2,minX:a,x:void 0,y:void 0,dag:r})}if(n!=="singleline")D9(i);else{let s=0;for(let r=0;r<i.length;r++){const o=i[r];o.x=s,o.y=0,s+=o.w}}return i}function $9(t,e={}){const{componentsSeparation:n}=B9(e);e.direction===void 0&&(e.direction="down");const i=U9(t,{componentsSeparation:n,packing:e.packing});for(let s=0;s<i.length;s++){const{x:r=0,y:o=0,dag:a}=i[s];for(const l of a.nodes)l.x+=r,l.y+=o,z9[e.direction](l)}}var F1={id:"__SENTINEL__",layer:-1,sink:!1,fixed:!1,siblingIndex:-1,parentIds:[],children:[],radius:0,ref:null},Bd=t=>t.data===F1||!1,ex=t=>!Bd(t),j9=[],G9=(t,e)=>({id:t,layer:e,data:F1,children:j9,ref:void 0,x:0,y:0}),V9=(t,e)=>({id:t,layer:-1,data:e,children:[],x:0,y:0}),r2=class{constructor(e,n,i){this.data=e,this.prev=n,this.next=i}toString(){return this.data}},JR=t=>t.reduce((e,n)=>(e[n]=!0,e),{});function H9(t,e){const n=[t],i=JR(n),s=[t];for(;n.length;){const r=n.shift();for(const o of e[r])i[o]||(i[o]=!0,s.push(o),n.push(o))}return s}function O1(t){return t.reduce((e,{source:n,target:i})=>(e[n]=e[n]||[],e[i]=e[i]||[],e[n].push(i),e[i].push(n),e),{})}function W9(t){return t.reduce((e,{source:n,target:i})=>(e[n]=e[n]||[],e[n].push(i),e),{})}function X9(t,e,n){const i=n||O1(e||[]);return t.filter(({id:s})=>!(s in i))}function Z9(t,e){const n=JR(e);return t.filter(i=>!(i in n))}function hs(t,e){t.forEach((n,i)=>{n.forEach((s,r,o)=>{e(s,r,o,i)})})}var o2=t=>{let e=Math.floor(t.length/2);return(t=[...t].sort((n,i)=>n-i)).length%2!=0?t[e]:(t[e-1]+t[e])/2};function Y9(t,e,n){const i=O1(e);let s=Object.keys(i);const r=[];for(;s.length;){const o=H9(s[0],i);r.push(o),s=Z9(s,o)}return n.skipSingletons?r:r.concat(X9(t,e,i).map(({id:o})=>[o]))}var q9=t=>t.reduce((e,{radius:n})=>Math.max(e,2*n),0);function J9(t,e){return wt({nodes:t.map(n=>ue(wt({},n),{data:n})),isFake:!0},e)}function K9(t,e,n){const i=O1(e||[]),s=t.filter(({id:m})=>!(m in i)).sort((m,_)=>_.radius-m.radius),r=Math.sqrt(s.length);let o=Math.floor(r),a=Math.ceil(r);o*a<s.length&&(o<a?o++:a++);const l=Math.max(1,q9(s)),d=Math.max(n.nodesGridSeparation||0,1),h=l*a+d*(a-1),c=l*o+d*Math.max(o-1,0),g=J9(s,{w:h,h:c});return g.nodes.forEach((m,_)=>{const p=_%a,v=Math.floor(_/a);m.x=h*p/a,m.y=c*v/o}),g}function Q9(t,e,n){const i=e.reduce((o,a)=>(o[a.source]=o[a.source]||[],o[a.source].push(a),o),{}),{result:s}=t.reduce(function o(a,l){const{visited:d,stack:h,result:c}=a;if(d[l.id])return a;d[l.id]=h[l.id]=1;const g=i[l.id]||[];for(const m of g)h[m.target]?c.push(m):o(a,n[m.target]);return delete h[l.id],a},{visited:{},stack:{},result:[]}),r=s.reduce((o,{source:a,target:l})=>(o[a]=o[a]||{},o[a][l]=1,o),{});return e.map(o=>{const{source:a,target:l,id:d}=o;return r[a]&&r[a][l]?{id:d,source:l,target:a}:o})}function tX(t){if(!t||!t.length)throw Error("Cannot stratify empty data");for(const s of t){if(!s)throw Error('Node data is "null"');if(s.id==null)throw Error('Node id contains a "null" value')}const e=t.map(s=>V9(s.id,s)),n=e.reduce((s,r)=>{if(s[r.id])throw Error(`The connected component contains id duplicates: ${r.id}`);return s[r.id]=r,s},{}),i=[];for(let s=0;s<e.length;s++){const r=e[s];for(let o=0;o<r.data.parentIds.length;o++){const a=r.data.parentIds[o],l=n[a];if(!l)throw Error(`The node ${r.id} has a missing parent id ${a}`);l.children.push(r)}r.data.parentIds.length||i.push(r)}return{isFake:!1,nodes:eX(i)}}function eX(t){const e={},n=[];for(;t.length;){const i=t.pop();e[i.id]||(n.push(i),e[i.id]=!0,t.push(...i.children))}return n}var nX=class{constructor(){this.byId={},this.byIndex={},this.length=0}append(t,e){let n;return this.head?(n=new r2(t,this.tail),this.tail=this.tail.next=n):(n=new r2(t),this.tail=this.head=n),this.byId[e]=n,this.byIndex[this.length++]=n,n}find(t){let e=this.head;do{if(e.data===t)return e;e=e.next}while(e)}forEach(t){let e=this.head,n=0;do t(e,n),n++;while(e=e.next)}},cs=-1,fn=1e-5,Ay=[],iX=class{constructor(t,e,n){this.edges=[],this.nodeMap={},this.nodeIndexTopDown={},this.nodeToLayer={},this.longEdges={},this.virt={},this.height={},this.breadth={},this.first=[],this.totalW={},this.mDist={},this.X={},this.block={},this.nodeList=new nX,this.nodeDistance=e,this.layerDistance=n,this.layers=t;const{breadth:i,virt:s,height:r,nodeToLayer:o,nodeIndexTopDown:a,nodeMap:l,longEdges:d,edges:h}=this;let c=0;hs(this.layers,(p,v,x,b)=>{if(a[p.id]=c++,l[p.id]=p,o[p.id]=b,this.nodeList.append(p,p.id),p.children.forEach(S=>{const A=Bd(S)||Bd(p);h.push({source:p.id,target:S.id,virtual:A,id:h.length})}),d[p.id])return;const E=[p.id];if(d[p.id]=E,!ex(p))for(let S=0;S<p.children.length;S++){const A=p.children[S];if(ex(A))continue;let T=A;for(;Bd(T);)E.push(T.id),d[T.id]=E,T=T.children[0]}});const g=this.adjacencyList=W9(h);this.N=t.reduce((p,v)=>p+v.length,0),this.Y=new Float32Array(t.length),this.first=t.map(p=>p[0]),t.forEach((p,v)=>r[v]=0),hs(this.layers,(p,v,x,b)=>{const E=g[p.id]?g[p.id].length:0;s[p.id]=Bd(p)&&E===1,this.nodeToLayer[p.id]=b,s[p.id]?i[p.id]=0:(i[p.id]=2*p.data.radius,r[b]=Math.max(r[b]||0,2*p.data.radius))});const m={},_={};h.forEach(p=>{const v=p.source,x=p.target;m[x]=m[x]||[],m[x].push(v),_[v]=_[v]||[],_[v].push(x)}),Object.values(m).forEach(p=>{p.sort((v,x)=>this.nodeIndexTopDown[v]-this.nodeIndexTopDown[x])}),Object.values(_).forEach(p=>{p.sort((v,x)=>this.nodeIndexTopDown[v]-this.nodeIndexTopDown[x])}),this.neighbours={prev:m,next:_}}computeMinNodeDistances(){const{layers:t,totalW:e}=this;hs(t,n=>{e[n.id]=0}),hs(t,n=>e[n.data.id]=0),this.layers.forEach(n=>{e[n[0].id]=0,n.slice(1).forEach((i,s)=>{const r=n[s],o=i.id;e[o]=e[r.id]+r.data.radius+i.data.radius+this.nodeDistance})})}decrossVirtualEdges(){this.layers.forEach(t=>{let e=-1;t.forEach(n=>{if(!this.virt[n.id])return;const i=this.neighbours.next[n.id][0];if(this.virt[i])if(e!==-1&&e>this.nodeIndexTopDown[i]){const s=this.longEdges[n.id];let r=0;for(r=0;r<s.length&&s[r]!==i;r++);const o=s.slice(r);o.forEach(l=>this.longEdges[l]=o);const a=s.slice(0,r);a.forEach(l=>this.longEdges[l]=a)}else e=this.nodeIndexTopDown[i]})})}placeLongEdges(){const{X:t,layers:e}=this;hs(e,n=>t[n.id]=0);for(let n=1;n>=-1;n-=2){const i={};let s=0;const r={};hs(e,d=>r[d.id]=0),r[F1.id]=0;const o=n;e.forEach(d=>{let h=o===1?d[0]:d[d.length-1];r[h.id]||(this.longEdges[h.id].forEach(m=>{r[m]=s}),s++);let c=o===1?0:d.length-1,g=c+o;for(;g>=0&&g<d.length;)h=d[g],r[h.id]||this.longEdges[h.id].forEach(m=>{r[m]=r[d[c].id]}),c=g,g+=o});const a={};e.forEach(d=>{for(let h=o===1?0:d.length-1;o===1?h<d.length:h>=0;h+=o){const c=d[h],g=r[c.id];a[g]=a[g]||[],a[g].push(c.id)}});const l={};this.nodeList.forEach(d=>l[d.data.id]=0);for(let d=0;d<s;d++){const h={done:!1,dist:0},c=a[d];for(let g=0;g<c.length;g++){const m=c[g];this.sortLongEdges(m,n,l,h,r,i)}if(!h.done){const g=this.layers[this.nodeToLayer[a[d][0]]],m=[];g.forEach(_=>{for(const p of this.neighbours.prev[_.id]||Ay){const v=Math.abs(l[p]-l[_.id]);m.push(v)}}),m.length!==0&&(h.dist=o2(m))}for(let g=0;g<c.length;g++)l[c[g]]-=n*h.dist}hs(e,d=>t[d.id]+=l[d.id]/2)}}sortLongEdges(t,e,n,i,s,r){if(r[t])return!1;let o=!1,a=0;const{nodeToLayer:l,totalW:d}=this,h=this.longEdges[t];h.forEach(c=>r[c]=!0),h.forEach(c=>{const g=this.nodeList.byIndex[this.nodeIndexTopDown[c]-e];if(!g)return;const m=g.data.id,_=c,p=l[m]===l[_],v=s[m]===s[_];!p||!v||(this.sortLongEdges(m,e,n,i,s,r),(!o||e*(a-n[m])<e*(d[_]-d[m]))&&(o=!0,a=n[m]+d[_]-d[m]))}),h.forEach(c=>{n[c]=a;const g=this.nodeList.byId[c],m=e===1?g.next:g.prev;if(!m)return;const _=m.data.id,p=c,v=l[_]===l[p],x=s[_]!==s[p],b=e*(d[_]-d[p]-n[_]+n[p]);v&&x&&(!i.done||b>i.dist)&&(i.dist=b,i.done=!0)})}placeNonVirtualNodes(){const t={};hs(this.layers,l=>t[l.id]=-1);const{X:e,totalW:n,virt:i,nodeIndexTopDown:s,mDist:r,nodeList:o}=this,a={};hs(this.layers,(l,d,h,c)=>{if(!i[l.id])return void(a[l.id]=!1);let g=this.nodeList.byId[l.id].next;for(;g&&this.nodeToLayer[g.data.id]===c&&!i[g.data.id];)g=g.next;a[l.id]=this.nodeToLayer[g.data.id]===c&&e[g.data.id]-e[l.id]<n[g.data.id]-n[l.id]+fn}),hs(this.layers,({id:l})=>{a[l]&&t[l]===-1&&this.longEdges[l].forEach(d=>{d!==l&&(t[d]=s[d]<s[l]?1:0)})}),hs(this.layers,({id:l})=>r[l]=n[l]);for(let l=0;l<2;l++)for(let d=l?this.layers.length-1:0;d>=0&&d<this.layers.length;l?d--:d++){let h=cs;const c=this.layers[d];if(c.forEach(({id:g},m,_)=>{if(i[g]){if(h===cs){this.placeSequence(cs,g,_[0].id,o.byId[g].prev.data.id,l);for(let p=0;p<m;p++){const v=_[p].id;r[v]=r[g]-e[g]+e[v]}}else if(t[h]!==1-l){a[h]||this.placeSequence(h,g,o.byId[h].next.data.id,o.byId[g].prev.data.id,l);const p=l===1?this.neighbours.prev:this.neighbours.next,v=p[h][0],x=p[g][0];if(i[v]&&i[x])for(let b=s[v]+1;b<s[x];b++)t[o.byIndex[b].data.id]=l}h=g}}),h===cs)this.placeSequence(cs,cs,c[0].id,c[c.length-1].id,l),c.forEach(({id:g})=>r[g]=e[g]);else{this.placeSequence(h,cs,o.byId[h].next.data.id,c[c.length-1].id,l);for(let g=c.length-1;g>=0;g--){const m=c[g].id;if(m===h)break;r[m]=r[h]-e[h]+e[m]}}}}placeSequence(t,e,n,i,s,r=0){const o=this.nodeIndexTopDown[n],a=this.nodeIndexTopDown[i],{X:l,nodeIndexTopDown:d,mDist:h}=this;if(o===a)l[n]=this.placeNode(n,t,e,l[n],s);else if(o<a){const c=Math.floor((d[n]+d[i])/2),g=this.nodeList.byIndex[c],m=g.next.data.id,_=h[m]-h[g.data.id];this.placeSequence(t,e,n,g.data.id,s,r+1),this.placeSequence(t,e,m,i,s,r+1),this.combineSequences(t,e,n,i,m,g.data.id,s,_)}}calculateBends(t,e,n,i,s,r,o,a){let l=0;const d=[],{X:h,mDist:c,neighbours:g}=this,m=this.nodeIndexTopDown[n],_=this.nodeIndexTopDown[i];for(let p=this.nodeList.byId[r],v=this.nodeIndexTopDown[p.data.id];v>=m&&v<=_&&p;p=t===-1?p.prev:p.next,v=p&&this.nodeIndexTopDown[p.data.id]){const x=p.data.id,b=(e===0?g.prev[x]:g.next[x])||Ay;let E=0;for(let A=0;A<b.length;A++){const T=b[A];if(t*(h[T]-h[x])<fn)E++;else{E--;const P=h[T]+c[r]-c[x];t*(h[r]-P)>-fn?l++:(a===cs||t*(P-h[a]+c[a]-c[r])<fn)&&t*(P-h[s])<o-fn&&d.push({value:2,key:P})}}const S=h[x]+c[r]-c[x];t*(h[r]-S)>-fn?l+=E:(a===cs||t*(S-h[a]+c[a]-c[r])<fn)&&t*(S-h[s])<o-fn&&d.push({value:E,key:S})}return a!==cs&&d.push({value:this.edges.length,key:h[a]-c[a]+c[r]}),d.sort(({key:p},{key:v})=>p-v),{res:l,bends:d.reduce((p,v,x)=>{if(x<d.length-1){const b=d[x+1];Math.abs(v.key-b.key)>fn?v.value>0&&p.push(v):v.value+=b.value}else v.value>0&&p.push(v);return p},[])}}combineSequences(t,e,n,i,s,r,o,a){const{X:l,mDist:d,nodeIndexTopDown:h}=this;let{res:c,bends:g}=this.calculateBends(-1,o,n,i,s,r,a,t),{res:m,bends:_}=this.calculateBends(1,o,n,i,r,s,a,e);for(g.length>0&&g.reverse();l[s]-l[r]<a-fn;){let x=0,b=0;if(c<m){const E=g.length;if(E>0){const S=g.pop();x=S.value,l[r]=S.key}(E===0||l[s]-l[r]>a+fn)&&(l[r]=l[s]-a)}else if(c>m){const E=_.length;if(E>0){const S=_.pop();b=S.value,l[s]=S.key}(E===0||l[s]-l[r]>a+fn)&&(l[s]=l[r]+a)}else{let E=(a-l[s]+l[r])/2;const S=g.length===0?E+1:l[r]-g[g.length-1].key,A=_.length===0?E+1:_[_.length-1].key-l[s];S<E+fn&&S<A+fn&&(x=g.pop().value),A<E+fn&&A<S+fn&&(b=_.pop().value),E=Math.min(E,S,A),l[r]-=E,l[s]+=E}c+=x,m+=b}let p,v=this.nodeList.byId[r].prev;for(;v&&h[p=v.data.id]>=h[n]&&l[r]-l[p]<d[r]-d[p];)l[p]=l[r]-d[r]+d[p],v=v.prev;for(v=this.nodeList.byId[s].next;v&&h[p=v.data.id]<=h[i]&&l[s]-l[p]>d[s]-d[p];)l[p]=l[s]-d[s]+d[p],v=v.next}placeNode(t,e,n,i,s){const{X:r,neighbours:o,mDist:a}=this,l=((s===0?o.prev:o.next)[t]||Ay).map(d=>r[d]);return l.length===0?r[t]:(i=o2(l),e!==cs&&(i=Math.max(i,r[e]+a[t]-a[e])),n!==cs&&(i=Math.min(i,r[n]+a[t]-a[n])),i)}moveLongEdge(t,e,n){const{X:i,virt:s,totalW:r,nodeList:o}=this,{id:a}=t.data;if(n[a]||!s[a])return;const l=this.longEdges[a];if(!l)return;l.forEach(p=>n[p]=!0);const d=l[0],h=l[l.length-1],c=[];e<0?c.push(i[d]<i[h]?i[d]:i[h],i[d]<i[h]?i[h]:i[d]):e>0?c.push(i[d]<i[h]?i[h]:i[d],i[d]<i[h]?i[d]:i[h]):c.push(i[d],i[h]);const g=c[0];let m,_=!1;for(;!_&&c.length!==0;)m=c.pop(),_=!0,l.forEach(p=>{const v=this.layers[this.nodeToLayer[p]];if(p!==v[0].id){const x=o.byId[p].prev.data;m-i[x.data.id]<r[p]-r[x.data.id]&&this.moveLongEdge(x,-1,n),_=_&&m-i[x.data.id]>=r[p]-r[x.data.id]-fn}if(p!==v[v.length-1].id){const x=o.byId[p].next.data;m-i[x.data.id]>r[p]-r[x.data.id]&&this.moveLongEdge(x,1,n),_=_&&m-i[x.data.id]<=r[p]-r[x.data.id]+fn}});_||(m=g,l.forEach(p=>{const v=this.layers[this.nodeToLayer[p]];if(p!==v[0].id){const x=o.byId[p].prev.data;m=Math.max(m,i[x.data.id]+r[p]-r[x.data.id])}if(p!==v[v.length-1].id){const x=o.byId[p].next.data;m=Math.min(m,i[x.data.id]+r[p]-r[x.data.id])}})),l.forEach(p=>i[p]=m)}moveLongEdges(){const t={};this.layers.forEach(e=>{const n=Math.floor(e.length/2);for(let i=n;i<e.length;i++)this.moveLongEdge(e[i],0,t);for(let i=n-1;i>=0;i--)this.moveLongEdge(e[i],0,t)})}computeY(){const{Y:t,layers:e,height:n}=this;t[0]=0,e.slice(1).forEach((i,s)=>{t[s+1]=t[s]+(n[s]+n[s+1])/2+this.layerDistance})}straightenLongEdge(t,e){const{nodeList:n,longEdges:i,neighbours:s,X:r,Y:o,nodeToLayer:a,totalW:l}=this,d=i[t.id];if(e[t.id]||!s.prev[t.id]||s.prev[t.id].length!==1||!s.next[t.id]||s.next[t.id].length!==1||!(d&&d.length<2))return;e[t.id]=!0;const h=s.prev[t.id][0],c=s.next[t.id][0];if(a[c]===a[h])return;const g=r[h]+(r[c]-r[h])*(o[a[t.id]]-o[a[h]])/(o[a[c]]-o[a[h]]);if(t!==this.first[a[t.id]]){const _=n.byId[t.id].prev.data;if(g-r[_.id]<l[t.id]-l[_.id]-fn&&this.straightenLongEdge(_,e),g-r[_.id]<l[t.id]-l[_.id]-fn)return}const m=this.layers[a[t.id]];if(t!==m[m.length-1]){const _=n.byId[t.id].next.data;if(r[_.id]-g<l[_.id]-l[t.id]-fn&&this.straightenLongEdge(_,e),r[_.id]-g<l[_.id]-l[t.id]-fn)return}r[t.id]=g}straightenEdges(){const t={};this.layers.forEach(e=>{const n=Math.floor(e.length/2);for(let i=n;i<e.length;i++)this.straightenLongEdge(e[i],t);for(let i=n-1;i>=0;i--)this.straightenLongEdge(e[i],t)})}run(){this.computeMinNodeDistances(),this.decrossVirtualEdges(),this.placeLongEdges(),this.placeNonVirtualNodes(),this.moveLongEdges(),this.computeY(),this.straightenEdges(),hs(this.layers,(t,e,n,i)=>{t.x=this.X[t.id],t.y=this.Y[i]})}},sX=(t,e=20,n=50)=>new iX(t,e,n).run();function rX(t){if(t.sort((i,s)=>i-s),t.length===0)return 0;const e=Math.floor(t.length/2),n=Math.floor(t.length/2);return(t[e]+t[n])/2}function nx(t,e,n){const i={};return e.forEach((s,r)=>i[s.id]=r),t.map(s=>(n[s.id]||[]).map(r=>i[r]).sort()).reduce((s,r,o,a)=>{const l=r.length?r[r.length-1]:-1;for(let d=o+1;d<a.length;d++)s+=a[d].filter(h=>h<l).length;return s},0)}function oX(t,e,n,i,s){const r={};for(let o=0;o<t.length;o++)r[t[o].id]=rX((e[t[o].id]||[]).map(a=>n[a]))||0;s?t.sort((o,a)=>{const l=r[o.id]-r[a.id],d=i[o.id]===i[a.id],h=o.data.siblingIndex,c=a.data.siblingIndex;return d&&h>-1&&c>-1?h-c:l===0?n[a.id]-n[o.id]:l}):t.sort((o,a)=>{const l=r[o.id]-r[a.id];return l===0?n[a.id]-n[o.id]:l})}function a2({layers:t,topDown:e,topDownAdj:n,bottomUpAdj:i,idToIndex:s,crossings:r,sortSiblings:o}){const a=e?n:i;for(let l=e?0:t.length-1;e?l<t.length:l>=0;e?l++:l--){oX(t[l],a[l]||{},s,i[l],o);const d=l>0?nx(t[l-1],t[l],n[l-1]):0,h=l<t.length-1?nx(t[l],t[l+1],n[l]):0;h+d<(r[l]||0)+(r[l-1]||0)?(r[l]=h,l>0&&(r[l-1]=d),t[l].forEach((c,g)=>s[c.id]=g)):t[l].sort((c,g)=>s[c.id]-s[g.id])}}var aX=(t,e,n)=>{if(!n&&!e)return;const i={},s=t.map(()=>({})),r=t.map(()=>({}));t.forEach((h,c)=>{h.forEach((g,m)=>{i[g.id]=n?g.data.siblingIndex:m,g.children.forEach(_=>{const p=_.layer;p>c?(s[c][g.id]=s[c][g.id]||[],s[c][g.id].push(_.id),r[p][_.id]=r[p][_.id]||[],r[p][_.id].push(g.id)):(s[p][_.id]=s[p][_.id]||[],s[p][_.id].push(g.id),r[c][g.id]=r[c][g.id]||[],r[c][g.id].push(_.id))})})}),i[-1]=-1,n&&t.forEach(h=>h.sort((c,g)=>i[c.id]-i[g.id]));const o=t.slice(1).map((h,c)=>nx(t[c],h,s[c])),a=[[50,100],[100,10],[1e3,1],[5e3,0]],l=Math.max(...t.map(h=>h.length)),d=(a.find(([h])=>l<h)||a[a.length-1])[1];for(let h=0;h<d;h++)a2({layers:t,topDown:!0,topDownAdj:s,bottomUpAdj:r,idToIndex:i,crossings:o,sortSiblings:n}),a2({layers:t,topDown:!1,topDownAdj:s,bottomUpAdj:r,idToIndex:i,crossings:o,sortSiblings:n})};function lX(t){const e={},n={},i={};t.nodes.forEach(o=>{i[o.id]=o});const s=o=>{if(e[o.id])return n[o.id];e[o.id]=!0;let a=1/0;for(const l of o.children)a=Math.min(a,s(i[l.id])-1);return a===1/0&&(a=0),n[o.id]=a,a};t.nodes.forEach(o=>{o.data.parentIds.length===0&&s(o)});let r=1/0;t.nodes.forEach(o=>{r=Math.min(r,n[o.id])}),t.nodes.forEach(o=>{n[o.id]-=r,o.layer=n[o.id]})}function uX(t){const e=t.nodes.reduce((n,i)=>i.data.fixed&&(n===null||n.layer>i.layer)?i:n,null);return e&&t.nodes.forEach(n=>n.ref=e.id),t}function dX(t){t.nodes.forEach(e=>{e.layer=e.data.layer!=null?e.data.layer:e.layer})}function hX(t){if(t.nodes.every(e=>e.layer)){const e=t.nodes.reduce((n,i)=>Math.min(n,i.layer),1/0);t.nodes.forEach(n=>n.layer-=e)}}function cX(t){const e={};t.nodes.forEach(r=>{e[r.id]=[...e[r.id]||[],...r.children],r.children.forEach(o=>{e[o.id]=[...e[o.id]||[],r]})});const n=[];t.nodes.forEach(r=>{r.layer===0&&n.push(r)});const i={},s={};for(t.nodes.forEach(r=>{r.layer!==-1&&(s[r.id]=r.layer)});n.length;){const r=n.shift().id;for(const o of e[r])if(!i[o.id]){if(s[o.id]===void 0){const a=s[r]+1;s[o.id]=a,o.layer=a}i[o.id]=!0,n.push(o)}}}function gX(t){if(t.nodes.some(e=>e.data.sink)){const e=t.nodes.reduce((n,i)=>Math.max(n,i.layer),-1/0);t.nodes.forEach(n=>{n.data.sink&&(n.layer=e+1)})}}function fX(t){const e=[];t.nodes.forEach(i=>e[i.layer]=0);const n=Array.from(e).reduce((i,s,r)=>{if(r===0)return i.push(0),i;const o=i[r-1];return s!==void 0?(i.push(o),i):(i.push(o-1),i)},[]);t.nodes.forEach(i=>i.layer+=n[i.layer])}function mX(t){if(t.nodes.some(e=>"layer"in e.data&&e.data.layer<0))throw new Error("Some nodes have negative layering information");return t.nodes.some(e=>e.data&&!isNaN(e.data.layer)&&e.data.layer!==null)||lX(t),dX(t),cX(t),gX(t),hX(t),fX(t),t.nodes.forEach(e=>{const{below:n,above:i}=e.children.reduce((s,r)=>(e.layer>r.layer?s.above.push(r):s.below.push(r),s),{above:[],below:[]});i.forEach(s=>s.children.push(e)),e.children=n}),uX(t)}var pX=(t,{nodeDistance:e,layerDistance:n,nodeLookup:i,customSort:s,sortSiblings:r,shouldDecross:o=!0})=>{mX(t);const a=_X(t);return t.nodes.length>1?(aX(a,o,r),s&&a.forEach(l=>{l.sort((d,h)=>s(i[d.id],i[h.id]))}),sX(a,e,n)):(t.nodes[0].x=0,t.nodes[0].y=0),yX(t),t};function _X(t){return t.nodes.reduce((e,n)=>(e[n.layer]=e[n.layer]||[],e[n.layer].push(n),n.children=n.children.map(i=>{if(i.layer===n.layer+1)return i;let s=i;for(let r=i.layer-1;r>n.layer;r--){const o=G9(`${n.id}->${i.id}@${r}`,r);o.children=[s],e[r]=e[r]||[],e[r].push(o),s=o}return s}),e),[])}function yX(t){t.nodes.forEach(e=>{e.data&&(e.children=e.children.filter(ex))})}var Ty=({id:t,layer:e,sink:n,siblingIndex:i,radius:s,layoutable:r})=>({id:t,layer:e!==void 0?e:void 0,sink:n,siblingIndex:i||0,radius:s||0,fixed:r===!1,parentIds:[],children:[],ref:null});function vX(t){const e={x:0,y:0};let n=0;for(let i=0;i<t.length;i++){const s=t[i];for(let r=0;r<s.nodes.length;r++){const o=s.nodes[r];e.x+=o.x||0,e.y+=o.y||0,n++}}return e.x/=n,e.y/=n,e}function xX(t){const e={x:0,y:0};let n=0;for(const i in t)e.x+=t[i].x||0,e.y+=t[i].y||0,n++;return e.x/=n,e.y/=n,e}function bX(t,e,n){const i=vX(n),s=t.x-i.x,r=t.y-i.y;for(let o=0;o<n.length;o++){const a=n[o];for(let l=0;l<a.nodes.length;l++){const d=a.nodes[l],h=e[d.id];!h||d.data&&d.data.fixed||(h.x=d.x+s,h.y=d.y+r)}}}var EX=(t,e={})=>{const n=(t.edges||[]).filter(({source:l,target:d})=>l!==d),i={},s=new Map;for(const l of t.nodes)i[l.id]=l;const r=Q9(t.nodes,n,i).filter(l=>{const d=s.get(l.source);if(!d){const h=new Map;return h.set(l.target,!0),s.set(l.source,h),!0}return!d.get(l.target)&&(d.set(l.target,!0),!0)}),o=Y9(t.nodes,r,{skipSingletons:e.packing==="grid"}),a=r.reduce((l,d)=>(l[d.source]||(l[d.source]=Ty(i[d.source])),l[d.target]||(l[d.target]=Ty(i[d.target])),l[d.target].children.push(d.source),l[d.target].parentIds.push(d.source),l),{});return{components:o.map(l=>l.map(d=>a[d]||Ty(i[d]))),lookup:i}};function SX(t,e,n){const i=[];for(const s of t){const r=tX(s);i.push(r),pX(r,{nodeDistance:n.nodesSeparation,layerDistance:n.layerSeparation,shouldDecross:n.shouldDecross,customSort:n.customSort,sortSiblings:!!n.sortSiblings,nodeLookup:e})}return i}var l2=(t,e={})=>{if(!t||!t.nodes)return t;const n=ue(wt({direction:"down",packing:"fit",nodesGridSeparation:1},e),{shouldDecross:e.shouldDecross!==!1}),{components:i,lookup:s}=EX(t,n),r=xX(s),o=SX(i,s,n);if(n.packing==="grid"){const a=K9(t.nodes,t.edges,n);o.push(a)}return $9(o,n),bX(r,s,o),t},Cy={direction:"TB",nodeDistance:5,levelDistance:50,componentDistance:50,gapWidth:1,arrangeComponents:"fit",gridDistance:50,layer:"layer",siblingIndex:""},ix={name:"hierarchical",imports:{sequential:l2},configure:function(t,{graph:e,data:n}){function i(b,E,S=b.getNodes()){return E?E instanceof to?E:b.getNodes(E):S}const s=ue(wt(wt({},Cy),t),{nodeList:t.nodes});s.direction=t.direction||Cy.direction,s.layerSeparation=s.levelDistance,s.nodesSeparation=s.nodeDistance,s.componentsSeparation=s.componentDistance,s.gapDistance=s.gapWidth,s.packing=s.arrangeComponents;const r=wt({},s),o=s.edges,a=s.nodeList;if(["TB","BT","LR","RL"].indexOf(s.direction)===-1)throw new Error('direction should be one of the "TB", "BT", "LR", "RL"');if(["fit","grid","singleLine"].indexOf(s.packing)===-1)throw new Error('arrangeComponents should be one of the "fit", "grid", "singleLine"');s.nodesGridSeparation=t.gridDistance||Cy.gridDistance;const l=a.getId(),d=a.getAttribute("layoutable").reduce((b,E,S)=>(b[l[S]]=E,b),{}),h=a.getAttributes(["x","y"]).reduce((b,E,S)=>(b[l[S]]=E,b),{}),c=a.getAttribute("radius");if(typeof r.layer!="string")throw new Error("'layer' should be the valid data field name");if(r.siblingIndex===void 0&&(r.siblingIndex=""),typeof r.siblingIndex!="string")throw new Error("'siblingIndex' should be the valid data field name");const g=i(e,s.roots,e.nodeList()),m=n.getProperty(s.nodeList,r.layer),_=r.siblingIndex.length?n.getProperty(s.nodeList,r.siblingIndex):[],p=g.map(b=>{let E=-1;return s.nodeList.forEach((S,A)=>{S===b&&(E=A)}),E});for(const b of p)m[b]=0;const v=i(e,s.sinks,e.nodeList()).toArray().reduce((b,E)=>(b[E.getId()]=!0,b),{}),x=l.map(b=>v[b]);return{nodes:l,edges:o.map(b=>({id:b.getId(),source:b.getSource().getId(),target:b.getTarget().getId()})),options:vp(s),layoutable:d,radiuses:c,siblingIndexes:_,layers:m,sinks:x,coords:h}},context:he,update:function({nodes:t,edges:e,options:n,layoutable:i,radiuses:s,layers:r,siblingIndexes:o,sinks:a,coords:l}){const d=e.filter(({source:g,target:m})=>g in i&&m in i),h={nodes:t.map((g,m)=>({id:g,radius:s[m],layer:r[m],siblingIndex:o[m],sink:a[m],layoutable:i[g],x:l[g].x,y:l[g].y})),edges:d},{nodes:c}=l2(h,{packing:{fit:"fit",singleLine:"singleline",grid:"grid"}[n.arrangeComponents],direction:{TB:"down",BT:"up",RL:"left",LR:"right"}[n.direction],layerSeparation:n.layerSeparation,nodesSeparation:n.nodesSeparation,sortSiblings:o.length>0,componentsSeparation:n.componentsSeparation,nodesGridSeparation:n.nodesGridSeparation,evenDistribution:n.evenDistribution});return{positions:c}},isRunning:function(){return!1},onSync:function({positions:t},{graph:e}){return{indexes:t.map(({id:n})=>(e.getNode(n)||{_index:-1})._index),x:t.map(({x:n})=>n),y:t.map(({y:n})=>n)}}},wX=t=>(t.modules.layouts.register(ix),(e={})=>(e.useWebWorker=!1,t.modules.layouts.start(ix.name,e))),sx=(t,e)=>t-e,u2={name:"radial",imports:{minHeap:Ib,bellmanFord:Mb,dijkstra:Nb,johnson:J0,distance:wn,circleCircleIntersection:Ob,circleSortCompare:Db,weightedStress:Ek,distanceStress:Sk,constrainedStress:Y0,stressMinimizationStep:q0,removeRadialOverlap:tv,linear:Lm,calculateRadii:Tw},configure(t,{graph:e}){let n=t.nodes;const i=n.size;function s(T,P){return T!=null&&isFinite(T)?T:P}if(t.centralNode===void 0)throw new Error('radial layout: missing parameter "centralNode"');const r=e.getNode(t.centralNode);if(r===void 0)throw new Error('radial layout: parameter "centralNode" is not valid');t.radiusRatio=s(t.radiusRatio,Math.SQRT2),t.radiusDelta=s(t.radiusDelta,0),t.nodeGap=s(t.nodeGap,10),t.repulsion=i*s(t.repulsion,1);const o=r.getPosition(),a=s(t.centerX,o.x),l=s(t.centerY,o.y),d=r._index;n.includes(r)||(n=n.concat(r.toList()));let h=n._indexes;const c=n.getAttribute("layoutable");h=h.filter((T,P)=>c[P]||T===d),h.sort(sx);const g=h.length,m=AX(h,e.getConnectedComponents(n,{internalIndexes:!0}),d),_=e.degrees(h),p=new Float32Array(e.getNodeAttribute("x").getMultiple(h)),v=new Float32Array(e.getNodeAttribute("y").getMultiple(h)),x=e.getNodeAttribute("radius").getMultiple(h),b=e.getEdges()._indexes,E=e.getEdgeAttribute("source").getMultiple(b),S=e.getEdgeAttribute("target").getMultiple(b),A=e.getAdjacencyList({internalIndexes:!0,weight:1,indexes:h});return{centerIndex:d,centerIndexPos:0,cx:a,cy:l,D:null,indexes:h,components:m,normIndexes:null,radii:null,rings:null,x:p,y:v,degree:_,size:g,attributes:{size:x,adjacency:A,weights:S.map(()=>1),sources:E,targets:S},sortAttr:null,allowOverlap:!!t.allowOverlap,nodeGap:t.nodeGap,radiusRatio:t.radiusRatio,radiusDelta:t.radiusDelta,repulsion:t.repulsion,randomize:!("randomize"in t)||!!t.randomize,renderSteps:!!t.renderSteps,epsilon:s(t.epsilon,.001),maxSteps:s(t.maxIterations,100),iterationsPerRender:s(t.iterationsPerRender,20),step:-1,stress:Number.POSITIVE_INFINITY,prevStress:0,converged:!1,overlapRemoved:!1,done:!1}},context:()=>({data:null,gridPlacement(t,e,n=8){const i=t.length,s=new Float32Array(i),r=new Float32Array(i);let o=0;for(let g=0,m=t.length;g<m;g++){const _=e[t[g]];_>o&&(o=_)}const a=o*n,l=Math.ceil(Math.sqrt(i)),d=Math.ceil(i/l),h=-Math.floor((d-1)*a/2),c=-Math.floor((l-1)*a/2);for(let g=0;g<l;g++)for(let m=0;m<d;m++)s[g*d+m]=h+m*a,r[g*d+m]=c+g*a;return{x:s,y:r}},connectComponents(t,e,n,i,s,r){let o;function a(l,d){const h=new Uint32Array(l.length+1);return h.set(l),h[l.length]=d,h}for(let l=1;l<t.length;l++){const d=t[l];let h=0,c=0;d.forEach((_,p)=>{const v=s.get(_);v!=null&&v>h&&(c=p,h=v)}),o=d[c];const g=e[r.get(o)];g.weights=g.weights||[],g.nodes=a(g.nodes,n),g.weights.push(i);const m=e[r.get(n)];m.weights=m.weights||[],m.nodes=a(m.nodes,o),m.weights.push(i)}},correctSubgraphsDistances(t,e,n,i,s){const r=Array.prototype.reduce.call(t[n],(a,l,d)=>(d!==n&&l<i&&l>a&&(a=l),a),0),o=i-r-1;for(let a=1;a<e.length;a++){const l=e[a];for(let d=0,h=l.length;d<h;d++){const c=s.get(l[d]);c!=null&&(t[n][c]-=o,t[c][n]-=o)}}},initialize(t,e){t.data=e,e.step=0;const n=new Map,i=new Map;e.normIndexes=e.indexes.reduce((d,h,c)=>(d[c]=c,n.set(h,c),i.set(h,e.degree[c]),t.data&&h===e.centerIndex&&(t.data.centerIndexPos=c),d),new Uint32Array(e.indexes.length));const s=e.centerIndexPos,r=e.components[0].length;t.connectComponents(e.components,e.attributes.adjacency,e.centerIndex,r,i,n);const o=J0({sources:e.attributes.sources,targets:e.attributes.targets,weights:e.attributes.weights,indexes:e.indexes,adjacency:e.attributes.adjacency,undirected:!0});t.correctSubgraphsDistances(o,e.components,s,r,n),e.D=o;const a=o[s],l={};for(let d=0,h=e.normIndexes.length;d<h;d++)if(d!==s){const c=a[d];l[c]=l[c]||[],l[c].push(e.normIndexes[d])}e.rings=l,e.radii=Tw(s,e.rings,e.attributes.size,e.nodeGap,e.radiusRatio,e.radiusDelta)},removeOverlaps(t,e){if(!t.data)return;const n=t.data.centerIndexPos,i=e.attributes.size,{rings:s,radii:r}=e,o=e.x[n],a=e.y[n];for(const l in s){const d=s[l];for(let h=0;h<d.length;h++){const c=d[h],g=r[l];let m=e.x[c]-o,_=e.y[c]-a;m+_===0&&(m=Math.sin(c)*Math.random()*.001,_=Math.cos(c)*Math.random()*.001);const p=Math.sqrt(m*m+_*_);if(p-g<0){const v=g/p;e.x[c]=o+m*v,e.y[c]=a+_*v}}}for(const l in s){const d=s[l],h=wn(o,a,e.x[d[0]],e.y[d[0]]);tv({X:e.x,Y:e.y,sizes:i,indexes:d,center:[o,a],R:h,gap:e.nodeGap,inPlace:!0})}}}),update(t,e){t||(t=e.data);const n=t.indexes,i=t.centerIndex;let s;t.x=t.x||new Float32Array(t.size),t.y=t.y||new Float32Array(t.size),t.step===-1&&e.initialize(e,t);const r=t.repulsion,o=a=>t.radii&&t.radii[a]||1;if(t.step===0&&t.randomize&&(s=e.gridPlacement(t.indexes,t.attributes.size),t.x=s.x,t.y=s.y),!t.converged){const a=t.maxSteps,l=t.iterationsPerRender;let d=t.step;const h=Math.min(d+l,a),{D:c,x:g,y:m,size:_,centerIndexPos:p,normIndexes:v}=t;for(;d<=h&&!t.converged;){const x=Lm(Math.min(d,a)/a);t.step=d++,s=q0(c,g,m,_,p,r,x,v,o),t.x=s.x,t.y=s.y,t.prevStress=t.stress,t.stress=Y0(c,g,m,_,p,r,x,v),t.converged=t.converged||Math.abs(t.stress-t.prevStress)<=t.epsilon}}if(t.converged)if(t.overlapRemoved||t.allowOverlap){t.done=!0;const a=t.rings||{};t.rings=Object.keys(a).reduce((l,d)=>(l[d]=a[d].map(h=>n[h]),l),{})}else e.removeOverlaps(e,t,i),t.overlapRemoved=!0;return t},isRunning:({data:t})=>!(!t||t.converged&&(t.allowOverlap||t.done))||(t&&(t.step=-1),!1),onSync(t){if(t.renderSteps||t.done)return d2(t)},onEnd:t=>d2(t)};function d2(t){const e=t.x,n=t.y,i=t.indexes.length,s=e[t.centerIndexPos]-t.cx,r=n[t.centerIndexPos]-t.cy;for(let o=0;o<i;o++)e[o]-=s,n[o]-=r;return{indexes:t.indexes,x:e,y:n}}function AX(t,e,n){const i=t.slice().sort(sx),s=[];for(let r=0,o=e.length;r<o;r++){const a=[],l=e[r];let d=!1;for(let h=0,c=l.length;h<c;h++){const g=l[h];Ak(i,g)!==-1&&(g===n&&(d=!0),a.push(g))}a.length!==0&&s[d?"unshift":"push"](a.sort(sx))}return s}var TX=t=>(t.modules.layouts.register(u2),e=>{if(e.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');if(e.maxIterations=e.maxIterations&&isFinite(e.maxIterations)?Math.floor(e.maxIterations):100,e.maxIterations<1)throw new RangeError("maxIterations must be a positive integer");if(e.iterationsPerRender=e.iterationsPerRender&&isFinite(e.iterationsPerRender)?Math.floor(e.iterationsPerRender):20,e.iterationsPerRender<1)throw new RangeError("iterationsPerRender must be a positive integer");if(e.epsilon=e.epsilon&&isFinite(e.epsilon)?e.epsilon:.001,e.epsilon<=0)throw new RangeError("epsilon has to be a positive number");return t.modules.layouts.start(u2.name,e)}),h2=ue(wt({},ix),{name:"sequential"}),CX=t=>(t.modules.layouts.register(h2),(e={})=>{e.useWebWorker=!1;const n=ue(wt({},e),{evenDistribution:!0});return t.modules.layouts.start(h2.name,n)}),LX=class extends Ge{constructor(t){super(t),this.stop=()=>this._ogma.modules.layouts.stop(),this.concentric=CW(t),this.radial=TX(t),this.force=R9(t),this.forceLink=F9(t),this.hierarchical=wX(t),this.sequential=CX(t),this.grid=O9(t)}},PX=class extends Ge{constructor(){super(...arguments),this.move=t=>this._ogma.modules.virtualMouse.move(t),this.down=t=>this._ogma.modules.virtualMouse.down(t),this.up=t=>this._ogma.modules.virtualMouse.up(t),this.click=t=>this._ogma.modules.virtualMouse.click(t),this.rightClick=t=>this._ogma.modules.virtualMouse.rightClick(t),this.doubleclick=t=>this._ogma.modules.virtualMouse.doubleclick(t),this.drag=(t,e)=>this._ogma.modules.virtualMouse.drag(t,e),this.wheel=t=>this._ogma.modules.virtualMouse.wheel(t)}},kX=class extends Ge{constructor(){super(...arguments),this.map=t=>this._ogma.modules.rules.createMapping(t),this.slices=t=>this._ogma.modules.rules.createSlices(t),this.template=t=>this._ogma.modules.rules.createTemplate(t)}},IX=class extends Ge{constructor(){super(...arguments),this.watchNodeObjectProperty=t=>this._ogma.modules.watcher.watchNodeObjectProperty(t),this.watchEdgeObjectProperty=t=>this._ogma.modules.watcher.watchEdgeObjectProperty(t),this.watchNodeNonObjectProperty=t=>this._ogma.modules.watcher.watchNodeNonObjectProperty(t),this.watchEdgeNonObjectProperty=t=>this._ogma.modules.watcher.watchEdgeNonObjectProperty(t)}},MX=class{clearSelection(){return this.modules.selection.clear()}getSelectedNodes(){return this.modules.selection.getSelectedNodes()}getNonSelectedNodes(){return this.modules.selection.getNonSelectedNodes()}getSelectedEdges(){return this.modules.selection.getSelectedEdges()}getNonSelectedEdges(){return this.modules.selection.getNonSelectedEdges()}},NX=class{setOptions(t){return this.modules.settings.update(t)}getOptions(){return this.modules.settings.get()}},RX=class extends Ge{constructor(){super(...arguments),this.setNodesVisibility=t=>this._ogma.modules.graphics.setNodesVisibility(t),this.setEdgesVisibility=t=>this._ogma.modules.graphics.setEdgesVisibility(t),this.setNodeTextsVisibility=t=>this._ogma.modules.graphics.setNodeTextsVisibility(t),this.setEdgeTextsVisibility=t=>this._ogma.modules.graphics.setEdgeTextsVisibility(t),this.addRule=(t={})=>this._ogma.modules.styleRules.addRule(t),this.getRuleList=()=>this._ogma.modules.styleRules.getRuleList(),this.addNodeRule=(t,e)=>{let n,i;return e===void 0?(n=t,i=void 0):(n=e,i=t),this.addRule({nodeAttributes:n,nodeSelector:i})},this.addEdgeRule=(t,e)=>{let n,i;return e===void 0?(n=t,i=void 0):(n=e,i=t),this.addRule({edgeAttributes:n,edgeSelector:i})},this.getNodeRules=()=>this.getRuleList().filter(t=>t.getDefinition().edgeAttributes===void 0),this.getEdgeRules=()=>this.getRuleList().filter(t=>t.getDefinition().nodeAttributes===void 0),this.createClass=t=>this._ogma.modules.classes.createClass(t),this.getClass=t=>this._ogma.modules.classes.getClassByName(t),this.getClassList=()=>this._ogma.modules.classes.getClassList(),this.setHoveredNodeAttributes=(t,e)=>{this._ogma.modules.hover.updateNodeAttributes(t,e)},this.setHoveredEdgeAttributes=(t,e)=>{this._ogma.modules.hover.updateEdgeAttributes(t,e)},this.setSelectedNodeAttributes=(t,e)=>this._ogma.modules.selection.setNodeAttributes(t,!!e),this.setSelectedEdgeAttributes=(t,e)=>this._ogma.modules.selection.setEdgeAttributes(t,!!e),this.setTheme=({nodeAttributes:t,edgeAttributes:e,selectedNodeAttributes:n,selectedEdgeAttributes:i,hoveredNodeAttributes:s,hoveredEdgeAttributes:r})=>{this._ogma.modules.pulses.setTheme(t&&t.pulse||{},e&&e.pulse||{}),this._ogma.modules.graphics.getAttributesManager().setDefaultAttributes(t||{},e||{}),this.setSelectedNodeAttributes(n||{}),this.setSelectedEdgeAttributes(i||{}),this.setHoveredNodeAttributes(s||{}),this.setHoveredEdgeAttributes(r||{})}}},FX=class extends Ge{constructor(){super(...arguments),this.set=(t,e)=>this._ogma.modules.brand.set(t,e),this.remove=()=>{this._ogma.modules.brand.remove()}}},OX=class extends Ge{constructor(){super(...arguments),this.enable=t=>(this._ogma.modules.connectNodes.enable(t),this),this.disable=()=>(this._ogma.modules.connectNodes.disable(),this),this.enabled=()=>this._ogma.modules.connectNodes.enabled()}},c2={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:t})=>t.setSelected(!0),bothExtremities:!1},KR=class extends ee{constructor(){super(...arguments),this._enabled=!1,this._points=[],this._bbox=new Ai,this._onStart=({x:t,y:e})=>{this._bbox.reset(),this.savePoint(t,e,!1)},this._onStop=()=>{const{minX:t,minY:e,maxX:n,maxY:i}=this._bbox,{nodes:s,edges:r}=this._modules.spatial.queryProjected(t,e,n,i),o={},a=s.filter(d=>{const h=d.isVisible(),c=d.getAttribute("detectable"),g=h&&c&&this._modules.locate.isNodeInPolygon(d,this._points);return o[d._index]=g,g});let l=r.filter(d=>{const h=d.isVisible(),c=d.getAttribute("detectable");return h&&c&&this._modules.locate.isEdgeInPolygon(d,this._points)});this._options.bothExtremities&&(l=this.filterByExtremities(l,o)),this._layer.clear(),this._points=[],this.disable(),this._options.callback({nodes:a,edges:l})}}onMounted(){this._options=nn(c2),this._cachedCursor="",this._modules.events.isRegistered("lassoEnabled")||this._modules.events.register(["lassoEnabled","lassoDisabled"]),this._interaction=this._modules.interactions.onDrag({priority:"lasso",check:()=>this._enabled,onStart:this._onStart,onProgress:({x:t,y:e})=>this.savePoint(t,e,!0),onStop:this._onStop})}enable(t={}){var e;return this._enabled||(this._enabled=!0,this._modules.captor.setDetectionEnabled(!1),this._options=rs(t,c2),this._layer=this._modules.layers.addCanvasLayer(he,{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._cachedCursor=((e=this._layer.element.parentElement)==null?void 0:e.style.cursor)||"",cm(this._layer.element.parentElement,this._options.cursorStyle),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorPosition()),this._modules.events.fire("lassoEnabled")),this}disable(){return this._enabled?(this._enabled=!1,this._modules.captor.setDetectionEnabled(!0),cm(this._layer.element.parentElement,this._cachedCursor),this._layer.destroy(),this._modules.events.fire("lassoDisabled"),this):this}enabled(){return this._enabled}savePoint(t,e,n){const i=Vi(),s=this._options,r=this._points;if(this._bbox.addPoint(t,e),r.push({x:t,y:e}),n){const o=r[0];this._layer.refresh(a=>{a.lineWidth=s.strokeWidth,a.lineJoin="bevel",a.strokeStyle=s.strokeColor,a.fillStyle=s.fillColor,a.beginPath(),a.moveTo(o.x*i,o.y*i);for(let l=1;l<r.length;++l){const d=r[l];a.lineTo(d.x*i,d.y*i)}a.stroke(),s.fillColor&&a.fill()})}}filterByExtremities(t,e){const n=this._modules.graph.getEdgeAttribute("source"),i=this._modules.graph.getEdgeAttribute("target");return t.filter(s=>{const r=s._index,o=n.get(r),a=i.get(r);return e[o]&&e[a]})}},DX=class extends Ge{constructor(){super(...arguments),this.enable=t=>(this._ogma.modules.lasso.enable(t),this),this.disable=()=>(this._ogma.modules.lasso.disable(),this),this.enabled=()=>this._ogma.modules.lasso.enabled()}},zX=class extends Ge{constructor(){super(...arguments),this.enable=t=>this._ogma.modules.legend.enable(t),this.disable=()=>this._ogma.modules.legend.disable(),this.enabled=()=>this._ogma.modules.legend.enabled(),this.getOptions=()=>this._ogma.modules.legend.getOptions(),this.export=t=>this._ogma.modules.legend.export(t)}},g2={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:t,edges:e})=>{t.size?t.setSelected(!0):e.setSelected(!0)},bothExtremities:!1},BX=class extends KR{constructor(){super(...arguments),this._onStart=({x:t,y:e})=>{var n;this._rectangle.reset(),this._start={x:t,y:e},(n=this._layer)==null||n.refresh(i=>{i.fillStyle=this._options.fillColor,i.strokeStyle=this._options.strokeColor,i.lineWidth=this._options.strokeWidth})},this._onStop=()=>{var t;const e=this._modules.captor.getCursorPosition(),n=this._formatRectangle(e),{nodes:i,edges:s}=this._modules.spatial.queryProjected(n.minX,n.minY,n.maxX,n.maxY),r={},o=i.filter(l=>{const d=l.isVisible(),h=l.getAttribute("detectable"),c=d&&h&&this._modules.locate.isNodeInRectangle(l,n);return r[l._index]=c,c});let a=s.filter(l=>{const d=l.isVisible(),h=l.getAttribute("detectable");return d&&h&&this._modules.locate.isEdgeInRectangle(l,n)});this._options.bothExtremities&&(a=this.filterByExtremities(a,r)),(t=this._layer)==null||t.clear(),this.disable(),this._options.callback({nodes:o,edges:a})}}onMounted(){this._options=nn(g2),this._enabled=!1,this._rectangle=new Ai,this._interaction=this._modules.interactions.onDrag({priority:"lasso",disableDetection:!0,check:()=>this._enabled,onStart:this._onStart,onProgress:({x:t,y:e})=>this._refreshRectangle({x:t,y:e}),onStop:this._onStop})}enable(t){return super.enable(rs(t,g2))}_formatRectangle(t){const e=this._start.x,n=this._start.y,i=t.x,s=t.y,r=Math.abs(e-i),o=Math.abs(n-s),a=e<i?e:i,l=n<s?n:s;return this._rectangle.reset().addPoint(a,l).addPoint(a+r,l+o)}_refreshRectangle(t){var e;const{minX:n,minY:i,width:s,height:r}=this._formatRectangle(t),o=Vi();(e=this._layer)==null||e.refresh(a=>{a.strokeRect(n*o,i*o,s*o,r*o),this._options.fillColor&&a.fillRect(n*o,i*o,s*o,r*o)})}},UX=class extends Ge{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.rectangleSelect.enable(t)},this.disable=()=>{this._ogma.modules.rectangleSelect.disable()},this.enabled=()=>this._ogma.modules.rectangleSelect.enabled()}},$X=class extends Ge{constructor(){super(...arguments),this.enable=t=>{this._ogma.modules.resizing.enable(t)},this.disable=()=>{this._ogma.modules.resizing.disable()},this.enabled=()=>this._ogma.modules.resizing.enabled()}},jX=class extends Ge{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.rewiring.enable(t)},this.disable=()=>{this._ogma.modules.rewiring.disable()},this.enabled=()=>this._ogma.modules.rewiring.enabled()}},GX=class extends Ge{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.snapping.enable(t)},this.disable=()=>{this._ogma.modules.snapping.disable()},this.enabled=()=>this._ogma.modules.snapping.enabled()}},VX=class extends Ge{constructor(){super(...arguments),this.onNodeHover=(t,e={})=>{this._ogma.modules.tooltip.setHandler("hover.node",t,e)},this.onNodeClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.node",t,e)},this.onNodeRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.node",t,e)},this.onNodeDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.node",t,e)},this.onEdgeHover=(t,e={})=>{this._ogma.modules.tooltip.setHandler("hover.edge",t,e)},this.onEdgeClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.edge",t,e)},this.onEdgeRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.edge",t,e)},this.onEdgeDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.edge",t,e)},this.onBackgroundClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.background",t,e)},this.onBackgroundRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.background",t,e)},this.onBackgroundDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.background",t,e)},this.refresh=()=>this._ogma.modules.tooltip.refresh(),this.isShown=()=>this._ogma.modules.tooltip.isShown(),this.hide=()=>{this._ogma.modules.tooltip.hide()},this.show=(t,e)=>this._ogma.modules.tooltip.show(t,e)}},HX=class extends Ge{constructor(t){super(t),this.lasso=new DX(t),this.connectNodes=new OX(t),this.legend=new zX(t),this.rectangleSelect=new UX(t),this.resize=new $X(t),this.rewire=new jX(t),this.snapping=new GX(t),this.tooltip=new VX(t),this.brand=new FX(t)}},WX=class extends Ge{constructor(t){super(t),this.getList=()=>this._ogma.modules.transformations.api.getList(),this.clear=()=>this._ogma.modules.transformations.api.clear().then(()=>{}),this.getById=e=>this._ogma.modules.transformations.api.getById(e),this.afterNextUpdate=()=>this._ogma.modules.transformations.afterNextUpdate(),this.onGroupsUpdated=e=>{this._ogma.modules.transformations.onGroupsUpdated(e)},this.layoutGroups=(e,n,i=!1)=>this._ogma.modules.transformations.api.layoutGroups(e,n,i)}addNodeGrouping(t){return this._ogma.modules.transformations.api.addNodeGrouping(t)}addNodeClustering(t){return this._ogma.modules.transformations.api.addNodeClustering(t)}addEdgeGrouping(t){return this._ogma.modules.transformations.api.addEdgeGrouping(t)}addDrillDown(t){return this._ogma.modules.transformations.api.addDrilldown(t)}addNodeFilter(t){return this._ogma.modules.transformations.api.addNodeFilter(t)}addEdgeFilter(t){return this._ogma.modules.transformations.api.addEdgeFilter(t)}getNodeFilters(){return this._ogma.modules.transformations.getNodeFilters()}getEdgeFilters(){return this._ogma.modules.transformations.getEdgeFilters()}addNeighborGeneration(t){return this._ogma.modules.transformations.api.addNeighborGeneration(t)}addNeighborMerging(t){return this._ogma.modules.transformations.api.addNeighborMerging(t)}addNodeCollapsing(t){return this._ogma.modules.transformations.api.addNodeCollapsing(t)}addGeoClustering(t){return this._ogma.modules.transformations.api.addGeoClustering(t)}addVirtualProperties(t){return this._ogma.modules.transformations.api.addVirtualProperties(t)}},XX=class extends Ge{constructor(){super(...arguments),this.setZoom=(t,e)=>this._ogma.modules.camera.setZoom(t,e),this.zoomIn=t=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomIn():this._ogma.modules.camera.zoomIn(t),this.zoomOut=t=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomOut():this._ogma.modules.camera.zoomOut(t),this.getZoom=()=>this._ogma.modules.camera.getZoom(),this.setCenter=(t,e)=>this._ogma.modules.camera.setCenter(t,e),this.move=(t,e)=>this._ogma.modules.camera.move(t,e),this.moveToBounds=(t,e)=>{if(!(t&&t instanceof Ai)){if(!Qn(t)||t.length!==4)throw new Error("ogma.view.zoomToBounds requires a BoundingBox as a parameter");{const[n,i,s,r]=t;t=Ai.from({minX:n,minY:i,maxX:s,maxY:r})}}return this._ogma.modules.camera.moveToBounds(t,e)},this.moveTo=(t,e)=>this._ogma.modules.camera.moveTo(t,e),this.getCenter=()=>this._ogma.modules.camera.getCenter(),this.setAngle=(t,e)=>this._ogma.modules.camera.setAngle(t,e),this.rotate=(t,e)=>this._ogma.modules.camera.rotate(t,e),this.getAngle=()=>this._ogma.modules.camera.getAngle(),this.set=(t,e)=>this._ogma.modules.camera.setView(t,e),this.get=()=>this._ogma.modules.camera.getView(),this.graphToScreenCoordinates=t=>this._ogma.modules.camera.graphToScreenCoordinates(t),this.screenToGraphCoordinates=t=>this._ogma.modules.camera.screenToGraphCoordinates(t),this.getImageData=()=>this._ogma.modules.graphics.getImageData(),this.getElementAt=t=>this._ogma.modules.captor.detectElementAt(t.x,t.y,!1,!0),this.getElementsInView=()=>{const{width:t,height:e}=this.get(),n=this.screenToGraphCoordinates({x:0,y:0}),i=this.screenToGraphCoordinates({x:t,y:e});return this._ogma.modules.spatial.query(n.x,n.y,i.x,i.y)},this.getBounds=()=>{const{width:t,height:e}=this.getSize(),n=this.screenToGraphCoordinates({x:0,y:0}),i=this.screenToGraphCoordinates({x:t,y:e});return{cx:(n.x+i.x)/2,cy:(n.y+i.y)/2,width:i.x-n.x,height:i.y-n.y,minX:n.x,minY:n.y,maxX:i.x,maxY:i.y}},this.getElementsInside=(t,e,n,i,s=!0)=>{const{spatial:r,camera:o}=this._ogma.modules;if(s){const a=o.graphToScreenCoordinates({x:t,y:e}),l=o.graphToScreenCoordinates({x:n,y:i});return r.queryProjected(a.x,a.y,l.x,l.y)}return r.queryProjected(t,e,n,i)},this.beforeNextFrame=()=>this._ogma.modules.dom.beforeNextFrame(),this.afterNextFrame=()=>this._ogma.modules.dom.afterNextFrame(),this.setFullScreen=t=>this._ogma.modules.dom.setFullScreen(t),this.isFullScreen=()=>this._ogma.modules.dom.isFullScreen(),this.forceResize=()=>this._ogma.modules.dom.forceResize(),this.getSize=()=>this._ogma.modules.dom.getDimensions(),this.setSize=t=>{if(!t||isNaN(t.width)||isNaN(t.height))throw new Error("Size must follow the format { width: number, height: number }");if(t.width<0)throw new Error("width must be positive");if(t.height<0)throw new Error("height must be positive");return this._ogma.modules.dom.setDimensions(t),Promise.resolve()},this.locateGraph=t=>this._ogma.modules.locate.locateGraph(t),this.locateRawGraph=(t,e)=>this._ogma.modules.locate.locateRawGraph(t,e),this.getGraphBoundingBox=({withTexts:t=!1}={})=>this._ogma.modules.locate.getGraphBoundingBox(t),this.animationInProgress=()=>this._ogma.modules.locate.isLocating()||this._ogma.modules.camera.animationInProgress(),this.getTextBoundingBox=t=>{if(!t)throw new Error("ogma.view.getTextBoundingBox: item must be a Node or an Edge");const e=t.getAttribute("text");return e==null||e===""?null:t.isList?this._ogma.modules.labels.getTextsBoundingBox(t):this._ogma.modules.labels.getTextsBoundingBox(t.toList())},this.getNodeBadgeAt=(t,e)=>{if(!t)throw new Error("ogma.view.getNodeBadgeAt: node is not defined");return VM(e,t._index,this._ogma.modules.graphics.getAttributesManager(),this._ogma.modules.camera,this._ogma.modules.graphics.getGraphicsEngine())}}},ZX=class{constructor(t,e){this._ogma=t,this.settings=new $8(t),this.events=new z8(t),this.dom=new u5(t),this.animations=new GZ(t),this.camera=new w8(t),this.graph=new zj(t),this.data=new c5(t),this.graphics=new I8(t),this.layers=new hq(t),this.individualAttributes=new U8(t),this.algorithms=new cq(t),this.position=new eq(t),this.touch=new hH(t),this.mouse=new uH(t),this.virtualMouse=new b7(t),this.spatial=new J8(t),this.captor=new eY(t),this.interactions=new X7(t),this.classes=new H8(t),this.cameraInteractions=new E8(t,!!e.debug),this.hover=new tq(t),this.keyboard=new mY(t),this.selection=new FZ(t),this.styleRules=new T7(t),this.legend=new KY(t),this.sync=new OZ(t),this.rules=new aq(t),this.transformations=new NZ(t),this.locate=new rH(t),this.drag=new nY(t),this.pulses=new UZ(t),this.curvatureManager=new s7(t),this.workers=new u7(t),this.layouts=new h7(t),this.watcher=new p7(t),this.rectangleSelect=new BX(t),this.labels=new W7(t,e),this.brand=new n7(t),this.lasso=new KR(t),this.rewiring=new sY(t),this.resizing=new rY(t),this.snapping=new E7(t),this.connectNodes=new aY(t),this.tooltip=new gY(t),this.geo=new i7(t),Object.keys(this).forEach(n=>{const i=this[n];i instanceof ee&&(i._setModules(this),i.onMounted())}),t.onReady(()=>{Object.keys(this).forEach(n=>{const i=this[n];i instanceof ee&&i.onReady(e)})})}destroy(){Object.keys(this).forEach(t=>{const e=this[t];e instanceof ee&&e.destroy(this._ogma)})}},YX=1,qX=[gH,cH,_H,bj,SW,MX,NX],D1={version:"5.1.7",commit:"614bc2138",buildTime:"Fri Sep 13 2024 07:55:00 GMT+0000 (Coordinated Universal Time)"},ma=class rx{constructor(e={}){this.node=n=>new fr(n,this),this.edge=n=>new Jo(n,this),this.nodeList=n=>new to(n||new Uint32Array(0),this),this.edgeList=n=>new tl(n||new Uint32Array(0),this),this._onReady=[],this.build=D1,this._init(e)}_init(e){this._initParameters=e,this._debug=!!e.debug,this._token=YX++,this.modules=new ZX(this,e),this.styles=new RX(this),this.algorithms=new gq(this),this.export=new xW(this),this.keyboard=new AW(this),this.generate=new bW(this),this.layouts=new LX(this),this.parse=new wW(this),this.transformations=new WX(this),this.tools=new HX(this),this.view=new XX(this),this.mouse=new PX(this),this.events=new yH(this),this.schema=new IX(this),this.rules=new kX(this),this.geo=new EW(this),this.layers=new TW(this),this.debug=new pH(this),this._onReady.forEach(n=>n(this)),this.safelyBindToInstance(),this.modules.events.register(["destroy"]),this.build={version:"5.1.7",commit:"614bc2138",buildTime:"Fri Sep 13 2024 07:55:00 GMT+0000 (Coordinated Universal Time)"}}safelyBindToInstance(){for(const e of Object.getOwnPropertyNames(rx.prototype))typeof rx.prototype[e]=="function"&&(this[e]=this[e].bind(this))}onReady(e){this._onReady.push(e)}_destroy(){if(!this._token)throw new Error('"destroy" called twice on the same instance of Ogma');this._onReady=[],this.modules.destroy(),this.modules=null}destroy(){this.modules.events.fire("destroy",{}),this._destroy()}isDestroyed(){return!this.modules}reset(){const e=this._initParameters;this._destroy(),this._init(e)}isDebug(){return this._debug}};ma.libraries=eI,ma.geometry=IR,ma.parse=I1,ma.build=D1,ma.algorithms=kb,ma.utils=x1;var Nl=ma;Nl.algorithms=kb,Nl.utils=x1,Nl.parse=I1,Nl.build=D1,Y$(Nl,qX);var QR=Nl,pi=(t=>(t.NodeFilter="node-filter",t.EdgeFilter="edge-filter",t.NodeCollapsing="node-collapsing",t.VirtualProperties="virtual-properties",t.NeighborGeneration="neighbor-generation",t.NeighborMerging="neighbor-merging",t.NodeGrouping="node-grouping",t.EdgeGrouping="edge-grouping",t.NodeClustering="node-clustering",t.GeoClustering="geo-clustering",t.Unknown="unknown",t))(pi||{}),aa=class{constructor({id:t,duration:e,easing:n,ogma:i,module:s}){this.animation=n?{duration:e,easing:n}:e===void 0?0:e,this.destroyed=!1,this.id=t,this.ogma=i,this.context={},this.module=s,this.resetContext()}setOptions(t){var e;let n=typeof this.animation=="number"?this.animation:(e=this.animation)==null?void 0:e.duration,i=typeof this.animation=="object"?this.animation.easing:void 0;return typeof t.duration=="number"&&(n=t.duration),t.easing!==void 0&&(i=t.easing),this.animation=i?{duration:n,easing:i}:n===void 0?0:n,this.module.setOptions(this),this.module.afterNextUpdate()}enable(t){return this.animation=t===void 0?this.animation:t,this.module.enable(this)}disable(t){return this.animation=t===void 0?this.animation:t,this.module.disable(this)}isEnabled(){return this.module.isEnabled(this)}getId(){return this.id}whenApplied(){return this.module.afterNextUpdate().then(()=>this)}toggle(t){return this.animation=t===void 0?this.animation:t,this.isEnabled()?this.module.disable(this):this.module.enable(this)}run(t=!0){return Promise.resolve()}undo(t=!0){return Promise.resolve()}cleanup(){return this.resetContext(),Promise.resolve()}refresh(){return this.module.refreshTransformation(this),this.module.afterNextUpdate()}getIndex(){return this.module.getIndex(this)}setIndex(t){return this.module.setIndex(this,t),this.module.afterNextUpdate()}getAnimation(){return typeof this.animation=="number"?{duration:this.animation,easing:"linear"}:this.animation}getContext(){return this.context}setContent(t){this.context=t}resetContext(){this.context={}}getName(){return pi.Unknown}destroy(t){return t!==void 0&&(this.animation=t),this.module.remove(this)}},JX=class{constructor(t){this.xs=new Map,this.ys=new Map,this.rs=new Map,this.curvatures=new Map,this.hiddenNodes=new Set,this.hiddenEdges=new Set,this.animations=[],this.before=[],this.after=[],this.enabled=!1,this.applying=!1,this._onLayoutEnd=e=>{if(!this.enabled)return;const n=e.positions.current,i=e.ids;for(let s=0;s<i.length;s++){const r=this.ogma.getNode(i[s])._index,o=n[s];o&&(this.xs.set(r,o.x),this.ys.set(r,o.y))}},this._onLayoutPrepare=e=>{this.enabled&&(e.params.dryRun=!0)},this._onNodesRemoved=e=>{const n=e.nodes._indexes;for(const i of n)this.xs.delete(i),this.ys.delete(i),this.rs.delete(i)},this._onLayoutGetData=({name:e,data:n})=>{if(this.enabled){if(e==="force"){const i=n.graph.nodes,s=n.indexes;for(let r=0;r<s.length;r++)this.xs.has(s[r])&&(i[r].x=this.xs.get(s[r]),i[r].y=this.ys.get(s[r]),i[r].r=this.rs.get(s[r])!==void 0?1.25*this.rs.get(s[r]):i[r].r)}else if(e==="hierarchical"||e==="sequential"){const i=n.options.nodes._indexes;for(let s=0;s<i.length;s++)this.rs.has(i[s])&&(n.radiuses[s]=this.rs.get(i[s]))}else if(e==="concentric"){const i=n.list;for(let s=0;s<i.length;s++)this.rs.has(i[s])&&(n.attributes.size[s]=this.rs.get(i[s]))}else if(e==="forceLink")for(const i in n.nodes){const s=Number(i),r=n.nodes[s];this.xs.has(s)&&(r.x=this.xs.get(s),r.y=this.ys.get(s)),this.rs.has(s)&&(r.size=this.rs.get(s))}else if(e==="radial"){const i=n.indexes;for(let s=0;s<i.length;s++){const r=i[s];this.xs.has(r)&&(n.x[s]=this.xs.get(r),n.y[s]=this.ys.get(r)),this.rs.has(r)&&(n.attributes.size[s]=this.rs.get(r))}}else if(e!=="grid")throw new Error(`Ogma transformtaions: Unsupported layout: ${e}`)}},this.ogma=t,this.layer=this.ogma.modules.graphics.addAttributeLayer({name:"ogma-transformations-animations",priority:4.1,nodeOutput:{attributes:["radius"]},edgeOutput:{attributes:["curvature"]},nodeDependencies:void 0,edgeDependencies:void 0}),this.attributeLayerData=this.layer._attributesManager._getLayerById(this.layer._id),this.initEvents()}initEvents(){this.ogma.events.on("layoutPrepare",this._onLayoutPrepare).on("layoutEnd",this._onLayoutEnd).on("removeNodes",this._onNodesRemoved).on("layoutGetData",this._onLayoutGetData)}handleLayoutPromises(t){return Promise.all(t).then(e=>{e.forEach(n=>{if(!n)return;const{res:i,subNodes:s}=n;if(!Array.isArray(i))return;const r=s._indexes;for(let o=0;o<r.length;o++){const{x:a,y:l,radius:d}=i[o];d!==void 0?this.setXYR(r[o],a,l,d):this.setXY(r[o],a,l)}})})}apply(t){const e=Array.from(this.xs.values()),n=Array.from(this.ys.values()),i=Array.from(this.rs.values()).map(c=>({radius:c})),s=Array.from(this.curvatures.values()).map(c=>({curvature:c})),r=this.ogma.nodeList(Array.from(this.hiddenNodes)),o=this.ogma.edgeList(Array.from(this.hiddenEdges)),a=e.map((c,g)=>({x:c,y:n[g]})),l=this.ogma.nodeList(Array.from(this.xs.keys())),d=this.ogma.nodeList(Array.from(this.rs.keys())),h=this.ogma.edgeList(Array.from(this.curvatures.keys()));return this.xs.clear(),this.ys.clear(),this.rs.clear(),this.curvatures.clear(),this.hiddenNodes.clear(),this.hiddenEdges.clear(),this.before.forEach(c=>c()),this.initCurvature(h._indexes),this.applying=a.length>0||i.length>0||s.length>0,Promise.all([a.length?l.setAttributes(a,t):Promise.resolve(),i.length?this.ogma.modules.graphics.animate(d,()=>this.layer.setAttributeValues(d,i),!1,t):Promise.resolve(),s.length?this.ogma.modules.graphics.animate(h,()=>this.layer.setAttributeValues(h,s),!1,t):Promise.resolve(),...this.animations.map(c=>c())]).then(()=>Promise.all(this.after.map(c=>c()))).then(()=>{this.deleteCurvatures(h._indexes),r.setVisible(!1),o.setVisible(!1),this.animations=[],this.before=[],this.after=[],this.applying=!1})}setXYR(t,e,n,i){if(typeof t=="number")this.xs.set(t,e),this.ys.set(t,n),i!==void 0&&this.rs.set(t,i);else for(const s of t)this.xs.set(s,e),this.ys.set(s,n),i!==void 0&&this.rs.set(s,i)}getOpenRadius(t){return this.attributeLayerData.nodes.outputFlexArrays.radius.get(t)}getCloseRadius(t){return this.attributeLayerData.nodes.inputFlexArrays.radius.get(t)}deleteOpenRadius(t){this.layer.getFlexArrays().nodes.radius.set(t,void 0)}initCurvature(t){const e=this.attributeLayerData.edges.inputFlexArrays.curvature,n=this.attributeLayerData.edges.outputFlexArrays.curvature;for(let i=0;i<t.length;i++)n.set(t[i],e.get(t[i]))}deleteCurvatures(t){const e=this.layer.getFlexArrays().edges.curvature;for(let n=0;n<t.length;n++)e.set(t[n],void 0)}hideNode(t){this.hiddenNodes.add(t)}showNode(t){this.hiddenNodes.delete(t)}hideNodes(t){for(const e of t)this.hiddenNodes.add(e)}showNodes(t){for(const e of t)this.hiddenNodes.delete(e)}hideEdge(t){this.hiddenEdges.add(t)}showEdge(t){this.hiddenEdges.delete(t)}hideEdges(t){for(const e of t)this.hiddenEdges.add(e)}showEdges(t){for(const e of t)this.hiddenEdges.delete(e)}pushBefore(t){Array.isArray(t)?this.before.push(...t):this.before.push(t)}pushAfter(t){Array.isArray(t)?this.after.push(...t):this.after.push(t)}setXY(t,e,n){this.xs.set(t,e),this.ys.set(t,n)}setR(t,e){this.rs.set(t,e)}setRs(t,e){for(let n=0;n<t.length;n++)this.rs.set(t[n],e[n])}setCurvatures(t,e){for(let n=0;n<t.length;n++)this.curvatures.set(t[n],e[n])}setCurvature(t,e){this.curvatures.set(t,e)}setOpenRadius(t,e){this.attributeLayerData.nodes.outputFlexArrays.radius.set(t,e)}push(t){Array.isArray(t)?this.animations.push(...t):this.animations.push(t)}enable(){this.enabled=!0}disable(){this.enabled=!1}getMaxAnimation(t,e){return(typeof t=="number"?t:t.duration)>(typeof e=="number"?e:e.duration)?t:e}isApplying(){return this.applying}},ox=(...t)=>{const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)i.hasOwnProperty(s)&&(Array.isArray(e[s])&&Array.isArray(i[s])?e[s]=Array.from(new Set(e[s].concat(i[s]))):f2(e[s])&&f2(i[s])?e[s]=ox(e[s],i[s]):e[s]=i[s])}return e};function Ud(t,e,n){const i=typeof e=="string"?e.split("."):e;for(let s=0;s<i.length-1;++s){const r=i[s];let o=t[r];o||(o={},t[r]=o),t=o}t[i[i.length-1]]=n}function KX(t){let e=0,n=0;const i=t.length;if(i===0)throw new Error("Ogma transformations: Compute centroid: at least one point is required");for(let s=0;s<i;++s){const r=t[s];e+=r.x,n+=r.y}return e/=i,n/=i,{x:e,y:n}}function QX(t,e){const n=t.get(0);return{data:n.getData(),attributes:n.getAttributes(e)}}function Nm(t,e){return`gen_grp_${e}_${t}`}function f2(t){return!(!t||t.constructor!==Object&&t.constructor)}function tZ(t){return t.map(({id:e,source:n,target:i})=>({id:e,source:n,target:i}))}function eZ(t,e,n,i){let s=e,r=n;return!i&&s.toString()>r.toString()&&(s=n,r=e),`${t}[${s}-${r}]`}function nZ(t){if(t===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof t!="string"&&(typeof t!="number"||!isFinite(t)))throw new Error(`Ogma transformation: ${t} is not a valid id, expected string or number`);return t}function Rg(t){return`data.${t}`}var iZ=class{constructor(t){this.groupsByDepth=new Map,this.treeMap=new Map,this.dataMap=new Map,this.invalidEdges=new Map,this.edges=new Map,this.ogma=t.ogma,this.module=t.module,this.enabled=t.enabled===void 0||t.enabled,this.onGetSubgraph=t.onGetSubgraph,this.duration=t.duration||0,this.easing=t.easing||"quadraticOut",this.parentPath=t.parentPath||"parent",this.depthPath=t.depthPath||"depth",this.padding=t.padding||0,this.nodeGenerator=t.nodeGenerator||(()=>({})),this.showContents=t.showContents===void 0||t.showContents,this.onGroupUpdate=t.onGroupUpdate||(()=>Promise.resolve()),this.copyData=t.copyData===void 0||t.copyData,this.context={virtualEdges:this.ogma.edgeList()}}createGrouping(t){var e;const{ogma:n,groupsByDepth:i}=this,s=n.transformations.addNodeGrouping({selector:o=>o.getData(this.depthPath)===t,groupIdFunction:o=>o.getData(this.parentPath),showContents:o=>typeof this.showContents=="boolean"?this.showContents:this.showContents(o,t),onBeforeAddMetaEdges:(o,a)=>this.addEdges(o,a),onGroupUpdate:(o,a,l)=>this.onGroupUpdate(o,a,l,t),padding:o=>typeof this.padding=="number"?this.padding:this.padding(o,t),duration:this.duration,enabled:this.enabled,nodeGenerator:(o,a)=>{const l=this.nodeGenerator(o,a,s);return this.copyData&&(l.data||(l.data={}),l.data=wt(wt({},l.data),this.dataMap.get(a))),Ud(l,Rg(this.parentPath),this.treeMap.get(a)),Ud(l,Rg(this.depthPath),t-1),l.id=a,l}});if(!i.size)return i.set(t,s);const r=Array.from(i.keys()).reduce((o,a)=>Math.max(o,a));i.set(t,s),s.setIndex((e=i.get(r))==null?void 0:e.getIndex())}drill(t){return Ha(this,null,function*(){if(this.treeMap.has(t.getId()))return;const{ogma:e,groupsByDepth:n}=this,i=t.getId(),s=this.getGroupId(i);this.treeMap.set(s,t.getData(this.parentPath)),this.dataMap.set(s,t.getData());const r=t.getData(this.depthPath)||0,o=t.getPosition(),a=yield this.onGetSubgraph(t);this.edges.set(s,t.getAdjacentEdges().map(d=>{const h=d.getSource().getId(),c=d.getTarget().getId();return{source:h===i?s:h,target:c===i?s:c,data:wt({},d.getData())}})),a.nodes.forEach(d=>{Ud(d,Rg(this.parentPath),s),Ud(d,Rg(this.depthPath),r+1),d.attributes||(d.attributes={}),d.attributes.x=o.x,d.attributes.y=o.y}),this.module.pause(),e.removeEdges(t.getAdjacentEdges()),e.removeNode(t),yield e.view.afterNextFrame(),yield e.addNodes(a.nodes);const l=a.edges.filter(d=>{const h=d.source,c=d.target;if(e.getNode(h)&&e.getNode(c))return!0;const g=e.getNode(h)?c:h;return this.invalidEdges.has(g)?this.invalidEdges.get(g).push(d):this.invalidEdges.set(g,[d]),!1});a.nodes.forEach(d=>{if(!this.invalidEdges.has(d.id))return;const{valid:h,invalid:c}=this.invalidEdges.get(d.id).reduce((g,m)=>(e.getNode(m.source)&&e.getNode(m.target)?g.valid.push(m):g.invalid.push(m),g),{valid:[],invalid:[]});e.addEdges(h),c.length?this.invalidEdges.set(d.id,c):this.invalidEdges.delete(d.id)}),yield e.addEdges(l),n.has(r+1)||this.createGrouping(r+1),this.module.resume(),yield this.module.afterNextUpdate()})}addEdges(t,e){return Ha(this,null,function*(){e.forEach(n=>{const i=this.edges.get(n.getId());i&&this.ogma.addEdges(i,{virtual:!0}).then(s=>{this.context.virtualEdges=this.context.virtualEdges.concat(s)})})})}getGroupId(t){return`ogma-group-${t}`}getMaxDepth(){return this.groupsByDepth.size}disable(t){return this.enabled=!1,this.duration=typeof t=="number"?t:this.duration,this.easing=typeof t=="object"?t.easing:this.easing,this.groupsByDepth.forEach(e=>e.disable(t)),this.module.animations.hideEdges(this.context.virtualEdges._indexes),this.context.virtualEdges.setSelected(!0),this.module.afterNextUpdate()}enable(t){return this.enabled=!0,this.duration=typeof t=="number"?t:this.duration,this.easing=typeof t=="object"?t.easing:this.easing,this.groupsByDepth.forEach(e=>e.enable(t)),this.module.animations.showEdges(this.context.virtualEdges._indexes),this.module.afterNextUpdate().then(()=>this.context.virtualEdges.setVisible(!0))}toggle(t){return this.enabled?this.disable(t):this.enable(t)}setOptions(t){this.onGetSubgraph=t.onGetSubgraph?t.onGetSubgraph:this.onGetSubgraph,this.duration=t.duration!==void 0?t.duration:this.duration,this.easing=t.easing||this.easing,this.parentPath=t.parentPath||this.parentPath,this.depthPath=t.depthPath||this.depthPath,this.padding=t.padding!==void 0?t.padding:this.padding,this.nodeGenerator=t.nodeGenerator||this.nodeGenerator,this.showContents=t.showContents!==void 0?t.showContents:this.showContents,this.onGroupUpdate=t.onGroupUpdate||this.onGroupUpdate,this.copyData=t.copyData!==void 0?t.copyData:this.copyData;const e=this.enabled;return this.enabled=t.enabled!==void 0?t.enabled:this.enabled,this.enabled!==e&&this.groupsByDepth.forEach(n=>this.enabled?n.enable({duration:this.duration,easing:this.easing}):n.disable({duration:this.duration,easing:this.easing})),this.groupsByDepth.forEach(n=>n.refresh()),this.module.afterNextUpdate()}onRemove(t){this.context.virtualEdges=this.context.virtualEdges.filter(e=>!t.has(e._index))}},sZ=class{constructor(t){this.drilldowns=[],this.module=t}addDrilldown(t){this.drilldowns.push(t)}removeDrilldown(t){this.drilldowns=this.drilldowns.filter(e=>e!==t)}onRemove(t,e){e||this.drilldowns.forEach(n=>n.onRemove(t))}},rZ=class{constructor(t,e){this.enabled=!1,this.relayouted=new Set,this.shouldRelayout=new Set,this.layoutPerGroup=new Map,this.ogma=t,this.module=e,this.ogma.events.on("layoutPrepare",n=>{if(!n.params.nodes)return;const i=n.params.nodes,s=Array.isArray(i)?this.ogma.getNode(i[0])._index:i._indexes[0],r=this.module.nodeToMeta.get(s);if(!r)return;const o=ue(wt({},n),{params:wt({},n.params)});delete o.params.nodes,this.layoutPerGroup.set(r._index,o)})}getNodesToRecompute(t){const e=Array.from(t),n=new Set,i=[];for(;e.length>0;){const s=e.shift();if(n.has(s))continue;i.push(s),n.add(s);const r=this.module.nodeToMeta.get(s);r&&e.push(r._index)}return this.ogma.nodeList(i)}layoutGroups(t,e,n=!1){return Ha(this,null,function*(){this.module.animations.enable(),this.enable();const i=new Map,s=this.ogma.getNodes(t.map(({groupId:a})=>a));t.forEach(({groupId:a,layout:l,params:d},h)=>{i.set(a,()=>this.ogma.layouts[l](ue(wt({},d),{nodes:this.module.metaToNodes.get(s.get(h)._index)})))});const r=this.getNodesToRecompute(s._indexes),o=new Map;r.forEach(a=>o.set(a._index,this.module.nodeToTransformation.get(a._index).getIndex())),r.sort((a,l)=>o.get(a._index)-o.get(l._index));for(let a=0;a<r.size;a++){const l=o.get(r._indexes[a]);let d;for(d=a+1;d<r.size&&o.get(r._indexes[d])===l;d++);const h=r.slice(a,d);a=d-1,yield Promise.all(h.map(c=>{this.relayouted.add(c._index);let g=Promise.resolve();if(i.has(c.getId()))g=i.get(c.getId())();else if(n&&this.layoutPerGroup.has(c._index)){const m=this.module.metaToNodes.get(c._index),_=this.layoutPerGroup.get(c._index);g=this.ogma.layouts[_.name](ue(wt({},_.params),{nodes:m}))}return g.then(()=>{this.module.groupController.setGroupXYR(c)})}))}return yield this.module.groupController.onAfterLayouts(),this.module.animations.apply(e||0).finally(()=>{this.disable(),this.module.animations.disable(),this.relayouted.clear()})})}hasRelayouted(t){return this.relayouted.has(t)}enable(){this.enabled=!0}disable(){this.enabled=!1}clear(){this.relayouted.clear(),this.shouldRelayout.clear()}},Fg=14,oZ=class{constructor(t,e){this.subNodeOffsetX=new Map,this.subNodeOffsetY=new Map,this.savedRadius=new Map,this.alreadyGrouped=new Set,this.openGroups=new Set,this.closeGroups=new Set,this.destroyed=!1,this.nodeLayer=new Map,this.edgeLayer=new Map,this.padding=new Map,this.geoRadius=new Map,this.collapsedGroups=new Set,this.hasUpdated=new Set,this.onGroupsUpdate=()=>Promise.resolve(),this.runningLayouts=!1,this.onSetMultipleAttributes=({elements:i,values:s,options:r,updatedAttributes:o,promises:a})=>{if(this.module.isRefreshing()||this.destroyed||this.runningLayouts||this.module.animations.isApplying())return;const l=new Set(o),d=s;if(!i.isNode||!l.has("x")&&!l.has("y")&&!l.has("radius"))return Promise.resolve();const h=i.toList();if(!h.size)return Promise.resolve();const c=[],g=new Set,m=Array.from(h._indexes);for(;m.length;){const p=m.shift(),v=this.module.nodeToMeta.get(p);if(!v||g.has(v._index))continue;const x=this.getGroupXYR(v,this.module.getSubNodes(v),h,d);x.isGeo?c.push(v.setAttribute("radius",x.radius,r)):(delete x.isGeo,this.closeGroups.has(v._index)||this.collapsedGroups.has(v._index)?(this.savedRadius.set(v._index,x.radius),this.module.animations.setXY(v._index,x.x,x.y)):this.module.animations.setXYR(v._index,x.x,x.y,x.radius),g.add(v._index)),m.push(v._index)}const _=h.map((p,v)=>{if(!this.openGroups.has(p._index))return null;const x=p.getPosition();return Array.isArray(d)&&d[v]?(d[v].x!==void 0&&(x.x=d[v].x),d[v].y!==void 0&&(x.y=d[v].y)):(d.x!==void 0&&(x.x=d.x),d.y!==void 0&&(x.y=d.y)),{group:p,position:x}}).filter(p=>p);_.length&&_.forEach(({group:p,position:v})=>this.animateChildren(p,v)),(g.size>0||_.length)&&c.push(this.module.animations.apply(r)),a.push(...c)},this.ogma=t,this.layoutController=new rZ(t,e),this.groupLayer=this.ogma.modules.graphics.addAttributeLayer({name:"groups-layer",priority:5.50225,edgeAttributes:{layer:i=>this.edgeLayer.get(i._index)},nodeAttributes:{layer:i=>this.nodeLayer.get(i._index)},nodeDependencies:void 0,edgeDependencies:void 0});const n=t.styles.getClass("_group-fading_");this.fadingClass=n||this.ogma.styles.createClass({name:"_group-fading_",nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this.module=e,t.events.on("setMultipleAttributes",this.onSetMultipleAttributes).on("beforeGeoCameraMove",({zoom:i})=>{const s=this.ogma.nodeList(Array.from(this.geoRadius.keys())).filter(r=>r&&!this.collapsedGroups.has(r._index)&&this.openGroups.has(r._index));s.forEach(r=>{const o=this.geoRadius.get(r._index)*2**i;this.module.animations.setOpenRadius(r._index,o)}),this.ogma.modules.geo._projection&&this.ogma.modules.geo._projection.updateElements(s)}).on(["geoEnabled","beforeGeoDisabled"],()=>this._onToggleGeo()).on("geoNodesMoved",({nodes:i})=>{const s=i._indexes;for(let r=0;r<s.length;r++){const o=this.module.getMetaNode(i.get(r));!o||!this.openGroups.has(o._index)||this.layoutController.shouldRelayout.add(o._index)}}).on(["nodeClassRemoved__hovered","nodeClassAdded__hovered","nodeClassRemoved__selected","nodeClassAdded__selected","nodeClassAdded__hoverExtremityHighlighted","nodeClassRemoved__hoverExtremityHighlighted"],({nodes:i})=>{const s=i._indexes;for(let r=0;r<s.length;r++){const o=i.get(r);if(!this.isOpen(o))continue;const a=o.getAttribute("layer");this.setSubEltsLayer(o,a,!0)}})}setSubEltsLayer(t,e,n){const i=n?1:-1;if(!this.isOpen(t))return;const s=this.module.getSubNodes(t);s.forEach(o=>{this.nodeLayer.set(o._index,e+i),this.setSubEltsLayer(o,e+i,n)});const r=s.getAdjacentEdges({bothExtremities:!0});for(let o=0;o<r.size;o++)this.edgeLayer.set(r._indexes[o],e+i)}closeGroup(t,e,n,i,s=!1){const r=[e],o=this.closeGroups.has(t._index)||this.collapsedGroups.has(t._index);this.openGroups.delete(t._index),this.closeGroups.add(t._index),this.hasUpdated.add(t._index);const a=this.module.animations,l=s?0:a.getCloseRadius(t._index),d=a.getOpenRadius(t._index);if(d!==void 0&&!o&&this.savedRadius.set(t._index,d),a.setXYR(t._index,n,i,l),s)return;for(;r.length;){const c=r.shift(),g=c._indexes,m=c.getAdjacentEdges({bothExtremities:!0}),_=new Set;for(let v=0;v<m._indexes.length;v++)_.add(m._indexes[v]);const p=c.getAdjacentEdges({bothExtremities:!1}).filter(v=>!_.has(v._index));a.setXYR(g,n,i,l),a.pushAfter(()=>{c.setVisible(!1),m.setVisible(!1),p.setVisible(!1);const v=[];for(let x=0;x<g.length;x++){const b=this.closeGroups.has(g[x]);v.push(b?l:this.savedRadius.get(g[x]))}this.module.animations.setRs(c._indexes,v)});for(let v=0;v<g.length;v++){if(!this.openGroups.has(g[v]))continue;const x=c.get(v);this.collapsedGroups.add(x._index);const b=this.module.getSubNodes(c.get(v));b.size&&r.push(b)}}const h=this.module.getMetaNode(t);h&&this.openGroups.has(h._index)&&this.layoutController.shouldRelayout.add(h._index)}setGroupXYR(t){const e=this.getGroupXYR(t,this.module.getSubNodes(t),void 0,void 0);e.isGeo?(this.setGeoLatLng(t,e.y,e.x),this.module.animations.setR(t._index,e.radius)):this.module.animations.setXYR(t._index,e.x,e.y,e.radius)}setGeoLatLng(t,e,n){this.ogma.modules.data.setProperty(t,this.ogma.modules.geo.latitudePath,e,{virtual:!0}),this.ogma.modules.data.setProperty(t,this.ogma.modules.geo.longitudePath,n,{virtual:!0})}expandGroup(t,e,n=!1){const i=this.module.animations,s=t.getPosition();n||(this.openGroups.add(t._index),this.closeGroups.delete(t._index),this.collapsedGroups.delete(t._index)),this.hasUpdated.add(t._index);const r=[{subNodes:e,offset:this.getOffset(t._index),isClosed:!1,wasCollapsed:!1}];for(;r.length;){const{subNodes:a,offset:l,isClosed:d,wasCollapsed:h}=r.shift();if((d||h)&&i.pushBefore(()=>a.setAttributes({x:s.x+l.x,y:s.y+l.y},0)),d)continue;const c=a._indexes,g=a.getAdjacentEdges({bothExtremities:!0,filter:"all"});a.setVisible(!0),g.setVisible(!0);for(let m=0;m<c.length;m++){const _=this.closeGroups.has(c[m]),p=this.collapsedGroups.has(c[m]);i.setXYR(c[m],s.x+l.x+this.subNodeOffsetX.get(c[m])||0,s.y+l.y+this.subNodeOffsetY.get(c[m])||0,_?this.module.animations.getCloseRadius(c[m]):this.savedRadius.get(c[m])),this.collapsedGroups.delete(c[m]);const v=this.module.getSubNodes(a.get(m));v.size&&r.push({subNodes:v,isClosed:_,wasCollapsed:p,offset:{x:l.x+this.subNodeOffsetX.get(c[m])||0,y:l.y+this.subNodeOffsetY.get(c[m])||0}})}}const o=this.module.getMetaNode(t);o&&this.openGroups.has(o._index)&&this.layoutController.shouldRelayout.add(o._index),i.setXYR(t._index,s.x,s.y,n?0:this.savedRadius.get(t._index))}getOffset(t){return this.collapsedGroups.has(t)&&this.subNodeOffsetX.has(t)?{x:this.subNodeOffsetX.get(t),y:this.subNodeOffsetY.get(t)}:{x:0,y:0}}restorePositions(t,e){const n=t.getPosition(),i=(e=e.filter(o=>!o.isVirtual()))._indexes,s=this.getOffset(t._index),r=[];for(let o=0;o<i.length;o++)r.push({x:s.x+n.x+this.subNodeOffsetX.get(i[o])||0,y:s.x+n.y+this.subNodeOffsetY.get(i[o])||0});e.setAttributes(r,0)}animateChildren(t,e){const n=[{parent:t,position:e}];for(;n.length;){const{parent:i,position:s}=n.shift();if(!i.isNode)continue;const r=this.module.getSubNodes(i);r.size&&r.forEach(o=>{const a=this.subNodeOffsetX.get(o._index)||0,l=this.subNodeOffsetY.get(o._index)||0,d={x:s.x+a,y:s.y+l};this.module.animations.setXY(o._index,d.x,d.y),n.push({parent:o,position:d})})}}addOpenGroup(t){this.openGroups.add(t._index),this.closeGroups.delete(t._index)}isOpen(t){return this.openGroups.has(t._index)}isClose(t){return this.closeGroups.has(t._index)}setPadding(t,e){const n=new Set,i=isNaN(+e),s=e;return t.forEach(r=>{const o=i?s(r):+e;this.padding.get(r._index)!==o&&n.add(r._index),this.padding.set(r._index,o)}),n}getGroupXYR(t,e,n,i){let s,r,o;const a=this.module.animations,l=this.ogma.geo.enabled();if(l){const m=e.getData(this.ogma.modules.geo.latitudePath),_=e.getData(this.ogma.modules.geo.longitudePath);s=[],r=[],o=[];for(let p=0;p<m.length;p++){const{x:v,y:x}=this.ogma.geo.getMap().project({lat:m[p],lng:_[p]},Fg);s.push(v),r.push(x),o.push(2**Fg*this.geoRadius.get(e._indexes[p])||10)}}else s=e.getAttribute("x"),r=e.getAttribute("y"),o=e.getAttribute("radius");if(n&&i&&n.isNode){const m=n._indexes,_=new Map,p=new Map,v=new Map;for(let b=0;b<m.length;b++){const E=Array.isArray(i)?i[b]:i;!isNaN(E.x)&&_.set(m[b],E.x),!isNaN(E.y)&&p.set(m[b],E.y),!isNaN(E.radius)&&v.set(m[b],E.radius)}const x=e._indexes;for(let b=0;b<x.length;b++)_.has(x[b])&&(s[b]=_.get(x[b])),p.has(x[b])&&(r[b]=p.get(x[b])),v.has(x[b])&&(o[b]=v.get(x[b]))}const d=e._indexes;for(let m=0;m<d.length;m++)this.savedRadius.has(d[m])&&(o[m]=this.savedRadius.get(d[m]));if(!l)for(let m=0;m<d.length;m++)a.xs.get(d[m])!==void 0&&(s[m]=a.xs.get(d[m])),a.ys.get(d[m])!==void 0&&(r[m]=a.ys.get(d[m])),a.rs.get(d[m])!==void 0&&(o[m]=a.rs.get(d[m]));let[h,c,g]=QR.algorithms.minDisk(s,r,o);if(g+=this.padding.get(t._index)||0,l){const{lat:m,lng:_}=this.ogma.geo.getMap().unproject({x:h,y:c},Fg);h=_,c=m,g/=2**Fg,this.geoRadius.set(t._index,g),g*=2**this.ogma.geo.getZoom()}else this.savedRadius.set(t._index,g),e.forEach((m,_)=>{this.subNodeOffsetX.set(m._index,s[_]-h),this.subNodeOffsetY.set(m._index,r[_]-c)});return{x:h,y:c,radius:g,isGeo:l}}onAfterLayouts(){return Ha(this,null,function*(){const t=this.module.animations,e=this.module.getList().filter(a=>a.getName()===pi.NodeGrouping&&a.isEnabled());if(!e.length)return;const n=[],i=[],s=[];let r=!1;for(let a=e.length-1;a>=0;a--)e[a].getContext().metaNodes.forEach(l=>{if(l.getMetaNode())return;r||(r=this.hasUpdated.has(l._index)||this.layoutController.relayouted.has(l._index)||this.layoutController.shouldRelayout.has(l._index)),i.push(l._index);const d=!this.collapsedGroups.has(l._index)&&!this.closeGroups.has(l._index);s.push(d),n.push({group:l,collapsed:!d})});if(!r)return;i.length&&(yield this.onGroupsUpdate({metaNodes:this.ogma.nodeList(n.map(a=>a.group._index)),isOpen:s}));const o=new Set;for(;n.length;){const{group:a,collapsed:l}=n.shift();if(o.has(a._index))continue;o.add(a._index);const d=this.module.getSubNodes(a),h=d._indexes,c=t.xs.get(a._index),g=t.ys.get(a._index);if(c!==void 0&&g!==void 0){if(l){t.deleteOpenRadius(a._index);for(let m=0;m<h.length;m++)t.setXY(h[m],c,g)}else for(let m=0;m<h.length;m++)t.setXY(h[m],c+this.subNodeOffsetX.get(h[m])||0,g+this.subNodeOffsetY.get(h[m])||0);for(let m=0;m<h.length;m++)this.module.isVirtual(h[m],!0)&&n.push({group:d.get(m),collapsed:this.collapsedGroups.has(h[m])||this.closeGroups.has(h[m])||l})}}this.hasUpdated.clear(),this.layoutController.clear()})}cleanup(t,e,n){let i=t._indexes;for(let s=0;s<i.length;s++)this.padding.delete(i[s]),this.openGroups.delete(i[s]),this.closeGroups.delete(i[s]),this.nodeLayer.delete(i[s]);for(let s=0;s<e.size;s++)this.edgeLayer.delete(e._indexes[s]);if(n){i=n._indexes;for(let s=0;s<i.length;s++)this.subNodeOffsetX.delete(i[s]),this.subNodeOffsetY.delete(i[s])}}getPositions(t,e){const{x:n,y:i}=t.getPosition();return e.map(s=>({x:n+(this.subNodeOffsetX.get(s._index)||0),y:i+(this.subNodeOffsetY.get(s._index)||0)}))}hideSubNodes(t){const e=[t];for(;e.length;){const n=e.pop();n.setVisible(!1);for(let i=0;i<n._indexes.length;i++)this.collapsedGroups.add(n._indexes[i]),this.openGroups.has(n._indexes[i])&&e.push(this.module.getSubNodes(n.get(i)))}}onRemove(t,e){if(!e)return;const n=[],i=new Set;for(let s=0;s<t.length;s++){const r=this.module.nodeToMeta.get(t[s]);r&&this.openGroups.has(r._index)&&(this.layoutController.shouldRelayout.add(r._index),n.push(r._index))}for(;n.length;){const s=n.shift();if(i.has(s))continue;i.add(s);const r=this.module.nodeToMeta.get(s);r&&this.openGroups.has(r._index)&&(this.layoutController.shouldRelayout.add(r._index),n.push(r._index))}}layoutGroups(t,e,n=!1){return this.runningLayouts=!0,this.layoutController.layoutGroups(t,e,n).finally(()=>{this.runningLayouts=!1})}_onToggleGeo(){this.geoRadius.clear();const t=this.module.getList().find(n=>n.getName()===pi.NodeGrouping);if(!t)return;const e=Array.from(this.openGroups.keys());for(let n=0;n<e.length;n++)this.layoutController.shouldRelayout.add(e[n]);t.refresh()}startRefresh(){this.alreadyGrouped.clear()}destroy(){this.destroyed||(this.destroyed=!0,this.ogma.events.off(this.onSetMultipleAttributes))}},aZ={setData:!1,addElement:!0,removeElement:!0,setOptions:!1,refresh:!1},lZ=class ax{constructor(){this.prev={},this.next={},this.prevorder=[],this.nextorder=[],this.shouldAnimate=!1,this.minRefreshIndex=0}addTransformation(e,n){this.next[e]=n,this.nextorder.push(e)}removeTransformation(e){delete this.next[e]}setIndex(e,n){const i=this.nextorder.indexOf(e);this.nextorder.splice(i,1),this.nextorder.splice(n,0,e),this.minRefreshIndex=Math.min(this.minRefreshIndex,i,n)}setEnabled(e,n){this.next[e]=n}isEnabled(e){return this.prev[e]||!1}static getDiff(e,n){const i=new Map;for(const s in e)n[s]!==void 0?n[s]!==e[s]&&i.set(+s,{shouldDo:n[s],shouldUndo:e[s]}):i.set(+s,{shouldDo:!1,shouldUndo:e[s],shouldCleanup:!0});for(const s in n)e[s]===void 0&&n[s]===!0&&i.set(+s,{shouldDo:!0,shouldUndo:!1});return i}getFirstChange(e){const{nextorder:n}=this;let i=n.length;for(let s=0;s<n.length;s++){const r=e.get(n[s]);if(r&&(r.shouldUndo||r.shouldDo)){i=s;break}}return i}refreshFrom(e,n){const{nextorder:i}=this;for(let s=n;s<this.nextorder.length;s++)e.set(i[s],wt({shouldUndo:this.prev[i[s]],shouldDo:this.prev[i[s]]},e.get(i[s])||{}));return e}isDirty(){const e=ax.getDiff(this.prev,this.next),n=Math.min(this.minRefreshIndex,this.getFirstChange(e));return(e.size>0||n<this.nextorder.length)&&{reason:e.size>0?"diff":"refresh",index:n}}invalidateFrom(e,n){this.shouldAnimate||(this.shouldAnimate=aZ[n]),this.minRefreshIndex=Math.min(this.minRefreshIndex,e)}step(){const e=ax.getDiff(this.prev,this.next);this.prev=wt({},this.next);const n=Math.min(this.minRefreshIndex,this.getFirstChange(e)),i=this.nextorder.reduce((o,a,l)=>o.set(a,l),new Map),s=this.prevorder.reduce((o,a,l)=>o.set(a,l),new Map);this.nextorder=this.nextorder.filter(o=>this.prev[o]!==void 0),this.prevorder=[...this.nextorder],this.minRefreshIndex=this.nextorder.length;const r=this.shouldAnimate;return this.shouldAnimate=!1,{diff:this.refreshFrom(e,n),nextorder:i,prevorder:s,shouldAnimate:r}}done(){}},uZ=class{constructor(t){this.transformations=[],this.nodeToTransformation=new Map,this.edgeToTransformation=new Map,this.nodeVirtual=new Set,this.edgeVirtual=new Set,this.nodeToMeta=new Map,this.edgeToMeta=new Map,this.metaToNodes=new Map,this.metaToEdges=new Map,this._onDestroy=()=>{this.destroy(),this.ogma.events.off(this._onFrame)},this._onFrame=()=>this.refresh(),this._onAddElements=({nodes:e,edges:n,virtual:i})=>{if(i){if(e)for(let s=0;s<e.size;s++)this.nodeVirtual.add(e._indexes[s]);if(n)for(let s=0;s<n.size;s++)this.edgeVirtual.add(n._indexes[s])}else this.state.invalidateFrom(0,"addElement"),this.invalidate()},this._onSetData=({elements:e,virtual:n})=>{if(n)return;const{isNode:i,_indexes:s}=e;let r=1/0;for(const o of s){const a=this.getTransformation(o,i);if(!a){r=0;break}r=Math.min(r,a.getIndex())}return this.state.invalidateFrom(r,"setData"),this.invalidate(),r},this._onRequestElementsToDelete=e=>{const{elementsToRemove:n}=e,i=n.isNode,s=n._indexes,r=this.getLeafElements(s,i);e.elementsToRemove=i?this.ogma.nodeList(r):this.ogma.edgeList(r)},this._onAfterRemoveElements=({nodes:e,edges:n})=>{if(!this.ogma.isDestroyed()){if(e)for(let i=0;i<e.size;i++)this.nodeVirtual.delete(e._indexes[i]);if(n)for(let i=0;i<n.size;i++)this.edgeVirtual.delete(n._indexes[i])}},this._onRemoveElements=({nodes:e,edges:n,virtual:i})=>{i||this.ogma.isDestroyed()||this._refreshPromise.then(()=>{const s=!!e,r=s?e._indexes:n._indexes,o=new Set(r);this.transformations.forEach(a=>a.onRemove(o,s)),this.groupController.onRemove(r,s),this.drilldownController.onRemove(o,s),this.nodeToMeta.clear(),this.edgeToMeta.clear(),this.metaToNodes.clear(),this.metaToEdges.clear(),this.nodeToTransformation.clear(),this.edgeToTransformation.clear(),this.state.invalidateFrom(0,"removeElement"),this.invalidate()})},this.ogma=t,this.state=new lZ,this.animations=new JX(t),this._shouldRefresh=!1,this._refreshing=!1,this.isDestroyed=!1,this.isPaused=!1,this._refreshPromise=Promise.resolve(),this.groupController=new oZ(t,this),this.drilldownController=new sZ(this),this.ogma.events.on("frame",this._onFrame).on("setData",this._onSetData).on(["addNodes","addEdges"],this._onAddElements).on(["removeNodes","removeEdges"],this._onRemoveElements).on(["afterRemoveNodes","afterRemoveEdges"],this._onAfterRemoveElements).on("requestElementsToDelete",this._onRequestElementsToDelete).on("destroy",this._onDestroy)}addTransformation(t,e=!0){this.state.addTransformation(t.getId(),e),this.transformations.push(t),this.invalidate()}removeTransformation(t){const e=this.transformations.indexOf(t);e!==-1&&this.transformations.splice(e,1),this.invalidate()}step(){return Ha(this,arguments,function*(t=0,e={fireEnabled:[],fireDisabled:[],fireRefresh:[],fireDestroy:[],fireSetIndex:[]}){var n;if(t>5)throw new Error("Ogma transformations: Transformations refresh in loop");const{diff:i,prevorder:s,nextorder:r}=this.state.step(),{fireEnabled:o,fireDisabled:a,fireRefresh:l,fireDestroy:d,fireSetIndex:h}=e,c=[],g=[],m=[];this.groupController.startRefresh();for(const p of this.transformations){const v=p.getId();if(!i.has(v))continue;const{shouldDo:x,shouldUndo:b,shouldCleanup:E}=i.get(v);x&&!b?o.push(p):b&&!x?a.push(p):x&&b&&l.push(p),s.has(v)&&s.get(v)!==r.get(v)&&h.push(p),l.push(p),b&&c.push(p),x&&g.push(p),E&&(d.push(p),m.push(p))}let _=0;c.sort((p,v)=>s.get(v.getId())-s.get(p.getId())||0);for(const p of c){const v=!((n=i.get(p.getId()))!=null&&n.shouldDo);v&&(_=this.animations.getMaxAnimation(_,p.getAnimation())),yield p.undo(v)}g.sort((p,v)=>r.get(p.getId())-r.get(v.getId())||0);for(let p=0;p<g.length;p++){const v=g[p],x=p===g.length-1;x&&(_=this.animations.getMaxAnimation(_,v.getAnimation())),yield v.run(x)}for(const p of m)yield p.cleanup();if(yield this.groupController.onAfterLayouts(),yield this.animations.apply(_),!this.isDestroyed)return this.state.isDirty()?this.step(t+1,e):e})}refresh(){!this._shouldRefresh||this._refreshing||this.isDestroyed||this.isPaused||(this._shouldRefresh=!1,this._refreshing=!0,this._refreshPromise=this._refreshPromise.then(()=>(this.animations.enable(),this.step().then(t=>{if(this.animations.disable(),this._refreshing=!1,!t)return;const{fireEnabled:e,fireDisabled:n,fireRefresh:i,fireDestroy:s,fireSetIndex:r}=t,o=this.ogma.modules.events;n.reverse().forEach(a=>o.fire("transformationDisabled",{target:a})),e.forEach(a=>o.fire("transformationEnabled",{target:a})),r.forEach(a=>o.fire("transformationSetIndex",{target:a})),i.forEach(a=>o.fire("transformationRefresh",{target:a})),s.forEach(a=>o.fire("transformationDestroyed",{target:a}))}).finally(()=>this.animations.disable()))).catch(t=>{const e=this.state.isDirty();if(!e)throw t;const n=e.reason==="diff"?"You are constantly adding/removing/changing index of a transformation":"You are constantly adding/removing/updating nodes or edges while transformations refresh";throw new Error(`Ogma transformations, refresh failed.
${n}`)}).finally(()=>{}))}enable(t){return this.state.setEnabled(t.getId(),!0),this.invalidate(),this.afterNextUpdate()}disable(t){return this.state.setEnabled(t.getId(),!1),this.invalidate(),this.afterNextUpdate()}remove(t){return this.disable(t),this.state.removeTransformation(t.getId()),this.afterNextUpdate().then(()=>{this.transformations.splice(this.getIndex(t),1)})}isEnabled(t){return this.state.isEnabled(t.getId())}getList(){return this.transformations.slice()}getIndex(t){for(let e=0;e<this.transformations.length;e++)if(this.transformations[e]===t)return e;return-1}setIndex(t,e){const n=this.getIndex(t);this.state.setIndex(t.getId(),e),this.transformations.splice(n,1),this.transformations.splice(e,0,t),this.invalidate()}setOptions(t){this.state.invalidateFrom(this.getIndex(t),"setOptions"),this.invalidate()}refreshTransformation(t){this.state.invalidateFrom(this.getIndex(t),"refresh"),this.invalidate()}clear(){return this.transformations.forEach(t=>t.destroy(0)),this.invalidate(),this.afterNextUpdate()}destroy(){this.transformations.forEach(t=>t.destroy(0)),this.groupController.destroy(),this._refreshPromise=Promise.resolve(),this.isDestroyed=!0}invalidate(){this._refreshing||this.ogma.isDestroyed()||(this._shouldRefresh=!0,this.ogma.modules.dom.refresh())}afterNextUpdate(){return this.ogma.view.afterNextFrame().then(()=>this._refreshPromise)}getTransformation(t,e){return e?this.nodeToTransformation.get(t):this.edgeToTransformation.get(t)}setTransformation(t,e,n){n?this.nodeToTransformation.set(t,e):this.edgeToTransformation.set(t,e)}deleteTransformation(t){const e=t.isNode?this.nodeToTransformation:this.edgeToTransformation,n=t._indexes;for(const i of n)e.delete(i)}setMetaNode(t,e){this.nodeToMeta.set(t,e)}setSubNodes(t,e){this.metaToNodes.set(t,e)}removeMetaNodes(t){const e=t._indexes;for(const n of e){const i=this.metaToNodes.get(n);i&&i.forEach(s=>this.nodeToMeta.delete(s._index)),this.nodeToTransformation.delete(n),this.metaToNodes.delete(n)}}removeMetaEdges(t){const e=t._indexes;for(const n of e){const i=this.metaToEdges.get(n);i&&i.forEach(s=>this.edgeToMeta.delete(s._index)),this.edgeToTransformation.delete(n),this.metaToEdges.delete(n)}}clearSubNodes(t){this.metaToNodes.delete(t)}clearMetaNode(t){this.nodeToMeta.delete(t)}setMetaEdge(t,e){this.edgeToMeta.set(t,e)}setSubEdges(t,e){this.metaToEdges.set(t,e)}clearSubEdges(t){this.metaToEdges.delete(t)}clearMetaEdge(t){this.edgeToMeta.delete(t)}getMetaNode(t){return this.nodeToMeta.get(t._index)||null}getMetaEdge(t){return this.edgeToMeta.get(t._index)||null}getLeafElements(t,e){const n=[t],i=e?this.metaToNodes:this.metaToEdges,s=[];for(;n.length;){const r=n.pop();for(let o=0;o<r.length;o++){s.push(r[o]);const a=i.get(r[o]);a&&n.push(a._indexes)}}return s}getSubElements(t){const e=t.isNode?this.metaToNodes:this.metaToEdges,n=t.toList()._indexes;let i=t.isNode?this.ogma.nodeList():this.ogma.edgeList();for(let s=0;s<n.length;s++){const r=e.get(n[s]);r&&(i=i.concat(r))}return i}getSubNodes(t){return this.getSubElements(t)}getSubEdges(t){return this.getSubElements(t)}getById(t){return this.transformations.find(e=>e.getId()===t)}isIntraEdge(t){const e=t.getSource()._index;return this.nodeToMeta.has(e)&&this.nodeToMeta.get(e)===this.nodeToMeta.get(t.getTarget()._index)}isVirtual(t,e){return e?this.nodeVirtual.has(t):this.edgeVirtual.has(t)}isRefreshing(){return this._refreshing}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.refresh()}},bi="_transparent",Mu=t=>!0,dZ=()=>{};function tF(t){if(t.keys)return Array.from(t.keys());const e=[];return t.forEach((n,i)=>e.push(i)),e}function Rm(t){if(t.values)return Array.from(t.values());const e=[];return t.forEach(n=>e.push(n)),e}function m2(t){return!(!t||t.constructor!==Object&&t.constructor)}var Ia=(...t)=>{const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)i.hasOwnProperty(s)&&(Array.isArray(e[s])&&Array.isArray(i[s])?e[s]=Array.from(new Set(e[s].concat(i[s]))):m2(e[s])&&m2(i[s])?e[s]=Ia(e[s],i[s]):e[s]=i[s])}return e};function hZ(t){return Array.isArray(t)?t:[t]}var lx=()=>!0,eF=()=>!1,cZ=()=>null,gZ=class extends aa{constructor(t){super(t),this.nodeSelector=t.criteria||Mu}setOptions(t){return this.nodeSelector=t.criteria||this.nodeSelector,super.setOptions(t)}getName(){return pi.NodeFilter}run(){const t=this.nodeSelector,e=this.ogma.getNodes().filter(a=>!t||!t(a)),n=e.getAdjacentEdges();this.module.animations.hideNodes(e._indexes),this.module.animations.hideEdges(n._indexes),e.setVisible(!1),n.setVisible(!1);const i=e.subtract(this.context.hiddenNodes),s=n.subtract(this.context.hiddenEdges),r=this.context.hiddenNodes.subtract(e),o=this.context.hiddenEdges.subtract(n);return this.module.animations.pushBefore(()=>{r.setVisible(!0),r.setVisible(!0),s.setVisible(!0),i.setVisible(!0),r.addClass(bi),o.addClass(bi)}),this.module.animations.push(()=>Promise.all([o.removeClass(bi,this.animation),r.removeClass(bi,this.animation),i.addClass(bi,this.animation),s.addClass(bi,this.animation)])),this.context=ue(wt({},this.context),{hiddenNodes:e,hiddenEdges:n}),Promise.resolve()}undo(t=!0){const{hiddenNodes:e,hiddenEdges:n}=this.context,i=t?this.animation:0;return e.setExcluded(!1),n.setExcluded(!1),t&&(e.addClass(bi),n.addClass(bi),this.module.animations.push(()=>Promise.all([e.removeClass(bi,i),n.removeClass(bi,i)])),this.context.hiddenNodes=this.ogma.nodeList(),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(t,e){e?this.context.hiddenNodes=this.context.hiddenNodes.filter(n=>!t.has(n._index)):this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!t.has(n._index))}resetContext(){this.context=ue(wt({},this.context),{hiddenEdges:this.ogma.edgeList(),hiddenNodes:this.ogma.nodeList()})}},fZ=class extends aa{constructor(t){super(t),this.edgeSelector=t.criteria||Mu}setOptions(t){return this.edgeSelector=t.criteria||this.edgeSelector,super.setOptions(t)}getName(){return pi.EdgeFilter}run(){const t=this.edgeSelector,e=this.ogma.getEdges().filter(r=>!t||!t(r)),n=this.module.animations;e.setVisible(!1);const i=e.subtract(this.context.hiddenEdges),s=this.context.hiddenEdges.subtract(e);return this.module.animations.pushBefore(()=>{i.setVisible(!0),s.setVisible(!0),s.addClass(bi)}),n.hideEdges(e._indexes),n.push(()=>Promise.all([s.removeClass(bi,this.animation),i.addClass(bi,this.animation)])),this.context=ue(wt({},this.context),{hiddenEdges:e}),Promise.resolve()}undo(t=!0){super.undo(t);const{hiddenEdges:e}=this.context,n=t?this.animation:0;return e.setExcluded(!1),t&&(e.addClass(bi),this.module.animations.push(()=>Promise.all([e.removeClass(bi,n)])),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(t,e){e||(this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!t.has(n._index)))}resetContext(){this.context=ue(wt({},this.context),{hiddenEdges:this.ogma.edgeList()})}},En="_faded",mZ=class extends aa{constructor(t){super(t),this.selector=t.selector||eF,this.dataFunction=t.dataFunction||dZ}getName(){return pi.NeighborMerging}run(t=!0){const{ogma:e}=this,n=t?this.animation:0,i=e.getNodes().filter(this.selector),s=[],r=new Map;for(let g=0;g<i.size;++g){const m=i.get(g),_=m.getAdjacentEdges(),p=this.dataFunction(m);for(let v=0;v<_.size;++v){const x=_.get(v),b=x.getSource(),E=x.getTarget();if(b!==E&&p!==void 0){const S=b===m?E:b;let A=r.get(S);A||(A=[],r.set(S,A)),A.push(p)}s.push(x)}}const o=e.getEdges(s),a=e.getNodes(tF(r)),l=Rm(r),d=a.getData(),h=new Array(a.size);for(let g=0;g<h.length;++g){const m=l[g];let _=d[g];for(let p=0;p<m.length;++p)_=Ia(_,m[p]);h[g]=_}const c=this.module.animations;return c.hideNodes(i._indexes),c.hideEdges(o._indexes),c.push(()=>Promise.all([i.addClass(En,n),o.addClass(En,n)]).then(()=>{this.ogma.modules.data.setProperty(a,null,h,{dispatch:!0,virtual:!0})})),this.context=ue(wt({},this.context),{hiddenNodes:i,hiddenEdges:o,nodesWithDataChange:a,oldDataList:d}),Promise.resolve()}resetContext(){super.resetContext(),this.context=ue(wt({},this.context),{hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),nodesWithDataChange:this.ogma.nodeList(),oldDataList:[]})}undo(t=!0){const{hiddenNodes:e,hiddenEdges:n,nodesWithDataChange:i,oldDataList:s}=this.context,r=t?this.animation:0,o=this.module.animations;return this.context.hiddenEdges=this.ogma.edgeList(),this.context.hiddenNodes=this.ogma.nodeList(),this.context.nodesWithDataChange=this.ogma.nodeList(),this.context.oldDataList=[],e.setVisible(!0),n.setVisible(!0),o.pushBefore(()=>{e.addClass(En),n.addClass(En)}),o.push(()=>Promise.all([e.removeClass(En,r),n.removeClass(En,r)]).then(()=>{this.ogma.modules.data.setProperty(i,null,s,{dispatch:!0,virtual:!0})})),Promise.resolve()}onRemove(t,e){e&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(n=>!t.has(n._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!t.has(n._index))}cleanup(){return Promise.resolve()}setOptions(t){return this.selector=t.selector||this.selector,this.dataFunction=t.dataFunction||this.dataFunction,super.setOptions(t)}};function pZ(t){return t!=null}var _Z=(t,e)=>({source:t.getId(),target:e.getId()}),yZ=class extends aa{constructor(t){super(t);const{selector:e=lx,neighborIdFunction:n=cZ,nodeGenerator:i=()=>({}),edgeGenerator:s=_Z}=t;this.neighborIdFunction=n,this.selector=e,this.generateIds=r=>this.selector(r)&&this.neighborIdFunction(r)||null,this.nodeGenerator=i,this.edgeGenerator=s}getName(){return pi.NeighborGeneration}run(t=!0){const{ogma:e,id:n}=this,i=t?this.animation:0,s=e.getNodes(),r=new Map;for(let g=0;g<s.size;++g){const m=s.get(g),_=(vZ(this.generateIds(m))||[]).filter(pZ);if(_)for(const p of _){let v=r.get(p);v||(v=[],r.set(p,v)),v.push(m)}}const o=new Array(r.size),a=[],l=tF(r),d=Rm(r).map(g=>e.getNodes(g));for(let g=0;g<o.length;++g){const m=l[g],_=d[g],p=this.nodeGenerator(m,_);p.id=`_gen_${n}_${m}`;const v=KX(_.getPosition());p.attributes=p.attributes||{},p.attributes.x=v.x,p.attributes.y=v.y,o[g]=p}let h,c;return e.addNodes(o.map(g=>({id:g.id,attributes:g.attributes})),{virtual:!0}).then(()=>{h=e.getNodes(o.map(m=>m.id));const g=h._indexes;this.context.virtualNodes&&this.module.removeMetaNodes(this.context.virtualNodes);for(let m=0;m<h.size;m++)this.module.setTransformation(g[m],this,!0),this.module.setSubNodes(g[m],this.ogma.createNodeList());h.replaceOriginalAttributes(o.map(m=>m.attributes),["x","y"]),this.ogma.modules.data.setProperty(h,null,o.map(m=>m.data),{dispatch:!0,virtual:!0});for(let m=0;m<h.size;++m){const _=h.get(m),p=d[m];for(let v=0;v<p.size;++v){const x=p.get(v),b=this.edgeGenerator(x,_);!b.source&&!b.target&&(b.source=x.getId(),b.target=_.getId()),b.id||(b.id=`${b.source}-${b.target}`),a.push(b)}}return e.addEdges(a,{virtual:!0})}).then(()=>{c=e.getEdges(a.map(m=>m.id));const g=c._indexes;this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);for(let m=0;m<c.size;m++)this.module.setTransformation(g[m],this,!1),this.module.setSubEdges(g[m],this.ogma.createEdgeList());this.context={virtualEdges:c,virtualNodes:h},e.removeNodes(this.context.virtualNodes.subtract(h),{virtual:!0}),e.removeEdges(this.context.virtualEdges.subtract(c),{virtual:!0}),h.setVisible(!0),c.setVisible(!0),this.module.animations.pushBefore(()=>{h.addClass(En),c.addClass(En)}),this.module.animations.push(()=>Promise.all([h.removeClass(En,i),c.removeClass(En,i)]))})}undo(t=!0){const{virtualNodes:e,virtualEdges:n}=this.context;if(!n||!e)return Promise.resolve(this.context);const i=t?this.animation:0,s=this.module.animations;t?(s.hideNodes(e._indexes),s.hideEdges(n._indexes),s.push(()=>Promise.all([e.addClass(En,i),n.addClass(En,i)]))):(e.setVisible(!1),n.setVisible(!1))}onRemove(){}cleanup(){const{virtualEdges:t,virtualNodes:e}=this.context;return t&&e&&(this.module.removeMetaNodes(e),this.module.removeMetaEdges(t),this.ogma.removeNodes(e,{virtual:!0}),this.ogma.removeEdges(t,{virtual:!0}),this.context.virtualEdges=this.ogma.edgeList(),this.context.virtualNodes=this.ogma.nodeList()),Promise.resolve()}setOptions(t){const{selector:e,neighborIdFunction:n,nodeGenerator:i,edgeGenerator:s}=t;return this.selector=e||this.selector,this.neighborIdFunction=n||this.neighborIdFunction,this.generateIds=r=>this.selector(r)&&this.neighborIdFunction(r)||null,this.nodeGenerator=i||this.nodeGenerator,this.edgeGenerator=s||this.edgeGenerator,super.setOptions(t)}resetContext(){super.resetContext(),this.context=ue(wt({},this.context),{virtualNodes:this.ogma.nodeList(),virtualEdges:this.ogma.edgeList()})}};function vZ(t){return Array.isArray(t)?t:t?[t]:null}function xZ(t,e){return t.size===e.size&&t.filter(n=>e.includes(n)).size>0}var bZ=class extends aa{constructor(t){super(t),this.selector=t.selector||eF,this.edgeGenerator=t.edgeGenerator||(()=>({}))}getName(){return pi.NodeCollapsing}resetContext(){this.context={hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),virtualEdges:this.ogma.edgeList()}}run(t=!0){const{ogma:e}=this,n=t?this.animation:0,i=e.getNodes().filter(this.selector),s=i.getAdjacentEdges(),r=[],o=i.map(l=>l.getAdjacentNodes().filter(d=>!this.selector(d)));for(let l=0;l<i.size;l++)for(let d=l;d<i.size;d++){const h=i.get(l),c=i.get(d);if(this.ogma.modules.graph.getEdgesBetweenTwoNodes(h,c).size>0&&(o[l].size||o[d].size)&&!xZ(o[l],o[d]))throw Error(`addNodeCollapsing: invalid connected nodes [${h.getId()}] and [${c.getId()}] to be collapsed. The addNodeCollapsing function supports only disconnected nodes.`)}const a=new Map;for(let l=0;l<i.size;++l){const d=i.get(l),h=o[l];for(let c=0;c<h.size-1;++c){const g=h.get(c),m=this.ogma.modules.graph.getEdgesBetweenTwoNodes(d,g);if(g!==d)for(let _=c+1;_<h.size;++_){const p=h.get(_),v=this.ogma.modules.graph.getEdgesBetweenTwoNodes(d,p),x=this.edgeGenerator(d,g,p,m,v);if(x){const b=hZ(x);for(let E=0;E<b.length;++E)r.push(EZ(e,b[E],E,d,g,p,m,v)),a.set(r[r.length-1].id,m.concat(v))}}}}return e.addEdges(r,{virtual:!0}).then(()=>{const l=this.ogma.getEdges(r.map(c=>c.id));this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);const d=l._indexes;for(let c=0;c<l.size;c++){this.module.setTransformation(d[c],this,!1);const g=a.get(l.get(c).getId());this.module.setSubEdges(d[c],g);for(let m=0;m<g.size;m++)this.module.setMetaEdge(g._indexes[m],l.get(c))}e.removeEdges(this.context.virtualEdges.subtract(l),{virtual:!0});const h=this.module.animations;l.setVisible(!0),h.pushBefore(()=>l.addClass(En)),h.push(()=>Promise.all([l.removeClass(En,n),i.addClass(En,n),s.addClass(En,n)])),h.hideNodes(i._indexes),h.hideEdges(s._indexes),this.context={hiddenEdges:s,hiddenNodes:i,virtualEdges:l}})}undo(t=!0){const{hiddenNodes:e,hiddenEdges:n,virtualEdges:i}=this.context,s=t?this.animation:0,r=this.module.animations;return e.setVisible(!0),n.setVisible(!0),t?(r.hideEdges(i._indexes),r.pushBefore(()=>Promise.all([e.addClass(En),n.addClass(En)])),r.push(()=>Promise.all([i.addClass(En,s),e.removeClass(En,s),n.removeClass(En,s)]))):i.setVisible(!1),Promise.resolve()}cleanup(){const t=this.context.virtualEdges||this.ogma.createEdgeList();return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>{this.resetContext()})}onRemove(t,e){e&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(n=>!t.has(n._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!t.has(n._index))}setOptions(t){return this.selector=t.selector||this.selector,this.edgeGenerator=t.edgeGenerator||this.edgeGenerator,super.setOptions(t)}};function EZ(t,e,n,i,s,r,o,a){let l,d;if(e.source!==void 0&&(l=t.getNode(e.source),l!==s&&l!==r))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid source [${e.source}]`,`expected to be [${s.getId()}] or [${r.getId()}]`].join("; "));if(e.target!==void 0&&(d=t.getNode(e.target),d!==s&&d!==r))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid target [${e.target}]`,`expected to be [${s.getId()}] or [${r.getId()}]`].join("; "));if(l&&d&&l===d)throw new Error(`addNodeCollapsing: edge generator produced RawEdge with same source and target [${l.getId()}]`);if(l&&!d)d=l===s?r:s;else if(d&&!l)l=d===s?r:s;else if(!l&&!d){let h=!0;for(let c=0;c<o.size;++c)o.get(c).getSource()===s&&(h=!1);for(let c=0;c<a.size;++c)a.get(c).getTarget()===r&&(h=!1);h?(l=r,d=s):(l=s,d=r)}return l&&d?ue(wt({},e),{id:`_gen_${i.getId()}_${l.getId()}_${d.getId()}_${n}`,source:l.getId(),target:d.getId()}):{}}var SZ=class extends aa{constructor(t){super(t),this.nodeSelector=t.nodeSelector||lx,this.edgeSelector=t.edgeSelector||lx,this.nodeDataFunction=t.nodeDataFunction||null,this.edgeDataFunction=t.edgeDataFunction||null}getName(){return pi.VirtualProperties}resetContext(){this.context={nodes:this.ogma.nodeList(),oldNodesData:[],edges:this.ogma.edgeList(),oldEdgesData:[]}}run(){const{ogma:t,context:e}=this;return this.nodeDataFunction&&(e.nodes=t.getNodes().filter(this.nodeSelector),e.oldNodesData=p2(e.nodes,this.nodeDataFunction,this.ogma)),this.edgeDataFunction&&(e.edges=t.getEdges().filter(this.edgeSelector),e.oldEdgesData=p2(e.edges,this.edgeDataFunction,this.ogma)),Promise.resolve()}undo(){const{nodes:t,oldNodesData:e,edges:n,oldEdgesData:i}=this.context,s=this.ogma.modules.data;return t&&s.setProperty(t,null,e,{dispatch:!0,virtual:!0}),n&&s.setProperty(n,null,i,{dispatch:!0,virtual:!0}),Promise.resolve()}onRemove(t,e){e&&(this.context.nodes=this.context.nodes.filter(n=>!t.has(n._index))),this.context.edges=this.context.edges.filter(n=>!t.has(n._index))}cleanup(){return this.resetContext(),Promise.resolve()}setOptions(t){return this.nodeSelector=t.nodeSelector||this.nodeSelector,this.edgeSelector=t.edgeSelector||this.edgeSelector,this.nodeDataFunction=t.nodeDataFunction||this.nodeDataFunction,this.edgeDataFunction=t.edgeDataFunction||this.edgeDataFunction,super.setOptions(t)}};function p2(t,e,n){const i=[],s=[];for(let r=0;r<t.size;++r){const o=t.get(r),a=o.getData(),l=e(o);s.push(Ia(a,l)),i.push(a)}return n.modules.data.setProperty(t,null,s,{dispatch:!0,virtual:!0}),i}var Nu=()=>"";function Wh(){return{}}var nF=class extends aa{constructor(t){super(t),this.nodeSelector=t.nodeSelector||Mu,this.nodeGroupIdFunction=t.nodeGroupIdFunction||Nu,this.nodeGenerator=t.nodeGenerator||Wh,this.edgeSelector=t.edgeSelector||Mu,this.edgeGroupIdFunction=t.edgeGroupIdFunction||Nu,this.edgeGenerator=t.edgeGenerator||Wh,this.separateEdgesByDirection=t.separateEdgesByDirection!==void 0&&t.separateEdgesByDirection,this.groupSelfLoopEdges=!!t.groupSelfLoopEdges,this.groupEdges=t.groupEdges===void 0||t.groupEdges,this.ogma.events.on("updateNodeData",({changes:e})=>this.checkChanges(e,!0)).on("updateEdgeData",({changes:e})=>this.checkChanges(e,!1))}computeNodeGroupId(t){if(this.nodeGroupIdFunction){if(!this.nodeSelector(t)||this.module.groupController.alreadyGrouped.has(t._index)||this.module.animations.hiddenNodes.has(t._index))return;const e=this.nodeGroupIdFunction(t);return e===void 0?void 0:e}}computeEdgeGroupId(t){if(this.edgeGroupIdFunction)return this.edgeSelector(t)&&!this.module.animations.hiddenEdges.has(t._index)?this.edgeGroupIdFunction(t):void 0}addMetaNodes(){const t=this.id,e=this.ogma,n=e.getNodes(),i=new Map;for(let d=0;d<n.size;++d){const h=n.get(d),c=this.computeNodeGroupId(h);if(c===void 0)continue;let g=i.get(c);g||(g={id:c,nodes:[]},i.set(c,g)),g.nodes.push(h)}const s=Array.from(i.values()),r=s.map(({nodes:d})=>e.getNodes(d)),o=[],a=[],{nodeDataUpdates:l}=this.context;for(let d=0;d<s.length;++d){const h=s[d].id,c=r[d],g=this.nodeGenerator(c,h,this);g?(g.id===void 0&&(g.id=Nm(h,t)),a.push(g.id),o.push(g)):(s.splice(d,1),r.splice(d,1),d--)}return e.addNodes(o.map(({id:d,attributes:h})=>({id:d,attributes:h})),{virtual:!0}).then(d=>{const h=e.getNodes(a),c=h.getData();for(let m=0;m<c.length;m++){const _=c[m],p=o[m];c[m]=Ia(Ia(_,p.data),l.get(h._indexes[m]))}e.modules.data.setProperty(h,null,c,{dispatch:!0,virtual:!0}),h.setVisible(!0);const g=h._indexes;this.context.metaNodes&&this.module.removeMetaNodes(this.context.metaNodes);for(let m=0;m<g.length;m++){const _=g[m],p=r[m];this.module.setSubNodes(_,p),this.module.setTransformation(_,this,!0);for(let v=0;v<p._indexes.length;v++)this.module.groupController.alreadyGrouped.add(p._indexes[v]),this.module.setMetaNode(p._indexes[v],h.get(m))}return{metaNodes:h,newNodes:d}})}addMetaEdges(t){const e=this.id,n=this.ogma;let i,s=!1;t?(i=this.module.getSubNodes(t).getAdjacentElements({bothExtremities:!1}).edges,s=!0):i=n.getEdges();const r=new Map,o=this.ogma.modules.graphics.getAttributesManager().getUsedEdgeAttributes().filter(m=>m!=="curvature"),a=new Map;for(let m=0;m<i.size;++m){const _=i.get(m),p=this.computeEdgeGroupId(_);if(p==null)continue;let v=_.getSource(),x=_.getTarget();if(s){let S=this.module.nodeToMeta.get(v._index);S&&S.getTransformation().getId()!==this.getId()&&(S=v);let A=this.module.nodeToMeta.get(x._index);if(A&&A.getTransformation().getId()!==this.getId()&&(A=x),v=S||v,x=A||x,v&&v===x){a.has(v._index)?a.get(v._index).push(_._index):a.set(v._index,[_._index]);continue}}const b=this.groupEdges?eZ(p,v.getId(),x.getId(),this.separateEdgesByDirection):String(_.getId());let E=r.get(b);E||(E={id:b,source:v,target:x,edges:[]},r.set(b,E)),E.edges.push(_)}const l=Array.from(r.values()),d=l.map(({edges:m})=>n.getEdges(m)),h=[],{edgeDataUpdates:c}=this.context,g=[];for(let m=0;m<l.length;++m){const _=l[m],p=_.id,v=d[m],x=this.groupEdges?this.edgeGenerator(v,p,this):QX(v,o);if(x){if(x.id===null)throw Error(`The id ${x.id} returned by the edgeGenerator function is not unique.`);x.id===void 0&&(x.id=Nm(p,e)),g.push(x.id),x.source=_.source.getId(),x.target=_.target.getId(),h.push(x)}}return n.addEdges(tZ(h),{virtual:!0}).then(()=>{const m=n.getEdges(g);m.setVisible(!1),m.setAttributes(h.map(v=>v.attributes));const _=m.getData();for(let v=0;v<_.length;v++){const x=h[v],b=_[v];_[v]=Ia(Ia(b,x.data),c.get(m._indexes[v]))}n.modules.data.setProperty(m,null,_,{dispatch:!0,virtual:!0}),this.context.metaEdges&&this.module.removeMetaEdges(this.context.metaEdges);const p=m._indexes;for(let v=0;v<p.length;v++){const x=d[v]._indexes,b=p[v];for(let E=0;E<x.length;E++)this.module.setMetaEdge(x[E],m.get(v));this.module.setSubEdges(b,d[v]),this.module.setTransformation(b,this,!1)}return{intraEdges:a,metaEdges:m}})}removeMetaEdges(t){t.forEach(e=>{const n=this.module.getSubEdges(e);if(!n)return;const i=n._indexes;for(let r=0;r<i.length;r++)this.module.clearMetaEdge(i[r]);this.module.clearSubEdges(e._index);const s=this.module.getMetaEdge(e);if(s){for(let r=0;r<i.length;r++)this.module.setMetaEdge(i[r],s);this.module.setSubEdges(s._index,this.module.getSubEdges(s).filter(r=>r!==e).concat(n))}n.filter(r=>r.getTarget().isVisible()&&r.getSource().isVisible()).setVisible(!0)}),t.setVisible(!1)}removeMetaNodes(t){t.forEach(e=>{const n=this.module.getSubNodes(e);if(!n)return;const i=n._indexes;for(const s of i)this.module.clearMetaNode(s);this.module.clearSubNodes(e._index),n.setVisible(!0)}),t.setVisible(!1)}onRemove(t,e){}checkChanges(t,e){const n=e?this.context.nodeDataUpdates:this.context.edgeDataUpdates,i=this.module;for(let s=0;s<t.length;s++){const{property:r,newValues:o,virtual:a,nodes:l,edges:d}=t[s];if(a)continue;const h=e?l.filter(c=>i.getTransformation(c._index,e)===this):d.filter(c=>i.getTransformation(c._index,e)===this);if(h.size)for(let c=0;c<h._indexes.length;c++){let g=n.get(h._indexes[c])||{};const m=o[c];r?Ud(g,r,m):g=m,n.set(h._indexes[c],g)}}}setOptions(t){return this.nodeSelector=t.nodeSelector||this.nodeSelector,this.nodeGroupIdFunction=t.nodeGroupIdFunction||this.nodeGroupIdFunction,this.nodeGenerator=t.nodeGenerator||this.nodeGenerator,this.edgeSelector=t.edgeSelector||this.edgeSelector,this.edgeGroupIdFunction=t.edgeGroupIdFunction||this.edgeGroupIdFunction,this.edgeGenerator=t.edgeGenerator||this.edgeGenerator,this.separateEdgesByDirection=t.separateEdgesByDirection!==void 0?!!t.separateEdgesByDirection:this.separateEdgesByDirection,this.groupSelfLoopEdges=t.groupSelfLoopEdges!==void 0?!!t.groupSelfLoopEdges:this.groupSelfLoopEdges,this.groupEdges=t.groupEdges!==void 0?!!t.groupEdges:this.groupEdges,super.setOptions(t)}resetContext(){super.resetContext(),this.context=ue(wt({},this.context),{nodeDataUpdates:new Map,edgeDataUpdates:new Map})}},iF=class extends nF{constructor({duration:t,easing:e,id:n,ogma:i,module:s,enabled:r,padding:o=2,onBeforeAddMetaEdges:a,selector:l=Mu,groupIdFunction:d=Nu,edgeGroupIdFunction:h=Nu,nodeGenerator:c=Wh,edgeGenerator:g=Wh,onGroupUpdate:m=()=>Promise.resolve(),separateEdgesByDirection:_=!1,groupSelfLoopEdges:p=!1,groupEdges:v=!0,restorePositions:x=!0,showContents:b=!1}){super({id:n,ogma:i,module:s,nodeSelector:l,nodeGroupIdFunction:d,edgeGroupIdFunction:h,nodeGenerator:c,edgeSelector:E=>!(!this.module.getMetaNode(E.getSource())&&!this.module.getMetaNode(E.getTarget())),edgeGenerator:g,separateEdgesByDirection:_,groupEdges:v,groupSelfLoopEdges:p,duration:t,easing:e,enabled:r}),this.onBeforeAddMetaEdges=a||(()=>Promise.resolve()),this.onGroupUpdate=m,this._padding=o,this._showContents=typeof b!="function"?()=>b:b,this._restorePositions=x}getName(){return pi.NodeGrouping}get padding(){return this._padding}set padding(t){this._padding=t,this.refresh()}resetContext(){super.resetContext(),this.context=ue(wt({},this.context),{metaNodes:this.ogma.nodeList(),metaEdges:this.ogma.edgeList(),subNodes:this.ogma.nodeList(),intraEdges:this.ogma.edgeList(),subNodesPerMetaNode:new Map,subEdges:this.ogma.edgeList()})}run(){let t,e;const n=this.ogma,i=this.module.groupController,s=i.layoutController;let r=n.createNodeList(),o=n.createEdgeList();const a=[];let l=n.createEdgeList();const d=new Map,h=-(this.getIndex()+1),c=new Set,g=[];let m;const _=n.geo.enabled();return this.addMetaNodes().then(({metaNodes:p,newNodes:v})=>{m=i.setPadding(p,this._padding),t=p;for(let x=0;x<v.size;x++)c.add(v._indexes[x]);for(let x=0;x<t.size;x++)i.nodeLayer.set(t._indexes[x],h);return this.onBeforeAddMetaEdges(t,v).then(()=>this.addMetaEdges(t))}).then(({intraEdges:p,metaEdges:v})=>{e=v,o=this.module.getSubEdges(e),e.filter(E=>E.getExtremities().map(S=>S.isVisible()).every(S=>S)).setVisible(!0);for(let E=0;E<e.size;E++)i.edgeLayer.set(e._indexes[E],h);o.setVisible(!1);const x=this.context.metaNodes.subtract(t),b=this.context.metaEdges.subtract(e);return this.module.removeMetaNodes(x),this.module.removeMetaEdges(b),i.cleanup(x,b),n.removeNodes(x,{virtual:!0}).then(()=>n.removeEdges(b,{virtual:!0})).then(()=>({intraEdges:p,metaEdges:v}))}).then(({intraEdges:p})=>{const v=t._indexes,x=[],b=t.getPosition();for(let E=0;E<v.length;E++){const S=t.get(E),A=i.isClose(S),T=!A&&!i.isOpen(S),P=i.collapsedGroups.has(S._index),k=this._showContents(S),I=this.module.getSubNodes(S),R=b[E],M=I._indexes,z=new Set;if(T){const{x:W,y:U}=i.getGroupXYR(S,this.module.getSubNodes(S),void 0,void 0);_?i.setGeoLatLng(S,U,W):(S.setAttributes({x:W,y:U},0),R.x=W,R.y=U)}d.set(v[E],z);const j=p.has(S._index)&&n.edgeList(p.get(S._index));j&&(l=l.concat(j),j.setVisible(k&&!P)),r=r.concat(I);for(let W=0;W<M.length;W++)z.add(M[W]);const X=this.context.subNodesPerMetaNode.get(v[E]),O=m.has(S._index);let N=!X||s.shouldRelayout.has(S._index);if(!N&&X)for(const W of X.keys())N||(N=!z.has(W));if(!N&&X)for(let W=0;W<M.length;W++)N||(N=!X.has(M[W]));if(N&&(s.shouldRelayout.add(S._index),x.push(this.getLayoutPromise(S,I,k))),k){if(A?i.expandGroup(S,I):i.addOpenGroup(S),N||O){g.push(S);const W=this.module.getMetaNode(S);W&&s.shouldRelayout.add(W._index)}}else i.closeGroup(S,I,R.x,R.y)}return this.module.animations.handleLayoutPromises(x).then(()=>{g.forEach(E=>i.setGroupXYR(E)),_&&this.ogma.modules.geo._updateNodesCoordinates(t)})}).then(()=>(this.context={metaNodes:t,metaEdges:e,subNodesPerMetaNode:d,subNodes:r,intraEdges:l,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:o},a))}undo(t=!0){super.undo(t);const{metaNodes:e,metaEdges:n,intraEdges:i,subNodes:s,subEdges:r}=this.context,o=this.module.animations,a=this.module.groupController,l=-(this.getIndex()+1);i.setVisible(!0),r.setVisible(!0),n.setVisible(!1),s.setVisible(!0),s.setAttribute("layer",l+1),e.setVisible(!1),t?(o.pushBefore(()=>{e.setVisible(!0),n.setVisible(!0)}),o.pushAfter(()=>{e.setVisible(!1),n.setVisible(!1)}),e.forEach(d=>{const h=this.module.getSubNodes(d);if(a.isClose(d))a.expandGroup(d,h,!0);else{const c=d.getPosition();a.closeGroup(d,h,c.x,c.y,!0)}})):e.forEach(d=>{a.restorePositions(d,this.module.getSubNodes(d))})}onRemove(t,e){if(e){const n=this.context.metaNodes.size;this.context.metaNodes=this.context.metaNodes.filter(s=>!t.has(s._index));const i=this.context.subNodes.size;this.context.subNodes=this.context.subNodes.filter(s=>!t.has(s._index)),(this.context.subNodes.size!==n||this.context.metaNodes.size!==i)&&this.context.subNodesPerMetaNode.clear()}else this.context.subEdges=this.context.subEdges.filter(n=>!t.has(n._index)),this.context.metaEdges=this.context.metaEdges.filter(n=>!t.has(n._index))}cleanup(){const{ogma:t}=this,e=this.context,{metaNodes:n,metaEdges:i,subNodes:s}=e;return this.module.removeMetaNodes(n),this.module.removeMetaEdges(i),this.module.groupController.cleanup(n,i,s),super.cleanup(),Promise.all([t.removeEdges(i,{virtual:!0}),t.removeNodes(n,{virtual:!0})]).then(()=>Promise.resolve())}setOptions({duration:t,easing:e,enabled:n,padding:i,selector:s,groupIdFunction:r,nodeGenerator:o,edgeGroupIdFunction:a,edgeGenerator:l,separateEdgesByDirection:d,groupSelfLoopEdges:h,groupEdges:c,restorePositions:g,showContents:m}){return this._padding=i!==void 0?i:this.padding,this._showContents=m!==void 0?typeof m!="function"?()=>m:m:this._showContents,this._restorePositions=g===void 0?this._restorePositions:g,super.setOptions({nodeSelector:s,nodeGroupIdFunction:r,nodeGenerator:o,edgeSelector:_=>!(!this.module.getMetaNode(_.getSource())&&!this.module.getMetaNode(_.getTarget())),edgeGroupIdFunction:a,edgeGenerator:l,separateEdgesByDirection:d,groupEdges:c,groupSelfLoopEdges:h,duration:t,easing:e,enabled:n})}getLayoutPromise(t,e,n){return(this.onGroupUpdate(t,e,n)||Promise.resolve()).then(i=>i?{subNodes:e,res:i}:null)}},wZ=class extends nF{constructor({duration:t,easing:e,id:n,ogma:i,module:s,enabled:r,selector:o=Mu,groupIdFunction:a=Nu,generator:l=Wh,separateEdgesByDirection:d=!1}){super({id:n,ogma:i,module:s,nodeSelector:null,nodeGroupIdFunction:null,nodeGenerator:null,edgeSelector:o,edgeGroupIdFunction:a,edgeGenerator:l,separateEdgesByDirection:d,groupEdges:!0,groupSelfLoopEdges:!0,duration:t,easing:e,enabled:r})}resetContext(){super.resetContext(),this.context=ue(wt({},this.context),{metaEdges:this.ogma.edgeList(),subEdges:this.ogma.edgeList()})}getName(){return pi.EdgeGrouping}run(){let t,e;const n=this.module.animations,i=new Set(this.context.metaEdges.getId());return this.addMetaEdges().then(({metaEdges:s})=>{t=s,e=this.module.getSubEdges(t),t.setVisible(!0),e.setVisible(!1),n.hideEdges(e._indexes);const r=t.concat(this.context.metaEdges).getParallelEdges().dedupe().filter(d=>!i.has(d.getId())),o=new Array(r.size),a=new Map;for(let d=0;d<r.size;d++)o[d]=this.ogma.modules.curvatureManager.computeCurvature(r.get(d),"visible"),a.set(r._indexes[d],o[d]);const l=this.module.getSubEdges(r);l.setVisible(!0),this.module.animations.setCurvatures(r._indexes,o);for(let d=0;d<l._indexes.length;d++)this.module.animations.setCurvature(e._indexes[d],a.get(this.module.getMetaEdge(e.get(d))._index)||0)}).then(()=>{this.context.metaEdges=t,this.context.subEdges=e})}undo(t=!0){super.undo(t);const{metaEdges:e,subEdges:n}=this.context;if(n.setVisible(!0),e.setVisible(!1),!t)return Promise.resolve();const i=n.getParallelEdges().dedupe(),s=new Array(i.size),r=new Map;for(let o=0;o<i.size;o++)s[o]=this.ogma.modules.curvatureManager.computeCurvature(i.get(o),"visible"),r.set(i._indexes[o],s[o]);return this.module.animations.setCurvatures(i._indexes,s),Promise.resolve()}onRemove(t,e){e||(this.context.subEdges=this.context.subEdges.filter(n=>!t.has(n._index)))}_getCurvatures(t){return t.map(e=>this.ogma.modules.curvatureManager.computeCurvature(e,"visible",()=>!0))}cleanup(){const{metaEdges:t}=this.context;return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>(this.context.metaEdges=this.ogma.edgeList(),this.context.subEdges=this.ogma.edgeList(),Promise.resolve()))}setOptions({duration:t,easing:e,enabled:n,selector:i,groupIdFunction:s,generator:r,separateEdgesByDirection:o}){return super.setOptions({nodeSelector:void 0,nodeGroupIdFunction:void 0,nodeGenerator:void 0,edgeSelector:i,edgeGroupIdFunction:s,edgeGenerator:r,separateEdgesByDirection:o,groupEdges:!0,duration:t,easing:e,enabled:n})}},_2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Ly=1,_d=8,AZ=class sF{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=i>>4;if(s!==Ly)throw new Error(`Got v${s} data when expected v${Ly}.`);const r=_2[15&i];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new sF(a,o,r,e)}constructor(e,n=64,i=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=_2.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${i}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,_d,e),this.coords=new this.ArrayType(this.data,_d+a+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(_d+o+a+l),this.ids=new this.IndexArrayType(this.data,_d,e),this.coords=new this.ArrayType(this.data,_d+a+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Ly<<4)+r]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=n,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ux(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,i,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:a}=this,l=[0,r.length-1,0],d=[];for(;l.length;){const h=l.pop()||0,c=l.pop()||0,g=l.pop()||0;if(c-g<=a){for(let v=g;v<=c;v++){const x=o[2*v],b=o[2*v+1];x>=e&&x<=i&&b>=n&&b<=s&&d.push(r[v])}continue}const m=g+c>>1,_=o[2*m],p=o[2*m+1];_>=e&&_<=i&&p>=n&&p<=s&&d.push(r[m]),(h===0?e<=_:n<=p)&&(l.push(g),l.push(m-1),l.push(1-h)),(h===0?i>=_:s>=p)&&(l.push(m+1),l.push(c),l.push(1-h))}return d}within(e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:r,nodeSize:o}=this,a=[0,s.length-1,0],l=[],d=i*i;for(;a.length;){const h=a.pop()||0,c=a.pop()||0,g=a.pop()||0;if(c-g<=o){for(let v=g;v<=c;v++)y2(r[2*v],r[2*v+1],e,n)<=d&&l.push(s[v]);continue}const m=g+c>>1,_=r[2*m],p=r[2*m+1];y2(_,p,e,n)<=d&&l.push(s[m]),(h===0?e-i<=_:n-i<=p)&&(a.push(g),a.push(m-1),a.push(1-h)),(h===0?e+i>=_:n+i>=p)&&(a.push(m+1),a.push(c),a.push(1-h))}return l}};function ux(t,e,n,i,s,r){if(s-i<=n)return;const o=i+s>>1;rF(t,e,o,i,s,r),ux(t,e,n,i,o-1,1-r),ux(t,e,n,o+1,s,1-r)}function rF(t,e,n,i,s,r){for(;s>i;){if(s-i>600){const d=s-i+1,h=n-i+1,c=Math.log(d),g=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*g*(d-g)/d)*(h-d/2<0?-1:1);rF(t,e,n,Math.max(i,Math.floor(n-h*g/d+m)),Math.min(s,Math.floor(n+(d-h)*g/d+m)),r)}const o=e[2*n+r];let a=i,l=s;for(yd(t,e,i,n),e[2*s+r]>o&&yd(t,e,i,s);a<l;){for(yd(t,e,a,l),a++,l--;e[2*a+r]<o;)a++;for(;e[2*l+r]>o;)l--}e[2*i+r]===o?yd(t,e,i,l):(l++,yd(t,e,l,s)),l<=n&&(i=l+1),n<=l&&(s=l-1)}}function yd(t,e,n,i){Py(t,n,i),Py(e,2*n,2*i),Py(e,2*n+1,2*i+1)}function Py(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function y2(t,e,n,i){const s=t-n,r=e-i;return s*s+r*r}var TZ=t=>t/360+.5,CZ=t=>{const e=Math.sin(t*Math.PI/180);return(t=.5-.25*Math.log((1+e)/(1-e))/Math.PI)<0?0:t>1?1:t},LZ=[],PZ=256,kZ=class extends iF{constructor(t){super(ue(wt({},t),{enabled:t.ogma.geo.enabled(),showContents:!1,selector:e=>{const n=this.getPosition(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&(!t.selector||t.selector(e))},groupIdFunction:e=>{let n=t.groupIdFunction?t.groupIdFunction(e):"geo-cluster";return n||(n="geo-cluster"),`${n}-${this.getNodeId(e)}`},edgeGroupIdFunction:e=>{let n=t.edgeGroupIdFunction?t.edgeGroupIdFunction(e):"";return n||(n=""),`${n}-${this.getNodeId(e.getSource())}-${this.getNodeId(e.getTarget())}`},nodeGenerator:(e,n,i)=>{let s=t.nodeGenerator?t.nodeGenerator(e,n,i):{};s||(s={});const r=this.getCoords(e.get(0));return s.data?s.data=ox(s.data,r):s.data=r,s}})),this._zoomLevels=t.zoomLevels?t.zoomLevels:[0,22],this._groupingRadius=t.radius===void 0?60:t.radius,this._generateIdFunction=t.groupIdFunction||(()=>""),this._shouldEnable=t.enabled,this._shouldRefreshClusters=!0,this.ogma.events.on("beforeGeoCameraMove",({zoom:e})=>{!this.isEnabled()||!this.ogma.geo.enabled()||this.getClosestZoomLevel(e).zoom===this._currentClusters.zoom||(this._shouldRefreshClusters=!1,this.refresh())}).on("geoDisabled",()=>{this.isEnabled()&&this.disable(0).then(()=>{this._shouldEnable=!0})}).on("geoEnabled",()=>{this._shouldEnable&&this.enable(0)})}getPosition(t){return{x:t.getData(this.ogma.modules.geo.latitudePath),y:t.getData(this.ogma.modules.geo.longitudePath)}}getMercatorPosition(t){return{x:TZ(t.getData(this.ogma.modules.geo.longitudePath)),y:CZ(t.getData(this.ogma.modules.geo.latitudePath))}}getNodeId(t){var e;return((e=this._currentClusters.idToCluster.get(t._index))==null?void 0:e.id)||""}getName(){return pi.GeoClustering}enable(t){return this.ogma&&!this.ogma.geo.enabled()?(this._shouldEnable=!0,Promise.resolve()):super.enable(t)}undo(t=!0){const{metaNodes:e,metaEdges:n,intraEdges:i,subNodes:s,subEdges:r}=this.context,o=-(this.getIndex()+1);return t?(i.setVisible(!0),r.setVisible(!0),n.setVisible(!1),s.setVisible(!0),s.setAttribute("layer",o+1),this.module.animations.push(()=>{n.filter(a=>a).setVisible(!1),e.filter(a=>a).setVisible(!1)}),Promise.resolve()):(e.setVisible(!1),n.setVisible(!1),s.setVisible(!0),r.setVisible(!0),i.setVisible(!0),Promise.resolve())}disable(t){return this._shouldEnable=!1,super.disable(t)}getCoords(t){var e;const n=((e=this._currentClusters.idToCluster.get(t._index))==null?void 0:e.center)||{x:0,y:0},i={};return this.setToPropertyPath(i,this.ogma.modules.geo.latitudePath,n.x),this.setToPropertyPath(i,this.ogma.modules.geo.longitudePath,n.y),i}setToPropertyPath(t,e,n){if(typeof e=="string")return this.setToPropertyPath(t,e.split("."),n);{let i=t;e.forEach((s,r)=>{r===e.length-1?i[s]=n:i[s]||(i[s]={}),i=i[s]})}}nodeToElement(t){return{nodeId:t._index,generatedId:this._generateIdFunction(t),nodes:this.ogma.nodeList(new Uint32Array([t._index])),radius:t.getAttribute("radius"),center:this.getPosition(t),mercatorCenter:this.getMercatorPosition(t),zoom:1/0}}getCluster(t){const e=t.reduce((s,r)=>({x:s.x+r.center.x/t.length,y:s.y+r.center.y/t.length}),{x:0,y:0}),n=t.reduce((s,r)=>({x:s.x+r.mercatorCenter.x/t.length,y:s.y+r.mercatorCenter.y/t.length}),{x:0,y:0}),i=t.reduce((s,r)=>{const o=e.x-r.center.x,a=e.y-r.center.y,l=r.radius+Math.sqrt(o*o+a*a);return Math.max(l,s)},0);return{nodes:this.ogma.nodeList(new Uint32Array(t.map(({nodeId:s})=>s))),generatedId:t[0].generatedId,center:e,mercatorCenter:n,radius:i}}onePassCluster(t){const e=t.map(r=>this.nodeToElement(r)),[n,i]=this._zoomLevels,s=[];for(let r=i;Math.abs(r-n)>.01;r-=1*(i-n)/19){const o=[],a=new AZ(e.length);e.forEach(l=>{a.add(l.mercatorCenter.x,l.mercatorCenter.y)}),a.finish(),e.forEach(l=>{if(l.zoom<=r)return;const d=this._groupingRadius/(PZ*Math.pow(2,l.zoom-1));let h=a.within(l.mercatorCenter.x,l.mercatorCenter.y,d).map(c=>e[c]).filter(c=>c.zoom>r&&c&&c.generatedId===l.generatedId);h.length||(h=[l]),h.forEach(c=>c.zoom=r),o.push(ue(wt({},this.getCluster(h)),{zoom:r,id:`${r.toFixed(2)}-${o.length}`}))}),s.push({zoom:r,clusters:o})}return s.map(({zoom:r,clusters:o})=>{const a=new Map;return o.forEach(l=>{l.nodes.forEach(({_index:d})=>a.set(d,l))}),{zoom:r,idToCluster:a}})}getClosestZoomLevel(t){return this._clustersByZoom.reduce((e,n)=>Math.abs(t-n.zoom)<Math.abs(t-e.zoom)?n:e)}run(){var t;this._shouldRefreshClusters&&(this._clustersByZoom=this.onePassCluster(this.ogma.getNodes().filter(c=>this.nodeSelector(c)))),this._shouldRefreshClusters=!0;const e=((t=this.ogma.geo.getMap())==null?void 0:t.getZoom())||0;let n,i;this._currentClusters=this.getClosestZoomLevel(e);const s=this.ogma,r=this.module.groupController;let o=s.createNodeList(),a=s.createEdgeList(),l=s.createEdgeList();const d=-(this.getIndex()+1),h=new Set;return this.addMetaNodes().then(({metaNodes:c,newNodes:g})=>{n=c;for(let m=0;m<g.size;m++)h.add(g._indexes[m]);for(let m=0;m<n.size;m++)r.nodeLayer.set(n._indexes[m],d);return this.addMetaEdges(n)}).then(({intraEdges:c,metaEdges:g})=>{i=g,a=this.module.getSubEdges(i),i.filter(p=>p.getExtremities().map(v=>v.isVisible()).every(v=>v)).setVisible(!0);for(let p=0;p<i.size;p++)r.edgeLayer.set(i._indexes[p],d);a.setVisible(!1);const m=this.context.metaNodes.subtract(n),_=this.context.metaEdges.subtract(i);return this.module.removeMetaNodes(m),this.module.removeMetaEdges(_),r.cleanup(m,_),s.removeNodes(m,{virtual:!0}).then(()=>s.removeEdges(_,{virtual:!0})).then(()=>({intraEdges:c,metaEdges:g}))}).then(({intraEdges:c})=>{const g=n._indexes;for(let m=0;m<g.length;m++){const _=n.get(m),p=this.module.getSubNodes(_),v=c.has(_._index)&&s.edgeList(c.get(_._index));v&&(l=l.concat(v),v.setVisible(!1)),o=o.concat(p),p.setVisible(!1)}return this.ogma.modules.geo._updateNodesCoordinates(n),this.ogma.modules.geo.updateProjection(),this.context={metaNodes:n,metaEdges:i,subNodes:o,intraEdges:l,subNodesPerMetaNode:new Map,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:a},LZ})}setOptions(t){const e=super.setOptions(ue(wt({},t),{selector:n=>{const i=this.getPosition(n);return i&&!isNaN(i.x)&&!isNaN(i.y)&&(!t.selector||t.selector(n))},groupIdFunction:n=>{let i=t.groupIdFunction?t.groupIdFunction(n):"geo-cluster";return i||(i="geo-cluster"),`${i}-${this.getNodeId(n)}`},nodeGenerator:(n,i,s)=>{let r=t.nodeGenerator?t.nodeGenerator(n,i,s):{};r||(r={});const o=this.getCoords(n.get(0));return r.data?r.data=ox(r.data,o):r.data=o,r},edgeGroupIdFunction:n=>{let i=t.edgeGroupIdFunction?t.edgeGroupIdFunction(n):"";return i||(i=""),`${i}-${this.getNodeId(n.getSource())}-${this.getNodeId(n.getTarget())}`}}));return this._groupingRadius=t.radius===void 0?this._groupingRadius:t.radius,this._generateIdFunction=t.groupIdFunction||this._generateIdFunction,this._shouldRefreshClusters=!0,this._shouldEnable=t.enabled,e}},v2=()=>({}),IZ=class extends aa{constructor(t){super(t),this._groupSelfLoopEdges=!1,this._isCleaningUp=!1,this._isRunning=!1,this.shouldDo=!0,this.enabled=!1,this._onBeforeAdd=e=>{if(this._isCleaningUp||!this.enabled||e.virtual)return;const{isNode:n,objects:i}=e;if(n){const s=i;x2(s,this._groupNodes(s))}else{const s=i;x2(s,this._groupEdges(s))}this._shouldSetVirtual=!0},this._onAfterAdd=e=>{this._shouldSetVirtual&&(this._shouldSetVirtual=!1,this._setVirtual(e.nodes||e.edges,!!e.nodes))},this._onRequestElementsToDelete=e=>{if(e.virtual)return;const{ogma:n,context:i}=this,s=e.elementsToRemove.isNode,r=s?n.getNodes:n.getEdges,o=s?i.metaNodesSet:i.metaEdgesSet,a=s?i.nodeGroups:i.edgeGroups,l=s?n.removeNodes:n.removeEdges,d=e.elementsToRemove.size,h=r(Array.from(o)),c=e.elementsToRemove.slice();if(e.elementsToRemove=e.elementsToRemove.subtract(h),e.elementsToRemove.size===d)return;const g=c.subtract(e.elementsToRemove);if(g.forEach(m=>{a.delete(m.getId())}),s){const m=g.getAdjacentEdges().filter(_=>_.isVirtual());n.removeEdges(m)}l(g,{virtual:!0})},this._nodeToGroupId=t.groupIdFunction||Nu,this._groupSelfLoopEdges=!!t.groupSelfLoopEdges,this._nodeGenerator=t.nodeGenerator||v2,this._edgeGenerator=t.edgeGenerator||v2,this._shouldSetVirtual=!1,this._selector=t.selector,this.shouldDo=t.enabled===void 0||!!t.enabled,this.ogma.events.on("preAddElements",this._onBeforeAdd).on("requestElementsToDelete",this._onRequestElementsToDelete).on(["postAddGraph","addNodes","addEdges"],this._onAfterAdd),this.shouldDo&&(this.enable(),this.shouldDo=!1)}getName(){return pi.NodeClustering}enable(){if(this.enabled)return Promise.resolve();this.enabled=!0,this.shouldDo=!0,this._isRunning=!0;const{ogma:t}=this;return t.getNodes().size?t.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(e=>(t.clearGraph(),t.setGraph(e))).then(()=>(this._isRunning=!1,Promise.resolve())):(this._isRunning=!1,Promise.resolve())}disable(){return this.enabled?(this.enabled=!1,this.shouldDo=!1,super.disable()):Promise.resolve()}destroy(){return this.disable(),super.destroy()}run(){const{ogma:t}=this;return this.enabled||!this.shouldDo?Promise.resolve():t.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(e=>(t.clearGraph(),t.setGraph(e)))}undo(){if(this._isRunning||this.enabled)return Promise.resolve();const{ogma:t,context:e}=this;this._isCleaningUp=!0;const n=t.getNodes(Array.from(e.metaNodesSet));this.module.removeMetaNodes(n);const i=t.getEdges(Array.from(e.metaEdgesSet));this.module.removeMetaEdges(i);const s=this._getSubNodes(),r=this._getSubEdges();return this.resetContext(),t.removeNodes(n,{virtual:!0}).then(()=>t.removeEdges(i,{virtual:!0})).then(()=>t.addNodes(s)).then(()=>t.addEdges(r)).then(()=>{this._isCleaningUp=!1,Promise.resolve()})}cleanup(){return this.ogma.events.off(this._onBeforeAdd).off(this._onRequestElementsToDelete).off(this._onAfterAdd),Promise.resolve()}resetContext(){this._isRunning||(this.context={nodeGroups:new Map,edgeGroups:new Map,metaNodesSet:new Set,metaEdgesSet:new Set,virtualNodes:this.ogma.createNodeList(),virtualEdges:this.ogma.createEdgeList(),nodeToGroupId:new Map})}getSubNodes(t){const e=this.context.nodeGroups.get(t.getId());return e?e.nodes:[]}getSubEdges(t){const e=this.context.edgeGroups.get(t.getId());return e?e.edges:[]}_getSubNodes(){return Array.from(this.context.nodeGroups.values()).reduce((t,{nodes:e})=>(t.push(...e),t),[])}_getSubEdges(){return Array.from(this.context.edgeGroups.values()).reduce((t,{edges:e})=>(t.push(...e),t),[])}_setVirtual(t,e){if(!t)return;const{context:n}=this,i=e?n.metaNodesSet:n.metaEdgesSet,s=t.filter(r=>i.has(r.getId()));if(e)for(let r=0;r<s.size;r++)this.module.setTransformation(s._indexes[r],this,e),this.module.setSubNodes(s._indexes[r],null);else for(let r=0;r<s.size;r++)this.module.setTransformation(s._indexes[r],this,e),this.module.setSubEdges(s._indexes[r],null);e?n.virtualNodes=n.virtualNodes.concat(s):n.virtualEdges=n.virtualEdges.concat(s)}setContext(){}_computeEdgeGroupId(t,e){return t>e?`${e}:${t}`:`${t}:${e}`}_groupEdges(t){const{ogma:e,id:n,context:i}=this,s=n,r=new Map,o=i.nodeToGroupId;i.edgeGroups.forEach(h=>{h.newEdges=[],r.set(h.id,h)});const a=[];for(let h=0;h<t.length;++h){const c=t[h];let g=i.nodeToGroupId.get(c.source),m=i.nodeToGroupId.get(c.target);if(!g&&!m){a.push(c);continue}g=g||c.source,m=m||c.target;const _=this._computeEdgeGroupId(g,m);if(_!==void 0){const p=o.get(c.source)||c.source,v=o.get(c.target)||c.target;let x=r.get(_);x||(x={id:_,source:p,target:v,edges:[],newEdges:[]},r.set(_,x)),x.edges.push(c),x.newEdges.push(c)}}const l=Rm(r),d=l.map(({edges:h})=>h);for(let h=0;h<l.length;++h){const c=l[h];if(!c.newEdges.length)continue;const g=c.id,m=d[h],_=this._edgeGenerator(m,g);_.id===void 0&&(_.id=Nm(g,s)),_.source=c.source,_.target=c.target,c.metaEdge=_,i.metaEdgesSet.add(_.id),i.edgeGroups.get(_.id)||i.edgeGroups.set(_.id,c),(this._groupSelfLoopEdges||_.source!==_.target)&&a.push(_)}return e.view.afterNextFrame().then(()=>{i.edgeGroups.forEach(({newEdges:h,metaEdge:c})=>{if(!(h.length&&c&&c.id&&c.attributes))return;const g=e.getEdge(c.id);g==null||g.setAttributes(c.attributes)})}),a}_groupNodes(t){const{id:e,context:n,ogma:i}=this,s=e,r=new Map;n.nodeGroups.forEach(c=>{c.newNodes=[],r.set(c.id,c)});const o=[];for(let c=0;c<t.length;c++){const g=t[c];if(this._selector&&!this._selector(g)){o.push(g);continue}g.id=nZ(g.id);const m=this._nodeToGroupId(g);if(m!==void 0){let _=r.get(m);_||(_={id:m,nodes:[],newNodes:[]},r.set(m,_)),_.nodes.push(g),_.newNodes.push(g)}else n.nodeToGroupId.set(g.id,g.id)}const a=Rm(r),l=a.map(({nodes:c})=>c),d=a.map(({newNodes:c})=>c),h=[];for(let c=0;c<a.length;++c){if(!a[c].newNodes.length)continue;const g=a[c].id,m=l[c],_=this._nodeGenerator(m,g);a[c].metaNode=_,_.id===void 0&&(_.id=Nm(g,s));for(const p of d[c])n.nodeToGroupId.set(p.id,_.id);n.metaNodesSet.add(_.id),n.nodeGroups.get(_.id)||n.nodeGroups.set(_.id,a[c]),h.push(_)}return h.push(...o),i.view.afterNextFrame().then(()=>{n.nodeGroups.forEach(({newNodes:c,metaNode:g})=>{if(!(c.length&&g&&g.id&&g.attributes))return;const m=i.getNode(g.id);m==null||m.setAttributes(g.attributes)})}),h}setOptions(t){return this._nodeToGroupId=t.groupIdFunction||this._nodeToGroupId,this._groupSelfLoopEdges=t.groupSelfLoopEdges!==void 0?!!t.groupSelfLoopEdges:this._groupSelfLoopEdges,this._nodeGenerator=t.nodeGenerator||this._nodeGenerator,this._edgeGenerator=t.edgeGenerator||this._edgeGenerator,this._selector=t.selector||this._selector,this.disable().then(()=>this.undo()).then(()=>this.ogma.view.afterNextFrame()).then(()=>this.enable())}onRemove(){}};function x2(t,e){const n=e.length;return t.length=n,t.splice(0,n,...e),t}function Pr(t){return t.enabled!==!1}var MZ=class extends uZ{_setOptions(t){const e=t;return e.ogma=this.ogma,e.module=this,e.id=this.transformations.length,e}addNodeGrouping(t={}){const e=new iF(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addEdgeGrouping(t={}){const e=new wZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addGeoClustering(t={}){const e=new kZ(this._setOptions(t));return this.addTransformation(e),e}addNodeFilter(t={}){let e={};e=typeof t=="function"?{criteria:t}:t;const n=new gZ(this._setOptions(e));return this.addTransformation(n,Pr(e)),n}addEdgeFilter(t={}){let e={};e=typeof t=="function"?{criteria:t}:t;const n=new fZ(this._setOptions(e));return this.addTransformation(n,Pr(e)),n}addNeighborMerging(t){const e=new mZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addNeighborGeneration(t){const e=new yZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addNodeCollapsing(t={}){const e=new bZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addVirtualProperties(t={}){const e=new SZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addNodeClustering(t={}){const e=new IZ(this._setOptions(t));return this.addTransformation(e,Pr(t)),e}addDrilldown(t={onGetSubgraph:()=>Promise.resolve({nodes:[],edges:[]})}){const e=new iZ(this._setOptions(t));return this.drilldownController.addDrilldown(e),e}onGroupsUpdated(t){this.groupController.onGroupsUpdate=t}layoutGroups(t,e,n=!1){return this.groupController.layoutGroups(t,e,n)}},NZ=class extends ee{constructor(t){super(t),this.getSubElements=e=>this.api.getSubElements(e),this.getSubNodes=e=>this.api.getSubNodes(e),this.getSubEdges=e=>this.api.getSubEdges(e),this.onGroupsUpdated=e=>this.api.onGroupsUpdated(e)}onMounted(){this._modules.classes.createClass({name:eM,isBuiltin:!0,nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this._modules.classes.createClass({name:nM,isBuiltin:!0,nodeAttributes:{opacity:0},edgeAttributes:{opacity:0}}),this._modules.settings.register("transformations.updateOnDataChange",!0),this._modules.events.register(["transformationEnabled","transformationDisabled","transformationSetIndex","transformationDestroyed","transformationRefresh"])}onReady(t){this.api=new MZ(this._ogma)}destroy(){}isElementVirtual(t){return this.api.isVirtual(t._index,t.isNode)}getElementTransformation(t){return this.api.getTransformation(t._index,t.isNode)}getMetaElements(t){return t.map(e=>this.getMetaElement(e))}getMetaElement(t){var e;const n=t.isNode?this.api.getMetaNode(t):this.api.getMetaEdge(t);return n&&((e=this.api.getTransformation(n._index,n.isNode))!=null&&e.isEnabled())?n:null}getMetaEdge(t){return this.getMetaElement(t)}getMetaNode(t){return this.getMetaElement(t)}getMetaNodes(t){return this.getMetaElements(t)}getMetaEdges(t){return this.getMetaElements(t)}getNodeFilters(){return this.api.getList().filter(t=>t.getName()===pi.NodeFilter)}getEdgeFilters(){return this.api.getList().filter(t=>t.getName()===pi.EdgeFilter)}whenApplied(){return this.api.afterNextUpdate()}afterNextUpdate(){return this.api.afterNextUpdate()}},b2={layer:iM,outline:!0,outerStroke:{color:zv,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:CN,minVisibleSize:0}},RZ={layer:iM,color:zv,text:{backgroundColor:CN,minVisibleSize:0},stroke:{color:zv,width:0}},FZ=class extends ee{onMounted(){this._modules.events.register(["nodesSelected","nodesUnselected","edgesSelected","edgesUnselected"]),this._selectionExtremityHighlightedClass=this._modules.classes.createClass({name:Ev,isBuiltin:!0,nodeAttributes:b2}),this._selectedClass=this._modules.classes.createClass({name:Xe,isBuiltin:!0,nodeAttributes:b2,edgeAttributes:RZ}),this._modules.events.on(`nodeClassAdded_${Xe}`,e=>{this._modules.events.fire("nodesSelected",e)}),this._modules.events.on(`edgeClassAdded_${Xe}`,e=>{this._modules.events.fire("edgesSelected",e)}),this._modules.events.on(`nodeClassRemoved_${Xe}`,e=>{this._modules.events.fire("nodesUnselected",e)}),this._modules.events.on(`edgeClassRemoved_${Xe}`,e=>{this._modules.events.fire("edgesUnselected",e)}),this._modules.settings.register("interactions.selection.enabled",!0),this._modules.settings.register("interactions.selection.multiSelectionKey","ctrl"),this._modules.interactions.onClick({priority:"selection",check:({button:e})=>{const n=!!this._modules.settings.get("interactions.selection.enabled");return e==="left"&&n},handler:({target:e})=>{if(e){const n=this._modules.settings.get("interactions.selection.multiSelectionKey"),i=n&&this._modules.keyboard.isPressed(n);e.isNode?this._selectedClass.clearEdges():this._selectedClass.clearNodes(),i?e.hasClass(Xe)?e.removeClass(Xe):e.addClass(Xe):((e.isNode?this._selectedClass.getNodes():this._selectedClass.getEdges()).filter(s=>s!==e).removeClass(Xe),e.hasClass(Xe)||e.addClass(Xe))}else this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}});const t=()=>{this._selectionExtremityHighlightedClass.clearNodes(),this._selectedClass.getEdges().getExtremities().addClass(Ev)};this._modules.events.on("beforeRemoveEdges",({edges:e})=>e.setSelected(!1)).on("excludedStateChange",({elements:e,value:n})=>{n||e.setSelected(!1)}).on(`edgeClassAdded_${Xe}`,t).on(`edgeClassRemoved_${Xe}`,t)}setNodeAttributes(t,e){this._selectedClass.update({nodeAttributes:t,fullOverwrite:e}),this._selectionExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}setEdgeAttributes(t,e){this._selectedClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}_updateExtremityHighlightLayer(){const t=this._selectedClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._selectionExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})}setActive(t,e){if(Qn(e)){const n=[],i=[];t.toList().forEach((s,r)=>{(e[r]?n:i).push(s.getId())}),n.length!==0&&this._modules.graph.getElements(t.isNode,n).addClass(Xe),i.length!==0&&this._modules.graph.getElements(t.isNode,i).removeClass(Xe)}else t.size&&t[e?"addClass":"removeClass"](Xe)}areActive(t){return t.hasClass(Xe)}getSelectedNodes(){return this._selectedClass.getNodes()}getSelectedEdges(){return this._selectedClass.getEdges()}getNonSelectedNodes(){return this._modules.graph.getNodes().filter(t=>!t.hasClass(Xe))}getNonSelectedEdges(){return this._modules.graph.getEdges().filter(t=>!t.hasClass(Xe))}clear(){this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}},OZ=class extends ee{onMounted(){this._delayedCalls=[],this._idIdle=()=>!this._modules.captor.isAnyButtonPressed()&&!this._modules.dom.isPlayingFrame(),this._modules.events.on(["mousedown","mouseup","beforeNewFrame","frame"],()=>{this._delayedCalls.forEach(t=>t.reset())})}_nextTimeIdle(t){const e=new DZ(this._modules.dom,this._idIdle,t);return this._delayedCalls.push(e),e.whenDone().then(()=>{this._delayedCalls.splice(this._delayedCalls.indexOf(e),1)})}debounceIdle(t,e=0){let n=!1,i=[];const s=()=>{const r=i;n=!1,i=[],t(),r.forEach(o=>o())};return()=>new Promise(r=>{i.push(r),n||(n=!0,this._nextTimeIdle(e).then(s))})}},DZ=class{constructor(t,e,n){this._timeout=null,this._done=!1,this._dom=t,this._promise=new Promise(i=>this._resolve=i),this._isIdle=e,this._delay=n,this._startTimeout()}_startTimeout(){this._timeout=this._dom.setTimeout(()=>{this._isIdle()?(this._done=!0,this._resolve()):this._startTimeout()},this._delay)}reset(){this._done||(this._dom.clearTimeout(this._timeout),this._startTimeout())}whenDone(){return this._promise}},Og=-2,zZ={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:50,startRatio:1,endRatio:2,enabled:!1},BZ={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:10,startRatio:1,endRatio:2,enabled:!1},UZ=class extends ee{constructor(){super(...arguments),this._nodePromiseMap=new Map,this._edgePromiseMap=new Map,this._onAttributeChange=({nodes:t,edges:e,nodeAttributes:n,edgeAttributes:i})=>{this._onElementsAttributeChange(t,n),this._onElementsAttributeChange(e,i,!1)},this._refreshPulses=()=>{const{nodes:t,edges:e}=this._hasPulses.getElements();if(t.size!==0||e.size!==0){const n=this._engine.getCurrentTime();this._refreshElementsPulses(t,n),this._refreshElementsPulses(e,n),this._modules.dom.refresh()}}}onMounted(){this._modules.events.on("updateAttributes",this._onAttributeChange).on("frame",this._refreshPulses).on("beforeRemoveEdges",({edges:t})=>{this._removePulses(t)}).on("beforeRemoveNodes",({nodes:t})=>{this._removePulses(t)}).on("excludedStateChange",({elements:t,value:e})=>{e&&(this._hasPulses.removeElements(t),this._removePulses(t))}).on("clearGraph",()=>this._hasPulses.clear()),this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._nodePulses=this._modules.graph.createNodeAttribute({storage:"any"},!1),this._edgePulses=this._modules.graph.createEdgeAttribute({storage:"any"},!1),this._nodeNbPulsesRemaining=this._modules.graph.createNodeAttribute({storage:"int16",default:-1},!1),this._edgeNbPulsesRemaining=this._modules.graph.createEdgeAttribute({storage:"int16",default:-1},!1),this._nodeFlexArrays=this._modules.graphics.getNodeAttributes(),this._edgeFlexArrays=this._modules.graphics.getEdgeAttributes(),this._edgeSourceList=this._modules.graph.getEdgeAttribute("source"),this._edgeTargetList=this._modules.graph.getEdgeAttribute("target"),this._hasPulses=new gc(this._modules.graph)}_onElementsAttributeChange(t,e,n=!0){if(!e.includes("pulse.enabled"))return;const{valid:i,invalid:s}=kI(this._modules.graph,t,o=>o.getAttribute("pulse.enabled")&&o.isVisible());this._hasPulses.removeElements(s),this._hasPulses.addElements(i);const r=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let o=0;o<i.size;o++)r.get(i._indexes[o])>0||r.set(i._indexes[o],Og);this._removePulses(s)}_removePulses(t){const e=t.isNode?this._nodePulses:this._edgePulses,n=t.isNode?this._nodePromiseMap:this._edgePromiseMap;for(let i=0;i<t._indexes.length;i++){const s=t._indexes[i],r=e.get(s);if(r){for(let a=0;a<r.length;a++){const l=r[a];this._modules.graphics.releaseGraphicsEngineBlockId(l.blockId)}e.set(s,null);const o=n.get(s);o&&(o.resolve(),n.delete(s))}}}_refreshElementsPulses(t,e){const n=t.isNode,i=n?this._nodePulses:this._edgePulses,s=n?this._nodeFlexArrays.pulse.duration:this._edgeFlexArrays.pulse.duration,r=n?"_createNodePulseBlock":"_createEdgePulseBlock",o=n?this._nodeFlexArrays.pulse.interval:this._edgeFlexArrays.pulse.interval,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let l=0;l<t._indexes.length;l++){const d=t._indexes[l];let h=i.get(d);h||(h=[],i.set(d,h));for(let p=0;p<h.length;p++){const{startTime:v,duration:x,blockId:b}=h[p];e>=v+x&&(this._modules.graphics.releaseGraphicsEngineBlockId(b),h.splice(p--,1))}const c=h[h.length-1];if(c&&e<c.startTime+o.get(d))continue;const g=s.get(d),m=a.get(d);if(m<1&&m!==Og)continue;h.push({blockId:this[r](d,e,g),startTime:e,duration:g});const _=m===Og?Og:m-1;a.set(d,_)}}_createNodePulseBlock(t,e,n){const i=this._nodeFlexArrays,s=i.color.get(t),r=i.layer.get(t),o=i.x.get(t),a=i.y.get(t),l=i.radius.get(t),d=i.scalingMethod.get(t)==="scaled",h=i.pulse.startRatio.get(t),c=i.pulse.endRatio.get(t),g=i.pulse.width.get(t),m=2*l*h,_=2*l*c,p=$h(r).nodeBody,v=i.pulse.startColor.get(t),x=i.pulse.endColor.get(t),b=this._modules.graphics.allocateGraphicsEngineBlockId(),E=this._group.reset(zs,!0,p),S=E.nextAndReset(),A=Hs(v,s),T=Hs(x,s);return S.end.shape="circle",S.end.pieceId=As,S.end.x1=o,S.end.y1=a,S.end.x2=o,S.end.y2=a,S.end.rectWidthOrSourceRadiusScaled=d?_:0,S.end.rectHeightOrTargetRadiusScaled=d?_:0,S.end.rectWidthOrSourceRadiusFixed=d?0:_,S.end.rectHeightOrTargetRadiusFixed=d?0:_,S.end.strokeWidthFixed=g,S.end.strokeColor=T,S.start.shape="circle",S.start.pieceId=As,S.start.x1=o,S.start.y1=a,S.start.x2=o,S.start.y2=a,S.start.rectWidthOrSourceRadiusScaled=d?m:0,S.start.rectHeightOrTargetRadiusScaled=d?m:0,S.start.rectWidthOrSourceRadiusFixed=d?0:m,S.start.rectHeightOrTargetRadiusFixed=d?0:m,S.start.strokeWidthFixed=g,S.start.strokeColor=A,S.animation.duration=n,S.animation.beginTime=e,this._engine.storeGroup(b,E),b}_createEdgePulseBlock(t,e,n){const i=this._edgeFlexArrays,s=this._nodeFlexArrays,r=i.pulse.startRatio.get(t),o=i.pulse.endRatio.get(t),a=i.pulse.startColor.get(t),l=i.pulse.endColor.get(t),d=$h(i.layer.get(t)).edgeBody,h=this._edgeSourceList.get(t),c=this._edgeTargetList.get(t),g=i.curvature.get(t),m=g!==0,_=this._modules.graphics.allocateGraphicsEngineBlockId(),p=this._group.reset(m?Tm:zs,!0,d),v=p.nextAndReset(),x={isSelfLoop:h===c,curvature:g,sourceX:s.x.get(h),sourceY:s.y.get(h),targetX:s.x.get(c),targetY:s.y.get(c),sourceRadius:s.radius.get(h),targetRadius:s.radius.get(c),isSourceRadiusScaled:s.scalingMethod.get(h)==="scaled",isTargetRadiusScaled:s.scalingMethod.get(c)==="scaled",width:i.width.get(t),isWidthScaled:i.scalingMethod.get(t)==="scaled",strokeWidth:i.pulse.width.get(t)};return E2(v.start,x),E2(v.end,x),v.start.strokeColor=a,v.end.strokeColor=l,v.start.thicknessOrFontSizeScaled*=r,v.start.thicknessOrFontSizeFixed*=r,v.end.thicknessOrFontSizeScaled*=o,v.end.thicknessOrFontSizeFixed*=o,v.animation.duration=n,v.animation.beginTime=e,this._engine.storeGroup(_,p),_}pulse(t,e){const n=t.isNode,i=wt(wt(wt({},n?zZ:BZ),n?this._nodePulseTheme:this._edgePulseTheme),e),s=i.number,r=i.interval,o=i.duration,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining,l=(s-1)*r+o;let d;i.enabled=!0,delete i.number,t.setAttributes({pulse:i}),a.setMultiple(t._indexes,s),this._modules.dom.setTimeout(()=>{t.isList?t.filter(Gs).setAttribute("pulse.enabled",!1):t.setAttribute("pulse.enabled",!1),a.setMultiple(t._indexes,-1)},l);const h=new Promise(g=>{d=()=>g(t)}),c=t.isNode?this._nodePromiseMap:this._edgePromiseMap;return t.isList?t._indexes.forEach(g=>{this._setPromise(g,c,h,d)}):this._setPromise(t._index,c,h,d),h}_setPromise(t,e,n,i){e.has(t)&&e.get(t).resolve(),e.set(t,{promise:n,resolve:i})}setTheme(t,e){this._nodePulseTheme=t,this._edgePulseTheme=e}};function E2(t,{sourceX:e,sourceY:n,targetX:i,targetY:s,isSourceRadiusScaled:r,isTargetRadiusScaled:o,targetRadius:a,sourceRadius:l,isWidthScaled:d,width:h,strokeWidth:c,curvature:g,isSelfLoop:m}){t.pieceId=Cp,t.shape="line",t.x1=e,t.y1=n,t.x2=i,t.y2=s,t.rectWidthOrSourceRadiusScaled=r?l:0,t.rectWidthOrSourceRadiusFixed=r?0:l,t.rectHeightOrTargetRadiusScaled=o?a:0,t.rectHeightOrTargetRadiusFixed=o?0:a,t.thicknessOrFontSizeScaled=d?h:0,t.thicknessOrFontSizeFixed=d?0:h,t.strokeWidthFixed=c,t.curvature=g,t.isSelfLoop=m}var $Z={duration:0,easing:"linear",callback:he,resolve:he,startAfter:0},jZ=0,GZ=class extends ee{constructor(){super(...arguments),this._animationList=[],this._update=()=>{if(this._animationList.length===0)return;const t=ci(),e=[];for(let n=0;n<this._animationList.length;++n){const i=this._animationList[n],s=(t-i.creationDate)/i.duration,r=i.startAfter;let o=i.easing(s);s>=1?(i.func(1),i.done=!0,i.resolve(void 0),this._animationList.splice(n,1),n-=1,e.push(i.callback)):o>=r&&(o=(o-r)*(1/(1-r)),i.func(o))}for(let n=0;n<e.length;n++)e[n](!1);this._modules.dom.refresh()}}onMounted(){this._modules.events.on("beforeNewFrame",this._update)}play(t,e){const{duration:n,easing:i,callback:s,startAfter:r,resolve:o}=rs(e,$Z);if(n<=0)return t(1),s(),o(void 0),null;const a={func:t,easing:typeof i=="function"?i:E1[i],duration:n,callback:s,resolve:o,startAfter:r,creationDate:ci(),done:!1,id:++jZ};return this._animationList.push(a),this._modules.dom.refresh(),a}cancel(t){const e=this._animationList.indexOf(t);e!==-1&&(t.func(1),this._animationList.splice(e,1),t.done=!0,t.resolve(void 0))}},VZ=(t,e,n,i)=>{const s=n._getMapPanePos(),r=t.getMapboxMap(),o=t.getCanvas(),a=t.getSize().round(),l=i.DomUtil.getPosition(t.getContainer()),d=l.x+s.x,h=l.y+s.y;return new Promise(c=>{function g(){e.drawImage(o,d,h,a.x,a.y),c()}if(r.loaded())return g();r.once("idle",g)})},HZ=(t,e,n,i,s)=>{const r=n._getMapPanePos(),o=t.getContainer();if(!o)throw new Error(`Trying to access the container of ${t} but it does not exist.`);const a=i.DomUtil.getPosition(o);n.removeLayer(t),t.options.crossOrigin="anonymous";const l=[],d=[];return t.on("tileload",({tile:h})=>{const{x:c,y:g}=i.DomUtil.getPosition(h);l.push(h),d.push({x:c-a.x+r.x,y:g-a.y+r.y})}),n.addLayer(t),new Promise(h=>{t.once("load",()=>{const c=t.getTileSize();l.forEach((g,m)=>{const{x:_,y:p}=d[m];e.drawImage(g,_,p,c.x,c.y)}),h()})})},WZ=(t,e,n,i,s,r)=>new Promise(o=>{const a=t.options.renderer;n.removeLayer(t),t.options.renderer=r,n.addLayer(t),r._updatePaths();const l=n._getMapPanePos(),d=r._container,h=i.DomUtil.getPosition(d);e.drawImage(r._container,h.x+l.x,h.y+l.y,d.width/s,d.height/s),n.removeLayer(t),t.options.renderer=a,n.addLayer(t),o()}),XZ=(t,e,n,i,s)=>new Promise(r=>{const o=n.getPixelBounds().min,a=n.project(t.getLatLng(),n.getZoom()),l=/^data:/.test(t._icon.src),d=l?t._icon.src:oF(t._icon.src),h=new Image,c=t.options.icon;if(c){const g=c.options;let m=g.iconSize||[24,24];const _=a.subtract(o);let p=g.iconAnchor||[0,0];Array.isArray(m)||(m=[m.x,m.y]),Array.isArray(p)||(p=[p.x,p.y]);const v=Math.round(_.x-(m[0]-p[0])*s),x=Math.round(_.y-p[1]*s);h.crossOrigin="";const b=()=>{e.drawImage(h,v,x,m[0]*s,m[1]*s),r()};h.onload=b,h.src=d,l&&b()}}),ZZ=(t,e,n,i,s)=>new Promise(r=>{n.removeLayer(t),t.setUrl(oF(t.getUrl())),t.options.crossOrigin="anonymous",t.once("load",()=>{const o=t.getBounds(),a=n.latLngToContainerPoint(o.getNorthWest()),l=n.latLngToContainerPoint(o.getSouthEast()),d=l.x-a.x,h=l.y-a.y;e.drawImage(t._image,a.x,a.y,d,h),r()}),n.addLayer(t)});function oF(t){return t+(t.indexOf("?")===-1?"?":"&")+"noCache="+Date.now()}var YZ={tileLayers:HZ,imageOverlays:ZZ,vectorLayers:WZ,markers:XZ,vectorMap:VZ};function qZ(t,e){return t instanceof e.TileLayer?"tileLayers":t instanceof e.ImageOverlay?"imageOverlays":t instanceof e.Path?"vectorLayers":t instanceof e.Marker?"markers":"MapboxGL"in e&&t instanceof e.MapboxGL?"vectorMap":void 0}function JZ(t,e,n,i,s,r){const o={vectorMap:[],tileLayers:[],vectorLayers:[],imageOverlays:[],markers:[]};return e.eachLayer(a=>{if(a!==t){const l=qZ(a,i);if(l&&l in o){const d=YZ[l];o[l].push(()=>d(a,n,e,i,s,r))}}}),o}function KZ(t){t.TileLayer.prototype.getUrl=function(){return this._url},t.ImageOverlay.prototype.getUrl=function(){return this._url};const e="leaflet-zoom-animated";t.OgmaOverlay||(t.OgmaOverlay=t.Layer.extend({options:{pane:"overlayPane",padding:0,onUpdate:()=>{}},initialize:function(n){const{container:i}=n;t.Util.setOptions(this,n),this._container=i},setLocked:function(n){return this._locked=n,this},onAdd:function(n){this._map=n,this.getPane().appendChild(this._container),this._wgsOrigin=t.latLng([0,0]),this._wgsInitialShift=n.project(this._wgsOrigin,this._initialZoom),t.DomUtil.addClass(this._container,"leaflet-layer"),this._zoomAnimated&&(t.DomUtil.addClass(this._container,e),this._container.style.position="absolute",this._container.style.zIndex=9999),this._initialZoom=(this._map.getMaxZoom()+this._map.getMinZoom())/2,this._mapInitialZoom=this._map.getZoom(),this._updateBounds(),this._update({})},_updateBounds(){const n=this.options.padding,i=this._map.getSize(),s=this._map.containerPointToLayerPoint(i.multiplyBy(-n));this._bounds=new t.Bounds(s,s.add(i.multiplyBy(1+2*n))),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()},_update(n){this._updateBounds(),this._redraw(this._bounds.min,n),this._positionTimer=t.Util.requestAnimFrame(()=>{this._container&&t.DomUtil.setPosition(this._container,this._bounds.min)})},_redraw(n,i){this.options.onUpdate()},_updateTransform(n,i){if(this._locked)return;const s=this._map.getZoomScale(i,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,i),a=r.multiplyBy(-s).add(o).subtract(this._map._getNewPixelOrigin(n,i));t.Browser.any3d?t.DomUtil.setTransform(this._container,a,s):t.DomUtil.setPosition(this._container,a)},_onZoom(n){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onMoveEnd(n){this._update(n)},_onAnimZoom({center:n,zoom:i}){this._updateTransform(n,i)},bringToFront(){t.DomUtil.toFront(this._container)},getEvents(){return{zoom:this._onZoom,moveend:this._onMoveEnd,zoomanim:this._onAnimZoom,layeradd:this.bringToFront,zoomend:this.options.onUpdate}},onRemove:function(){t.DomUtil.removeClass(this._container,e);const n=this._container;["transform","webkitTransform","OTransform","MozTransform","msTransform","zIndex","position"].forEach(i=>n.style[i]=null),t.Util.cancelAnimFrame(this._positionTimer),this._container=null}}))}function QZ(t,e,n,i){const s=t.filter(T=>T.isVisible()),r=s.size===0,{mapX:o,mapY:a}=s.reduce((T,P)=>{const{latitude:k,longitude:I}=P.getGeoCoordinates(),{x:R,y:M}=i(k,I);return T.mapX.push(R),T.mapY.push(M),T},{mapX:[],mapY:[]}),l=s.getAttribute("x"),d=s.getAttribute("y"),h=s.getAttribute("radius").map(Number),c=new Ai({xValues:l,yValues:d,scaledSizeValues:h}),g=new Ai({xValues:o,yValues:a});r&&(c.cx=c.cy=0,c.width=c.height=0),isFinite(g.width)&&isFinite(g.height)||(g.cx=g.cy=0,g.width=g.height=0);let m=g.cx-c.cx,_=g.cy-c.cy;const p=r?1:Math.max(g.width,g.height)/Math.max(c.width,c.height),[v,x]=h.reduce((T,P)=>(T[0]=Math.min(T[0],P*p),T[1]=Math.max(T[1],P*p),T),[1/0,0]);g.pad(x),g.minScaledSize=v,g.maxScaledSize=x;const b=n.computeConfigForBounds(g),E=e.zoom/Q5(b.zoom);m+=(c.cx-e.x)*E,_+=(c.cy-e.y)*E;const S=c.cx+m,A=c.cy+_;return{offsetChanges:{name:"graph-to-geo",nodeAttributes:{radius:T=>Number(T.getAttribute("radius"))*E,x:T=>(T.getAttribute("x")+m-S)*E+S,y:T=>(T.getAttribute("y")+_-A)*E+A},edgeAttributes:{width:T=>Number(T.getAttribute("width"))*E}},camera:wt({zoom:e.zoom/E,x:(e.x+m-S)*E+S,y:(e.y+_-A)*E+A,angle:0},e.getSize())}}function t7(t,e,n,i){const s=t.getAttributes(["x","y","radius"]),r=t.getBoundingBox(),o=t.size===0,a=t.reduce((S,{_index:A},T)=>(S[A]=T,S),{});i();const l=t.getAttribute("x"),d=t.getAttribute("y"),h=t.getAttribute("radius"),c=new Ai({xValues:l,yValues:d,scaledSizeValues:h.map(S=>2*S)});o&&(r.reset(),c.reset());let g=c.cx-r.cx,m=c.cy-r.cy,_=0,p=0;const v=n.computeConfigForBounds(c),x=e.zoom/v.zoom;let b,E;return isNaN(r.cx)||isNaN(r.cy)?(r.cx=e.x,r.cy=e.y,b=v.x,E=v.y):(g+=(r.cx-e.x)*x,m+=(r.cy-e.y)*x,_=r.cx+g,p=r.cy+m,b=(e.x+g-_)*x+_,E=(e.y+m-p)*x+p),{offsetChanges:{name:"geo-to-graph",nodeAttributes:{x:S=>(s[a[S._index]].x+g-_)*x+_,y:S=>(s[a[S._index]].y+m-p)*x+p}},camera:wt({zoom:v.zoom,x:b,y:E,angle:0},e.getSize())}}var aF={"top-left":"left","bottom-left":"left","top-right":"right","bottom-right":"right"},e7={"top-left":"top","bottom-left":"bottom","top-right":"top","bottom-right":"bottom"},S2={position:"bottom-right",horizontalMargin:0,verticalMargin:0,className:void 0},n7=class extends ee{onMounted(){this._brand=null}set(t,e){let{position:n,horizontalMargin:i,verticalMargin:s,className:r}=wt(wt({},S2),e);aF[n]||(n=S2.position),this.remove();const o=document.createElement("div");return o.innerHTML=t,o.style.position="absolute",lF(o,n,i,s),o.style.padding="0px 0px 0px 0px",o.style.zIndex="10",r&&o.setAttribute("class",r),this._brand=o,this._modules.dom.setLayer("brand",this._brand),o}remove(){this._modules.dom.setLayer("brand",null),this._brand=null}};function lF(t,e,n,i){const s=n===void 0?"":n+"px",r=i===void 0?"":i+"px";t.style[aF[e]]=s,t.style[e7[e]]=r}var w2={},i7=class extends ee{constructor(){super(...arguments),this._enabled=!1,this._settings=wt({},Aa),this._edgesOriginalTextStyle={},this._nodesOriginalTextStyle={},this._nodeDraggingSetting=!1,this._transition=!1,this._attribution=null,this._updating=!1,this._updateRate=50,this._x=0,this._y=0,this._onCameraUpdate=e=>{if(this.L&&this._enabled&&this._map&&this._map._loaded){const n=this._x-this._modules.camera.x,i=this._y-this._modules.camera.y;(n||i)&&this._syncMapWithCamera()}},this._syncMapWithCamera=()=>{if(!this._map)return;this._updating||(this._updating=!0,this._layer.setLocked(!0),this._map._moveStart(!0,!1));const e=this._fromPointToLatLng(this._modules.camera.x,this._modules.camera.y),n=Q_(this._modules.camera.zoom),i=this.L.latLng(e.latitude,e.longitude);this._map._move(i,n,{pinch:!0,round:!1}),clearTimeout(this._updateRequest),this._updateRequest=this._modules.dom.setTimeout(()=>{this._updating=!1,this._layer.setLocked(!1),this._map&&this._map._move(i,n,{pinch:!0})._moveEnd(!0)},this._updateRate)},this._onNodesDragStart=()=>{this._enabled&&(this._setMapDragging(!1),this._nodeDragOffsetX=this._nodeDragOffsetY=0)},this._onNodesDragged=({nodes:e,dx:n,dy:i})=>{if(this._enabled){const s=e.map(r=>{const{x:o,y:a}=r.getAttributes(["x","y"]);return this._fromPointToLatLng(o+n-this._nodeDragOffsetX,a+i-this._nodeDragOffsetY)});return this._nodeDragOffsetX=n,this._nodeDragOffsetY=i,e.setGeoCoordinates(s)}return Promise.resolve(this._modules.graph.nodeList())},this._onMapUpdate=()=>{if(!this._map)return Promise.resolve(void 0);const{lat:e,lng:n}=this._map.getCenter(),i=this._fromLatLngToPoint(e,n);this._x=i.x,this._y=i.y;const s=K5(this._map.getZoom());return this._modules.events.fire("beforeGeoCameraMove",{zoom:this._map.getZoom()}),this._modules.camera.setView({zoom:s,x:i.x,y:i.y},{ignoreZoomLimits:!0}).then(()=>this._adjustMinvisibleSizes())},this.runLayout=e=>Ha(this,[e],function*({type:n,nodes:i,latitudePath:s=ar,longitudePath:r=lr,options:o,center:a}){const l=mj(a),d=l([a.longitude,a.latitude]),h=i.getPosition(),c=[];return i.setAttributes(i.map(g=>{const m=g.getData(s),_=g.getData(r);if(isNaN(m)||isNaN(_))return{x:d[0],y:d[1]};const p=l([_,m]);return{x:p[0],y:p[1]}})).then(()=>this._ogma.layouts[n](ue(wt({},o),{nodes:i,dryRun:!0}))).then(g=>{const m=g.positions.current,_=new Array(m.length),p=new Array(m.length);return m.forEach((v,x)=>{const b=l.invert([v.x,v.y]);_[x]=b[1],p[x]=b[0],c.push({latitude:b[1],longitude:b[0]})}),i.setData(s,_),i.setData(r,p),i.setAttributes(h)}).then(()=>this._ogma.modules.geo._updateNodesCoordinates(i)).then(()=>c)})}onMounted(){this._modules.events.register(["geoEnabled","beforeGeoDisabled","geoDisabled","geoNodesMoved","geoLoaded","geoReady"]),aA()&&(this.L=Ss("L")||Ss("leaflet"),this.L&&KZ(this.L)),this._modules.graph.createNodeAttribute({name:"geo.prevLat",storage:"float"},!0),this._modules.graph.createNodeAttribute({name:q_,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:ar,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:lr,storage:"float"},!0),this._modules.events.register(["beforeGeoCameraMove"]),this._modules.events.on("addNodes",e=>{e.virtual||this._refreshOrAddNodes(e.nodes,!0)}).on("updateNodeData",e=>{this._onDataChange(e.changes)}).on("nodesDragProgress",this._onNodesDragged).on(["nodesDragStart","lassoEnabled"],this._onNodesDragStart).on(["nodesDragEnd","lassoDisabled"],()=>this._setMapDragging(!0)).on("viewChanged",this._onCameraUpdate)}_onDataChange(e){const n=ev(this.latitudePath),i=ev(this.longitudePath),s=e.filter(({virtual:o,property:a,newValues:l})=>!(o||!l.length)&&(a&&typeof a!="string"?a.find(d=>n.startsWith(d)||i.startsWith(d)):a===null||n.startsWith(a)||i.startsWith(a)));if(!s.length)return;const r=hj(s);r&&(this._modules.events.fire("geoNodesMoved",{nodes:r}),this._refreshOrAddNodes(r,!1))}_refreshOrAddNodes(e,n){n&&this._updatePrevNodesCoordinates(e),this._updateNodesCoordinates(e),this._enabled&&(this._cacheOriginalTextStyles(e,null),this._filter.refresh())}_updatePrevNodesCoordinates(e){og(this._modules.graph,e,ar,Vw),og(this._modules.graph,e,lr,q_)}_restorePrevNodesCoordinates(e){og(this._modules.graph,e,Vw,ar),og(this._modules.graph,e,q_,lr)}_updateNodesCoordinates(e){lj(this._modules.graph,e,this._settings)}_createMapTileLayer(e,n){if(e&&!An(e))return e;const i=e,s=i.wms?this.L.tileLayer.wms:this.L.tileLayer,r=tj(i,n)||"";return s(i.url,wt({attribution:r},e))}_setupTileLayer(e,n,i){const s=this._createMapTileLayer(e,n);return s.once("load",()=>{this._modules.events.fire("geoLoaded")}),s.addTo(this._map),oA(s,i),s}_onSettingsChanged(e,n){const i=e.wrapCoordinates!==n.wrapCoordinates,s=e.latitudePath!==n.latitudePath||e.longitudePath!==n.longitudePath;if(i||s){let r=Promise.resolve();this._enabled&&this._filter&&(r=r.then(()=>this._filter.refresh())),r.then(()=>this._updateNodesCoordinates(this._modules.graph.getNodes("all")))}this._enabled&&(ij(e,n)&&this._map&&(this._map.removeLayer(this._tileLayer),this._tileLayer=this._setupTileLayer(n.tiles,n.attribution,n.opacity)),e.sizeRatio!==n.sizeRatio&&this._updateSizes(),e.maxZoomLevel!==n.maxZoomLevel&&this._modules.settings.update({minZoom:1,maxZoom:Math.pow(2,n.maxZoomLevel)}),e.disableNodeDragging!==n.disableNodeDragging&&this._setDragging(!n.disableNodeDragging),e.attributionOptions!==n.attributionOptions&&this._setAttributionOptions(n.attributionOptions,n.attribution),oA(this._tileLayer,n.opacity))}_setMapDragging(e){if(this._map){const n=e?"enable":"disable";this._map.dragging[n]()}}_fromLatLngToPoint(e,n){return this._map.options.crs.latLngToPoint(this.L.latLng(e,n),mm)}_fromPointToLatLng(e,n){const{lat:i,lng:s}=this._map.options.crs.pointToLatLng(this.L.point({x:e,y:n}),mm);return{latitude:i,longitude:s}}_updateSizes(){this._enabled&&this._projection&&this._projection.updateAll()}enable(e){return this.setEnabled(!0,e)}getMap(){return this._enabled?this._map:null}getOptions(){return this._enabled?ue(wt({},this._settings),{tiles:An(this._settings.tiles)?wt({},this._settings.tiles):this._settings.tiles}):wt({},Aa)}setOptions(e){if(!this._enabled||this._transition)return;ej(e,this.L);const n=this._settings;this._settings=ue(wt(wt(wt({},Aa),n),e),{tiles:nj(Aa,e)}),this._onSettingsChanged(n,this._settings)}disable(e){return this.setEnabled(!1,e)}isEnabled(){return this._enabled}toggle(e={}){return this.setEnabled(!this._enabled,e)}getContainerCoords(e){return e.getGeoCoordinates().map(({latitude:n,longitude:i})=>this._map.latLngToContainerPoint([n,i]))}getContainerCoord(e){const{latitude:n,longitude:i}=e.getGeoCoordinates();return this._map.latLngToContainerPoint([n||0,i||0])}setEnabled(e,n){if(!aA())throw new Error("Ogma Geo cannot be used outside a browser");if(!this.L)throw new Error("You are trying to use Geo mode but Leaflet has not been found. Please follow our migration guide: https://bit.ly/2SYkF8A");if(this._transition||e===this._enabled)return Promise.resolve();const i=this._modules.settings;this._enabled||(this._prevSettings=i.get(),this._nodeDraggingSetting=!!i.get("interactions.drag.enabled")),this._enabled=e,this.setOptions(n),this._transition=!0;const s=this._settings;return e?this._show().then(()=>(this._registerTextStyle(this._modules.graph.getNodes(),this._modules.graph.getEdges()),this._setDragging(!s.disableNodeDragging),this._transition=!1,this._updating=!1,this._modules.events.fire("geoEnabled").fire("geoReady"),this._adjustMinvisibleSizes())):this._restoreTextStyle().then(()=>this._hide()).then(()=>{this._transition=!1,this._modules.events.fire("geoDisabled"),this._setDragging(this._nodeDraggingSetting,!0)}).then(()=>this._ogma.view.afterNextFrame())}destroy(){return this._enabled&&this._destroyMapSync(),Promise.resolve()}_cacheOriginalTextStyles(e,n){n&&(this._edgesOriginalTextStyle=uA(n,this._edgesOriginalTextStyle)),e&&(this._nodesOriginalTextStyle=cj(e,this._nodesOriginalTextStyle))}_registerTextStyle(e,n){this._cacheOriginalTextStyles(e,n);const{nodeAttributes:i,edgeAttributes:s}=this._modules.hover.getHoverClassDefinition();this._hoverEdgesOriginalTextStyle=s||null,this._hoverNodesOriginalTextStyle=i||null,this._modules.hover.updateEdgeAttributes({text:{size:r=>(this._edgesOriginalTextStyle[r.getId()]||w2)["text.size"]}}),this._modules.hover.updateNodeAttributes({text:{size:r=>(this._nodesOriginalTextStyle[r.getId()]||w2)["text.size"]}})}_restoreTextStyle(){return this._modules.hover.updateEdgeAttributes(this._hoverEdgesOriginalTextStyle,!0),this._modules.hover.updateNodeAttributes(this._hoverNodesOriginalTextStyle,!0),Promise.all([fj(this._modules.graph.getEdges(),this._edgesOriginalTextStyle)]).then(()=>(this._edgesOriginalTextStyle=uA(this._modules.graph.edgeList(),{}),this._nodesOriginalTextStyle={},this._edgesOriginalTextStyle={},Promise.resolve()))}_setDragging(e,n=!1){this._modules.settings.update({interactions:{drag:{enabled:e,applyResult:n}}})}_setAttributionOptions(e,n){if(this._map){if(this._attribution&&(this._attribution.remove(),this._attribution=null),this._attribution=this.L.control.attribution({prefix:!1}).addTo(this._map),An(e)){this._attribution.setPrefix(""),e.position=e.position||"bottom-right";const i=e.position.replace("-","");this._attribution.setPosition(i);const s=this._attribution.getContainer();s&&(e.className&&this.L.DomUtil.addClass(s,e.className),lF(s,e.position||"bottom-right",e.horizontalMargin,e.verticalMargin))}n!=null&&this._attribution.addAttribution(n)}}_nodeIsVisible(e){return uj(e,this._settings,this._hasCustomProjection())}_updateSettingsForMap(){const e=this._modules.graphics.getGraphicsEngine().parseColor(this._settings.backgroundColor);e[3]=0,this._modules.settings.update({backgroundColor:cM(e),minZoom:1e-6,interactions:{rotation:{enabled:!1},drag:{enabled:!1},pan:{enabled:!1},zoom:{enabled:!1,onDoubleClick:!1}},mouse:{wheelEnabled:!1}})}getGraphPosition(e){const n=this.L.latLngBounds(oj(e));return{center:e.size>0?n.getCenter():this.L.latLng([0,0]),zoom:this._clampZoom(this._map.getBoundsZoom(n))}}_initMap(){this._updateSettingsForMap(),this._mapContainer=rj(this._modules.dom.getContainer());const e=ue(wt({},y5),{minZoom:this._settings.minZoomLevel,maxZoom:this._settings.maxZoomLevel});this._hasCustomProjection()&&(e.crs=this._settings.crs,e.worldCopyJump=!1,e.maxBoundsViscosity=0),this._map=new this.L.Map(this._mapContainer,e),this._map.on("movestart zoomstart",()=>{this._updating=!0}).on("moveend zoomend",()=>{this._updating=!1}),this._setAttributionOptions(this._settings.attributionOptions,this._settings.attribution),this._setupLayers()}_clampZoom(e){let n=this._tileLayer.options.maxZoom;return n===void 0&&(n=1/0),Math.min(e,n)}_show(){let e;return this._initMap(),this._filter?e=this.filter.enable(0):(this._filter=this._modules.transformations.api.addNodeFilter({criteria:n=>this._nodeIsVisible(n)}),this._filter.setIndex(0),e=this._filter.whenApplied()),e.then(()=>{const n=this._map,i=this._modules.graph.getNodes(),s=this._modules.graph.getEdges(),{center:r,zoom:o}=this.getGraphPosition(i),{offset:a,newCameraView:l}=this._transformToGeo();return this._modules.camera.setView(l,{ignoreZoomLimits:!0}).then(()=>(this._updatePrevNodesCoordinates(i),n.setView(r,o,{animate:!1}),this._modules.graphics.animate({nodes:i,edges:s},()=>{this._projection=this._createFinalPositionLayer()},!0,this._settings.duration))).then(()=>a.destroy())})}updateProjection(){var e;(e=this._projection)==null||e.update()}_hasCustomProjection(){return this._settings.crs!=null}_setupLayers(){this._settings.tiles&&(this._tileLayer=this._setupTileLayer(this._settings.tiles,this._settings.attribution,this._settings.opacity)),this._layer=new this.L.OgmaOverlay({container:this._modules.graphics.getDomElement(),mapContainer:this._mapContainer,onUpdate:()=>this._onMapUpdate()}),this._layer.addTo(this._map)}_adjustMinvisibleSizes(){return Promise.all([gj(this._modules.graph.getEdges(),this._edgesOriginalTextStyle,this._map.getZoom())])}_hide(){if(!this._map)return Promise.resolve();this._modules.settings.update(this._prevSettings);const e=this._map;e.removeLayer(this._layer);const n=this._modules.dom.getContainer(),i=this._modules.graphics.getDomElement();n&&n.appendChild(i),e.getContainer().style.zIndex="0";const s=this._modules.graph.getNodes("all"),r=this._modules.graph.getEdges("all"),{offset:o,newCameraView:a}=this._transformToGraph();return this._modules.camera.setView(a||{}).then(()=>(this._modules.events.fire("beforeGeoDisabled"),Promise.all([bI(e.getContainer(),1,0,this._settings.duration/2).then(()=>this._destroyMapSync()),this._modules.graphics.animate({nodes:s,edges:r},()=>o&&o.destroy(),!0,this._settings.duration)]))).then(()=>(this._map=null,this._filter.disable(0).then(()=>{})))}_destroyMapSync(){if(this._map){this._layer&&this._layer._map&&this._map.removeLayer(this._layer),this._map.remove(),this._map._animatingZoom=!1,this._map=null;const e=this._mapContainer.parentNode;e&&e.removeChild(this._mapContainer)}}_transformToGeo(){const e=this._modules.graph.getNodes(),{offsetChanges:n,camera:i}=QZ(e,this._modules.camera,this._modules.locate,(s,r)=>this._fromLatLngToPoint(s,r));return{offset:this._addGraphAttributesLayer(n),newCameraView:i}}_addGraphAttributesLayer(e){return this._modules.graphics.addAttributeLayer(wt({priority:Mj,nodeSelector:n=>n.isVisible(),edgeSelector:n=>n.isVisible()},e))}_transformToGraph(){const e=this._modules.graph.getNodes("all"),{offsetChanges:n,camera:i}=t7(e,this._modules.camera,this._modules.locate,()=>{this._projection&&(this._projection.destroy(),this._projection=null)});return{offset:this._addGraphAttributesLayer(n),newCameraView:i}}getPointFromLatLng(e){const{latitude:n,longitude:i}=e.getGeoCoordinates();return n==null?e.getAttributes(["x","y"]):this._fromLatLngToPoint(n,i)}_createFinalPositionLayer(){return this._addGraphAttributesLayer({name:"graph-2-geo-animation",nodeAttributes:{scalingMethod:"fixed",radius:e=>Number(e.getAttribute("radius"))*this._settings.sizeRatio,x:e=>this.getPointFromLatLng(e).x,y:e=>this.getPointFromLatLng(e).y},edgeAttributes:{scalingMethod:"fixed",width:e=>Number(e.getAttribute("width"))*this._settings.sizeRatio}})}setCenter(e,n){return this._enabled?this.setView(e,n,Q_(this._modules.camera.getZoom())):Promise.resolve()}setZoom(e){return this._enabled&&this._map?(e=this._clampZoom(e),this._map.setZoom(e),new Promise(n=>{const i=this._map;if(i.getZoom()===e)return n(void 0);i.once("moveend zoomend",n)}).then(this._onMapUpdate)):Promise.resolve()}zoomIn(){return this.setZoom(this.getZoom()+1)}zoomOut(){return this.setZoom(this.getZoom()-1)}setView(e,n,i){if(!this._enabled||!this._map)return Promise.resolve();const s=this._map;i=this._clampZoom(i);const r=this.L.latLng([e,n]);return s.setView(r,i,{animate:!1,reset:!0}),new Promise(o=>{if(s.getZoom()===i&&s.getCenter().equals(r))return o(void 0);s.once("moveend zoomend",o)}).then(this._onMapUpdate)}getView(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{zoom:this._map.getZoom(),latitude:e.lat,longitude:e.lng}}getCenter(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{latitude:e.lat,longitude:e.lng}}getZoom(){if(this._enabled&&this._map)return this._map.getZoom()}resetCoordinates(){if(!this._enabled||!this._projection)return;const e=this._modules.graph.getNodes();this._restorePrevNodesCoordinates(this._modules.graph.getNodes());const n=this._modules.graph.getNodeAttribute(ar).getMultiple(e._indexes),i=this._modules.graph.getNodeAttribute(lr).getMultiple(e._indexes);e.setData(this._settings.latitudePath,n),e.setData(this._settings.longitudePath,i),this._projection.update()}getUnprojectedCoordinates(e){this._projection&&this._projection.destroy();const n=e.getPosition();return this._projection=this._createFinalPositionLayer(),n}get latitudePath(){return this._settings.latitudePath}get longitudePath(){return this._settings.longitudePath}get filter(){return this._filter}exportBackground(e){if(!this._map)return Promise.reject("Map is not ready");const{pixelRatio:n,width:i,height:s,zoom:r,x:o,y:a}=e,l=i*n,d=s*n,h=ei(l,d),c=h.getContext("2d"),g=this._map;if(!c)throw new Error(`Unable to get 2d context from  ${h}`);const m=this.getView(),_=wt({zoom:Math.round(Q_(r*n))},this._fromPointToLatLng(o,a)),p=new this.L.Canvas;g.addLayer(p);const{vectorMap:v,tileLayers:x,vectorLayers:b,imageOverlays:E,markers:S}=JZ(this._layer,g,c,this.L,n,p),A=g.options.zoomSnap;return Promise.resolve().then(()=>(qa(this._mapContainer,l+"px",d+"px"),g.invalidateSize({animate:!1}),this.setView(_.latitude,_.longitude,_.zoom))).then(()=>Kk([...v,...x,...E,...b,...S])).then(()=>{qa(this._mapContainer,"100%","100%"),g.invalidateSize({animate:!1}),g.options.zoomSnap=A,this.setView(m.latitude,m.longitude,m.zoom)}).then(()=>new Promise(T=>this.L.Util.requestAnimFrame(T))).then(()=>g.removeLayer(p)).then(()=>h)}},s7=class extends ee{constructor(){super(...arguments),this._context={edgesAlwaysCurvy:!1,directedEdges:!1}}onMounted(){this._attributeLayer=this._addAttributeLayer(),this._modules.settings.register("edgesAlwaysCurvy",!1,t=>{this._context.edgesAlwaysCurvy=t,this._attributeLayer.updateAll()}),this._modules.settings.register("directedEdges",!1,t=>{this._context.directedEdges=t,this._attributeLayer.updateAll()})}computeCurvature(t,e="visible",n){const{edgesAlwaysCurvy:i,directedEdges:s}=this._context,r=t.getSource()===t.getTarget();if(!i&&t.hasParallelEdges()===!1&&!r)return 0;let o=t.getParallelEdges({filter:e});n&&(o=o.filter(d=>n(d)));const a=o.indexOf(t);if(a===-1)return 0;let l;if(r)l=(a+1)*Math.max(+t.getAttribute("width")||0,1);else{const d=t.getSource(),h=o.size;if(h===1&&!i)return 0;if(s){let c=0;for(let g=0;g<a;++g)o.get(g).getSource()===d&&(c+=1);l=c+1}else{const c=d!==o.get(0).getSource();l=h%2!=1||i?(1+(a/2|0))*(a%2==0?1:-1)*(c?-1:1):a===0?0:((a+1)/2|0)*(a%2==0?1:-1)*(c?-1:1)}}return l}_addAttributeLayer(){return this._modules.graphics.addAttributeLayer({name:"curvature",priority:Lj,edgeDependencies:{parallelEdges:!0},edgeContext:this._context,edgeAttributes:{curvature:t=>this.computeCurvature(t)}})}},uF="worker_start",dF="worker_configure",z1="worker_update",Ja="worker_stop",hF=class extends dc{constructor(t,e){super(),this._complete=!1,this._destroyed=!1,this._data=null,this._onStart=he,this._onStop=he,this._setIdle=he,this._onPause=he,this.timer={start:0,steps:0},this._modules=e,this.configure(t)}configure({configure:t=Gs,update:e=he,context:n=he,stop:i=he,isRunning:s=lm,onStart:r=he,onStop:o=he,onPause:a=he,setIdle:l=he}){this._configure=t,this._update=e,this._createContext=n,this._isRunning=s,this._stop=i,this._onStart=r,this._onStop=o,this._setIdle=l,this._onPause=a}setData(t){this._data=t}getData(){return this._data}start(t){this._complete=!1,this._onStart(),this.fire(uF,{target:this});const e=this._configure(t,this._modules);return this.fire(dF,e),this.send(e),this}stop(t){return this._complete||(this._onStop(),this.send({type:Ja}),this._complete=!0),this}pause(){this._onPause()}setIdle(t){this._setIdle(t)}isBusy(){return!this._complete}destroy(){this._destroyed||(this._destroyed=!0,this._modules&&(this.stop(),delete this._modules))}},cF=/^function\s*\(/,gF=/^\(|^\w+\s?=>/;function Dg(t){const e=t.toString();return e.indexOf("function")===0||gF.test(e)?e:`function ${e}`}var r7=class extends hF{constructor(t,e){super(t,e);const n=Dg(this._createContext),i=Dg(this._update),s=Dg(this._isRunning),r=Dg(this._stop),o=`
      ${o7(t.imports)}
      const __CONTEXT = (${n})();
      const __UPDATE_FUNC = ${i} ;
      const __IS_RUNNING_FUNC = ${s};
      const __STOP_FN = ${r};
      let result;

      self.addEventListener("message", function (evt) {
        if (evt.data && evt.data.type === '${Ja}') {
          __STOP_FN(__CONTEXT);
          return self.postMessage({ result, isRunning: false });
        }
        result = __UPDATE_FUNC(evt.data, __CONTEXT);
        const isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);

        self.postMessage({ result, isRunning });
      });
    `;this._worker=mN(o),this._worker.addEventListener("message",a=>{e.dom.isDestroyed()||this.onWorkerMessage(a)})}onWorkerMessage(t){const e=t.data.isRunning,n=t.data.result,i={data:void 0};return this.fire(z1,{worker:this,workerMessage:n,modules:this._modules,data:i,isRunning:e}),e?this.send(i.data):(this.fire(Ja,{worker:this,result:n,modules:this._modules}),this.stop(n))}destroy(){super.destroy(),this._worker.terminate()}send(t){return this._complete||this._worker.postMessage(fN(t)),this}};function o7(t={}){const e=Object.keys(t),n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i],o=t[r];if(typeof o!="function")throw new Error(`Asynchronous worker: dependency "${r}" is not found`);{const a=a7(o);a?(n.push(A2(o,r)),a!==r&&n.push(`var ${r} = ${a};`)):n.push(`var ${r} = ${A2(o,r)};`)}}return n.join(`
`)}function A2(t,e){const n=t.toString();return cF.test(n)?`function ${t.name||e} ${n.substring(n.indexOf("("))}`:gF.test(n)?`const ${t.name||e} = ${n.toString()}`:n}function a7(t){const e=t.toString();return t.name?t.name:cF.test(e)?null:e.substring(9,e.indexOf("(")).trim()}var l7=class extends hF{constructor(t,e){super(t,e),this._context=this._createContext()}sync(t){if(t&&t.type===Ja)return this._stop(this._context);const e=this._update(t,this._context),n=this._isRunning(this._context,t),i={data:void 0};return this.fire(z1,{worker:this,workerMessage:e,modules:this._modules,data:i,isRunning:n}),n?this.send(i.data):(this.fire(Ja,{worker:this,result:e,modules:this._modules}),this.stop(e))}send(t){return this._complete||this._modules.dom.setTimeout(()=>this.sync(t),0),this}},u7=class extends ee{constructor(){super(...arguments),this._pool={}}create(t,e){const n=e&&gN,i=this._modules,s=`${t.name||"worker"}-${n?"async":"sync"}`;let r=this._pool[s];r||(r=this._pool[s]=[]);let o=r.find(a=>!a.isBusy());return o?o.configure(t):(o=n?new r7(t,i):new l7(t,i),this._pool[s].push(o)),o.on(Ja,()=>{o.clearEvents(),this._pool[s].length<2||(o.destroy(),this._pool[s]=this._pool[s].filter(a=>a!==o))}),o}start(t,e){return t.start(e)}run(t,e,n){const i=this.create(t,n);return this.start(i,e)}destroy(){for(const t in this._pool)this._pool[t].forEach(e=>e.destroy()),delete this._pool[t]}},d7=16,dx="cubicOut",zg={duration:300,easing:dx,skipTextDrawing:!0,useWebWorker:!0,locate:!1},h7=class extends ee{constructor(){super(...arguments),this._running=[],this._textsHidden=!1,this.onInteractionStart=()=>{this.setWorkersIdle(!0)},this.onViewChanged=()=>{this.setWorkersIdle(!1)},this.onVisibilityChange=()=>{qr().hidden?this.setWorkersIdle(!0):this.setWorkersIdle(!1)},this._onWorkerUpdate=(t,e,n,i,s,r)=>{const{duration:o,onSync:a,onUpdate:l,dryRun:d,locate:h}=r;if(a&&this._modules.dom.setTimeout(()=>a(n,this._modules,i),o),s){const c=s(n,this._modules,i);this._modules.events.fire("layoutComputed",{type:"layoutComputed",name:e,positions:c}),l&&l(n,c,i);const g=this._assignNodePositions(c,o,d,r.easing);i||(h&&c&&this._animateCamera(c,h,r.duration),g.then(()=>t.fire("taskComplete",c)))}else i||t.fire("taskComplete",n)},this._onWorkerComplete=(t,e,n,i,s,r,o)=>{for(let c=0;c<this._running.length;c++)if(this._running[c]===t){this._running.splice(c,1);break}i.onStop&&e&&i.onStop(s,e,this._modules);const a=this._modules.graph.nodeList(new Uint32Array(o.indexes)),l=s.dryRun&&e?n:this.collectNodesData(a),d=a.getId(),h={before:ky(o),current:ky(l)};this._modules.events.fire("layoutEnd",{type:"layoutEnd",name:i.name,positions:h,ids:d}),this._modules.dom.setTimeout(()=>{s.onEnd&&s.onEnd(e),s.skipTextDrawing&&this._textsHidden&&(this._modules.graphics.showTexts(),this._textsHidden=!1),r({name:i.name,positions:h,ids:d})})},this._onWorkerStart=(t,e,n)=>{e.skipTextDrawing&&!this._textsHidden&&(this._modules.graphics.hideTexts(),this._textsHidden=!0);const i=this._modules.graph.getNodes(e.nodes),s=this.collectNodesData(i),r=s.ids;n.setData(s),this._modules.events.fire("layoutStart",{type:"layoutStart",name:t.name,ids:r,worker:n})}}onMounted(){this._layouts={},this.timers=new Map,this._modules.events.register(["layoutGetData","layoutPrepare","layoutStart","layoutEnd","layoutComputed"]),this._modules.events.on("clearGraph",()=>this.stop()).on(["dragStart","zoomStart"],this.onInteractionStart).on(["dragEnd","viewChanged"],this.onViewChanged),this._modules.dom.addDocumentEventListener("visibilitychange",this.onVisibilityChange)}setWorkersIdle(t){this._running.forEach(e=>e.setIdle(t))}register(t){if(this._layouts[t.name])throw new Error(`Layout ${t.name} already exists`);this._layouts[t.name]=t}getAvailableLayouts(){return Object.keys(this._layouts)}start(t,e={}){const n=this._layouts[t];this._modules.events.fire("layoutPrepare",{name:t,params:e});const i=YR(this._modules.graph,e,["radial","grid"].indexOf(t)===-1);return new Promise(s=>{if(!n)throw new Error(`layout ${t} does not exist`);i.duration=typeof i.duration=="number"?i.duration:zg.duration;const r=n.onSync;i.skipTextDrawing=i.skipTextDrawing===void 0?!!zg.skipTextDrawing:!!i.skipTextDrawing;let o=i.locate||zg.locate;o&&typeof o=="boolean"&&(o={}),i.locate=o;const a={name:t,update:n.update,isRunning:n.isRunning,configure:n.configure,context:n.context,imports:n.imports,stop:n.stop,setIdle:n.setIdle};this._modules.graphics.forceAttributesComputation();const l=i.useWebWorker===void 0?!!zg.useWebWorker:!!i.useWebWorker,d=this._modules.workers.create(a,l);d.on(uF,()=>{n.onStart&&n.onStart(e),this._onWorkerStart(n,i,d)}).on(dF,h=>{this._modules.events.fire("layoutGetData",{name:t,data:h})}).on(z1,({workerMessage:h,isRunning:c})=>{const g=h.lastUpdate||-1/0,m=ci();c&&(!i.continuous||m-g<d7)||(h.lastUpdate=m,this._onWorkerUpdate(d,t,h,c,r,i))}).on(Ja,({result:h})=>{d.once("taskComplete",c=>{this._onWorkerComplete(d,h,c,n,i,s,d.getData())})}),this._modules.workers.start(d,i),this._running.push(d)})}_animateCamera(t,e,n){if(t.indexes.length===0)return Promise.resolve();const i=this._modules.locate.layoutDataBoundingBox(t),s=this._modules.locate.computeConfigForBounds(i,e);return this._modules.camera.setView(s,{duration:n,easing:e.easing||dx,ignoreZoomLimits:!0})}stop(){for(;this._running.length!==0;){const t=this._running.pop();t.stop(),t.fire("taskComplete",null)}return Promise.resolve()}isRunning(){return this._running.length!==0}_assignNodePositions(t,e,n,i=dx){if(!t||n){const d=t?new Uint32Array(t.indexes):void 0,h=this._modules.graph.nodeList(d);return Promise.resolve(h)}const{indexes:s,x:r,y:o}=t,a=this._modules.graph.nodeList(new Uint32Array(s)),l=ky(t);for(let d=0;d<l.length;d++)l[d]={x:r[d],y:o[d]};return a.setAttributes(l,{duration:e,easing:i})}collectNodesData(t){const e=t._indexes,n=this._modules.graph.getNodeAttribute("x").getMultiple(e),i=this._modules.graph.getNodeAttribute("y").getMultiple(e);return{ids:t.getId(),indexes:e,x:n,y:i}}};function ky({x:t,y:e,indexes:n}){const i=n.length,s=new Array(i);for(let r=0;r<i;r++)s[r]={x:t[r],y:e[r]};return s}function T2(t){return typeof t=="number"&&isNaN(t)}var C2=class{constructor(){this._keys=[],this._values=[]}set(t,e){const n=this._getIndex(t);return n===-1?(this._keys.push(t.slice()),this._values.push(e),!0):(this._values[n]=e,!1)}get(t){const e=this._getIndex(t);return e===-1?void 0:this._values[e]}has(t){return this._getIndex(t)!==-1}delete(t){const e=this._getIndex(t);return e!==-1&&(this._keys.splice(e,1),this._values.splice(e,1),!0)}keys(){return this._keys.map(t=>t.slice())}values(){return this._values.slice()}_getIndex(t){for(let e=0;e<this._keys.length;e++){const n=this._keys[e];if(n.length===t.length){let i=!0;for(let s=0;s<t.length;s++){const r=n[s],o=t[s];if(!(r===o||T2(r)&&T2(o))){i=!1;break}}if(i)return e}}return-1}get size(){return this._keys.length}},c7=class{constructor(){this._map=new Map,this._arrays=new C2}clear(){return this._arrays=new C2,this._map.clear()}delete(t){return Qn(t)?this._arrays.delete(t):this._map.delete(t)}get(t){return Qn(t)?this._arrays.get(t):this._map.get(t)}set(t,e){return Qn(t)?this._arrays.set(t,e):this._map.set(t,e),this}keys(){return[...gM(this._map),...this._arrays.keys()]}values(){return[...fM(this._map),...this._arrays.values()]}get size(){return this._map.size+this._arrays.size}};function zp(t){return typeof t=="number"&&isFinite(t)}var g7=class{constructor(t,e,{path:n,filter:i,unwindArrays:s}){this._module=t,this._isNode=e,this._path=n||[],this._filter=i,this._unwindArrays=s,this._onUpdateHandlers=[],this._triggerUpdate=r=>{for(let o=0;o<this._onUpdateHandlers.length;++o)this._onUpdateHandlers[o](r)},this._info=t.watchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}onUpdate(t){this._onUpdateHandlers.push(t)}getPropertyInfo(){return this._info}getPath(){return this._path.slice()}destroy(){this._module.unwatchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}},f7=class{constructor(t,e,{path:n,filter:i,unwindArrays:s}){this._module=t,this._isNode=e,this._path=n,this._filter=i,this._unwindArrays=s,this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[]}get path(){return this._path}onPropertyAdded(t){return this._onAddHandlers.push(t),this}onPropertyRemoved(t){return this._onRemoveHandlers.push(t),this}onPropertyUpdated(t){return this._onUpdateHandlers.push(t),this}getPath(){return this._path.slice()}getProperties(){return this._propertyList.slice()}getPropertyInfo(t){const e=this._properties[t];return e?e.info:null}destroy(){hr(this._properties,({handler:e},n)=>{const i=this._path.concat([n]);this._module.unwatchPropertyInformation(this._isNode,i,e,this._filter,this._unwindArrays)}),this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[];const t=this._module._objectPropertyWatchers.indexOf(this);this._module._objectPropertyWatchers.splice(t,1)}updateSubPropertiesToWatch(t,e){if(t!==this._isNode)return;const n=e.getData(this._path);for(let i=0;i<n.length;i++){const s=n[i];if(Xa(s)){const r=Object.keys(s);for(let o=0;o<r.length;o++)this._addSubPropertyToWatch(r[o])}}}_addSubPropertyToWatch(t){if(!this._properties[t]){const e=this._path.concat([t]),n=()=>this._triggerPropertyUpdate(t),i=this._unwindArrays,s=this._isNode,r=this._filter,o=this._module.watchPropertyInformation(s,e,n,r,i);this._properties[t]={handler:n,info:o},this._triggerPropertyUpdate(t)}}_triggerPropertyUpdate(t){const{info:e}=this._properties[t],n=this._propertyList.indexOf(t),i=n!==-1,s=e.getType()!=="undefined";!i&&s?(this._propertyList.push(t),this._triggerHandlers("_onAddHandlers",t,e),this._triggerHandlers("_onUpdateHandlers",t,e)):i&&!s?(this._propertyList.splice(n,1),this._triggerHandlers("_onUpdateHandlers",t,e),this._triggerHandlers("_onRemoveHandlers",t,e)):i&&s&&this._triggerHandlers("_onUpdateHandlers",t,e)}_triggerHandlers(t,e,n){const i=this[t];for(let s=0,r=i.length;s<r;s++)i[s](e,n)}},m7=class{constructor(){}setWatcher(t){this._watcher=t}isNode(){return this._watcher.isNode}getPath(){return this._watcher.property.slice()}getBoundaries(){const t=this._watcher.boundaries;return t?{min:t.min,max:t.max}:null}getValues(){return this._watcher.values.keys()}getValueCount(t){return this._watcher.values.get(t)||0}getCount(){return this._watcher.total}getType(){return this._watcher.any>0?"any":this._watcher.numbers>0?"number":"undefined"}},p7=class extends ee{constructor(){super(...arguments),this._onExcludedStateChange=({elements:t,value:e})=>{const n=!e;for(let i=0,s=this._propertyWatchers.length;i<s;i++){const r=this._propertyWatchers[i];r.isNode===t.isNode&&r.filter==="visible"&&(n?$d(r,t.getData(r.property)):Sf(r,t.getData(r.property)),Bg(r))}},this._onDataChange=({isNode:t,changes:e})=>{for(let n=0;n<this._propertyWatchers.length;++n){const i=this._propertyWatchers[n],s=i.property,r=i.filter==="all";if(i.isNode===t)for(let o=0;o<e.length;++o){const a=e[o],l=v7(a.property||[],s);if(l){const d=a.nodes||a.edges,h=[],c=[];if(d)for(let g=0;g<d.size;++g){const m=d.get(g);(r||m.isVisible())&&(h.push(Qe(a.newValues[g],l)),c.push(Qe(a.previousValues[g],l)))}h.length&&($d(i,h),Sf(i,c),Bg(i))}}}for(let n=0,i=this._objectPropertyWatchers.length;n<i;n++){const s=this._objectPropertyWatchers[n],r=s.path;for(let o=0;o<e.length;++o){const{property:a,nodes:l,edges:d}=e[o],h=l||d;if(h){const c=h.isNode;(!a||a.length<=r.length+1&&r.every((g,m)=>g===a[m]))&&s.updateSubPropertiesToWatch(c,h)}}}},this._onElementsAdded=t=>{const e=t.nodes||t.edges;for(let n=0;n<this._propertyWatchers.length;++n){const i=this._propertyWatchers[n];if(i.isNode===e.isNode){const s=e.getData(i.property);s.length&&($d(i,s),Bg(i))}}for(let n=0;n<this._objectPropertyWatchers.length;n++)this._objectPropertyWatchers[n].updateSubPropertiesToWatch(e.isNode,e)},this._onElementsRemoved=t=>{const e=t.nodes||t.edges;for(let n=0;n<this._propertyWatchers.length;++n){const i=this._propertyWatchers[n],s=i.filter==="all";if(i.isNode===e.isNode&&s){const r=e.getData(i.property);r.length&&(Sf(i,r),Bg(i))}}},this._onGraphClear=()=>{this._propertyWatchers.forEach(t=>{t.numbers=0,t.any=0,t.total=0,t.boundaries=null,t.values.clear()})}}onMounted(){this._propertyWatchers=[],this._objectPropertyWatchers=[],this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on(["updateNodeData","updateEdgeData"],this._onDataChange).on(["addNodes","addEdges"],this._onElementsAdded).on(["removeNodes","removeEdges"],this._onElementsRemoved).on("clearGraph",this._onGraphClear)}watchNodeObjectProperty(t){return this._watchObjectProperty(!0,Ug(t))}watchEdgeObjectProperty(t){return this._watchObjectProperty(!1,Ug(t))}watchNodeNonObjectProperty(t){return this._watchNonObjectProperty(!0,Ug(t))}watchEdgeNonObjectProperty(t){return this._watchNonObjectProperty(!1,Ug(t))}watchPropertyInformation(t,e,n,i,s){const r=this._findWatcher(t,e,i,s)||this._createWatcher(t,e,i,s);return n&&r.onChange.push(n),r.info}unwatchPropertyInformation(t,e,n,i,s){const r=this._findWatcher(t,e,i,s);if(!r)return;const o=r.onChange,a=o.indexOf(n);if(a!==-1&&(o.splice(a,1),o.length===0)){const l=this._propertyWatchers.indexOf(r);this._propertyWatchers.splice(l,1)}}_watchObjectProperty(t,e){const n=new f7(this,t,e);return this._objectPropertyWatchers.push(n),n.updateSubPropertiesToWatch(t,this._modules.graph[t?"getNodes":"getEdges"](e.filter)),n}_watchNonObjectProperty(t,e){return new g7(this,t,e)}_findWatcher(t,e,n,i){for(let s=0;s<this._propertyWatchers.length;++s){const r=this._propertyWatchers[s];if(r.isNode===t&&r.filter===n&&r.unwindArrays===i&&y7(r.property,e))return r}return null}_createWatcher(t,e,n,i){const s={isNode:t,property:e,numbers:0,any:0,total:0,values:new c7,boundaries:null,onChange:[],filter:n,unwindArrays:i,info:new m7};return s.info.setWatcher(s),$d(s,this._modules.graph[t?"getNodes":"getEdges"](n).getData(e)),this._propertyWatchers.push(s),s}};function L2(t){return t==null?[]:Wa(t)}function _7(t){return t==="all"?"all":"visible"}function Bg(t){for(let e=0;e<t.onChange.length;++e)t.onChange[e](t.info)}function y7(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function v7(t,e){if(t.length>e.length)return null;let n=0;for(;n<t.length;++n)if(t[n]!==e[n])return null;return e.slice(n)}function $d(t,e,n){const i=t.values,s=!n&&t.unwindArrays;for(let r=0;r<e.length;++r){const o=e[r];if(n||o===void 0||(t.total+=1),s&&Array.isArray(o))$d(t,o,!0);else{const a=i.get(o);a?i.set(o,a+1):(i.set(o,1),zp(o)?(t.boundaries?o<t.boundaries.min?t.boundaries.min=o:o>t.boundaries.max&&(t.boundaries.max=o):t.boundaries={min:o,max:o},t.numbers+=1):o!==void 0&&(t.any+=1))}}}function Sf(t,e,n){const i=t.values,s=!n&&t.unwindArrays,r=t.boundaries;let o=!1;for(let a=0;a<e.length;++a){const l=e[a];if(n||l===void 0||(t.total-=1),s&&Array.isArray(l))o=o||Sf(t,l,!0);else{const d=i.get(l);d>1?i.set(l,d-1):(i.delete(l),zp(l)?(t.numbers-=1,!r||r.min!==l&&r.max!==l||(o=!0)):l!==void 0&&(t.any-=1))}}return!n&&o&&(t.boundaries=x7(i.keys())),o}function x7(t){let e=null,n=null;for(let i=0;i<t.length;++i){const s=t[i];zp(s)&&((e==null||s<e)&&(e=s),(n==null||s>n)&&(n=s))}return e==null||n==null?null:{min:e,max:n}}function Ug(t){return typeof t!="object"||t===null||Array.isArray(t)?{path:L2(t),filter:"visible",unwindArrays:!1}:{path:L2(t.path),filter:_7(t.filter||"visible"),unwindArrays:!!t.unwindArrays}}var b7=class extends ee{onMounted(){this._modules.events.register(["virtualDown","virtualUp","virtualMove","virtualClick","virtualDoubleClick","virtualWheel"])}get x(){return this._modules.position.x||0}get y(){return this._modules.position.y||0}_later(){return this._modules.dom.afterNextFrame()}move({x:t,y:e}){if(t!==void 0&&e!==void 0){const n=t-this.x,i=e-this.y;this._modules.events.fire("virtualMove",{x:t,y:e,dx:n,dy:i})}return Promise.resolve()}down({x:t,y:e,button:n="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualDown",{x:this.x,y:this.y,button:n}),this._modules.events.fire("virtualMove",{x:this.x,y:this.y,dx:0,dy:0,button:n})})}up({x:t,y:e,button:n="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualUp",{x:t,y:e,button:n})})}click({x:t,y:e,button:n="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualClick",{x:t,y:e,button:n})})}rightClick({x:t,y:e,button:n="right"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualClick",{x:t,y:e,button:n})})}doubleclick({x:t,y:e,button:n="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualDoubleClick",{x:t,y:e,button:n})})}drag(t,e){return this.down(t).then(()=>this.move(e)).then(()=>this.up(e))}wheel({x:t,y:e,dx:n,dy:i,delta:s,metaKey:r,ctrlKey:o}){return this.move({x:t,y:e}).then(()=>(this._modules.events.fire("virtualWheel",{x:t,y:e,dx:n,dy:i,delta:s,domEvent:{metaKey:r,ctrlKey:o}}),this._later()))}};function gs(t,e,n,i,s,r){const o=Vi(),a=r.graphToScreenCoordinates(t),l=r.graphToScreenCoordinates(e);s.beginPath(),s.moveTo(a.x*o,a.y*o),s.lineTo(l.x*o,l.y*o),s.strokeStyle=i,s.lineWidth=n,s.stroke()}function P2(t,e,n,i){let s,r,o,a=0,l=t.length-1;for(;a<l&&a>-1;)if(s=(a+l)/2|0,r=Math.abs(e[t[s]]-n),o=Math.abs(e[t[s+1]]-n),o<r)a=s+1;else if(o>r)l=s;else{const d=Math.abs(e[t[a]]-n),h=Math.abs(e[t[l]]-n);if(d<h)l=s;else{if(!(d>h))return l;a=s+1}}return i?l:t[l]}function k2(t,e,n,i,s,r,o){let a,l,d,h,c,g;for(let m=0,_=t.length;m<_;m++)for(let p=0;p<_;p++){if(m===p)continue;let v=t[m],x=t[p];p<m&&(h=x,x=v,v=h);const b=e[v],E=e[x],S=r.get(v),A=r.get(x);if(b+S<i-s&&E-A>i+s&&Math.abs(Math.abs(b+S-(i-s))-Math.abs(E-A-(i+s)))<=o)return a=v,l=n,d=x,g=b+S+Math.abs(E-A-(b+S))/2,c=[b+S,g-s,g+s,E-A],{a,b:l,c:d,current:n,target:g,points:c};if(b+S<i-s&&E+A<i-s&&Math.abs(Math.abs(b+S-(E-A))-Math.abs(Math.max(b+S,E+A)-(i-s)))<=o)return a=v,l=x,d=n,g=E+S+Math.abs(Math.abs(b+S-(E-A)))+s,c=[b+S,E-A,E+A,g-s],{a,b:l,c:d,current:n,target:g,points:c};if(b-S>i+s&&E-A>i+s&&Math.abs(Math.abs(b+S-(E-A))-Math.abs(Math.min(b-S,E-A)-(i+s)))<=o)return a=n,l=v,d=x,g=b-S-Math.abs(Math.abs(b+S-(E-A)))-s,c=[g+s,b-S,b+S,E-A],{a,b:l,c:d,current:n,target:g,points:c}}return null}var Iy={enabled:!1,tolerance:5,centerSnapDistance:240,sideSnapDistanceFactor:3,guidelineWidth:1,guidelineColor:"#ff0000",preferredDistance:{enabled:!0,ratio:1.13,tolerance:10,lineColor:"#00C3FF",lineWidth:1},neighbours:{enabled:!0,offset:5,tolerance:3,lineColor:"#00C3FF",lineWidth:1}},E7=class extends ee{constructor(){super(...arguments),this._options=nn(Iy),this._enabled=!1,this._ysnap=0,this._xsnap=0,this._node=null,this._nodes=null,this._r=0,this._vguideline={start:{x:0,y:0},end:{x:0,y:0}},this._hguideline={start:{x:0,y:0},end:{x:0,y:0}},this._gridResolution=0,this._onNodeDragStart=({nodes:t})=>{t.size===1&&(this._node=t.get(0),this._cacheViewportData(),this._r=Number(this._node.getAttribute("radius")))},this._onNodeDragEnd=()=>{this._node=null,this._layer.refresh()}}onMounted(){this._options=nn(Iy),this._enabled=!1}enable(t){this._enabled||(this._options=rs(t,Iy),this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height)},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._modules.events.on("nodesDragStart",this._onNodeDragStart).on("nodesDragEnd",this._onNodeDragEnd),this._modules.settings.update({"interactions.drag.onBeforeDrag":(e,n,i,s)=>this._onBeforeDrag(n,i,s)}))}disable(){this._enabled&&(this._modules.events.off(this._onNodeDragStart).off(this._onNodeDragEnd),this._layer.destroy(),this._modules.settings.update({"interactions.drag.onBeforeDrag":null}),this._enabled=!1)}enabled(){return this._enabled}_onBeforeDrag(t,e,n){if(this._node){const i=n[0];this._layer.refresh(s=>{this._scan(s,i)}),this._node.setAttributes(i)}}_cacheViewportData(){const t=this._modules.camera,e=t.screenToGraphCoordinates({x:0,y:0}),n=t.screenToGraphCoordinates({x:t.width,y:t.height});if(this._nodes=this._modules.spatial.getNodesByBoundingBox(e.x,e.y,n.x,n.y),this._node==null)return;const i=this._node._index,s=Array.from(this._nodes._indexes);s.splice(s.indexOf(i),1);const r=this._modules.graph.getNodeAttribute("radius"),o=this._modules.graph.getNodeAttribute("x"),a=this._modules.graph.getNodeAttribute("y"),l=o.buffer(),d=a.buffer(),h=Cd(s.slice(),o),c=Cd(s.slice(),a),g={},m={};this._gridResolution=Number(this._node.getAttribute("radius"));const _=this._gridResolution;for(let p=0,v=s.length;p<v;p++){const x=h[p],b=c[p],E=l[x]/_|0,S=d[b]/_|0;g[E]||(g[E]=[]),m[S]||(m[S]=[]),g[E].push(x),m[S].push(b)}this._nodesByX=h,this._nodesByY=c,this._xGrid=g,this._yGrid=m,this._xList=o,this._yList=a,this._X=l,this._Y=d,this._R=r}_scan(t,e){if(this._node==null)return;const n=this._node._index,i=e.x,s=e.y,r=this._r,o=this._options,a=this._xList,l=this._yList,d=this._R,h=this._X,c=this._Y,g=this._modules.camera.zoom,m=Math.min(r,this._options.tolerance/g),_=2*r*o.sideSnapDistanceFactor,p=o.guidelineWidth,v=o.guidelineColor;let x,b,E,S,A,T,P,k,I=n,R=n,M=null,z=!1,j=!1;if(I=P2(this._nodesByX,h,i),R=P2(this._nodesByY,c,s),Math.abs(h[I]-i)>o.centerSnapDistance&&(I=n),Math.abs(c[R]-s)>o.centerSnapDistance&&(R=n),this._xsnap=0,I!==n){x=this._vguideline.start,b=this._vguideline.end,k=I,E=h[k],S=c[k],M=d.get(k),P=Math.abs(i-E);const X=Math.abs(i-r-(E-M)),O=Math.abs(i+r-(E+M));if(P<Math.max(r,M)){S<s?(x.y=S-M,b.y=s+r):(x.y=S+M,b.y=s-r);const N=Math.min(X,P,O);N===P?(x.x=b.x=E,b.y=s,x.y=S,this._xsnap=1):Math.abs(s-S)<M+r+_&&(N===X?(x.x=b.x=E-M,this._xsnap=2):(x.x=b.x=E+M,this._xsnap=3)),N<m&&(z=!0)}this._xsnap!==0&&gs(x,b,p,v,t,this._modules.camera)}if(this._ysnap=0,R!==n){x=this._hguideline.start,b=this._hguideline.end,k=R,E=h[k],S=c[k],M=d.get(k),P=Math.abs(s-S);const X=Math.abs(s-r-(S-M)),O=Math.abs(s+r-(S+M));if(P<Math.max(r,M)){E<i?(x.x=E-M,b.x=i+r):(x.x=E+M,b.x=i-r);const N=Math.min(X,P,O);N===P?(x.y=b.y=S,b.x=i,x.x=E,this._ysnap=1):Math.abs(i-E)<M+r+_&&(N===X?(x.y=b.y=S-M,this._ysnap=4):(x.y=b.y=S+M,this._ysnap=5)),N<m&&(j=!0)}this._ysnap!==0&&gs(x,b,p,v,t,this._modules.camera)}if(M!=null&&o.preferredDistance.enabled){const X=o.preferredDistance.ratio,O=Math.min(o.preferredDistance.tolerance/g,r),N=Math.max(r,M);if(I===n||this._xsnap!==0&&z){if(R!==n&&(this._ysnap===0||!j)&&(k=R,E=h[k],S=c[k],M=d.get(k),T=Math.abs(s-S)-(r+M)*(1+X),T<=O&&T>=-O)){const W=s<S?-1:1;x=this._hguideline.start,b=this._hguideline.end,x.x=E-N,b.x=E+N,x.y=b.y=S,gs(x,b,p,v,t,this._modules.camera),x.x=i-N,b.x=i+N,x.y=b.y=S+W*(1+X)*(r+M),gs(x,b,p,v,t,this._modules.camera),this._ysnap=1,j=!0}}else if(k=I,E=h[k],S=c[k],M=d.get(k),A=Math.abs(i-E)-(r+M)*(1+X),A<=O&&A>=-O){const W=i<E?-1:1;x=this._vguideline.start,b=this._vguideline.end,x.x=b.x=E+W*(1+X)*(r+M),x.y=S-N,b.y=S+N,x.x=b.x=E,gs(x,b,p,v,t,this._modules.camera),x.y=s-N,b.y=s+N,x.x=b.x=E+W*(1+X)*(r+M),gs(x,b,p,v,t,this._modules.camera),this._xsnap=1,z=!0}}if(o.neighbours.enabled){const X=this._gridResolution,O=i/X|0,N=s/X|0,W=this._xGrid,U=this._yGrid,K=[],Z=[].concat(U[N-1]||K,U[N]||K,U[N+1]||K),rt=[].concat(W[O-1]||K,W[O]||K,W[O+1]||K);let vt;Z.length>1&&(Cd(Z,a),vt=k2(Z,h,n,i,r,d,m),vt&&(this._drawNeighbourGuidelines(t,vt,e,!1),z=!1)),rt.length>1&&!vt&&(Cd(rt,l),vt=k2(rt,c,n,s,r,d,m),vt&&(this._drawNeighbourGuidelines(t,vt,e,!0),j=!1))}(z||j)&&this._snap(e,!z,!j)}_drawNeighbourGuidelines(t,{a:e,b:n,c:i,points:s,target:r},o,a){const l={x:0,y:0},d={x:0,y:0},h=this._R,c=this._X,g=this._Y;let[m,_,p]=h.getMultiple([e,n,i]);const{offset:v,lineWidth:x,lineColor:b}=this._options.neighbours;let E,S;a?(o.y=r,m=-m,_=-_,p=-p,E=d.x=l.x=Math.min(c[e]+m,c[n]+_,c[i]+p)-v,S=c):(o.x=r,E=d.y=l.y=Math.max(g[e]+m,g[n]+_,g[i]+p)+v,S=g);const A=a?"y":"x",T=a?"x":"y";l[A]=s[0],d[A]=s[1],gs(l,d,x,b,t,this._modules.camera),l[A]=s[2],d[A]=s[3],gs(l,d,x,b,t,this._modules.camera),l[A]=s[0],l[T]=E-v/2,d[A]=s[0],l[T]=S[e]+m,gs(l,d,x,b,t,this._modules.camera),l[A]=s[1],l[T]=E-v/2,d[A]=s[1],l[T]=S[n]+_,gs(l,d,x,b,t,this._modules.camera),l[A]=s[2],l[T]=E-v/2,d[A]=s[2],l[T]=S[n]+_,gs(l,d,x,b,t,this._modules.camera),l[A]=s[3],l[T]=E-v/2,d[A]=s[3],l[T]=S[i]+p,gs(l,d,x,b,t,this._modules.camera)}_snap(t,e,n){const i=this._xsnap,s=this._ysnap;let r;e||i===0||(r=this._vguideline.end,t.x=i===2?r.x+this._r:i===3?r.x-this._r:r.x),n||s===0||(r=this._hguideline.end,t.y=s===4?r.y+this._r:s===5?r.y-this._r:r.y)}},S7=class{constructor(t,e,n){this._module=t,this._id=e,this._whenApplied=n.then(()=>this)}getId(){return this._id}whenApplied(){return this._whenApplied}refresh(){return this._module.refreshRule(this._id)}getIndex(){return this._module.getRuleIndex(this._id)}setIndex(t){return this._module.setRuleIndex(this._id,t)}update(t){return this._module.updateRule(this._id,t)}getDefinition(){return this._module.getRuleDefinition(this._id)}destroy(){return this._module.destroyRule(this._id)}},w7=1e3,A7=1/w7,T7=class extends ee{constructor(){super(...arguments),this._idCounter=1,this._rules=[]}onMounted(){this._rules=[],this._modules.events.register(["addStyleRule","removeStyleRule","updateStyleRule","refreshStyleRule"])}_get(t){for(let e=0;e<this._rules.length;++e){const n=this._rules[e];if(n.id===t)return n.index=e,n}throw new Error("calling a method on a destroyed style rule")}_updatePriorities(){for(let t=0;t<this._rules.length;++t){const e=this._rules[t],n=Pj+t*A7;e.attributeLayer.update({priority:n})}}addRule(t={}){const e=this._idCounter++,n=this._modules.graphics.addAttributeLayer(wt({name:`rule(${e})`},I2(t))),i=this._modules.dom.afterNextFrame(),s=new S7(this,e,i),r={id:e,attributeLayer:n,wrapper:s};return this._rules.push(r),this._updatePriorities(),this._modules.events.fire("addStyleRule",{rule:r,options:t,id:r.id}),s}getRuleIndex(t){const e=this._get(t);return e.index==null?null:e.index}setRuleIndex(t,e){const n=this._get(t),i=ws(e,0,this._rules.length-1);return this._rules.splice(n.index,1),this._rules.splice(i,0,n),this._updatePriorities(),this._modules.dom.afterNextFrame()}updateRule(t,e){const n=this._get(t),i=Object.assign({fullOverwrite:e.fullOverwrite},e);return n.attributeLayer.update(i),this._modules.events.fire("updateStyleRule",{rule:n,options:e}),this._modules.dom.afterNextFrame()}getRuleDefinition(t){return I2(this._get(t).attributeLayer.getDefinition())}destroyRule(t){const e=this._get(t);return this._modules.events.fire("removeStyleRule",{rule:e,id:e.id}),e.attributeLayer.destroy(),this._rules.splice(e.index,1),this._modules.dom.afterNextFrame()}refreshRule(t){const e=this._get(t);return e.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:e,id:t}),this._modules.dom.afterNextFrame()}refreshAllRules(){for(const t of this._rules)t.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:t,id:t.id});return this._modules.dom.afterNextFrame()}getRuleList(){return this._rules.map(t=>t.wrapper)}};function I2(t){return{nodeAttributes:t.nodeAttributes,edgeAttributes:t.edgeAttributes,nodeSelector:t.nodeSelector,edgeSelector:t.edgeSelector,nodeDependencies:t.nodeDependencies,edgeDependencies:t.edgeDependencies,nodeOutput:t.nodeOutput,edgeOutput:t.edgeOutput}}var hx,rr=6,fF=5,dh=1,mF=0,pF=0,cx=-1;function _F(t,e,n,i){mF=t,hx=n,pF=e?1:0,cx=i}var M2=(t,e,n,i)=>s=>{const{rects:r,bboxes:o,intersects:a,indexToLayer:l,indexToRemoveNodeText:d,indexToRemoveEdgeText:h}=i;if(o[s*rr+5]===mF&&o[s*rr+4]===n)return!1;const c=s*fF,g=fc(r[c],r[c+1],r[c+2],r[c+3],r[c+4]);if(aN(hx,g)){if(i.realIntersection=!0,cx<=0&&a.push(hx,g),!(l[o[s*rr+5]]<cx))return!0;t.remove(s),i.realIntersection=!1,o[s*rr+4]===pF?d[o[s*rr+5]]=!0:h[o[s*rr+5]]=!0}return!1};function N2(t,e,n="#22ff00"){return gx([[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]].map(i=>({x:i[0],y:i[1]})),e,n)}function gx(t,e,n="#ff0000"){e.strokeStyle=n,e.beginPath();for(let i=0,s=t.length;i<s;i++)i===0?e.moveTo(t[i].x,t[i].y):e.lineTo(t[i].x,t[i].y);e.closePath(),e.stroke()}function C7(t,e,n,i,s){for(let a=0,l=e.length;a<l;a+=rr)N2(e.slice(a,a+4),t,"#aaaaaa");for(let a=0;a<n.length;a+=fF)gx(fc(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),t,"green");const r=[s.root];let o=s.root;for(;o=r.pop();)o.leaf||r.push.apply(r,o.children),N2(s.getNodeBounds(o),t,"rgba(0,0,0,0.2)"),o=r.pop();i.forEach(a=>gx(a,t,"red"))}var vd={x1:0,y1:0,x2:0,y2:0},My={x:0,y:0},Al={x:0,y:0},L7=Math.PI/2,P7=0;function k7(t,e,n,i,s,r,o,a,l,d,h){const c=a.remove.nodes,g=a.remove.edges,m=a.redraw.edges,_=n.angle,p=n.zoom,v=s.x,x=s.y,b=s.radius,E=Math.PI,{source:S,target:A,scalingMethod:T}=i,P=i.width,k=i.curvature,I=i.layer,R=i.text.content,M=i.text.scaling,z=i.text.size,j=i.text.font,X=i.text.style,O=i.text.scale,N=i.text.maxLineLength,W=i.text.margin,U=i.text.minVisibleSize,K=i.text.padding,Z=i.animationDuration,rt=i.text.adjustAngle,vt=i.text.position;a.indexToLayer={},a.indexToQuadIndex={},a.indexToRemoveNodeText={},a.indexToRemoveEdgeText={},a.indexToRedrawEdgeText={},a.byLayer=[];const{byLayer:St,indexToLayer:ut,indexToQuadIndex:_t,indexToRedrawEdgeText:Rt,indexToRemoveNodeText:Gt,indexToRemoveEdgeText:Yt}=a;for(let q=0;q<t.length;q++){const ht=t[q],bt=I.get(ht)-rM;for(let xt=1;xt<=bt;xt++)(St[xt]=St[xt]||[]).push(ht);ut[ht]=bt}if(l!==null){const q=St.length;for(let ht=ut[l]+1;ht<=q;ht++)(St[ht]=St[ht]||[]).unshift(l);ut[l]=q}const Et=[0,0,0,0],Tt=[0,0,0,0,0],{bboxes:re,rects:Xt}=a,se=(q,ht=-1)=>{const bt=Z.get(q);let xt=R?R.get(q):"";if(xt===null||xt===""||bt)return!1;const ct=S.get(q),yt=A.get(q);let Dt=P.get(q);const Ft=k.get(q),Bt=U.get(q);if(Dt*p<Bt)return Yt[q]=!0,!1;T.get(q)==="fixed"&&(Dt/=p);let oe=(v.get(ct)+v.get(yt))/2,ne=(x.get(ct)+x.get(yt))/2;xt=xt?xt.toString():"";const Fe=!M.get(q),Ve=O.get(q)*(Fe?1:p),Me=j.get(q),sn=(Fe?z.get(q):Ve*Dt)*dh,Ke=X.get(q),le=N.get(q),Pe=vt.get(q)===cc;let De=+Pe*W.get(q)+i.text.padding.get(q);const ke=v.get(ct),_e=x.get(ct),hn=v.get(yt),Ne=x.get(yt),Mn=b.get(ct),Mi=b.get(yt);if(Ft===0){const Cn=Lu(ke,_e,hn,Ne)-_,Ln=Mn-Mi;oe+=Ln*Math.cos(Cn)/2,ne+=Ln*Math.sin(Cn)/2}let ye;const we=ct===yt;if(we)ye=E/4-_,Pp(ke,_e,Ft,Mn,0,vd),Uh(.5,ke,_e,hn,Ne,vd.x1,vd.y1,vd.x2,vd.y2,Al),oe=Al.x,ne=Al.y,De/=-p;else{if(ke===hn&&_e===Ne)return!1;ye=Lu(ke,_e,hn,Ne)-_,Ft!==0&&(el(ke,_e,hn,Ne,Ft,My),kp(.5,ke,_e,hn,Ne,My.x,My.y,Al),oe=Al.x,ne=Al.y)}const rn=De+P7,Nn=NM(xt,le);if(!Nn)return!1;const{lines:yn,data:Wn}=Nn;let Ni=r(Wn[0],Me,Ke,sn).width*dh;for(let Cn=1;Cn<yn;Cn++)Ni=Math.max(Ni,r(Wn[Cn],Me,Ke,sn).width*dh);const vn=yn*sn,On=Ni/p/2,Ri=vn/p/2,Xs=Math.abs(pm(ye))<L7?1:-1;let Oe=Pe?we?vn/p+Dt/2+De:Xs*(rn/p+Dt/2+Ri):0;if(!we&&Ft===0&&rt.get(q)){const Cn=K.get(q);wn(ke,_e,hn,Ne)*p-(Mn+Mi)*(h?1:p)<Ni+2*Cn+1&&(Oe*=Xs,ye=0)}if(Tt[0]=oe-On,Tt[1]=ne-Ri,Tt[2]=oe+On,Tt[3]=ne+Ri,Tt[4]=ye+_,Yv(Tt,-(ye+_),-Oe,Tt),Tt[2]=Tt[2]-Tt[0],Tt[3]=Tt[3]-Tt[1],ye=E-ye-_,Fp(oe-On,ne-Ri,2*On,2*Ri,ye,void 0,void 0,Et),Yv(Et,ye,Oe,Et),a.realIntersection=!1,_F(q,!1,fc(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4]),ht),e.traverse(Et[0],Et[1],Et[2],Et[3],d),a.realIntersection&&!o)return Yt[q]=!0,!1;if(Rt[q]=!0,Gt[q]=!1,ht<=0){const Cn=re.length/rr;_t[q]=Cn,re.push(Et[0],Et[1],Et[2],Et[3],0,q),e.insert(Cn,Et[0],Et[1],Et[2],Et[3]),Xt.push(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4])}else e.insert(_t[q],Et[0],Et[1],Et[2],Et[3])};for(const q of t)se(q);let de=!0;for(let q=0;q<St.length;q++){const ht=St[q];if(ht)if(de)de=!1;else for(const bt of ht)se(bt,q)}for(let q=0;q<t.length;q++){const ht=t[q];Gt[ht]?c.push(ht):Rt[ht]&&m.push(ht),Yt[ht]&&g.push(ht)}return a}var I7={left:-1,right:1,top:0,bottom:0,center:0},M7={left:0,right:0,top:-1,bottom:1,center:0},N7={left:-1,right:0,top:-.5,bottom:-.5,center:-.5},R7={left:-.5,right:-.5,top:-1,bottom:0,center:-.5},F7=(t,e,n)=>NM(e,n.get(t))||{lines:0,data:[" "],maxLength:1},O7=(t,e,n,i,s,r,o)=>{const{lines:a,data:l}=F7(t,e,i);let d=n(l[0],s,r,o).width;for(let h=1;h<a;h++)d=Math.max(d,n(l[h],s,r,o).width);return[d,a*o*dh]},D7=(t,e,n)=>{const i=e.text.content,s=e.radius,r=e.text.scaling,o=e.text.position,a=e.text.padding,l=e.text.scale,d=e.text.size,h=e.text.style,c=e.text.font,g=e.text.maxLineLength,m=e.text.margin,_=i.get(t),p=s.get(t),v=!r.get(t),x=o.get(t),b=a.get(t),E=l.get(t),S=(v?d.get(t):E*p*2)*dh,A=h.get(t),T=c.get(t),P=b+m.get(t),k=I7[x],I=M7[x],[R,M]=O7(t,`${_}`,n,g,T,A,S),z=R/2,j=M/2;return[N7[x]*R,R7[x]*M,k*P,I*P,k*p,I*p,R,M,z,j]};function z7(t,e,n,i,s,r,o,a,l){const d=o.remove.nodes,h=o.remove.edges,c=o.redraw.nodes,g=n.angle,m=n.zoom,_=n.sin,p=n.cos,v=i.x,x=i.y,b=i.radius,E=i.layer,S=i.scalingMethod,A=i.text.content,T=i.text.scaling,P=i.text.minVisibleSize,k=i.animationDuration,I=i.textHidden,R=i.excluded;o.indexToLayer={},o.indexToQuadIndex={},o.indexToRemoveNodeText={},o.indexToRemoveEdgeText={},o.indexToRedrawNodeText={},o.byLayer=[];const{indexToLayer:M,indexToRedrawNodeText:z,indexToRemoveNodeText:j,indexToRemoveEdgeText:X,indexToQuadIndex:O,byLayer:N}=o;for(let ut=0;ut<t.length;ut++){const _t=t[ut],Rt=E.get(_t)-rM;(N[Rt]=N[Rt]||[]).push(_t),M[_t]=Rt}if(a!==null){const ut=N.length;for(let _t=M[a]+1;_t<=ut;_t++)(N[_t]=N[_t]||[]).unshift(a);M[a]=ut}let W;const U=[0,0,0,0],K=[0,0,0,0,0],{bboxes:Z,rects:rt}=o,vt=(ut,_t=-1)=>{const Rt=k.get(ut);let Gt=A.get(ut);if(Gt===null||Gt===""||Rt!==0)return!1;let Yt=b.get(ut);const Et=P.get(ut);if(R.get(ut)===1)return j[ut]=!0,!1;if(2*Yt*m<Et)return I.get(ut)===0&&(j[ut]=!0),!1;S.get(ut)==="fixed"&&(Yt/=m);const Tt=v.get(ut),re=x.get(ut);typeof Gt=="number"&&(Gt=Gt.toString());let[Xt,se,de,q,ht,bt,xt,ct,yt,Dt]=s(ut);const Ft=!T.get(ut),Bt=Ft?m:1,oe=S.get(ut)==="fixed"?m:1;Ft?(de+=yt,q+=Dt,yt/=m,Dt/=m,xt/=m,ct/=m):(de+=yt*m,q+=Dt*m),Xt=Xt/Bt+de/m+ht/oe,se=se/Bt+q/m+bt/oe,Fp(Tt-yt,re-Dt,xt,ct,-g,_,-p,U),K[0]=Tt-yt,K[1]=re-Dt,K[2]=xt,K[3]=ct,K[4]=g;const ne=p*Xt-_*se,Fe=_*Xt+p*se;if(U[0]+=ne,U[1]+=Fe,U[2]+=ne,U[3]+=Fe,K[0]+=ne,K[1]+=Fe,o.realIntersection=!1,_F(ut,!0,fc(K[0],K[1],K[2],K[3],K[4]),_t),e.traverse(U[0],U[1],U[2],U[3],l),o.realIntersection&&!r)return j[ut]=!0,!1;z[ut]=!0,j[ut]=!1,_t<=0?(W=Z.length/rr,O[ut]=W,Z.push(U[0],U[1],U[2],U[3],1,ut),e.insert(W,U[0],U[1],U[2],U[3]),rt.push(K[0],K[1],K[2],K[3],K[4])):e.insert(O[ut],U[0],U[1],U[2],U[3])};for(const ut of t)vt(ut);let St=!0;for(let ut=0;ut<N.length;ut++){const _t=N[ut];if(_t)if(St)St=!1;else for(const Rt of _t)vt(Rt,ut)}for(let ut=0;ut<t.length;ut++){const _t=t[ut];j[_t]?d.push(_t):z[_t]&&c.push(_t),X[_t]&&h.push(_t)}return o}var B7=1,U7="topDown",$7="bottomUp",j7=.15,G7=200,V7=80,H7=["x","y","radius","width","layer","text.content","text.minVisibleSize","text.size","text.scale","text.scaling","text.padding","text.margin","text.position","text.style"].reduce((t,e)=>(t.add(e),t),new Set),W7=class extends ee{constructor(t,e){super(t),this._textBBoxes=[],this._rects=[],this._enabled=!1,this._geoEnabled=!1,this._intersects=[],this._textDisplacement={},this._textDisplacementUpdate={},this._skipFrames=!1,this._output={remove:{nodes:[],edges:[]},redraw:{nodes:[],edges:[]},rects:this._rects,bboxes:this._textBBoxes,intersects:this._intersects,realIntersection:!1,indexToLayer:{},byLayer:[],indexToRedrawEdgeText:{},indexToRemoveEdgeText:{},indexToRedrawNodeText:{},indexToRemoveNodeText:{},indexToQuadIndex:{}},this._onZoomStart=pp(({startZoom:n,endZoom:i})=>{this._enabled&&i<n&&this._updateLabels(this._modules.camera.clone({zoom:i}))},V7),this._onAttributesChanged=n=>{if([...n.edgeAttributes,...n.nodeAttributes].some(i=>H7.has(i))){const i=n.nodes._indexes;for(let s=0;s<i.length;s++)this._textDisplacementUpdate[i[s]]=!0;this._update()}},this._onItemsAdded=n=>{const i=n.nodes||n.edges;(this._enabled||this._forceEnabled)&&this._modules.settings.get("texts.preventOverlap")&&this._modules.graphics.setTextHidden(i,!0)},this._onToggle=n=>(n?this._update():this._reset(),this),this._update=()=>{(this._enabled||this._forceEnabled)&&this._updateDebounced()},this._toggleDebug=n=>{n?this._modules.layers.whenReady(()=>{this._layer=this._modules.layers.addCanvasLayer(i=>{i.lineWidth=1/this._modules.camera.getZoom(),C7(i,this._textBBoxes,this._rects,this._intersects,this._quadtree)},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._canvas=this._layer.element,this._ctx=this._canvas.getContext("2d"),this._update()}):this._canvas&&(this._layer.destroy(),this._canvas=this._ctx=null)},this._measureText=(n,i,s,r)=>this._engine.measureText(n,i,s,r),this._textDisplacement={},this._textDisplacementUpdate={},this._quadtree=new Bk(n=>{const i=rr,s=i*n;return this._textBBoxes.slice(s,s+i)},B7),e.forceEnableTextOverlapRemoval&&this.forceEnable()}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.events.register(["labelCollisionsRemoved"]),this.setRate(G7),this._modules.settings.register("texts.preventOverlap",!0,this._onToggle),this._modules.settings.register("texts.debug",!1,this._toggleDebug),this._modules.settings.register("texts.removalStrategy",U7);const t=this._output;this._nodeTraversal=M2(this._quadtree,!1,1,t),this._edgeTraversal=M2(this._quadtree,!1,0,t),this._modules.events.on(["addNodes","addEdges"],this._onItemsAdded).on(["layoutEnd","locate"],()=>this._updateLabels()).on(["viewChanged","mouseover","mouseout"],this._update).on("updateAttributes",this._onAttributesChanged).on("setContainer",({element:e})=>{if(e)return this._enable();this._disable()}).on("zoomStart",this._onZoomStart).on("viewExportStart",({preventOverlap:e,camera:n})=>{e&&this.forceUpdate(n)}).on("viewExportEnd",()=>{this.forceUpdate()}).on("geoEnabled",()=>this._geoEnabled=!0).on("geoDisabled",()=>this._geoEnabled=!1)}getTextsBoundingBox(t,e){if(this._skipFrames=!0,t||e?this._updateLabels(this._modules.camera,t?Array.from(t._indexes):[],e?Array.from(e._indexes):[]):this._updateLabels(),this._skipFrames=!1,this._rects===void 0)throw new Error("this._rects is undefined");const n=this._rects,i=new Ai;for(let s=0;s<n.length;s+=5){const r=n[s],o=n[s+1],a=n[s+2],l=n[s+3],d=n[s+4],[h,c,g,m]=Fp(r,o,a,l,d);i.addPoint(h,c).addPoint(g,m)}return i}setRate(t){this._updateDebounced=this._modules.sync.debounceIdle(e=>this._updateLabels(e),t)}forceEnable(){this._forceEnabled=!0}update(){this._update()}forceUpdate(t=this._modules.camera){this._updateLabels(t)}_enable(){this._enabled=!0,this._update()}_disable(){this._textBBoxes=[],this._rects=[],this._intersects=[],this._enabled=!1}_onCameraMove(){this._update()}_updateLabels(t=this._modules.camera,e,n){if(!this._modules.settings.get("texts.preventOverlap"))return;const i=this._modules.graphics.getNodeAttributes(),s=this._modules.graphics.getEdgeAttributes();this._intersects=[],this._textBBoxes=[],this._rects=[];const r=t.getAngle(),o=t.getProjectedScreenBounds(j7),a=this._modules.settings.get("texts.removalStrategy")===$7,l={angle:r,zoom:t.zoom,screen:o,sin:Math.sin(r),cos:Math.cos(r)};this._resetOutput();const d=this._output;if(!e||!n){const _=this._modules.spatial.queryRaw(o[0],o[1],o[2],o[3]);e=_.nodes,n=_.edges}const h=this._quadtree.clear().cover(o[0],o[1],o[2],o[3]);if(e.length+n.length===0)return;const c=this._modules.captor.getPointedElement();let g=null,m=null;c!==null&&(c.isNode?g=c._index:m=c._index);for(const _ of e)!this._textDisplacementUpdate[_]&&this._textDisplacement[_]||(this._textDisplacement[_]=D7(_,i,this._measureText),this._textDisplacementUpdate[_]=!1);z7(e,h,l,i,_=>this._textDisplacement[_],a,d,g,this._nodeTraversal),k7(n,h,l,s,i,this._measureText,a,d,m,this._edgeTraversal,this._geoEnabled),this._skipFrames||this._clearOverlaps(this._output),this._modules.settings.get("texts.debug")&&this._layer.refresh()}_clearOverlaps(t){const e=this._modules.graph.nodeList,n=this._modules.graph.edgeList,i=this._modules.graphics,s=e(new Uint32Array(t.remove.nodes)),r=n(new Uint32Array(t.remove.edges)),o=e(new Uint32Array(t.redraw.nodes)),a=n(new Uint32Array(t.redraw.edges));i.setTextHidden(s,!0),i.setTextHidden(r,!0),i.setTextHidden(o,!1),i.setTextHidden(a,!1),this._modules.events.fire("labelCollisionsRemoved",t)}_resetOutput(){const t=this._output;t.remove.nodes=[],t.remove.edges=[],t.redraw.nodes=[],t.redraw.edges=[],t.rects=this._rects,t.bboxes=this._textBBoxes,t.intersects=this._intersects,t.realIntersection=!1,t.indexToLayer={},t.byLayer=[],t.indexToRedrawEdgeText={},t.indexToRemoveEdgeText={},t.indexToRedrawNodeText={},t.indexToRemoveNodeText={},t.indexToQuadIndex={}}_reset(){this._modules.graphics.resetTextHidden(),this._textDisplacement={},this._textDisplacementUpdate={}}},X7=class extends ee{constructor(){super(...arguments),this._onStartInteractionEvent=(t,e)=>{if(this._current)return;const n=this._interactionsByStartEvent[e];let i;for(const s of n)s.check(t)&&(!i||s.priority>=i.priority)&&(i=s);i&&this._startInteraction(i,t)},this._onProgressInteractionEvent=(t,e)=>{this._current&&this._current.progressEventName===e&&this._current.onProgress&&this._current.onProgress(t)},this._onStopInteractionEvent=(t,e)=>{this._current&&this._current.stopEventName===e&&this._stopCurrentInteraction(null)}}onMounted(){this._interactionsByStartEvent={},this._boundProgressEvents={},this._boundStopEvents={}}_startInteraction(t,e){t.onStart&&t.onStart(e),t.onStop&&(this._current=t,t.disableDetection&&this._modules.captor.setDetectionEnabled(!1))}_stopCurrentInteraction(t){this._current&&this._current.disableDetection&&this._modules.captor.setDetectionEnabled(!0),this._current&&this._current.onStop&&this._current.onStop(t),this._current=void 0}_forceStartInteraction(t,e){this._current&&this._stopCurrentInteraction(e),this._startInteraction(t,e)}_createWrapper(t){return{start:e=>this._forceStartInteraction(t,e)}}_addInteraction(t,e){const n=this._interactionsByStartEvent[t];return n?n.push(e):(this._interactionsByStartEvent[t]=[e],this._modules.events.on(t,this._onStartInteractionEvent)),this._createWrapper(e)}_createProgressiveInteraction(t,e,n,i){const s={priority:R2(i.priority),check:i.check||lm,onStart:i.onStart||he,onProgress:i.onProgress||he,onStop:i.onStop||he,disableDetection:!!i.disableDetection,progressEventName:e,stopEventName:n};return this._boundProgressEvents[e]||(this._boundProgressEvents[e]=!0,this._modules.events.on(e,this._onProgressInteractionEvent)),this._boundStopEvents[n]||(this._boundStopEvents[n]=!0,this._modules.events.on(n,this._onStopInteractionEvent)),this._addInteraction(t,s)}_createNonProgressiveInteraction(t,e){return this._addInteraction(t,{priority:R2(e.priority),check:e.check||lm,onStart:e.handler||he,onProgress:void 0,onStop:void 0,disableDetection:!1,progressEventName:void 0,stopEventName:void 0})}onDrag(t){return this._createProgressiveInteraction("dragStart","dragProgress","dragEnd",t)}onGesture(t){return this._createProgressiveInteraction("gestureStart","gestureProgress","gestureEnd",t)}onClick(t){return this._createNonProgressiveInteraction("click",t)}onDoubleClick(t){return this._createNonProgressiveInteraction("doubleclick",t)}onHover(t){return this._createNonProgressiveInteraction("mouseover",t)}onUnhover(t){return this._createNonProgressiveInteraction("mouseout",t)}onMouseWheel(t){return this._createNonProgressiveInteraction("mousewheel",t)}onMouseDown(t){return this._createNonProgressiveInteraction("mousedown",t)}onMouseUp(t){return this._createNonProgressiveInteraction("mouseup",t)}onMouseMove(t){return this._createNonProgressiveInteraction("mousemove",t)}};function R2(t){return typeof t=="string"?Oj.indexOf(t):typeof t!="number"||isNaN(t)?0:t}var Z7=["virtualUp","mouseupInternal","touchUp"],Y7=["virtualDown","mousedownInternal","touchDown"],q7=["virtualMove","mousemoveInternal","touchMove"],J7=["virtualClick","clickInternal","touchTap"],K7=["virtualDoubleClick","doubleclickInternal","touchDoubleTap"],Q7=["virtualWheel","mousewheelInternal"],tY=100,eY=class extends ee{constructor(){super(...arguments),this._elt=null,this._hoveredElt=null,this._draggedElt=null,this._hover=!1,this._disabledCounter=0,this._accDx=0,this._accDy=0,this._prevX=0,this._prevY=0,this._buttons={left:{isPressed:!1,isDragging:!1},middle:{isPressed:!1,isDragging:!1},right:{isPressed:!1,isDragging:!1}},this._onGraphChanged=()=>{this._resetCurrent(this._modules.position.x,this._modules.position.y),this._onMove({x:this._modules.position.x,y:this._modules.position.y,source:null,domEvent:null})}}onMounted(){this._modules.events.register(["mousemove","mousedown","mouseup","click","doubleclick","mousewheel","mouseout","mouseover","dragStart","dragProgress","dragEnd","gestureStart","gestureProgress","gestureEnd"]),this._modules.settings.register("detect.nodes",!0).register("detect.edges",!0).register("detect.nodeTexts",!0).register("detect.nodeBadges",!0).register("detect.edgeTexts",!0).register("detect.nodeErrorMargin",5).register("detect.edgeErrorMargin",2).register("detect.enableSpatialIndex",!0).register("detect.spatialIndexMarginRatio",20),this._modules.events.on(["removeNodes","removeEdges","clearGraph"],this._onGraphChanged).on(q7,(t,e)=>{this._onMove(ue(wt({},t),{source:ca(e)}))}).on(Y7,({domEvent:t,x:e,y:n,button:i="left"},s)=>{this._onDown({domEvent:t,x:e,y:n,button:i,source:ca(s)})}).on(Z7,({domEvent:t,x:e,y:n,button:i="left"},s)=>{this._onUp({domEvent:t,x:e,y:n,button:i,source:ca(s)})}).on(J7,({domEvent:t,x:e,y:n,button:i="left"},s)=>{this._onClick({domEvent:t,x:e,y:n,button:i,source:ca(s)})}).on(K7,({domEvent:t,x:e,y:n,button:i="left"},s)=>{this._onDoubleClick({domEvent:t,x:e,y:n,button:i,source:ca(s)})}).on(Q7,({domEvent:t,x:e,y:n,delta:i,dx:s,dy:r})=>this._onWheel({domEvent:t,x:e,y:n,delta:i,source:"mouse",dx:s,dy:r})).on("touchStartGesture",t=>this._modules.events.fire("gestureStart",t)).on("touchProgressGesture",t=>this._modules.events.fire("gestureProgress",t)).on("touchEndGesture",t=>this._modules.events.fire("gestureEnd",t)).on("documentMouseMove",({domEvent:t,x:e,y:n},i)=>{this._onDocumentMove({domEvent:t,x:e,y:n,source:ca(i)})}).on("documentMouseUp",({domEvent:t,x:e,y:n,button:i="left"},s)=>{this._onDocumentUp({domEvent:t,x:e,y:n,source:ca(s),button:i})})}triggerUnhover(){this._hover=!1,this._hoveredElt=null}triggerDetection(){this._detectElement(this._modules.position.x,this._modules.position.y,!1,!1),this._elt&&(this._hoveredElt=this._elt,this._hover=!0)}getPointedElement(){return this._hoveredElt}getDraggedElement(){return this._draggedElt}isAnyButtonPressed(){return this._buttons.left.isPressed||this._buttons.right.isPressed||this._buttons.middle.isPressed}isAnyButtonDragging(){return this._buttons.left.isDragging||this._buttons.right.isDragging||this._buttons.middle.isDragging}isButtonPressed(t){return this._buttons[t].isPressed}isLeftPressed(){return this.isButtonPressed("left")}getCursorPosition(){return{x:this._modules.position.x,y:this._modules.position.y}}getCursorInformation(){return{x:this._modules.position.x,y:this._modules.position.y,target:this._hoveredElt}}setDetectionEnabled(t){this._disabledCounter=Math.max(0,this._disabledCounter+(t?-1:1))}_resetCurrent(t,e){for(const n in this._buttons){const i=this._buttons[n];i.isDragging&&this._modules.events.fire("dragEnd",{domEvent:null,x:t,y:e,button:n,target:this._draggedElt}),i.isPressed=!1,i.isDragging=!1}this._hover&&this._hoveredElt&&this._modules.events.fire("mouseout",{domEvent:null,x:t,y:e,target:this._hoveredElt}),this._hover=!1,this._hoveredElt=null,this._draggedElt=null}_onMove({domEvent:t,x:e,y:n,source:i}){let{dx:s,dy:r}=this._setPointerPosition(e,n);this._modules.events.fire("mousemove",{domEvent:t,x:e,y:n,dx:s,dy:r,source:i});for(const o in this._buttons){const a=this._buttons[o];if(a.isPressed)if(a.isDragging){const l=this._getStoredDXY();s+=l.dx,r+=l.dy,this._modules.events.fire("dragProgress",{domEvent:t,x:e,y:n,dx:s,dy:r,button:o,source:i,target:this._draggedElt})}else a.isDragging=!0,this._hoveredElt&&this._hover&&(this._modules.events.fire("mouseout",{domEvent:t,x:e,y:n,source:i,target:this._hoveredElt}),this._hover=!1),this._draggedElt||(this._draggedElt=this._hoveredElt),this._storeDXY(s,r),this._modules.events.fire("dragStart",{domEvent:t,x:e,y:n,button:o,source:i,target:this._draggedElt})}t&&!this._modules.graphics.getDomElement().contains(t.target)||this._detectElement(e,n,!1,!1),this._elt!==this._hoveredElt&&(this._hoveredElt&&this._hover&&(this._hover=!0,this._modules.events.fire("mouseout",{domEvent:t,x:e,y:n,source:i,target:this._hoveredElt})),this._hoveredElt=this._elt,this._elt&&(this._hover=!0,this._modules.events.fire("mouseover",{domEvent:t,x:e,y:n,source:i,target:this._hoveredElt})))}_onDocumentMove({domEvent:t,x:e,y:n,source:i}){for(const s in this._buttons){const{isDragging:r}=this._buttons[s];if(r){const{dx:o,dy:a}=this._setPointerPosition(e,n);this._modules.events.fire("dragProgress",{domEvent:t,x:e,y:n,dx:o,dy:a,button:s,source:i,target:this._draggedElt})}}}_onDocumentUp({domEvent:t,x:e,y:n,source:i,button:s}){if(s!=null&&this._buttons[s].isDragging){this._modules.events.fire("dragEnd",{domEvent:t,x:e,y:n,button:s,source:i,target:this._draggedElt});const r=this._buttons[s];r.isDragging=!1,r.isPressed=!1,this.isAnyButtonDragging()||(this._draggedElt=null)}}_onDown({domEvent:t,x:e,y:n,button:i,source:s}){if(i==null)return;this._detectElement(e,n,!1,!1),this._elt!==this._hoveredElt&&this._resetCurrent(e,n);const r=this._buttons[i];this._hoveredElt=this._elt,r.isPressed=!0,this._elt&&t&&(t.stopPropagation(),t.preventDefault()),this._modules.events.fire("mousedown",{domEvent:t,x:e,y:n,button:i,source:s,target:this._hoveredElt})}_onDoubleClick({domEvent:t,x:e,y:n,button:i,source:s}){i!=null&&(O2(t,"doubleclick")||this._modules.events.fire("doubleclick",{domEvent:t,x:e,y:n,button:i,source:s,target:this._hoveredElt}))}_onUp({domEvent:t,x:e,y:n,button:i,source:s}){if(i==null)return;const r=this._buttons[i];r.isPressed&&(r.isDragging&&(this._modules.events.fire("dragEnd",{domEvent:t,x:e,y:n,button:i,source:s,target:this._draggedElt}),r.isDragging=!1,this.isAnyButtonDragging()||(this._draggedElt=null)),r.isPressed=!1,this._detectElement(e,n,!1,!1),this._modules.events.fire("mouseup",{domEvent:t,x:e,y:n,button:i,source:s,target:this._elt}),this.isAnyButtonPressed()||this._hover||s==="touch"||(this._hoveredElt=this._elt,this._hoveredElt&&(this._modules.events.fire("mouseover",{domEvent:t,x:e,y:n,source:s,target:this._hoveredElt}),this._hover=!0)))}_onClick({domEvent:t,x:e,y:n,button:i,source:s}){O2(t,"click")||this._modules.events.fire("click",{domEvent:t,x:e,y:n,button:i,source:s,target:this._hoveredElt})}_onWheel({domEvent:t,x:e,y:n,delta:i,source:s,dx:r,dy:o}){this._modules.position.x=e,this._modules.position.y=n,this._modules.events.fire("mousewheel",{domEvent:t,x:e,y:n,dx:r,dy:o,delta:i,source:s,target:this._hoveredElt})}_storeDXY(t,e){this._accDx=t,this._accDy=e}_getStoredDXY(){const t=this._accDx,e=this._accDy;return this._accDx=0,this._accDy=0,{dx:t,dy:e}}_setPointerPosition(t,e){const n=t-this._prevX,i=e-this._prevY;return this._modules.position.x=t,this._modules.position.y=e,this._prevX=t,this._prevY=e,this._accDx=0,this._accDy=0,{dx:n,dy:i}}_detectElement(t,e,n,i){this._elt=this.detectElementAt(t,e,n,i)}detectElementAt(t,e,n,i){if(this._disabledCounter!==0)return null;const s=this._modules.settings,r=s.get("detect.enableSpatialIndex"),o=s.get("detect.nodeErrorMargin")||0,a=s.get("detect.edgeErrorMargin")||0;let l=s.get("detect.nodes"),d=s.get("detect.edges");i&&(l=!0,d=!0);let h=null,c=[],g=[];if(!n&&r&&(l||d)){const p=s.get("detect.spatialIndexMarginRatio"),v=Math.max(o*p,a*p),x=this._modules.spatial.queryRawProjected(t-v,e-v,t+v,e+v);c=x.nodes,g=x.edges}let m=null,_=null;if(l&&(m=this._modules.graphics.detectNode(t,e,!!s.get("detect.nodeTexts"),!!s.get("detect.nodeBadges"),o,c)),d&&(g.length<tY||!m)&&(_=this._modules.graphics.detectEdge(t,e,!!s.get("detect.edgeTexts"),a,g)),m&&_){const p=this._modules.graphics.getAttributesManager().getFlexArrays();h=p.nodes.current.layer.get(m._index)>=p.edges.current.layer.get(_._index)?m:_}else m?h=m:_&&(h=_);return h}};function ca(t){return t.indexOf("touch")===0?"touch":"mouse"}var Ny=!1,F2={down:{trigger:"pointerdown",duplicate:"mousedown"},click:{trigger:"pointerdown",duplicate:"mouseup"},doubleclick:{trigger:"pointerdown",duplicate:"mouseup"}};function O2(t,e){if(t)return t.type===F2[e].trigger&&(Ny=!0),t.type===F2[e].duplicate&&Ny?(Ny=!1,!0):void 0}var nY=class extends ee{constructor(){super(...arguments),this._dragged=null,this._start=[],this._end=[],this._shouldDrag=({target:t,button:e})=>{const n=e==="left",i=this._modules.settings.get("interactions.drag.enabled"),s=t!==null&&t.isNode&&t.getAttribute("draggable")===!0;return!!(n&&i&&s)},this._onDragStart=({x:t,y:e,target:n})=>{n&&(n.isSelected()?this._dragged=this._modules.selection.getSelectedNodes().filter(i=>i.getAttribute("draggable")):this._dragged=n.toList()),this._dragged&&(this._start=this._dragged.getPosition(),this._end=nn(this._start),this._onBeforeDrag=this._modules.settings.get("interactions.drag.onBeforeDrag"),this._startDrag=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),this._dragged.addClass(_f),this._modules.events.fire("nodesDragStart",{nodes:this._dragged}),this._modules.graphics.addCursorStyle(this._modules.settings.get("interactions.drag.cursor")))},this._onDrag=()=>{if(!this._dragged||!this._startDrag)return;const{x:t,y:e}=this._modules.captor.getCursorInformation(),n=this._dragged._indexes,i=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),s=i.x-this._startDrag.x,r=i.y-this._startDrag.y;for(let o=0;o<n.length;++o){const a=this._start[o],l=this._end[o];l.x=a.x+s,l.y=a.y+r}this._onBeforeDrag&&this._onBeforeDrag(this._dragged,t,e,this._end),this._modules.settings.get("interactions.drag.applyResult")&&this._modules.individualAttributes.setMultipleAttributes(this._dragged,this._end),this._modules.events.fire("nodesDragProgress",{nodes:this._dragged,dx:s,dy:r})},this._onDragEnd=()=>{this._dragged&&(this._dragged.removeClass(_f),this._modules.graphics.removeCursorStyle(this._modules.settings.get("interactions.drag.cursor")),this._modules.events.fire("nodesDragEnd",{nodes:this._dragged,start:this._start,end:this._end}),this._dragged=null,this._start=[],this._end=[])}}onMounted(){this._modules.classes.createClass({name:_f,isBuiltin:!0,nodeAttributes:{layer:Rj}}),this._modules.events.register(["nodesDragStart","nodesDragProgress","nodesDragEnd"]),this._modules.settings.register("interactions.drag.enabled",!0).register("interactions.drag.cursor","move").register("interactions.drag.onBeforeDrag",void 0),this._modules.settings.register("interactions.drag.applyResult",!0),this._modules.interactions.onDrag({priority:"drag",disableDetection:!0,check:this._shouldDrag,onStart:this._onDragStart,onProgress:this._onDrag,onStop:this._onDragEnd})}},iY={color:"#00C3FF",radius:4,cursorOnHover:"grab",cursorOnDrag:"grabbing"},sY=class extends ee{constructor(){super(...arguments),this._hoverHandle=!1,this._grabHandle=!1,this._x=0,this._y=0,this._enabled=!1,this._onMouseUp=()=>this._grabHandle=!1,this._onMouseDown=()=>{this._hoverHandle&&(this._grabHandle=!0)},this._onDragProgress=()=>{this._grabHandle&&this._refreshCanvas()},this._onDragStart=()=>{if(!this._movedEdges)return;this._nodesToHighlight=this._nodesToHighlight.filter(e=>e!==this._startNode&&!e.isVirtual()),this._movedEdges.setExcluded(!0);const t=this._options.cursorOnDrag;this._prevSettings=this._modules.settings.update({edgeHover:!1,cursor:{default:t,node:t,edge:t}})},this._onDragEnd=()=>{if(!this._movedEdges)return;this._restoreSettings();const t=this._getPointedNode();t&&this._movedEdges.forEach(e=>{e.getTarget()===this._startNode?e.setTarget(t):e.setSource(t)}),this._movedEdges.setExcluded(!1),this._movedEdges.setSelected(!0),this._movedEdges=null,this._refreshHandles()},this._refreshHandles=()=>{if(!this._enabled||this._movedEdges)return;const t=this._modules.selection.getSelectedEdges();this._nodesToHighlight=t.getExtremities().dedupe().filter(e=>!e.isVirtual()),this._rewirableClass.clearEdges(),this._rewirableClass.add(t),this._refreshCanvas()},this._shouldInteractionStart=({target:t})=>{if(!this._enabled||!t||!t.isNode||!this._hoverHandle||t.isVirtual())return!1;const e=t.getAdjacentEdges().filter(n=>n.isSelected());return!!e.size&&(this._movedEdges=e,this._edgeColors=this._movedEdges.getAttribute("color"),this._startNode=t,!0)},this._refreshCanvas=()=>{this._enabled&&this._layer.refresh()},this._checkForHover=()=>{if(!this._enabled||!this._nodesToHighlight)return;const t=this._options.radius,e=this._nodesToHighlight.getPosition(),n=this._modules.camera.screenToGraphCoordinates(this._modules.captor.getCursorPosition());for(let i=0;i<e.length;i++){const{x:s,y:r}=e[i];if(wn(s,r,n.x,n.y)<t)return void this._enableCursorOnHover()}this._disableCursorOnHover()}}onMounted(){this._rewirableClass=this._modules.classes.createClass({name:tM,isBuiltin:!0,edgeAttributes:{layer:Fj}})}enable(t){this._enabled||(this._modules.events.on("move",this._checkForHover).on("mousemove",this._checkForHover).on("dragProgress",this._onDragProgress).on("nodesDragProgress",this._refreshCanvas).on("mousedown",this._onMouseDown).on("mouseup",this._onMouseUp).on("edgesSelected",this._refreshHandles).on("edgesUnselected",this._refreshHandles),this._interaction=this._modules.interactions.onDrag({priority:"rewiring",check:this._shouldInteractionStart,onStart:this._onDragStart,onProgress:({x:e,y:n})=>{this._x=e,this._y=n},onStop:this._onDragEnd}),this._options=wt(wt({},iY),t),this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(e=>{if(!this._enabled||!this._nodesToHighlight)return;const n=this._modules.captor.getCursorPosition(),i=this._getPointedNode(),s=this._options.color,r=this._options.radius,o=2*r;if(this._displayMovedEdges(e),e.fillStyle=s,e.strokeStyle=s,this._nodesToHighlight.forEach(a=>{const{x:l,y:d}=a.getPosition();e.fillRect(l-r,d-r,o,o)}),this._movedEdges){const a=i?i.getPosition():n;e.fillRect(a.x-r,a.y-r,o,o)}},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._refreshHandles())}disable(){this._enabled&&(this._interaction&&this._interaction.stop&&this._interaction.stop(),this._interaction=void 0,this._modules.graphics.removeCursorStyle(this._options.cursorOnDrag),this._disableCursorOnHover(),this._restoreSettings(),this._layer.destroy(),this._rewirableClass.clearEdges(),this._enabled=!1,[this._checkForHover,this._onDragProgress,this._refreshCanvas,this._onMouseDown,this._onMouseUp,this._refreshHandles].forEach(t=>this._ogma.events.off(t)))}enabled(){return this._enabled}_restoreSettings(){this._prevSettings&&(this._modules.settings.update(this._prevSettings),this._prevSettings=void 0)}_disableCursorOnHover(){this._hoverHandle&&!this._grabHandle&&(this._hoverHandle=!1,this._modules.graphics.removeCursorStyle(this._options.cursorOnHover))}_enableCursorOnHover(){this._hoverHandle||(this._hoverHandle=!0,this._modules.graphics.addCursorStyle(this._options.cursorOnHover))}_displayMovedEdges(t){if(!this._movedEdges)return;const e=this._x,n=this._y,i=this._modules.camera.screenToGraphCoordinates({x:e,y:n});this._movedEdges.forEach((s,r)=>{const o=this._edgeColors[r],a=s.getSource(),l=s.getTarget(),d=this._getPointedNode(),h=l===this._startNode?a:l,c=Number(s.getAttribute("width")),g=h.getPosition(),m=d?d.getPosition():i;t.beginPath(),t.moveTo(g.x,g.y),t.lineTo(m.x,m.y),t.strokeStyle=o,t.lineWidth=c,t.stroke()})}_getPointedNode(){const t=this._modules.captor.getPointedElement();return t&&t.isNode&&!t.isVirtual()?t:null}},D2={cursor:"nesw-resize",color:"#00C3FF",lineWidth:1,handleSize:6,detectionMargin:5,snappingRatio:1.25,nbNodesToSnapTo:5,previewColor:"rgba(0, 0, 0, 0.2)",sizeIndicatorColor:"black",sizeIndicatorOffset:5,sizeIndicatorWidth:3,sizeIndicatorThickness:1},rY=class extends ee{constructor(){super(...arguments),this._enabled=!1,this._nodesToHighlight=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[],this._onSelectionChange=()=>{this._enabled&&(this._nodesToHighlight=this._modules.selection.getSelectedNodes(),this._displayHandles())},this._displayHandlesHandler=()=>this._displayHandles(),this._moveHandler=({x:t,y:e})=>{this._modules.dom.setTimeout(()=>this._detectBoundingBoxes(t,e))}}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.interactions.onDrag({priority:"resizing",disableDetection:!0,check:()=>!(!this._enabled||!this._pointedNode),onStart:({x:t,y:e})=>{this._x=t,this._y=e,this._nodeBeingResized=this._pointedNode},onProgress:({x:t,y:e})=>{this._x=t,this._y=e,this._displayHandles()},onStop:()=>{if(this._nodesToHighlight){const t=this._modules.camera.zoom,e=this._nodesToHighlight.getAttributes(["x","y","radius"]).map(({x:n,y:i,radius:s},r)=>{const o=this._additionalRadiuses[r]/t;return{radius:+s+o,x:n+o,y:i-o}});this._nodesToHighlight.setAttributes(e)}this._pointedNode=null,this._nodeBeingResized=null,this._displayHandles()}})}onReady(){this._modules.events.on(["nodesSelected","nodesUnselected"],this._onSelectionChange)}_enableCursor(){this._cursorEnabled||(this._modules.graphics.addCursorStyle(this._options.cursor),this._cursorEnabled=!0)}_disableCursor(){this._cursorEnabled&&(this._modules.graphics.removeCursorStyle(this._options.cursor),this._cursorEnabled=!1)}_detectBoundingBoxes(t,e){if(!this._enabled||this._nodeBeingResized||!this._nodesToHighlight)return;const n=this._options.handleSize/2,i=this._options.detectionMargin;return this._pointedNode=null,this._forEachNodeToHighlight((s,r,o)=>{const a=r.x+o-n-i,l=r.x+o+n+i,d=r.y-o-n-i,h=r.y-o+n+i;t>=a&&t<=l&&e>=d&&e<=h&&(this._pointedNode=s)}),this._pointedNode?this._enableCursor():this._disableCursor()}_forEachNodeToHighlight(t){this._nodesToHighlight&&this._nodesToHighlight.forEach(e=>{const n=e.getPositionOnScreen(),i=this._getTotalRadius(e);t(e,n,i)})}_displayHandles(){this._enabled&&this._nodesToHighlight&&this._layer.refresh()}_displayNodePreview(t,e,n,i,s,r){if(s*=1/this._modules.camera.getZoom(),t.beginPath(),r.length===1)t.arc(n,i,s,0,2*Math.PI);else for(let o=0;o<r.length;++o){const a=r[o],l=n+a.x*s,d=i+a.y*s;o===0?t.moveTo(l,d):t.lineTo(l,d)}t.fillStyle=this._options.previewColor,t.fill()}_getTotalRadius(t,e=!0){return Number(t.getAttribute("radius"))*(this._modules.camera.zoom*(e?1:0))+Number(t.getAttribute("innerStroke.width"))+Number(t.getAttribute("outerStroke.width"))+this._options.lineWidth/2}_snap(t,e,n){const i=this._modules.spatial.getNodesInScreenByDistance(e).filter(c=>!c.isSelected()).slice(0,this._options.nbNodesToSnapTo),s=this._getTotalRadius(e),r=s+n,o=this._options.snappingRatio,a=r/s,l=Math.round(jI(a,o));let d=s*Math.pow(o,l),h=null;if(i.forEach(c=>{const g=this._getTotalRadius(c);Math.abs(g-r)<=Math.abs(d-r)&&(d=g,h=c)}),h){t.save(),t.strokeStyle=this._options.sizeIndicatorColor,t.lineWidth=this._options.sizeIndicatorThickness/this._modules.camera.getZoom();const c=h.getAttribute("radius");this._displaySizeIndicator(t,e,d),i.filter(g=>g.getAttribute("radius")===c).forEach(g=>this._displaySizeIndicator(t,g)),t.restore()}return d-s}_displaySizeIndicator(t,e,n){n=n||void 0;const i=this._modules.camera.getZoom(),s=e.getPosition(),r=this._getTotalRadius(e),o=(n||r)/i,a=(n?n-r:0)/i,l=a+(-this._options.sizeIndicatorOffset-(n?Number(e.getAttribute("innerStroke.width"))+Number(e.getAttribute("outerStroke.width")):0))/i,d=s.x-o+l|0,h=s.y-o-a|0,c=s.y+o-a|0,g=this._options.sizeIndicatorWidth/i;t.beginPath(),t.moveTo(d-g,h),t.lineTo(d+g,h),t.moveTo(d,h),t.lineTo(d,c),t.moveTo(d-g,c),t.lineTo(d+g,c),t.stroke()}enable(t={}){this._enabled||(this._options=wt(wt({},D2),t),this._layer=this._modules.layers.addCanvasLayer(e=>{const n=Vi(),i=this._modules.camera.getZoom(),{color:s,lineWidth:r}=this._options;let o=this._options.handleSize,a=0;if(this._nodeBeingResized){const l=this._getTotalRadius(this._nodeBeingResized),d=this._nodeBeingResized.getPositionOnScreen();a=Math.max(this._x-(d.x+l),-(this._y-(d.y-l)))/2}this._additionalRadiuses=[],this._nodesToHighlight&&this._nodesToHighlight.forEach(l=>{const d=l.getPosition();let h=this._getTotalRadius(l),c=0;if(this._nodeBeingResized){c=a;const g=-h+Number(l.getAttribute("innerStroke.width"))+Number(l.getAttribute("outerStroke.width"))+r/2+1;c=c<g?g:this._snap(e,l,c),this._additionalRadiuses.push(c);const m=l.getAttribute("shape"),_=this._engine.getShapePoints(m),p=d.x+c/i,v=d.y-c/i,x=h+c;this._displayNodePreview(e,n,p,v,x,_)}e.strokeStyle=s,e.fillStyle=s,e.lineWidth=r/i,h/=i,c/=i,o/=i*n,e.strokeRect(d.x-h,d.y-h-2*c,2*(c+h),2*(c+h)),e.fillRect(d.x+h+2*c-o/2,d.y-h-2*c-o/2,o,o)})},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._modules.events.on(["mousemove","mousedown"],this._moveHandler),this._enabled=!0)}disable(){this._enabled&&(this._modules.events.off(this._displayHandlesHandler),this._modules.events.off(this._moveHandler),this._layer.destroy(),this._disableCursor(),this._reset())}_reset(){this._enabled=!1,this._nodesToHighlight=null,this._options=wt({},D2),this._nodeBeingResized=null,this._pointedNode=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[]}enabled(){return this._enabled}},oY={strokeColor:"black",strokeWidth:5,dashed:!0,cursorStyle:"cell",createNodes:!0,condition:Gb,onNodeCreated:he,onEdgeCreated:he,createNode:Gs,createEdge:Gs,onComplete:he},aY=class extends ee{constructor(){super(...arguments),this._enabled=!1,this._blockId=0,this._cursorEnabled=!1}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._depth=$h(0).edgeBody,this._modules.events.register(["connectNodes"]),this._interaction=this._modules.interactions.onDrag({priority:"connectNodes",check:({target:t,button:e="left"})=>this._enabled&&e==="left"&&t&&t.isNode&&!t.isVirtual(),onStart:({target:t})=>this._onStart(t),onProgress:({x:t,y:e})=>this._onMove(t,e),onStop:()=>this._onStop()}),this._modules.events.on("clearGraph",()=>this.disable())}_onStart(t){t&&(this._cursorEnabled=!0,this._startNode=t,this._startPos=t.getPosition(),this._modules.graphics.addCursorStyle(this._options.cursorStyle),this._blockId=this._modules.graphics.allocateGraphicsEngineBlockId())}_onMove(t,e){this._startNode!==null&&(this._endPos=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),this._drawLine())}_onStop(){if(this._startNode===null)return;const{condition:t,onNodeCreated:e,onEdgeCreated:n,createEdge:i,createNode:s,onComplete:r,createNodes:o}=this._options;let a=this._modules.captor.getPointedElement(),l=null,d=null;if(this._modules.graphics.releaseGraphicsEngineBlockId(this._blockId),!a&&o){const h=s({attributes:{x:this._endPos.x,y:this._endPos.y}});a=this._modules.graph.addNode(h),d=a,e&&e(d)}if(a&&!a.isVirtual()&&(d||!t||t(this._startNode,a))){const h=i({source:this._startNode.getId(),target:a.getId()});l=this._modules.graph.addEdge(h),n&&n(l)}r&&(this._modules.events.fire("connectNodes",{source:this._startNode,target:a,edge:l}),r(this._startNode,a,l||void 0)),this.disable()}_drawLine(){this._group.reset(zs,!1,this._depth);const t=this._group.nextAndReset().end;t.pieceId=Cp,t.shape="line",t.x1=this._startPos.x,t.y1=this._startPos.y,t.x2=this._endPos.x,t.y2=this._endPos.y,t.fillColor=this._options.strokeColor,t.thicknessOrFontSizeFixed=this._options.strokeWidth,this._options.dashed&&(t.dashLength=3,t.gapLength=1),this._engine.storeGroup(this._blockId,this._group),this._modules.dom.refresh()}enable(t={}){return this._enabled||(this._options=wt(wt({},oY),t),this._enabled=!0,this._cursorEnabled=!1,this._startNode=null,this._prevSettings=this._modules.settings.update({"cursor.node":this._options.cursorStyle,"detect.edges":!1}),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorInformation())),this}disable(){return this._enabled?(this._enabled=!1,this._modules.settings.update(this._prevSettings),this._cursorEnabled&&this._modules.graphics.removeCursorStyle(this._options.cursorStyle),this):this}enabled(){return this._enabled}},lY=["top","bottom","left","right","cssDefined"],uY=1e4,dY={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},hY={position:"top",autoAdjust:!0,delay:100},cY={hover:{node:({target:t})=>t&&t.isNode,edge:({target:t})=>t&&!t.isNode},click:{left:{node:({target:t,button:e})=>e==="left"&&t&&t.isNode,edge:({target:t,button:e})=>e==="left"&&t&&!t.isNode,background:({target:t,button:e})=>e==="left"&&!t},right:{node:({target:t,button:e})=>e==="right"&&t&&t.isNode,edge:({target:t,button:e})=>e==="right"&&t&&!t.isNode,background:({target:t,button:e})=>e==="right"&&!t}},doubleclick:{left:{node:({target:t,button:e})=>e==="left"&&t&&t.isNode,edge:({target:t,button:e})=>e==="left"&&t&&!t.isNode,background:({target:t,button:e})=>e==="left"&&!t},right:{node:({target:t,button:e})=>e==="right"&&t&&t.isNode,edge:({target:t,button:e})=>e==="right"&&t&&!t.isNode,background:({target:t,button:e})=>e==="right"&&!t}}},gY=class extends ee{constructor(){super(...arguments),this._x=0,this._y=0}onMounted(){this._handlers={},this._currentHandlerName=null,this._tooltip=null,this._isHover=!1,this._modules.events.register(["tooltipShow","tooltipHide"]),this._modules.events.on(["mouseup","dragStart"],()=>{this._isHover||this._hideTooltip(!1)}).on("mouseout",()=>{this._isHover&&this._hideTooltip(!1)}).on("clearGraph",()=>this._hideTooltip(!1)),this._modules.interactions.onHover(this._createInteraction("hover",!0)),this._modules.interactions.onClick(this._createInteraction("click")),this._modules.interactions.onDoubleClick(this._createInteraction("doubleclick"))}hide(){this._hideTooltip(!0)}isShown(){return!!this._tooltip}refresh(){this._refreshTooltip()}show(e,{position:n="top",autoAdjust:i=!0,className:s,x:r=0,y:o=0}={}){this._showTooltip(e,{position:n,autoAdjust:i,className:s},{x:r,y:o})}setHandler(e,n,i){const s=wt(wt({},hY),i);s.position&&lY.indexOf(s.position)===-1&&(s.position="top"),this._handlers[e]={handler:n,condition:Qe(cY,e),settings:s}}_hideTooltip(e){if(this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null),e&&(this._currentHandlerName=null),this._tooltip){const n=this._tooltip;this._tooltip.parentNode&&this._tooltip.parentNode.removeChild(this._tooltip),this._tooltip=null,this._modules.events.fire("tooltipHide",{tooltip:n})}}_createInteraction(e,n=!1){return{priority:"tooltip",check:i=>{const s=z2(e,i),r=this._handlers[s];return(!n||!this._modules.connectNodes.enabled())&&(!(!r||!r.condition(i))||!(n||!this._currentHandlerName||this._isHover)&&this._tooltip!==null)},handler:i=>{const{target:s,x:r,y:o}=i;this._hideTooltip(!1),this._isHover=n,this._elt=s,this._x=r,this._y=o,this._currentHandlerName=z2(e,i),this._refreshTooltip()}}}_refreshTooltip(){if(!this._currentHandlerName)return void this._hideTooltip(!1);const e=this._handlers[this._currentHandlerName];if(!e)return;const{settings:n,handler:i}=e,s=this._elt;if(s){const o=s.isNode?"node":"edge";if(this._currentHandlerName.indexOf(o)===-1)return}const r=i(s);Promise.resolve(r).then(o=>{this._schedule(()=>this._showTooltip(o,n),n.delay)})}_schedule(e,n){this._timeout&&this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._timeout=null,e()},n)}_showTooltip(e,n,i){this._hideTooltip(!1);const{position:s,className:r,autoAdjust:o}=n;let a=this._x,l=this._y,d=this._elt;const h=this._modules.dom.getDimensions();let c=0,g=0;if(i&&(a=i.x,l=i.y,d=null),typeof e=="string")this._tooltip=fY("div"),this._tooltip.innerHTML=e;else{if(!_I(e))throw new Error(`invalid tooltip ${e}, expected HTML string or HTML element`);this._tooltip=e}const m=this._tooltip;if(r&&this._tooltip.classList.add(r),s!=="cssDefined"&&(m.style.position="absolute"),m.style.zIndex=uY.toString(),this._modules.dom.appendElement(m),d&&d.isNode){const v=d,x=v.getPositionOnScreen(),b=Number(v.getAttribute("radius"))*(v.getAttribute("scalingMethod")==="fixed"?1:this._modules.camera.getZoom())+Number(v.getAttribute("innerStroke.width"))+Number(v.getAttribute("outerStroke.width"));a=x.x,l=x.y,c=b,g=b}const _=m.offsetWidth/2,p=m.offsetHeight/2;if(c+=_,g+=p,s&&s!=="cssDefined"){const v=dY[s];let x=v.x,b=v.y;if(o){const E=a+c*v.x,S=l+g*v.y;(E-_<0||E+_>=h.width)&&(s==="left"||s==="right"?x*=-1:x=E-_<0?(_-E+1)/c:(h.width-(E+_)-1)/c),(S-p<0||S+p>=h.height)&&(s==="top"||s==="bottom"?b*=-1:b=S-p<0?(p-S+1)/g:(h.height-(S+p)-1)/g)}m.style.left=a+c*x-_+"px",m.style.top=l+g*b-p+"px"}this._modules.events.fire("tooltipShow",{tooltip:m})}};function z2(t,{button:e,target:n}){return`${t}${e?`.${e}`:""}.${n!==null?n.isNode?"node":"edge":"background"}`}function fY(t){return Yr?document.createElement(t):dm()}var hh={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",46:"del",8:"backspace",32:"space",224:"cmd",91:"cmd",92:"cmd",93:"cmd",187:"+",189:"-"},B2=Object.keys(hh).reduce((t,e)=>{const n=hh[e];return t[n]||(t[n]=[]),t[n].push(e),t},{}),mY=class extends ee{constructor(){super(...arguments),this._onBlur=()=>this.resetKeys(),this._onKeyUp=t=>{const e=t.keyCode||t.which;this._pressed[e]=!1,this._modules.events.fire("keyup",{domEvent:t,key:hh[e],code:e})},this._onKeyDown=t=>{const e=t.keyCode||t.which,n=this._binds[e];if(!this._pressed[e]){if(this._pressed[e]=!0,n)for(const i of n)i.keys.every(s=>s.some(r=>this._pressed[r]))&&i.handler({domEvent:t});this._modules.events.fire("keydown",{domEvent:t,key:hh[e],code:e})}}}onMounted(){this._modules.events.register(["keyup","keydown"]),this._binds=[],this._pressed=[],this._modules.dom.addWindowEventListener("keydown",this._onKeyDown).addWindowEventListener("keyup",this._onKeyUp).addWindowEventListener("visibilitychange",this._onBlur).addWindowEventListener("blur",this._onBlur,!1),this._idleTimeout=4e3,this._prevEventTimeStamp=ci(),this._modules.events.onAnyEvent(()=>{const t=ci();t-this._prevEventTimeStamp>this._idleTimeout&&this.resetKeys(),this._prevEventTimeStamp=t})}setIdleTimeout(t){if(!isFinite(t)||t<=1)throw new TypeError("Idle timeout must be a positive number > 1");this._idleTimeout=t}resetKeys(){for(let t=0;t<this._pressed.length;t++)this._pressed[t]&&(this._pressed[t]=!1,this._modules.events.fire("keyup",{key:hh[t],code:t}))}onKeyPress(t,e){let n=[];if(typeof t=="number")n=[t];else if(typeof t=="string")n=t.split(" ");else{if(!Array.isArray(t))throw new TypeError(`${t} is not a number, string or array`);n=t}if(n.length===0)throw new Error("the array should contain at least one element");const i=n.map(o=>{if(typeof o=="number")return[o];if(typeof o=="string"){const a=B2[o];if(!a)throw new Error(`${o} is not a valid key identifier`);return a}throw new TypeError(`${o} is not a valid key identifier`)}),s=i.pop(),r={keys:i,handler:e};s&&s.forEach(o=>{this._binds[o]||(this._binds[o]=[]),this._binds[o].push(r)})}isPressed(t){if(typeof t=="number")return this._pressed[t];if(typeof t=="string"){const e=B2[t];if(e)return e.some(n=>this._pressed[n])}return!1}},pY=[{name:"color",isNode:!0},{name:"shape",isNode:!0},{name:"radius",isNode:!0},{name:"icon.content",isNode:!0},{name:"image.url",isNode:!0},{name:"image",isNode:!0},{name:"color",isNode:!1},{name:"shape",isNode:!1},{name:"width",isNode:!1}],eo=Math.PI,no=2*Math.PI,yF=Math.cos(eo/2-no/5),vF=Math.cos(eo/2-no/5*2),xF=Math.cos(eo/2-no/5*3),bF=Math.cos(eo/2-no/5*4),EF=Math.sin(-eo/2+no/5),SF=Math.sin(-eo/2+no/5*2),wF=Math.sin(-eo/2+no/5*3),AF=Math.sin(-eo/2+no/5*4),Fm=1.6,TF=3,_Y=.9,$g=.31,Ry=1/3,yY=[8,3],vY=[3,3],jg={position:"bottom",widgetWidth:130,fontFamily:"Arial",fontSize:10,fontColor:"black",titleFontSize:12,titleFontColor:"black",titleMaxLength:20,titleTextAlign:"left",shapeColor:"grey",backgroundColor:"white",borderColor:"black",borderRadius:0,borderWidth:1,innerMargin:10,outerMargin:5,circleStrokeWidth:3,titleFunction:t=>t[t.length-1]},xY=["widgetWidth","fontSize","titleFontSize","borderRadius","borderWidth","innerMargin","outerMargin","circleStrokeWidth"];function CF(t){return Array.isArray(t)?t.reduce((e,n)=>e&&CF(n),!0):t==="undefined"||!isNaN(Number(t))}function LF(t){return Array.isArray(t)?t.reduce((e,n)=>Math.min(e,LF(n)),1/0):typeof(t=Number(t))=="number"?isNaN(t)?1/0:+t:1/0}function PF(t){return Array.isArray(t)?t.reduce((e,n)=>Math.max(e,PF(n)),-1/0):typeof(t=Number(t))=="number"?isNaN(t)?-1/0:+t:-1/0}function Gr(t){const e=["K","M","B","T","P","E","Z","Y"];if(t>9999){let n=0;for(;n<e.length&&t>999;)t/=1e3,n++;return(U2(t,3)+e[n-1]).toString()}return U2(t,4).toString()}function U2(t,e=3){const n=e===4?10:1;return t<10?Math.round(100*t*n)/(100*n):t<100?Math.round(10*t*n)/(10*n):t<1e3?Math.round(t*n)/n:Math.round(t)}function kF(t){return t.innerMargin+(t.titleFontSize+t.fontSize)*Fm}var bY=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:t.title<=e.title?-1:1,EY=(t,e)=>t.height-e.height,SY=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:e.height-t.height,wY=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:t.content[0].title<=e.content[0].title?-1:1;function AY(t,e,n){const i=e.getContext("2d"),{x:s,y:r,height:o,isNode:a,styleProperty:l,title:d,mapping:h,iconFont:c,iconFontStyle:g}=n;LY(i,t,s,r,o),PY(i,t,d,s,r);const m=t.fontSize*Fm,_=t.fontSize/2*Fm*_Y,p=t.fontSize*TF,v=t.fontSize,x=CY(t,a);let b=r+kF(t);const E=s+t.innerMargin+x/2,S=s+2*t.innerMargin+x,A=nh(h),T=CF(A),P=t.fontColor,k=t.shapeColor,I=Object.keys(h);if(T&&(I.sort((R,M)=>Dr(h[M])-Dr(h[R])),l==="radius"||l==="width")){const R=LF(A),M=PF(A);return(a?VY:HY)(t,i,s,b,R,(R+M)/2,M,k)}I.forEach(R=>{const M=h[R];l==="color"&&(a?IF(i,E,b,_,R):IY(i,E,b,p,v,R)),l==="shape"&&(a?zY(i,E,b,_,R,k):jY(i,E,b,p,v,R,k)),l==="icon.content"&&MY(i,E,b,R,c,_,P,g),l!=="image"&&l!=="image.url"||NY(i,E,b,_,R),kY(i,t,S,b,M,T),b+=m})}function TY(t,e,n,i,s,r){t.beginPath(),t.arc(e,n,i,0,no),t.strokeStyle=s,t.lineWidth=r,t.stroke()}function mc(t,e,n,i,s="left",r="normal"){t.textAlign=s,t.textBaseline="middle",t.fillStyle=i,t.font=`${r} ${n}px "${e}"`}function CY(t,e){const n=e?1:TF;return t.fontSize*n}function LY(t,e,n,i,s){return GY(t,n,i,e.widgetWidth,s,e.borderRadius,e.backgroundColor,e.borderColor,e.borderWidth)}function PY(t,e,n,i,s){mc(t,e.fontFamily,e.titleFontSize,e.titleFontColor,e.titleTextAlign);const r=e.titleTextAlign==="center",o=e.widgetWidth-2*e.innerMargin,a=t.measureText(n).width,l=i+(r?e.widgetWidth/2:e.innerMargin),d=s+e.titleFontSize/2+e.innerMargin;if(a>o){const h=o/a,c=(n.length*h|0)-2;n=n.substr(0,c)+"…"}t.fillText(n,l,d)}function kY(t,e,n,i,s,r){let o=s.join();if(r)if(s.length===1)o=Gr(s[0]);else{const a=Dr(s),l=ql(s);o=`${Gr(a)} - ${Gr(l)}`}mc(t,e.fontFamily,e.fontSize,e.fontColor),t.fillText(o,n,i)}function IF(t,e,n,i,s){t.beginPath(),t.arc(e,n,i,0,2*eo),t.fillStyle=s,t.fill()}function IY(t,e,n,i,s,r){t.fillStyle=r,t.fillRect(e-i/2,n-s/2,i,s)}function MY(t,e,n,i,s,r,o,a){mc(t,s,2*r,o,"center",a),t.fillText(i,e,n)}function NY(t,e,n,i,s){if(typeof Image>"u")return;t._imgStore||(t._imgStore={});let r=t._imgStore[s];if(r)return t.drawImage(r,e-i,n-i,2*i,2*i);r=new Image,r.src=s,r.onload=()=>{t.drawImage(r,e-i,n-i,2*i,2*i)},t._imgStore[s]=r}function RY(t,e,n,i){t.fillRect(e-i,n-i*$g,2*i,2*i*$g),t.fillRect(e-i*$g,n-i,2*i*$g,2*i)}function FY(t,e,n,i){return t.beginPath(),t.moveTo(e-i,n),t.lineTo(e,n-i),t.lineTo(e+i,n),t.lineTo(e,n+i),t.fill()}function OY(t,e,n,i){t.beginPath(),t.moveTo(e,n-i),t.lineTo(e+yF*i,n+EF*i),t.lineTo(e+vF*i,n+SF*i),t.lineTo(e+xF*i,n+wF*i),t.lineTo(e+bF*i,n+AF*i),t.fill()}function DY(t,e,n,i){t.beginPath(),t.moveTo(e,n-i),t.lineTo(e+vF*i,n+SF*i),t.lineTo(e+bF*i,n+AF*i),t.lineTo(e+yF*i,n+EF*i),t.lineTo(e+xF*i,n+wF*i),t.fill()}function zY(t,e,n,i,s,r){switch(t.fillStyle=r,s){case"square":return t.fillRect(e-i,n-i,2*i,2*i);case"circle":return IF(t,e,n,i,r);case"cross":return RY(t,e,n,i);case"diamond":return FY(t,e,n,i);case"equilateral":return OY(t,e,n,i);case"star":return DY(t,e,n,i)}}function BY(t,e,n,i,s){t.fillRect(e-i/2,n-s/4,i*(1-Ry),s/2),t.beginPath(),t.moveTo(e+i*(1-Ry-.5),n-s/2),t.lineTo(e+i*(1-Ry-.5),n+s/2),t.lineTo(e+i/2,n),t.fill()}function UY(t,e,n,i,s,r,o){t.beginPath(),t.moveTo(e-i/2,n),t.lineTo(e+i/2,n),t.strokeStyle=r,t.lineWidth=s/2,t.setLineDash(o==="dashed"?yY:vY),t.stroke()}function $Y(t,e,n,i,s){t.beginPath(),t.moveTo(e-i/2,n-s/2),t.lineTo(e-i/2,n+s/2),t.lineTo(e+i/2,n),t.fill()}function jY(t,e,n,i,s,r,o){return t.fillStyle=o,r==="line"&&t.fillRect(e-i/2,n-s/4,i,s/2),r==="arrow"?BY(t,e,n,i,s):r==="dashed"||r==="dotted"?UY(t,e,n,i,s,o,r):r==="tapered"?$Y(t,e,n,i,s):void 0}function GY(t,e,n,i,s,r,o,a,l){t.setLineDash([]),t.beginPath(),t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+r),t.lineTo(e+i,n+s-r),t.quadraticCurveTo(e+i,n+s,e+i-r,n+s),t.lineTo(e+r,n+s),t.quadraticCurveTo(e,n+s,e,n+s-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.closePath(),t.fillStyle=o,t.fill(),t.strokeStyle=a,t.lineWidth=l,t.stroke()}function VY(t,e,n,i,s,r,o,a){const l=.7*t.fontSize,d=3*l,h=(l+d)/2,c=n+t.innerMargin+d,g=c+d+t.innerMargin,m=i+2*d-.5*t.innerMargin,_=t.circleStrokeWidth;for(const p of[l,h,d])TY(e,c,m-p,p,a,_);mc(e,t.fontFamily,t.fontSize,t.fontColor,"left"),e.fillText(Gr(s),g,m+l-2*l),e.fillText(Gr(r),g,m+l-2*h),e.fillText(Gr(o),g,m+l-2*d)}function HY(t,e,n,i,s,r,o,a){const l=(t.widgetWidth-2*t.innerMargin)/3,d=t.fontSize,h=i-t.innerMargin/2,c=h+2*d,g=n+t.innerMargin;e.fillStyle=a,e.fillRect(g,h-d/2,l+1,d),e.fillRect(g+l,h-d/3,l+1,d/1.5),e.fillRect(g+2*l,h-d/6,l,d/3),mc(e,t.fontFamily,t.fontSize,t.fontColor,"center"),e.fillText(Gr(o),g+.5*l,c),e.fillText(Gr(r),g+1.5*l,c),e.fillText(Gr(s),g+2.5*l,c)}function WY(t,e,n,i){const s=i.outerMargin+kF(i),r=i.fontSize*Fm,o=s-.8*i.innerMargin;return e==="radius"||e==="width"?o+r*(n?3:2):o+Object.keys(t).length*r}function XY(t,e,n){const i={width:e.width,height:e.height};let s=!1;return!!(i.width&&i.height&&n)&&(s=t.position==="top"||t.position==="bottom"?JY(i,t,n,t.position==="bottom"):ZY(i,t,n,t.position==="left"),s&&n.forEach(r=>AY(t,e,r)),s)}function ZY(t,e,n,i){const s=e.widgetWidth+e.outerMargin,r=Math.floor((t.width-e.outerMargin)/s),o=t.height;let a=e.outerMargin,l=i?e.outerMargin:t.width-s,d=1;n=n.slice().sort(bY);for(let h=0;h<n.length;++h){const c=n[h];if(a+c.height>o){if(a===e.outerMargin)return!1;a=e.outerMargin,d+=1,i?l+=s:l-=s}c.x=l,c.y=a,a+=c.height}return d<=r}function YY(t,e,n){let i=null;for(let s=0;s<e.length;++s){const r=e[s];r.isNode!==t.isNode&&e.length!==1||!(i===null||r.height<e[i].height)||(i=s)}if(i!=null){const s=e[i];s.content.push(t),s.height+=t.height+n.outerMargin}}function qY(t){let e=0;for(let n=1;n<t.length;++n)t[n].height>t[e].height&&(e=n);return e}function JY(t,e,n,i){n=n.slice();const s=e.widgetWidth+e.outerMargin,r=Math.floor((t.width-e.outerMargin)/s),o=t.height-e.outerMargin,a=new Array(Math.min(r,n.length)),l=n.length;let d=0,h=0,c=0,g=0;for(let E=0;E<l;++E){const S=n[E];S.isNode?(d+=1,h+=S.height):(c+=1,g+=S.height)}const m=h+g,_=h/m,p=g/m;let v=Math.round(_*r);const x=Math.round(p*r);if(v>d?v=d:x>c&&(v=r-c),r===0)return!1;for(let E=0;E<a.length;E++)a[E]={content:[],height:0,isNode:E<v};for(let E=0;E<l;++E){const S=qY(n);YY(n[S],a,e),n.splice(S,1)}a.every(({content:E})=>E.length===1)?a.sort(wY):a.sort(SY);let b=e.outerMargin;for(let E=0;E<a.length;++E){const S=a[E];if(S.height>o)return!1;S.content.sort(EY);let A=0;for(let T=0;T<S.content.length;++T){const P=S.content[T];P.x=b,P.y=i?t.height-A-P.height-e.outerMargin:A+e.outerMargin,A+=P.height+e.outerMargin}b+=s}return!0}var KY=class extends ee{constructor(){super(...arguments),this._enabled=!1,this._mustRefresh=!1,this._promises=[]}onMounted(){this._modules.events.on("frame",()=>{this._enabled&&this._mustRefresh&&this._layer.refresh()}).on(["resize","reloadFonts"],()=>{this._mustRefresh=!0})}enable(t={}){const e=this._settings;return this._settings=wt(wt({},jg),t),this._mustRefresh=!this._enabled||!this._sameOptions(e,this._settings),this._enabled?Promise.resolve():(this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(n=>{this._drawOnCanvas(this._settings,n.canvas,Vi());const i=this._promises;this._promises=[],i.forEach(s=>s()),this._mustRefresh=!1},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this.refresh())}_afterNextUpdate(){return new Promise(t=>this._promises.push(t))}_formatSettings(t,e){const n=wt(wt({},jg),t);return xY.forEach(i=>n[i]*=e),n}disable(){return this._enabled&&(this._enabled=!1,this._layer.destroy()),Promise.resolve()}enabled(){return this._enabled}refresh(){return this._mustRefresh=!0,this._modules.dom.refresh(),this._afterNextUpdate()}destroy(){this._enabled=!1,this._mustRefresh=!1,this._settings=wt({},jg),this._promises=[]}getOptions(){return this._enabled?wt({},this._settings):wt({},jg)}getCurrentOptions(){return this._settings}_sameOptions(t,e){return t===e||Object.keys(t).reduce((n,i)=>n&&t[i]===e[i],!0)}_drawOnCanvas(t,e,n){const i=this._formatSettings(t,n);XY(i,e,this._computeWidgetList(i))}exportOnCanvas(t,e,n){return this._drawOnCanvas(e,t,n)}export(t={}){const{width:e,height:n}=wt(wt({},this._modules.camera.getSize()),t),i=Vi(),s=ei(e*i,n*i);return this._drawOnCanvas(t,s,i),Promise.resolve().then(()=>s)}_computeWidgetList(t){const e=[];return pY.forEach(({name:n,isNode:i})=>{const s=this._computeWidget(t,n,i);s&&e.push(s)}),e}_computeWidget(t,e,n){const i=this._computePropertyMapping(t,e,n);if(i){if(e!=="icon.content")return i;const s=this._getRulesForAttribute(n,"icon.font"),r=this._getRulesForAttribute(n,"icon.style");let o=null,a=null;if(s.length||(o="Arial",a="normal"),typeof s[0]=="string"&&(o=s[0],a=r[0]),o&&a)return i.iconFont=o,i.iconFontStyle=a,i}return null}_computePropertyMapping(t,e,n){const[i]=this._getRulesForAttribute(n,e),s=i&&i.mapping,r=s&&s.getValues(n);if(s&&r){const o=s.getField(),a={};return hr(r,(l,d)=>{l!==void 0&&d!=="undefined"&&(a[l]=a[l]||[],a[l].push(d))}),Object.keys(a).length===0?null:{isNode:n,title:t.titleFunction(o,e),styleProperty:e,dataProperty:o,mapping:a,height:WY(a,e,n,t)}}return null}_getRulesForAttribute(t,e){return this._modules.styleRules.getRuleList().map(n=>{const i=n.getDefinition();return Qe(t?i.nodeAttributes:i.edgeAttributes,e)}).filter(Gs).sort((n,i)=>n.mapping&&i.mapping?0:n.mapping?-1:1)}},$2={layer:sM,outerStroke:{color:LN,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:PN,minVisibleSize:0}},QY={layer:sM,color:LN,text:{backgroundColor:PN,minVisibleSize:0}},j2={duration:150,easing:"quadradicOut"},tq=class extends ee{constructor(){super(...arguments),this._delay=16,this._manualTriggerDetection=!1,this._hovered=null,this._hoveredTextHidden=!1,this._onAnimate=({updatesPositions:t})=>{t&&this._hovered&&this._modules.graphics.isMoving(this._hovered)&&(this._manualTriggerDetection=!0,this._resetHover())},this._onBeforeNewFrame=()=>{if(this._manualTriggerDetection){this._manualTriggerDetection=!1,this._modules.captor.triggerDetection();const t=this._modules.captor.getPointedElement();t&&this._hover(t)}},this._onClear=()=>{this._hovered=null,this._timeout&&this._modules.dom.clearTimeout(this._timeout)},this._resetHover=()=>{this._hovered&&(this._unhover(this._hovered),this._modules.captor.triggerUnhover()),this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}}_setAnimationOptions(t){this._animationOptions={duration:(t==null?void 0:t.duration)!==void 0?t.duration:j2.duration,easing:(t==null?void 0:t.easing)!==void 0?t.easing:j2.easing},t==null||delete t.duration,t==null||delete t.easing}setRate(t){return this._delay=t,this}replaceNullColor(t,e){t&&Qe(t,e)===null&&$r(t,e,this._modules.settings.get("backgroundColor"))}updateNodeAttributes(t,e){this._setAnimationOptions(t),this.replaceNullColor(t,"text.backgroundColor"),this._hoverClass.update({nodeAttributes:t,fullOverwrite:e}),this._hoverExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}updateEdgeAttributes(t,e){this.replaceNullColor(t,"text.backgroundColor"),this.replaceNullColor(t,"text.secondary.backgroundColor"),this._setAnimationOptions(t),this._hoverClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}getHoverClassDefinition(){return this._hoverClass.getDefinition()}onMounted(){this._registerSettings(),this._setAnimationOptions(null),this._hoverExtremityHighlightedClass=this._modules.classes.createClass({name:bv,isBuiltin:!0,nodeAttributes:$2}),this._hoverClass=this._modules.classes.createClass({name:sh,isBuiltin:!0,nodeAttributes:$2,edgeAttributes:QY}),this._modules.events.on("mouseover",({target:t})=>t&&this._hover(t)).on("mouseout",({target:t})=>t&&this._unhover(t)).on("animate",this._onAnimate).on("beforeNewFrame",this._onBeforeNewFrame).on("mouseout",this._resetHover).on("clearGraph",this._onClear)}_registerSettings(){this._modules.settings.register("cursor.node","pointer",(t,e)=>{this._hovered&&this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(e),this._modules.graphics.addCursorStyle(t))}),this._modules.settings.register("cursor.edge","pointer",(t,e)=>{this._hovered&&!this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(e),this._modules.graphics.addCursorStyle(t))}),this._modules.settings.register("nodeHover",!0,t=>{!t&&this._hovered&&this._hovered.isNode&&this._unhover(this._hovered)}),this._modules.settings.register("edgeHover",!0,t=>{t||!this._hovered||this._hovered.isNode||this._unhover(this._hovered)})}_updateExtremityHighlightLayer(){const t=this._hoverClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._hoverExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})}_removeTimeout(){this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}_hover(t){const e=t.isNode?"nodeHover":"edgeHover";this._modules.settings.get(e)&&t&&(this._removeTimeout(),this._timeout=this._modules.dom.setTimeout(()=>{this._setElementHighlight(!0,t),this._timeout=null},this._delay))}_unhover(t){this._removeTimeout(),this._hovered===t&&(this._setElementHighlight(!1,t),this._hoverExtremityHighlightedClass.clearNodes(),this._hovered=null)}_setElementHighlight(t,e){const n=this._modules.settings.get(e.isNode?"cursor.node":"cursor.edge");if(t?(this._modules.graphics.addCursorStyle(n),e.addClass(sh,this._animationOptions),this._hovered=e):(this._modules.graphics.removeCursorStyle(n),e.removeClass(sh,this._animationOptions)),e.isNode){const i=this._modules.graph.getAttribute(e.isNode,"textHidden"),s=e._index;t&&(this._hoveredTextHidden=i.get(s)!==0);const r=!t&&this._hoveredTextHidden;i.set(s,r)}else this._hoverExtremityHighlightedClass.clearNodes(),t&&e.getExtremities().addClass(bv,this._animationOptions)}},eq=class extends ee{constructor(){super(...arguments),this.x=0,this.y=0}},nq=class{constructor(t,e){this._nodeMapping={valid:!1,values:{}},this._edgeMapping={valid:!1,values:{}},this._computeMapping=e,this._field=t,this._assignedRules=[]}getValue(t,e){const n=t.isNode,i=n?this._nodeMapping:this._edgeMapping;i.valid||(i.values=this._computeMapping(n),i.valid=!0);const s=t.getData(this._field);return Array.isArray(s)?e==="color"?s.map(r=>i.values[r]):i.values[s[0]]:i.values[s]}markAsInvalid(){this._nodeMapping.valid=!1,this._edgeMapping.valid=!1}getValues(t){return t?this._nodeMapping.values:this._edgeMapping.values}getField(){return this._field}isAssignedTo(t){return this._assignedRules.find(e=>e===t)}getAssignedRules(){return this._assignedRules.slice()}assignTo(t){this.isAssignedTo(t)||this._assignedRules.push(t)}unAssignTo(t){this._assignedRules=this._assignedRules.filter(e=>e!==t)}};function MF(t,e,n){const i=(e?t.getNodes():t.getEdges()).getData(n),s={};return i.forEach(r=>{if(!Array.isArray(r))return s[r]=1;r.forEach(o=>s[o]=1)}),"undefined"in s&&delete s[void 0],Object.keys(s).sort()}function iq(t,e,n,i){const{values:s={},fallback:r}=n,o=MF(t,i,e),a={};let l=0;for(let d=0;d<o.length;++d){const h=o[d];h in s?a[h]=s[h]:(a[h]=r[l],l=(l+1)%r.length)}return a}function sq(t,{nbSlices:e,minValue:n,maxValue:i}){if(Array.isArray(t))return t.slice();const{min:s=n,max:r=i}=t,o=(r-s)/e,a=[];for(let l=1;l<e;++l)a.push(s+o*l);return a}function rq(t,e){if(Array.isArray(t))return t;const{min:n,max:i}=t,s=e.length+1,r=(i-n)/e.length,o=[];for(let a=0;a<s;a++)o.push(n+a*r);return o}function oq(t,e,n,i){const{fallback:s,stops:r={},values:o,reverse:a}=n,l=MF(t,i,e);let d=1/0,h=-1/0;for(let _=0;_<l.length;_++){const p=+l[_];zp(p)&&(d=Math.min(d,p),h=Math.max(h,p),l[_]=p)}const c={};if(!isFinite(d)){for(let _=0;_<l.length;_++)c[l[_]]=s;return c}const g=sq(r,{nbSlices:Array.isArray(o)?o.length:o.nbSlices,minValue:d,maxValue:h}),m=rq(o,g);a&&m.reverse();for(let _=0;_<l.length;++_){const p=l[_];if(isFinite(p)){let v=0;for(;v<g.length&&g[v]<=p;)v+=1;c[p]=m[v]}else c[p]=s}return c}var aq=class extends ee{constructor(){super(...arguments),this._mappingList=[]}onMounted(){this._modules.events.on(["addStyleRule","updateStyleRule"],({rule:t,options:e})=>{const n=e.nodeAttributes&&typeof e.nodeAttributes!="function"?e.nodeAttributes:{},i=e.edgeAttributes&&typeof e.edgeAttributes!="function"?e.edgeAttributes:{};[...nh(n),...nh(i)].forEach(s=>{s&&this._recursiveGetMapping(s).forEach(r=>r.assignTo(t.id))})}).on("removeStyleRule",({rule:t})=>{this._mappingList.forEach(e=>e.unAssignTo(t.id))}).on(["addNodes","addEdges","updateNodeData","updateEdgeData","removeNodes","beforeRemoveEdges","excludedStateChange","clearGraph"],()=>{this._mappingList.forEach(t=>{const e=t.getAssignedRules();t.markAsInvalid(),e.forEach(n=>this._modules.styleRules.refreshRule(n))}),this._modules.legend.refresh()})}_recursiveGetMapping(t,e=[]){if(!t)return e;if(t.mapping)return e.push(t.mapping),e;if(typeof t!="object")return e;const n=nh(t).map(i=>this._recursiveGetMapping(i));return e.concat(...n)}createMapping({field:t,values:e={},fallback:n}={field:""}){if(t=Wa(t),Array.isArray(n)?n.length===0&&(n=[void 0]):n=[n],!Xa(e))throw new Error('"mapping" should be an object');return this._createMappingFunction(iq,t,{values:e,fallback:n})}createSlices({field:t,fallback:e,stops:n={},values:i,reverse:s=!1}={field:"",values:[]}){if(t=Wa(t),Array.isArray(i)||i.nbSlices||(i.nbSlices=7),Array.isArray(n)&&Array.isArray(i)&&n.length!==i.length-1)throw new Error("there should be exactly one more value that stops");return this._createMappingFunction(oq,t,{fallback:e,stops:n,values:i,reverse:s})}_createMappingFunction(t,e,n){const i=new nq(e,r=>t(this._modules.graph,e,n,r));this._mappingList.push(i);const s=(r,o,a)=>i.getValue(r,a);return s.mapping=i,s}createTemplate(t){if(typeof t!="string")throw new TypeError('"template" should be a string');const e=[];let n=0,i=!1;for(;!i;){let s=-1;const r=t.indexOf("{{",n);r!==-1&&(s=t.indexOf("}}",r+2)),s!==-1?(e.push(t.substring(n,r)),e.push(t.substring(r+2,s)),n=s+2):(e.push(t.slice(n)),i=!0)}return function(s){let r=e[0];for(let o=1;o<e.length;o+=2)r+=s.getData(e[o]),r+=e[o+1];return r}}},G2=t=>t.stopPropagation(),lq=(t,e)=>{e.style.position="absolute",e.style.left="0",e.style.top="0",t.appendChild(e)},uq=t=>e=>{for(;t.firstChild;)t.removeChild(t.firstChild);for(let n=0;n<e.length;++n)lq(t,e[n])},dq=(t,e)=>{const n=document.createElement("img");return new Promise(i=>{n.addEventListener("load",()=>{e.drawImage(n,0,0,e.canvas.width,e.canvas.height),i(e)});const s=`data:image/svg+xml;base64,${btoa(new XMLSerializer().serializeToString(t))}`;n.src=s})},hq=class extends ee{constructor(){super(...arguments),this._elements=[],this._layers=[],this.readyCallbacks=[],this.render=(t,e,n,i)=>{const s=i&&i.pixelRatio?i.pixelRatio:Vi(),{zoom:r,x:o,y:a,width:l,height:d}=i||this._modules.camera.getView();if(r===void 0||o===void 0||a===void 0||l===void 0||d===void 0)return null;const h=s*r;n.noClear||t.clearRect(0,0,l*s,d*s),n.isStatic||(t.save(),t.translate(l*s/2,d*s/2),t.rotate(i?-(i.angle||0):-this._modules.camera.getAngle()),t.translate(-o*h,-a*h),t.scale(h,h)),e(t),n.isStatic||t.restore()},this.createCanvas=(t,e)=>{const{width:n,height:i}=this._modules.camera.getSize(),s=e.canvas||ei(n,i),r=e.ctx||s.getContext("2d"),o=(h=t)=>{r&&this.render(r,h,e)},a=()=>{const{width:h,height:c}=this._modules.camera.getSize(),g=Vi();s.width=h*g,s.height=c*g,s.style.width=`${h}px`,s.style.height=`${c}px`,o()};let l,d;if(e.isStatic)this._modules.events.on("resize",a),l=()=>this._modules.events.off(a);else{let h=this._modules.camera.getCenter(),c=this._modules.camera.getZoom(),g=!1;const m=0;let _;const p=500,v=()=>{g||(o(),g=!0,h=this._modules.camera.getCenter(),c=this._modules.camera.getZoom())},x=()=>{g||v();const{x:S,y:A}=this._modules.camera.getCenter(),T=S-h.x,P=A-h.y,k=-T*c,I=-P*c,R=this._modules.camera.getZoom()/c,M=-this._modules.camera.getAngle();s.style.transform=`
          scale(${R})
          rotate(${-M}rad)
          translateX(${k}px)
          translateY(${I}px)
          rotate(${M}rad)
        `.replace(/\n/g,"")};d=()=>!g||(o(),g=!1,s.style.transform="scale(1) translateX(0px) translateY(0px)",!1);const b=S=>{_&&clearTimeout(_),v()},E=S=>{Date.now()<m&&_&&clearTimeout(_),_=setTimeout(d,S.duration+p),v()};this._modules.events.on("dragStart",b).on("zoomStart",E).on("dragEnd",d).on(["viewChanged","zoom","rotate","move","animate"],x),this._modules.dom.addDirectWindowEventListener("resize",d),this._modules.events.on("resize",a),l=()=>{this._modules.events.off(a).off(b).off(E).off(d).off(x),this._modules.dom.removeDirectWindowEventListener("resize",d)}}return s.style.touchAction="none",s.style.pointerEvents="none",a(),{element:s,removeListeners:l,refresh:h=>{d&&!d()||o(h)},clear:()=>r==null?void 0:r.clearRect(0,0,s.width,s.height)}},this.createSVG=t=>{const{element:e}=t;e.style["pointer-events"]="none";const n=()=>{t.draw(t.element)},i=s=>{let{zoom:r,x:o,y:a,width:l,height:d}=s||this._modules.camera.getView();if(l=Math.floor(l),d=Math.floor(d),r===void 0||o===void 0||a===void 0||l===void 0||d===void 0)return null;const h=l/2/r,c=d/2/r,g=Math.cos(-this._modules.camera.getAngle()),m=Math.sin(-this._modules.camera.getAngle()),_=g*o-m*a-h,p=m*o+g*a-c,v=l/r,x=d/r;e.style.width=`${l}px`,e.style.height=`${d}px`,e.setAttribute("width",`${l}`),e.setAttribute("height",`${d}`),e.setAttribute("viewBox",`${_} ${p} ${v} ${x}`)};return this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],()=>i()),e.addEventListener("mousemove",G2),i(),n(),{element:e,removeListeners:()=>{this._modules.events.off(i)},updateTransformation:i,refresh:n}},this._createOverlay=t=>{const e=()=>{const{element:s,position:r}=t,{zoom:o,x:a,y:l,width:d,height:h}=this._modules.camera.getView();if(o===void 0||a===void 0||l===void 0||d===void 0||h===void 0)return null;const c=o,g=d/2,m=h/2,_=-this._modules.camera.getAngle(),p=(r.x-a)*c,v=(r.y-l)*c;s.style.transformOrigin="top left",s.style.transform=`translate(${g}px, ${m}px) rotate(${_}rad) translate(${p}px, ${v}px) ${t.scaled?`scale(${c}, ${c})`:""}`};this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],e);const{element:n,size:i}=t;return i&&(n.style.width=`${i.width}`,n.style.height=`${i.height}`),n.addEventListener("mousemove",G2),e(),{element:n,removeListeners:()=>{this._modules.events.off(e)},updateTransformation:e}},this.addLayer=(t,e="layer",n=this._elements.length)=>{const i=typeof t=="string"?uv(t):t;this._elements.push(i);const s={element:i};return s.type=e,s.getLevel=()=>this._elements.indexOf(i),s.moveTo=r=>(this._elements.splice(r,0,this._elements.splice(s.getLevel(),1)[0]),this._updateDom(this._elements),s),s.moveUp=()=>s.moveTo(s.getLevel()+1),s.moveDown=()=>s.moveTo(s.getLevel()-1),s.moveToTop=()=>s.moveTo(this._elements.length-1),s.moveToBottom=()=>s.moveTo(0),s.destroy=()=>this._removeLayer(s),s.hide=()=>(s.element&&(s.element.style.visibility="hidden"),s),s.show=()=>(s.element&&(s.element.style.visibility="visible"),s),s.isHidden=()=>s.element.style.visibility==="hidden",s.setOpacity=r=>(s.element&&(s.element.style.opacity=r.toString()),s),s.getOpacity=()=>parseFloat(s.element.style.opacity||"1"),s.setPosition=r=>{if(s.element){const o=s.element.style;o.left=`${r.x}px`,o.top=`${r.y}px`}return s},s.setSize=r=>{if(s.element&&r){const{width:o,height:a}=r,l=s.element.style;l.width=`${o}px`,l.height=`${a}px`}return s},s.moveTo(n),this._layers.push(s),s},this.addCanvasLayer=(t,e={isStatic:!1,noClear:!1},n=this._elements.length)=>{const i=this.createCanvas(t,e),{element:s,removeListeners:r,refresh:o,clear:a}=i,l=this.addLayer(s,"canvas",n);return s.classList.add("ogma-canvas-layer"),l.destroy=()=>this._removeLayer(l,r),l.refresh=o,l.clear=a,l.draw=t,l.options=e,l},this.addOverlay=(t,e=this._elements.length)=>{typeof t.element=="string"&&(t.element=uv(t.element)),t.scaled=t.scaled===void 0||t.scaled;const n=this._createOverlay(t),{element:i,removeListeners:s,updateTransformation:r}=n,o=this.addLayer(i,"overlay",e);return o._onViewChange=r,o._onDestroy=s,o.destroy=()=>this._removeLayer(o,s),o.setPosition=a=>(t.position=a,r(),o),t.size&&o.setSize(t.size),o},this.addSVGLayer=(t,e=this._elements.length)=>{const n=this.createSVG(t),{element:i,refresh:s,removeListeners:r,updateTransformation:o}=n,a=this.addLayer(i,"svg",e);return a._onViewChange=o,a._onDestroy=r,a.destroy=()=>this._removeLayer(a,r),a.refresh=s,a}}canvasToImage(t,e){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");this.render(i,t.draw,ue(wt({},t.options),{noClear:!0}),ue(wt({},e),{pixelRatio:1}));const s=document.createElementNS("http://www.w3.org/2000/svg","image");return s.setAttribute("href",n.toDataURL("image/png")),s.setAttribute("width",n.width),s.setAttribute("height",n.height),s}exportPNG(t,e,n){const i=t.getContext("2d");let s=Promise.resolve();return e.forEach(r=>{s=s.then(()=>r.type==="canvas"?(this.render(i,r.draw,ue(wt({},r.options),{noClear:!0}),n),Promise.resolve()):(r._onViewChange&&r._onViewChange(n),dq(r.element,i)))}),s}exportSVG(t,e,n,i){let s=Promise.resolve();return e.forEach(r=>{s=s.then(()=>r.type==="canvas"?Promise.resolve(this.canvasToImage(r,n)):(r._onViewChange&&r._onViewChange(n),r.element.cloneNode(!0))).then(o=>i?t.insertBefore(o,t.querySelector(".ogma-nodes").parentNode||t.firstChild):t.appendChild(o))}),s}export(t){const e=this._layers.sort((s,r)=>s.getLevel()-r.getLevel()).filter(s=>s.type==="canvas"||s.type==="svg"),n=this.ogmaLayer?this.ogmaLayer.getLevel():0,i=t.below?e.filter(s=>s.getLevel()<n):e.filter(s=>s.getLevel()>n);return t.canvas?this.exportPNG(t.canvas,i,t.view):this.exportSVG(t.svg,i,t.view,t.below)}onMounted(){const t=this._modules.graphics.getDomElement();this._updateDom=uq(t);const e=t.firstChild;e&&(this.ogmaLayer=this.addLayer(e)),this.runCallbacks()}runCallbacks(){this.ogmaLayer&&(this.readyCallbacks.forEach(t=>t()),this.readyCallbacks=[])}whenReady(t){this.readyCallbacks.push(t),this.ogmaLayer&&this.runCallbacks()}_removeLayer(t,e){return t.element&&t.element.parentNode&&(this._elements.splice(t.getLevel(),1),e&&e(),t.element=null,this._updateDom(this._elements)),this._layers=this._layers.filter(n=>n!==t),t}destroy(){this._elements=[]}},cq=class extends ee{onMounted(){const t=this._modules.graph;this._nodeList=t.getNodeAttribute("object"),this._edgeList=t.getEdgeAttribute("object"),this._sourceList=t.getEdgeAttribute("source"),this._targetList=t.getEdgeAttribute("target"),this._excludedList=t.getEdgeAttribute("excluded"),this._virtualList=t.getEdgeAttribute("virtual")}shortestPath(t={source:void 0,target:void 0}){const{source:e,target:n,directed:i=!1,edges:s=this._ogma.getEdges(),nodes:r=this._ogma.getNodes(),edgeCostFunction:o=()=>1,heuristicFunction:a=()=>0}=t,l=s.reduce((p,v)=>(p[v._index]=!0,p),{}),d=r.reduce((p,v)=>(p[v._index]=!0,p),{}),h=this._modules.graph.getNode(e),c=this._modules.graph.getNode(n);if(!h)throw new Error("the source is not a node");if(!c)throw new Error("the target is not a node");const g=h._index,m=c._index;d[g]=!0,d[m]=!0;let _=null;if(g===m)_={nodes:h.toList(),edges:this._modules.graph.edgeList()};else{const p=this._modules.graph.getNodeMaxIndex()+1,v=new Int32Array(p),x=new Float32Array(p),b=new Float32Array(p),E=new Set,S=new Zk(b);for(x.fill(1/0),b.fill(1/0),v.fill(-1),S.add(g),x[g]=0,b[g]=a(h,c);!S.isEmpty();){const A=S.removeMin();if(A===m){_=this._constructPath(v,g,m);break}E.add(A);const T=this._modules.graph.getAdjacentDirections(A);if(T)for(let P=0;P<T.length;++P){const k=T[P],I=this._modules.graph.getEdgeIndexesInDirection(k);let R=-1,M=0,z=-1;for(let j=0;j<I.length;++j){const X=I[j],O=this._sourceList.get(X),N=this._targetList.get(X);if(O===N||!d[O]||!d[N]||i&&A!==O||!l[X])continue;const W=o(this._edgeList.get(X));(R===-1||W<M)&&(R=X,M=W,z=O===A?N:O)}if(z!==-1||E.has(z)){const j=x[A]+M;if(!S.has(z)||j<x[z]){const X=this._nodeList.get(A);v[z]=R,x[z]=j,b[z]=j+a(X,c),S.add(z)}}}}}return Promise.resolve(_)}_constructPath(t,e,n){const i=[n],s=[];let r=n;for(;r!==e;){const o=t[r],a=this._sourceList.get(o),l=this._targetList.get(o);r=r===a?l:a,i.push(r),s.push(o)}return i.reverse(),s.reverse(),{nodes:this._modules.graph.nodeList(new Uint32Array(i)),edges:this._modules.graph.edgeList(new Uint32Array(s))}}detectCycle(t,e){const n=e.getSource(),i=e.getTarget(),s=Gk(t._indexes,n._indexes,i._indexes);return s?this._modules.graph.nodeList(new Uint32Array(s)).dedupe():this._modules.graph.nodeList()}getAllSimpleCycles(t,e){const n=e.getSource(),i=e.getTarget();return new Hk(t._indexes,n._indexes,i._indexes).getCycles().map(s=>this._modules.graph.nodeList(new Uint32Array(s)))}minimumSpanningTree(t,e,n){const i=this._modules.graph;t=i.getNodes(t),e=i.getEdges(e);const s=new Set;t.forEach(l=>s.add(l._index));const r=i.getConnectedComponents(t,{filter:l=>s.has(l),internalIndexes:!0}),o={};r.forEach((l,d)=>l.forEach(h=>o[h]=d));const a=[];return e.forEach(l=>{const d=o[l.getSource()._index];d!==void 0&&(a[d]===void 0&&(a[d]=[]),a[d].push(l._index))}),r.map((l,d)=>{const h=Wk(l,a[d]||[],c=>i.edge(c).getSource()._index,c=>i.edge(c).getTarget()._index,n?c=>n(i.edge(c)):void 0);return{nodes:i.nodeList(new Uint32Array(l)),edges:i.edgeList(new Uint32Array(h))}})}bfs({root:t,onNode:e,onEdge:n=he,directed:i=!1}){const s=this._modules.graph,r=[t],o=new Set,a={direction:i?"out":"both"};for(;r.length;){const l=r.pop();if(!o.has(l._index)){if(e(l)===!0)return;o.add(l._index),s.getAdjacentEdges(l,a).forEach(d=>{if(n(d)===!1)return;const h=d.getSource()===l?d.getTarget():d.getSource();r.unshift(h)})}}}dfs({root:t,onNode:e,onEdge:n=he,directed:i=!1}){const s=this._modules.graph,r=[t],o=new Set,a={direction:i?"out":"both"};for(;r.length;){const l=r.pop();if(!o.has(l._index)){if(e(l)===!0)return;o.add(l._index),s.getAdjacentEdges(l,a).forEach(d=>{if(n(d)===!1)return;const h=d.getSource()===l?d.getTarget():d.getSource();r.push(h)})}}}betweenness({nodes:t,edges:e,directed:n,normalized:i}){const s=this._ogma.getNodes().subtract(t),r=this._ogma.getEdges().subtract(e).concat(s.fastGetAdjacentElements().edges).dedupe();return Xk({adjacency:t.map(o=>{const a=this._ogma.edgeList(this._ogma.modules.graph.topology.getAdjacentElements(!1,o.toList()._indexes,{direction:n?"out":"both"})).subtract(r).dedupe();return{id:o._index,adj:a.map(l=>l.getSource()._index===o._index?l.getTarget()._index:l.getSource()._index)}}),directed:n,normalized:i})}},V2=(t,e)=>{if(!t)throw new Error("Traversal options are required");if(typeof t.onNode!="function")throw new Error("onNode callback is required");if(t.root=e.getNode(t.root),!t.root)throw new Error(`Root node '${t.root}' does not exist`);return t},Gg=()=>({nodes:void 0,edges:void 0}),gq=class extends Ge{constructor(){super(...arguments),this.shortestPath=t=>this._ogma.modules.algorithms.shortestPath(t),this.hasCycle=t=>{const{nodes:e,edges:n}=t||Gg();return this.detectCycle({nodes:e,edges:n})!==null},this.getAllSimpleCycles=t=>{let{nodes:e,edges:n}=t||Gg();return e||(e=this._ogma.getNodes()),n||(n=e.getAdjacentEdges({bothExtremities:!0})),this._ogma.modules.algorithms.getAllSimpleCycles(e,n)},this.detectCycle=t=>{let{nodes:e,edges:n}=t||Gg();e||(e=this._ogma.getNodes()),n||(n=e.getAdjacentEdges({bothExtremities:!0}));const i=this._ogma.modules.algorithms.detectCycle(e,n);return i.size?i:null},this.minimumSpanningTree=t=>{const{nodes:e,edges:n,edgeCostFunction:i}=t||ue(wt({},Gg()),{edgeCostFunction:void 0});return this._ogma.modules.algorithms.minimumSpanningTree(e,n,i)},this.dfs=t=>this._ogma.modules.algorithms.dfs(V2(t,this._ogma.modules.graph)),this.bfs=t=>this._ogma.modules.algorithms.bfs(V2(t,this._ogma.modules.graph)),this.betweenness=(t={})=>(t={nodes:t.nodes||this._ogma.getNodes(),edges:t.edges||this._ogma.getEdges(),directed:t.directed!==void 0&&t.directed,normalized:t.normalized===void 0||t.normalized},this._ogma.modules.algorithms.betweenness(t)),this.getMinimumEnclosingCircle=t=>{if(!t||t.size===0)throw new Error("getMinimumEnclosingCircle: no nodes provided");const e=t.getAttribute("x"),n=t.getAttribute("y"),i=t.getAttribute("radius"),[s,r,o]=Fb(e,n,i);return{x:s,y:r,radius:o}},this.circlePack=({nodes:t,margin:e=0,origin:n={x:0,y:0},duration:i=0,easing:s="linear",sort:r})=>{if(!t||t.size===0)throw new Error("circlePack: no nodes provided");let o=t.map((l,d)=>({index:d,radius:+l.getAttribute("radius")+e,id:l.getId()}));if(r)if(r==="asc")o=o.sort((l,d)=>d.radius-l.radius);else if(r==="desc")o=o.sort((l,d)=>l.radius-d.radius);else{if(typeof r!="function")throw new Error("circlePack: invalid sort option");o=o.sort((l,d)=>r(t.get(l.index),t.get(d.index)))}if(n&&(!isFinite(n.x)||!isFinite(n.y)))throw new Error("circlePack: invalid origin");const a=Nk(o,n.x,n.y).reduce((l,{index:d,x:h,y:c})=>(l[d]={x:h,y:c},l),new Array(t.size));return t.setAttributes(a,{duration:i,easing:s})}}},NF=QR,dr=function(){return dr=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dr.apply(this,arguments)};function RF(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function fq(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var wf="right-scroll-bar-position",Af="width-before-scroll-bar",mq="with-scroll-bars-hidden",pq="--removed-body-scroll-bar-size";function Fy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function _q(t,e){var n=$.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var s=n.value;s!==i&&(n.value=i,n.callback(i,s))}}}})[0];return n.callback=e,n.facade}var yq=typeof window<"u"?$.useLayoutEffect:$.useEffect,H2=new WeakMap;function vq(t,e){var n=_q(null,function(i){return t.forEach(function(s){return Fy(s,i)})});return yq(function(){var i=H2.get(n);if(i){var s=new Set(i),r=new Set(t),o=n.current;s.forEach(function(a){r.has(a)||Fy(a,null)}),r.forEach(function(a){s.has(a)||Fy(a,o)})}H2.set(n,t)},[t]),n}function xq(t){return t}function bq(t,e){e===void 0&&(e=xq);var n=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(r){var o=e(r,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(i=!0;n.length;){var o=n;n=[],o.forEach(r)}n={push:function(a){return r(a)},filter:function(){return n}}},assignMedium:function(r){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(r),o=n}var l=function(){var h=o;o=[],h.forEach(r)},d=function(){return Promise.resolve().then(l)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function Eq(t){t===void 0&&(t={});var e=bq(null);return e.options=dr({async:!0,ssr:!1},t),e}var FF=function(t){var e=t.sideCar,n=RF(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return $.createElement(i,dr({},n))};FF.isSideCarExport=!0;function Sq(t,e){return t.useMedium(e),FF}var OF=Eq(),Oy=function(){},Bp=$.forwardRef(function(t,e){var n=$.useRef(null),i=$.useState({onScrollCapture:Oy,onWheelCapture:Oy,onTouchMoveCapture:Oy}),s=i[0],r=i[1],o=t.forwardProps,a=t.children,l=t.className,d=t.removeScrollBar,h=t.enabled,c=t.shards,g=t.sideCar,m=t.noIsolation,_=t.inert,p=t.allowPinchZoom,v=t.as,x=v===void 0?"div":v,b=t.gapMode,E=RF(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=g,A=vq([n,e]),T=dr(dr({},E),s);return $.createElement($.Fragment,null,h&&$.createElement(S,{sideCar:OF,removeScrollBar:d,shards:c,noIsolation:m,inert:_,setCallbacks:r,allowPinchZoom:!!p,lockRef:n,gapMode:b}),o?$.cloneElement($.Children.only(a),dr(dr({},T),{ref:A})):$.createElement(x,dr({},T,{className:l,ref:A}),a))});Bp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bp.classNames={fullWidth:Af,zeroRight:wf};var wq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Aq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wq();return e&&t.setAttribute("nonce",e),t}function Tq(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Cq(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Lq=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Aq())&&(Tq(e,n),Cq(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Pq=function(){var t=Lq();return function(e,n){$.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},DF=function(){var t=Pq(),e=function(n){var i=n.styles,s=n.dynamic;return t(i,s),null};return e},kq={left:0,top:0,right:0,gap:0},Dy=function(t){return parseInt(t||"",10)||0},Iq=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Dy(n),Dy(i),Dy(s)]},Mq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return kq;var e=Iq(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Nq=DF(),cu="data-scroll-locked",Rq=function(t,e,n,i){var s=t.left,r=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mq,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(cu,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wf,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Af,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(wf," .").concat(wf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Af," .").concat(Af,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(cu,`] {
    `).concat(pq,": ").concat(a,`px;
  }
`)},W2=function(){var t=parseInt(document.body.getAttribute(cu)||"0",10);return isFinite(t)?t:0},Fq=function(){$.useEffect(function(){return document.body.setAttribute(cu,(W2()+1).toString()),function(){var t=W2()-1;t<=0?document.body.removeAttribute(cu):document.body.setAttribute(cu,t.toString())}},[])},Oq=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,s=i===void 0?"margin":i;Fq();var r=$.useMemo(function(){return Mq(s)},[s]);return $.createElement(Nq,{styles:Rq(r,!e,s,n?"":"!important")})},fx=!1;if(typeof window<"u")try{var Vg=Object.defineProperty({},"passive",{get:function(){return fx=!0,!0}});window.addEventListener("test",Vg,Vg),window.removeEventListener("test",Vg,Vg)}catch{fx=!1}var Tl=fx?{passive:!1}:!1,Dq=function(t){return t.tagName==="TEXTAREA"},zF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Dq(t)&&n[e]==="visible")},zq=function(t){return zF(t,"overflowY")},Bq=function(t){return zF(t,"overflowX")},X2=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=BF(t,i);if(s){var r=UF(t,i),o=r[1],a=r[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Uq=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},$q=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},BF=function(t,e){return t==="v"?zq(e):Bq(e)},UF=function(t,e){return t==="v"?Uq(e):$q(e)},jq=function(t,e){return t==="h"&&e==="rtl"?-1:1},Gq=function(t,e,n,i,s){var r=jq(t,window.getComputedStyle(e).direction),o=r*i,a=n.target,l=e.contains(a),d=!1,h=o>0,c=0,g=0;do{var m=UF(t,a),_=m[0],p=m[1],v=m[2],x=p-v-r*_;(_||x)&&BF(t,a)&&(c+=x,g+=_),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(h&&(Math.abs(c)<1||!s)||!h&&(Math.abs(g)<1||!s))&&(d=!0),d},Hg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Z2=function(t){return[t.deltaX,t.deltaY]},Y2=function(t){return t&&"current"in t?t.current:t},Vq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Hq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Wq=0,Cl=[];function Xq(t){var e=$.useRef([]),n=$.useRef([0,0]),i=$.useRef(),s=$.useState(Wq++)[0],r=$.useState(DF)[0],o=$.useRef(t);$.useEffect(function(){o.current=t},[t]),$.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=fq([t.lockRef.current],(t.shards||[]).map(Y2),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=$.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=Hg(p),b=n.current,E="deltaX"in p?p.deltaX:b[0]-x[0],S="deltaY"in p?p.deltaY:b[1]-x[1],A,T=p.target,P=Math.abs(E)>Math.abs(S)?"h":"v";if("touches"in p&&P==="h"&&T.type==="range")return!1;var k=X2(P,T);if(!k)return!0;if(k?A=P:(A=P==="v"?"h":"v",k=X2(P,T)),!k)return!1;if(!i.current&&"changedTouches"in p&&(E||S)&&(i.current=A),!A)return!0;var I=i.current||A;return Gq(I,v,p,I==="h"?E:S,!0)},[]),l=$.useCallback(function(p){var v=p;if(!(!Cl.length||Cl[Cl.length-1]!==r)){var x="deltaY"in v?Z2(v):Hg(v),b=e.current.filter(function(A){return A.name===v.type&&(A.target===v.target||v.target===A.shadowParent)&&Vq(A.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var E=(o.current.shards||[]).map(Y2).filter(Boolean).filter(function(A){return A.contains(v.target)}),S=E.length>0?a(v,E[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),d=$.useCallback(function(p,v,x,b){var E={name:p,delta:v,target:x,should:b,shadowParent:Zq(x)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(S){return S!==E})},1)},[]),h=$.useCallback(function(p){n.current=Hg(p),i.current=void 0},[]),c=$.useCallback(function(p){d(p.type,Z2(p),p.target,a(p,t.lockRef.current))},[]),g=$.useCallback(function(p){d(p.type,Hg(p),p.target,a(p,t.lockRef.current))},[]);$.useEffect(function(){return Cl.push(r),t.setCallbacks({onScrollCapture:c,onWheelCapture:c,onTouchMoveCapture:g}),document.addEventListener("wheel",l,Tl),document.addEventListener("touchmove",l,Tl),document.addEventListener("touchstart",h,Tl),function(){Cl=Cl.filter(function(p){return p!==r}),document.removeEventListener("wheel",l,Tl),document.removeEventListener("touchmove",l,Tl),document.removeEventListener("touchstart",h,Tl)}},[]);var m=t.removeScrollBar,_=t.inert;return $.createElement($.Fragment,null,_?$.createElement(r,{styles:Hq(s)}):null,m?$.createElement(Oq,{gapMode:t.gapMode}):null)}function Zq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Yq=Sq(OF,Xq);var $F=$.forwardRef(function(t,e){return $.createElement(Bp,dr({},t,{ref:e,sideCar:Yq}))});$F.classNames=Bp.classNames;function mr(t){return Object.keys(t)}function zy(t){return t&&typeof t=="object"&&!Array.isArray(t)}function B1(t,e){const n={...t},i=e;return zy(t)&&zy(e)&&Object.keys(e).forEach(s=>{zy(i[s])&&s in t?n[s]=B1(n[s],i[s]):n[s]=i[s]}),n}function qq(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Jq(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Kq(t){const e=Jq(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function By(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function jF(t,{shouldScale:e=!1}={}){function n(i){if(i===0||i==="0")return`0${t}`;if(typeof i=="number"){const s=`${i/16}${t}`;return e?By(s):s}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(r=>n(r)).join(",");if(i.includes(" "))return i.split(" ").map(r=>n(r)).join(" ");if(i.includes(t))return e?By(i):i;const s=i.replace("px","");if(!Number.isNaN(Number(s))){const r=`${Number(s)/16}${t}`;return e?By(r):r}}return i}return n}const Lt=jF("rem",{shouldScale:!0}),q2=jF("em");function U1(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function GF(t){return typeof t=="number"?!0:typeof t=="string"?t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!==""?!0:/[0-9]/.test(t.trim().replace("-","")[0]):!1}function Qq(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==$.Fragment:!1}function $1(t){const e=$.createContext(null);return[({children:s,value:r})=>Q.jsx(e.Provider,{value:r,children:s}),()=>{const s=$.useContext(e);if(s===null)throw new Error(t);return s}]}function tJ(t=null){const e=$.createContext(t);return[({children:s,value:r})=>Q.jsx(e.Provider,{value:r,children:s}),()=>$.useContext(e)]}const eJ={app:100,modal:200,popover:300,overlay:400,max:9999};function pc(t){return eJ[t]}function Gn(t,e="size",n=!0){if(t!==void 0)return GF(t)?n?Lt(t):t:`var(--${e}-${t})`}function nJ(t){return Gn(t,"mantine-spacing")}function ol(t){return t===void 0?"var(--mantine-radius-default)":Gn(t,"mantine-radius")}function Vr(t){return Gn(t,"mantine-font-size")}function iJ(t){return Gn(t,"mantine-line-height",!1)}function VF(t){if(t)return Gn(t,"mantine-shadow",!1)}function ch(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function HF(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function sJ(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function rJ(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function oJ(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[i,s]=$.useState(n?e:rJ(t)),r=$.useRef();return $.useEffect(()=>{if("matchMedia"in window)return r.current=window.matchMedia(t),s(r.current.matches),sJ(r.current,o=>s(o.matches))},[t]),i}const Up=typeof document<"u"?$.useLayoutEffect:$.useEffect;function WF(t,e){const n=$.useRef(!1);$.useEffect(()=>()=>{n.current=!1},[]),$.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function aJ({opened:t,shouldReturnFocus:e=!0}){const n=$.useRef(),i=()=>{var s;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((s=n.current)==null||s.focus({preventScroll:!0}))};return WF(()=>{let s=-1;const r=o=>{o.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",r),t?n.current=document.activeElement:e&&(s=window.setTimeout(i,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",r)}},[t,e]),i}function lJ(t,e="body > :not(script)"){const n=HF(),i=Array.from(document.querySelectorAll(e)).map(s=>{var l;if((l=s==null?void 0:s.shadowRoot)!=null&&l.contains(t)||s.contains(t))return;const r=s.getAttribute("aria-hidden"),o=s.getAttribute("data-hidden"),a=s.getAttribute("data-focus-id");return s.setAttribute("data-focus-id",n),r===null||r==="false"?s.setAttribute("aria-hidden","true"):!o&&!a&&s.setAttribute("data-hidden",r),{node:s,ariaHidden:o||null}});return()=>{i.forEach(s=>{!s||n!==s.node.getAttribute("data-focus-id")||(s.ariaHidden===null?s.node.removeAttribute("aria-hidden"):s.node.setAttribute("aria-hidden",s.ariaHidden),s.node.removeAttribute("data-focus-id"),s.node.removeAttribute("data-hidden"))})}}const uJ=/input|select|textarea|button|object/,XF="a, input, select, textarea, button, object, [tabindex]";function dJ(t){return t.style.display==="none"}function hJ(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(dJ(n))return!1;n=n.parentNode}return!0}function ZF(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function mx(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(ZF(t));return(uJ.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&hJ(t)}function YF(t){const e=ZF(t);return(Number.isNaN(e)||e>=0)&&mx(t)}function cJ(t){return Array.from(t.querySelectorAll(XF)).filter(YF)}function gJ(t,e){const n=cJ(t);if(!n.length){e.preventDefault();return}const i=n[e.shiftKey?0:n.length-1],s=t.getRootNode();let r=i===s.activeElement||t===s.activeElement;const o=s.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(r=n.filter(h=>h.getAttribute("type")==="radio"&&h.getAttribute("name")===o.getAttribute("name")).includes(i)),!r)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function fJ(t=!0){const e=$.useRef(),n=$.useRef(null),i=r=>{let o=r.querySelector("[data-autofocus]");if(!o){const a=Array.from(r.querySelectorAll(XF));o=a.find(YF)||a.find(mx)||null,!o&&mx(r)&&(o=r)}o&&o.focus({preventScroll:!0})},s=$.useCallback(r=>{if(t){if(r===null){n.current&&(n.current(),n.current=null);return}n.current=lJ(r),e.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&i(r)}),e.current=r):e.current=null)}},[t]);return $.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>i(e.current));const r=o=>{o.key==="Tab"&&e.current&&gJ(e.current,o)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),n.current&&n.current()}},[t]),s}const mJ=Lo.useId||(()=>{});function pJ(){const t=mJ();return t?`mantine-${t.replace(/:/g,"")}`:""}function j1(t){const e=pJ(),[n,i]=$.useState(e);return Up(()=>{i(HF())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function _J(t,e,n){$.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function qF(t,e){typeof t=="function"?t(e):typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function yJ(...t){return e=>{t.forEach(n=>qF(n,e))}}function JF(...t){return $.useCallback(yJ(...t),t)}function vJ(t,e,n="ltr"){const i=$.useRef(null),s=$.useRef(!1),r=$.useRef(!1),o=$.useRef(0),[a,l]=$.useState(!1);return $.useEffect(()=>{s.current=!0},[]),$.useEffect(()=>{var b,E;const d=({x:S,y:A})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(s.current&&i.current){i.current.style.userSelect="none";const T=i.current.getBoundingClientRect();if(T.width&&T.height){const P=ch((S-T.left)/T.width,0,1);t({x:n==="ltr"?P:1-P,y:ch((A-T.top)/T.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),document.addEventListener("touchmove",x),document.addEventListener("touchend",m)},c=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",m)},g=()=>{!r.current&&s.current&&(r.current=!0,typeof(e==null?void 0:e.onScrubStart)=="function"&&e.onScrubStart(),l(!0),h())},m=()=>{r.current&&s.current&&(r.current=!1,l(!1),c(),setTimeout(()=>{typeof(e==null?void 0:e.onScrubEnd)=="function"&&e.onScrubEnd()},0))},_=S=>{g(),S.preventDefault(),p(S)},p=S=>d({x:S.clientX,y:S.clientY}),v=S=>{S.cancelable&&S.preventDefault(),g(),x(S)},x=S=>{S.cancelable&&S.preventDefault(),d({x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY})};return(b=i.current)==null||b.addEventListener("mousedown",_),(E=i.current)==null||E.addEventListener("touchstart",v,{passive:!1}),()=>{i.current&&(i.current.removeEventListener("mousedown",_),i.current.removeEventListener("touchstart",v))}},[n,t]),{ref:i,active:a}}function G1({value:t,defaultValue:e,finalValue:n,onChange:i=()=>{}}){const[s,r]=$.useState(e!==void 0?e:n),o=(a,...l)=>{r(a),i==null||i(a,...l)};return t!==void 0?[t,i,!0]:[s,o,!1]}function KF(t,e){return oJ("(prefers-reduced-motion: reduce)",t,e)}function QF(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=QF(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ns(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=QF(t))&&(i&&(i+=" "),i+=e);return i}const xJ={};function bJ(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([i,s])=>{e[i]?e[i]=ns(e[i],s):e[i]=s})}),e}function V1({theme:t,classNames:e,props:n,stylesCtx:i}){const r=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,n,i):o||xJ);return bJ(r)}function px({theme:t,styles:e,props:n,stylesCtx:i}){return(Array.isArray(e)?e:[e]).reduce((r,o)=>typeof o=="function"?{...r,...o(t,n,i)}:{...r,...o},{})}const tO=$.createContext(null);function al(){const t=$.useContext(tO);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function EJ(){return al().cssVariablesResolver}function SJ(){return al().classNamesPrefix}function H1(){return al().getStyleNonce}function wJ(){return al().withStaticClasses}function AJ(){return al().headless}function TJ(){var t;return(t=al().stylesTransform)==null?void 0:t.sx}function CJ(){var t;return(t=al().stylesTransform)==null?void 0:t.styles}function LJ(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function PJ(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const n=parseInt(e,16),i=n>>16&255,s=n>>8&255,r=n&255;return{r:i,g:s,b:r,a:1}}function kJ(t){const[e,n,i,s]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:i,a:s||1}}function IJ(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const i=parseInt(n[1],10),s=parseInt(n[2],10)/100,r=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*r-1))*s,l=i/60,d=a*(1-Math.abs(l%2-1)),h=r-a/2;let c,g,m;return l>=0&&l<1?(c=a,g=d,m=0):l>=1&&l<2?(c=d,g=a,m=0):l>=2&&l<3?(c=0,g=a,m=d):l>=3&&l<4?(c=0,g=d,m=a):l>=4&&l<5?(c=d,g=0,m=a):(c=a,g=0,m=d),{r:Math.round((c+h)*255),g:Math.round((g+h)*255),b:Math.round((m+h)*255),a:o||1}}function W1(t){return LJ(t)?PJ(t):t.startsWith("rgb")?kJ(t):t.startsWith("hsl")?IJ(t):{r:0,g:0,b:0,a:1}}function Wg(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:i,b:s,a:r}=W1(t),o=1-e,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(i)}, ${a(s)}, ${r})`}function Xh(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function Uy(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function MJ(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function NJ(t){if(t.startsWith("oklch("))return(MJ(t)||0)/100;const{r:e,g:n,b:i}=W1(t),s=e/255,r=n/255,o=i/255,a=Uy(s),l=Uy(r),d=Uy(o);return .2126*a+.7152*l+.0722*d}function xd(t,e=.179){return t.startsWith("var(")?!1:NJ(t)>e}function _c({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:xd(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:xd(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:xd(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[i,s]=t.split("."),r=s?Number(s):void 0,o=i in e.colors;if(o){const a=r!==void 0?e.colors[i][r]:e.colors[i][Xh(e,n||"light")];return{color:i,value:a,shade:r,isThemeColor:o,isLight:xd(a,e.luminanceThreshold),variable:s?`--mantine-color-${i}-${r}`:`--mantine-color-${i}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:xd(t,e.luminanceThreshold),shade:r,variable:void 0}}function Ru(t,e){const n=_c({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function _x(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)||e.defaultGradient.deg||0},i=Ru(n.from,e),s=Ru(n.to,e);return`linear-gradient(${n.deg}deg, ${i} 0%, ${s} 100%)`}function sr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const r=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${r}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:i,b:s}=W1(t);return`rgba(${n}, ${i}, ${s}, ${e})`}const Ll=sr,RJ=({color:t,theme:e,variant:n,gradient:i,autoContrast:s})=>{const r=_c({color:t,theme:e}),o=typeof s=="boolean"?s:e.autoContrast;if(n==="filled"){const a=o&&r.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return r.isThemeColor?r.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${Lt(1)} solid transparent`}:{background:`var(--mantine-color-${r.color}-${r.shade})`,hover:`var(--mantine-color-${r.color}-${r.shade===9?8:r.shade+1})`,color:a,border:`${Lt(1)} solid transparent`}:{background:t,hover:Wg(t,.1),color:a,border:`${Lt(1)} solid transparent`}}if(n==="light"){if(r.isThemeColor){if(r.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Lt(1)} solid transparent`};const a=e.colors[r.color][r.shade];return{background:sr(a,.1),hover:sr(a,.12),color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${Lt(1)} solid transparent`}}return{background:sr(t,.1),hover:sr(t,.12),color:t,border:`${Lt(1)} solid transparent`}}if(n==="outline")return r.isThemeColor?r.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${Lt(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:sr(e.colors[r.color][r.shade],.05),color:`var(--mantine-color-${r.color}-${r.shade})`,border:`${Lt(1)} solid var(--mantine-color-${r.color}-${r.shade})`}:{background:"transparent",hover:sr(t,.05),color:t,border:`${Lt(1)} solid ${t}`};if(n==="subtle"){if(r.isThemeColor){if(r.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Lt(1)} solid transparent`};const a=e.colors[r.color][r.shade];return{background:"transparent",hover:sr(a,.12),color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${Lt(1)} solid transparent`}}return{background:"transparent",hover:sr(t,.12),color:t,border:`${Lt(1)} solid transparent`}}return n==="transparent"?r.isThemeColor?r.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${Lt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${Lt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${Lt(1)} solid transparent`}:n==="white"?r.isThemeColor?r.shade===void 0?{background:"var(--mantine-color-white)",hover:Wg(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${Lt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Wg(e.white,.01),color:`var(--mantine-color-${r.color}-${r.shade})`,border:`${Lt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Wg(e.white,.01),color:t,border:`${Lt(1)} solid transparent`}:n==="gradient"?{background:_x(i,e),hover:_x(i,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Lt(1)} solid var(--mantine-color-default-border)`}:{}},FJ={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},J2="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",X1={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:FJ,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:RJ,autoContrast:!1,luminanceThreshold:.3,fontFamily:J2,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:J2,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Lt(34),lineHeight:"1.3"},h2:{fontSize:Lt(26),lineHeight:"1.35"},h3:{fontSize:Lt(22),lineHeight:"1.4"},h4:{fontSize:Lt(18),lineHeight:"1.45"},h5:{fontSize:Lt(16),lineHeight:"1.5"},h6:{fontSize:Lt(14),lineHeight:"1.5"}}},fontSizes:{xs:Lt(12),sm:Lt(14),md:Lt(16),lg:Lt(18),xl:Lt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Lt(2),sm:Lt(4),md:Lt(8),lg:Lt(16),xl:Lt(32)},spacing:{xs:Lt(10),sm:Lt(12),md:Lt(16),lg:Lt(20),xl:Lt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Lt(1)} ${Lt(3)} rgba(0, 0, 0, 0.05), 0 ${Lt(1)} ${Lt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Lt(1)} ${Lt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Lt(10)} ${Lt(15)} ${Lt(-5)}, rgba(0, 0, 0, 0.04) 0 ${Lt(7)} ${Lt(7)} ${Lt(-5)}`,md:`0 ${Lt(1)} ${Lt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Lt(20)} ${Lt(25)} ${Lt(-5)}, rgba(0, 0, 0, 0.04) 0 ${Lt(10)} ${Lt(10)} ${Lt(-5)}`,lg:`0 ${Lt(1)} ${Lt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Lt(28)} ${Lt(23)} ${Lt(-7)}, rgba(0, 0, 0, 0.04) 0 ${Lt(12)} ${Lt(12)} ${Lt(-7)}`,xl:`0 ${Lt(1)} ${Lt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Lt(36)} ${Lt(28)} ${Lt(-7)}, rgba(0, 0, 0, 0.04) 0 ${Lt(17)} ${Lt(17)} ${Lt(-7)}`},other:{},components:{}};function K2(t){return t==="auto"||t==="dark"||t==="light"}function OJ({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const i=window.localStorage.getItem(t);return K2(i)?i:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:n=>{e=i=>{i.storageArea===window.localStorage&&i.key===t&&K2(i.newValue)&&n(i.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const DJ="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",Q2="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function $y(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function tC(t){if(!(t.primaryColor in t.colors))throw new Error(DJ);if(typeof t.primaryShade=="object"&&(!$y(t.primaryShade.dark)||!$y(t.primaryShade.light)))throw new Error(Q2);if(typeof t.primaryShade=="number"&&!$y(t.primaryShade))throw new Error(Q2)}function zJ(t,e){var i;if(!e)return tC(t),t;const n=B1(t,e);return e.fontFamily&&!((i=e.headings)!=null&&i.fontFamily)&&(n.headings.fontFamily=e.fontFamily),tC(n),n}const Z1=$.createContext(null),BJ=()=>$.useContext(Z1)||X1;function la(){const t=$.useContext(Z1);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function eO({theme:t,children:e,inherit:n=!0}){const i=BJ(),s=$.useMemo(()=>zJ(n?i:X1,t),[t,i,n]);return Q.jsx(Z1.Provider,{value:s,children:e})}eO.displayName="@mantine/core/MantineThemeProvider";function UJ(){const t=la(),e=H1(),n=mr(t.breakpoints).reduce((i,s)=>{const r=t.breakpoints[s].includes("px"),o=Kq(t.breakpoints[s]),a=r?`${o-.1}px`:q2(o-.1),l=r?`${o}px`:q2(o);return`${i}@media (max-width: ${a}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return Q.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function jy(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function bd(t,e){return(Array.isArray(t)?t:[t]).reduce((i,s)=>`${s}{${i}}`,e)}function $J(t,e){const n=jy(t.variables),i=n?bd(e,n):"",s=jy(t.dark),r=jy(t.light),o=s?bd(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,s):"",a=r?bd(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,r):"";return`${i}${o}${a}`}function jJ({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&_c({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function eC(t,e){return jJ({color:t.colors[t.primaryColor][Xh(t,e)],theme:t,autoContrast:null})}function Xg({theme:t,color:e,colorScheme:n,name:i=e,withColorValues:s=!0}){if(!t.colors[e])return{};if(n==="light"){const a=Xh(t,"light"),l={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${a===9?8:a+1})`,[`--mantine-color-${i}-light`]:Ll(t.colors[e][a],.1),[`--mantine-color-${i}-light-hover`]:Ll(t.colors[e][a],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-outline-hover`]:Ll(t.colors[e][a],.05)};return s?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...l}:l}const r=Xh(t,"dark"),o={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${r})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${r===9?8:r+1})`,[`--mantine-color-${i}-light`]:Ll(t.colors[e][Math.max(0,r-2)],.15),[`--mantine-color-${i}-light-hover`]:Ll(t.colors[e][Math.max(0,r-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(r-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(r-4,0)})`,[`--mantine-color-${i}-outline-hover`]:Ll(t.colors[e][Math.max(r-4,0)],.05)};return s?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...o}:o}function GJ(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function Pl(t,e,n){mr(e).forEach(i=>Object.assign(t,{[`--mantine-${n}-${i}`]:e[i]}))}const nO=t=>{const e=Xh(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:Lt(t.defaultRadius),i={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":eC(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":eC(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Pl(i.variables,t.breakpoints,"breakpoint"),Pl(i.variables,t.spacing,"spacing"),Pl(i.variables,t.fontSizes,"font-size"),Pl(i.variables,t.lineHeights,"line-height"),Pl(i.variables,t.shadows,"shadow"),Pl(i.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((r,o)=>{i.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${t.primaryColor}-${o})`}),mr(t.colors).forEach(r=>{const o=t.colors[r];if(GJ(o)){Object.assign(i.light,Xg({theme:t,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,Xg({theme:t,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{i.variables[`--mantine-color-${r}-${l}`]=a}),Object.assign(i.light,Xg({theme:t,color:r,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,Xg({theme:t,color:r,colorScheme:"dark",withColorValues:!1}))});const s=t.headings.sizes;return mr(s).forEach(r=>{i.variables[`--mantine-${r}-font-size`]=s[r].fontSize,i.variables[`--mantine-${r}-line-height`]=s[r].lineHeight,i.variables[`--mantine-${r}-font-weight`]=s[r].fontWeight||t.headings.fontWeight}),i};function VJ({theme:t,generator:e}){const n=nO(t),i=e==null?void 0:e(t);return i?B1(n,i):n}const Gy=nO(X1);function HJ(t){const e={variables:{},light:{},dark:{}};return mr(t.variables).forEach(n=>{Gy.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),mr(t.light).forEach(n=>{Gy.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),mr(t.dark).forEach(n=>{Gy.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function WJ(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function iO({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=la(),i=H1(),s=EJ(),r=VJ({theme:n,generator:s}),o=t===":root"&&e,a=o?HJ(r):r,l=$J(a,t);return l?Q.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${l}${o?"":WJ(t)}`}}):null}iO.displayName="@mantine/CssVariables";function XJ(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function kl(t,e){var i;const n=t!=="auto"?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(i=e())==null||i.setAttribute("data-mantine-color-scheme",n)}function ZJ({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:i}){const s=$.useRef(),[r,o]=$.useState(()=>t.get(e)),a=i||r,l=$.useCallback(h=>{i||(kl(h,n),o(h),t.set(h))},[t.set,a,i]),d=$.useCallback(()=>{o(e),kl(e,n),t.clear()},[t.clear,e]);return $.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Up(()=>{kl(t.get(e),n)},[]),$.useEffect(()=>{var c;if(i)return kl(i,n),()=>{};i===void 0&&kl(r,n),s.current=window.matchMedia("(prefers-color-scheme: dark)");const h=g=>{r==="auto"&&kl(g.matches?"dark":"light",n)};return(c=s.current)==null||c.addEventListener("change",h),()=>{var g;return(g=s.current)==null?void 0:g.removeEventListener("change",h)}},[r,i]),{colorScheme:a,setColorScheme:l,clearColorScheme:d}}function YJ({respectReducedMotion:t,getRootElement:e}){Up(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}XJ();function sO({theme:t,children:e,getStyleNonce:n,withStaticClasses:i=!0,withGlobalClasses:s=!0,deduplicateCssVariables:r=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:d=OJ(),defaultColorScheme:h="light",getRootElement:c=()=>document.documentElement,cssVariablesResolver:g,forceColorScheme:m,stylesTransform:_}){const{colorScheme:p,setColorScheme:v,clearColorScheme:x}=ZJ({defaultColorScheme:h,forceColorScheme:m,manager:d,getRootElement:c});return YJ({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:c}),Q.jsx(tO.Provider,{value:{colorScheme:p,setColorScheme:v,clearColorScheme:x,getRootElement:c,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:g,cssVariablesSelector:a,withStaticClasses:i,stylesTransform:_},children:Q.jsxs(eO,{theme:t,children:[o&&Q.jsx(iO,{cssVariablesSelector:a,deduplicateCssVariables:r}),s&&Q.jsx(UJ,{}),e]})})}sO.displayName="@mantine/core/MantineProvider";const qJ={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function JJ({theme:t,options:e,unstyled:n}){return ns((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||qJ[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function KJ({selector:t,stylesCtx:e,options:n,props:i,theme:s}){return V1({theme:s,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||i,stylesCtx:e})[t]}function nC({selector:t,stylesCtx:e,theme:n,classNames:i,props:s}){return V1({theme:n,classNames:i,props:s,stylesCtx:e})[t]}function QJ({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function tK({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function eK({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:i}){return i===!1?[]:t.map(s=>`${e}-${s}-${n}`)}function nK({themeName:t,theme:e,selector:n,props:i,stylesCtx:s}){return t.map(r=>{var o,a;return(a=V1({theme:e,classNames:(o=e.components[r])==null?void 0:o.classNames,props:i,stylesCtx:s}))==null?void 0:a[n]})}function iK({options:t,classes:e,selector:n,unstyled:i}){return t!=null&&t.variant&&!i?e[`${n}--${t.variant}`]:void 0}function sK({theme:t,options:e,themeName:n,selector:i,classNamesPrefix:s,classNames:r,classes:o,unstyled:a,className:l,rootSelector:d,props:h,stylesCtx:c,withStaticClasses:g,headless:m,transformedStyles:_}){return ns(JJ({theme:t,options:e,unstyled:a||m}),nK({theme:t,themeName:n,selector:i,props:h,stylesCtx:c}),iK({options:e,classes:o,selector:i,unstyled:a}),nC({selector:i,stylesCtx:c,theme:t,classNames:r,props:h}),nC({selector:i,stylesCtx:c,theme:t,classNames:_,props:h}),KJ({selector:i,stylesCtx:c,options:e,props:h,theme:t}),QJ({rootSelector:d,selector:i,className:l}),tK({selector:i,classes:o,unstyled:a||m}),g&&!m&&eK({themeName:n,classNamesPrefix:s,selector:i,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function rK({theme:t,themeName:e,props:n,stylesCtx:i,selector:s}){return e.map(r=>{var o;return px({theme:t,styles:(o=t.components[r])==null?void 0:o.styles,props:n,stylesCtx:i})[s]}).reduce((r,o)=>({...r,...o}),{})}function yx({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...yx({style:i,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function oK(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(i=>{e[i]={...e[i],...U1(n[i])}}),e),{})}function aK({vars:t,varsResolver:e,theme:n,props:i,stylesCtx:s,selector:r,themeName:o,headless:a}){var l;return(l=oK([a?{}:e==null?void 0:e(n,i,s),...o.map(d=>{var h,c,g;return(g=(c=(h=n.components)==null?void 0:h[d])==null?void 0:c.vars)==null?void 0:g.call(c,n,i,s)}),t==null?void 0:t(n,i,s)]))==null?void 0:l[r]}function lK({theme:t,themeName:e,selector:n,options:i,props:s,stylesCtx:r,rootSelector:o,styles:a,style:l,vars:d,varsResolver:h,headless:c,withStylesTransform:g}){return{...!g&&rK({theme:t,themeName:e,props:s,stylesCtx:r,selector:n}),...!g&&px({theme:t,styles:a,props:s,stylesCtx:r})[n],...!g&&px({theme:t,styles:i==null?void 0:i.styles,props:(i==null?void 0:i.props)||s,stylesCtx:r})[n],...aK({theme:t,props:s,stylesCtx:r,vars:d,varsResolver:h,selector:n,themeName:e,headless:c}),...o===n?yx({style:l,theme:t}):null,...yx({style:i==null?void 0:i.style,theme:t})}}function uK({props:t,stylesCtx:e,themeName:n}){var o;const i=la(),s=(o=CJ())==null?void 0:o();return{getTransformedStyles:a=>s?[...a.map(d=>s(d,{props:t,theme:i,ctx:e})),...n.map(d=>{var h;return s((h=i.components[d])==null?void 0:h.styles,{props:t,theme:i,ctx:e})})].filter(Boolean):[],withStylesTransform:!!s}}function Tn({name:t,classes:e,props:n,stylesCtx:i,className:s,style:r,rootSelector:o="root",unstyled:a,classNames:l,styles:d,vars:h,varsResolver:c}){const g=la(),m=SJ(),_=wJ(),p=AJ(),v=(Array.isArray(t)?t:[t]).filter(E=>E),{withStylesTransform:x,getTransformedStyles:b}=uK({props:n,stylesCtx:i,themeName:v});return(E,S)=>({className:sK({theme:g,options:S,themeName:v,selector:E,classNamesPrefix:m,classNames:l,classes:e,unstyled:a,className:s,rootSelector:o,props:n,stylesCtx:i,withStaticClasses:_,headless:p,transformedStyles:b([S==null?void 0:S.styles,d])}),style:lK({theme:g,themeName:v,selector:E,options:S,props:n,stylesCtx:i,rootSelector:o,styles:d,style:r,vars:h,varsResolver:c,headless:p,withStylesTransform:x})})}function xe(t,e,n){var o;const i=la(),s=(o=i.components[t])==null?void 0:o.defaultProps,r=typeof s=="function"?s(i):s;return{...e,...r,...U1(n)}}function Vy(t){return mr(t).reduce((e,n)=>t[n]!==void 0?`${e}${qq(n)}:${t[n]};`:e,"").trim()}function dK({selector:t,styles:e,media:n,container:i}){const s=e?Vy(e):"",r=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Vy(a.styles)}}}`):[],o=Array.isArray(i)?i.map(a=>`@container ${a.query}{${t}{${Vy(a.styles)}}}`):[];return`${s?`${t}{${s}}`:""}${r.join("")}${o.join("")}`.trim()}function hK(t){const e=H1();return Q.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:dK(t)}})}function Y1(t){const{m:e,mx:n,my:i,mt:s,mb:r,ml:o,mr:a,me:l,ms:d,p:h,px:c,py:g,pt:m,pb:_,pl:p,pr:v,pe:x,ps:b,bd:E,bg:S,c:A,opacity:T,ff:P,fz:k,fw:I,lts:R,ta:M,lh:z,fs:j,tt:X,td:O,w:N,miw:W,maw:U,h:K,mih:Z,mah:rt,bgsz:vt,bgp:St,bgr:ut,bga:_t,pos:Rt,top:Gt,left:Yt,bottom:Et,right:Tt,inset:re,display:Xt,flex:se,hiddenFrom:de,visibleFrom:q,lightHidden:ht,darkHidden:bt,sx:xt,...ct}=t;return{styleProps:U1({m:e,mx:n,my:i,mt:s,mb:r,ml:o,mr:a,me:l,ms:d,p:h,px:c,py:g,pt:m,pb:_,pl:p,pr:v,pe:x,ps:b,bd:E,bg:S,c:A,opacity:T,ff:P,fz:k,fw:I,lts:R,ta:M,lh:z,fs:j,tt:X,td:O,w:N,miw:W,maw:U,h:K,mih:Z,mah:rt,bgsz:vt,bgp:St,bgr:ut,bga:_t,pos:Rt,top:Gt,left:Yt,bottom:Et,right:Tt,inset:re,display:Xt,flex:se,hiddenFrom:de,visibleFrom:q,lightHidden:ht,darkHidden:bt,sx:xt}),rest:ct}}const cK={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function q1(t,e){const n=_c({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function gK(t,e){const n=_c({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:q1(t,e)}function fK(t,e){if(typeof t=="number")return Lt(t);if(typeof t=="string"){const[n,i,...s]=t.split(" ").filter(o=>o.trim()!=="");let r=`${Lt(n)}`;return i&&(r+=` ${i}`),s.length>0&&(r+=` ${q1(s.join(" "),e)}`),r.trim()}return t}const iC={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function mK(t){return typeof t=="string"&&t in iC?iC[t]:t}const pK=["h1","h2","h3","h4","h5","h6"];function _K(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&pK.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?Lt(t):t}function yK(t){return t}const vK=["h1","h2","h3","h4","h5","h6"];function xK(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&vK.includes(t)?`var(--mantine-${t}-line-height)`:t}function bK(t){return typeof t=="number"?Lt(t):t}function EK(t,e){if(typeof t=="number")return Lt(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return Lt(t);const i=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${i}) * -1)`:`var(${i})`}return t}const Hy={color:q1,textColor:gK,fontSize:_K,spacing:EK,identity:yK,size:bK,lineHeight:xK,fontFamily:mK,border:fK};function sC(t){return t.replace("(min-width: ","").replace("em)","")}function SK({media:t,...e}){const i=Object.keys(t).sort((s,r)=>Number(sC(s))-Number(sC(r))).map(s=>({query:s,styles:t[s]}));return{...e,media:i}}function wK(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function AK(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function TK(t){return typeof t=="object"&&t!==null?mr(t).filter(e=>e!=="base"):[]}function CK(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function LK({styleProps:t,data:e,theme:n}){return SK(mr(t).reduce((i,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return i;const r=e[s],o=Array.isArray(r.property)?r.property:[r.property],a=AK(t[s]);if(!wK(t[s]))return o.forEach(d=>{i.inlineStyles[d]=Hy[r.type](a,n)}),i;i.hasResponsiveStyles=!0;const l=TK(t[s]);return o.forEach(d=>{a&&(i.styles[d]=Hy[r.type](a,n)),l.forEach(h=>{const c=`(min-width: ${n.breakpoints[h]})`;i.media[c]={...i.media[c],[d]:Hy[r.type](CK(t[s],h),n)}})}),i},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function PK(){return`__m__-${$.useId().replace(/:/g,"")}`}function rO(t){return t.startsWith("data-")?t:`data-${t}`}function kK(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return i===void 0||i===""||i===!1||i===null||(e[rO(n)]=t[n]),e},{})}function oO(t){return t?typeof t=="string"?{[rO(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...oO(n)}),{}):kK(t):null}function vx(t,e){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...vx(i,e)}),{}):typeof t=="function"?t(e):t??{}}function IK({theme:t,style:e,vars:n,styleProps:i}){const s=vx(e,t),r=vx(n,t);return{...s,...r,...i}}const aO=$.forwardRef(({component:t,style:e,__vars:n,className:i,variant:s,mod:r,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:d,darkHidden:h,renderRoot:c,__size:g,...m},_)=>{var k;const p=la(),v=t||"div",{styleProps:x,rest:b}=Y1(m),E=TJ(),S=(k=E==null?void 0:E())==null?void 0:k(x.sx),A=PK(),T=LK({styleProps:x,theme:p,data:cK}),P={ref:_,style:IK({theme:p,style:e,vars:n,styleProps:T.inlineStyles}),className:ns(i,S,{[A]:T.hasResponsiveStyles,"mantine-light-hidden":d,"mantine-dark-hidden":h,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":s,"data-size":GF(o)?void 0:o||void 0,size:g,...oO(r),...b};return Q.jsxs(Q.Fragment,{children:[T.hasResponsiveStyles&&Q.jsx(hK,{selector:`.${A}`,styles:T.styles,media:T.media}),typeof c=="function"?c(P):Q.jsx(v,{...P})]})});aO.displayName="@mantine/core/Box";const ge=aO;function lO(t){return t}function _n(t){const e=$.forwardRef(t);return e.extend=lO,e.withProps=n=>{const i=$.forwardRef((s,r)=>Q.jsx(e,{...n,...s,ref:r}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e}function ll(t){const e=$.forwardRef(t);return e.withProps=n=>{const i=$.forwardRef((s,r)=>Q.jsx(e,{...n,...s,ref:r}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e.extend=lO,e}const MK=$.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function uO(){return $.useContext(MK)}var dO={root:"m_87cf2631"};const NK={__staticSelector:"UnstyledButton"},$p=ll((t,e)=>{const n=xe("UnstyledButton",NK,t),{className:i,component:s="button",__staticSelector:r,unstyled:o,classNames:a,styles:l,style:d,...h}=n,c=Tn({name:r,props:n,classes:dO,className:i,style:d,classNames:a,styles:l,unstyled:o});return Q.jsx(ge,{...c("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...h})});$p.classes=dO;$p.displayName="@mantine/core/UnstyledButton";var hO={root:"m_515a97f8"};const RK={},J1=_n((t,e)=>{const n=xe("VisuallyHidden",RK,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,...d}=n,h=Tn({name:"VisuallyHidden",classes:hO,props:n,className:s,style:r,classNames:i,styles:o,unstyled:a});return Q.jsx(ge,{component:"span",ref:e,...h("root"),...d})});J1.classes=hO;J1.displayName="@mantine/core/VisuallyHidden";var cO={root:"m_1b7284a3"};const FK={},OK=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:ol(e),"--paper-shadow":VF(n)}}),K1=ll((t,e)=>{const n=xe("Paper",FK,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,withBorder:l,vars:d,radius:h,shadow:c,variant:g,mod:m,..._}=n,p=Tn({name:"Paper",props:n,classes:cO,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:d,varsResolver:OK});return Q.jsx(ge,{ref:e,mod:[{"data-with-border":l},m],...p("root"),variant:g,..._})});K1.classes=cO;K1.displayName="@mantine/core/Paper";function Q1({children:t,active:e=!0,refProp:n="ref",innerRef:i}){const s=fJ(e),r=JF(s,i);return Qq(t)?$.cloneElement(t,{[n]:r}):t}function gO(t){return Q.jsx(J1,{tabIndex:-1,"data-autofocus":!0,...t})}Q1.displayName="@mantine/core/FocusTrap";gO.displayName="@mantine/core/FocusTrapInitialFocus";Q1.InitialFocus=gO;function DK(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}const zK={},fO=$.forwardRef((t,e)=>{const{children:n,target:i,...s}=xe("Portal",zK,t),[r,o]=$.useState(!1),a=$.useRef(null);return Up(()=>(o(!0),a.current=i?typeof i=="string"?document.querySelector(i):i:DK(s),qF(e,a.current),!i&&a.current&&document.body.appendChild(a.current),()=>{!i&&a.current&&document.body.removeChild(a.current)}),[i]),!r||!a.current?null:Uu.createPortal(Q.jsx(Q.Fragment,{children:n}),a.current)});fO.displayName="@mantine/core/Portal";function mO({withinPortal:t=!0,children:e,...n}){return t?Q.jsx(fO,{...n,children:e}):Q.jsx(Q.Fragment,{children:e})}mO.displayName="@mantine/core/OptionalPortal";const Ed=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Lt(t==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),Zg={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Lt(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Lt(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Lt(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Lt(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Lt(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Lt(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Lt(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Lt(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Ed("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Ed("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Ed("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Ed("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Ed("top"),common:{transformOrigin:"top right"}}},rC={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function BK({transition:t,state:e,duration:n,timingFunction:i}){const s={transitionDuration:`${n}ms`,transitionTimingFunction:i};return typeof t=="string"?t in Zg?{transitionProperty:Zg[t].transitionProperty,...s,...Zg[t].common,...Zg[t][rC[e]]}:{}:{transitionProperty:t.transitionProperty,...s,...t.common,...t[rC[e]]}}function UK({duration:t,exitDuration:e,timingFunction:n,mounted:i,onEnter:s,onExit:r,onEntered:o,onExited:a,enterDelay:l,exitDelay:d}){const h=la(),c=KF(),g=h.respectReducedMotion?c:!1,[m,_]=$.useState(g?0:t),[p,v]=$.useState(i?"entered":"exited"),x=$.useRef(-1),b=$.useRef(-1),E=$.useRef(-1),S=T=>{const P=T?s:r,k=T?o:a;window.clearTimeout(x.current);const I=g?0:T?t:e;_(I),I===0?(typeof P=="function"&&P(),typeof k=="function"&&k(),v(T?"entered":"exited")):E.current=requestAnimationFrame(()=>{aU.flushSync(()=>{v(T?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof P=="function"&&P(),v(T?"entering":"exiting"),x.current=window.setTimeout(()=>{typeof k=="function"&&k(),v(T?"entered":"exited")},I)})})},A=T=>{if(window.clearTimeout(b.current),typeof(T?l:d)!="number"){S(T);return}b.current=window.setTimeout(()=>{S(T)},T?l:d)};return WF(()=>{A(i)},[i]),$.useEffect(()=>()=>{window.clearTimeout(x.current),cancelAnimationFrame(E.current)},[]),{transitionDuration:m,transitionStatus:p,transitionTimingFunction:n||"ease"}}function ju({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:i=n,mounted:s,children:r,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:d,onExited:h,enterDelay:c,exitDelay:g}){const{transitionDuration:m,transitionStatus:_,transitionTimingFunction:p}=UK({mounted:s,exitDuration:i,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:d,onExited:h,enterDelay:c,exitDelay:g});return m===0?s?Q.jsx(Q.Fragment,{children:r({})}):t?r({display:"none"}):null:_==="exited"?t?r({display:"none"}):null:Q.jsx(Q.Fragment,{children:r(BK({transition:e,duration:m,state:_,timingFunction:p}))})}ju.displayName="@mantine/core/Transition";var Bs={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const $K=$.forwardRef(({className:t,...e},n)=>Q.jsxs(ge,{component:"span",className:ns(Bs.barsLoader,t),...e,ref:n,children:[Q.jsx("span",{className:Bs.bar}),Q.jsx("span",{className:Bs.bar}),Q.jsx("span",{className:Bs.bar})]})),jK=$.forwardRef(({className:t,...e},n)=>Q.jsxs(ge,{component:"span",className:ns(Bs.dotsLoader,t),...e,ref:n,children:[Q.jsx("span",{className:Bs.dot}),Q.jsx("span",{className:Bs.dot}),Q.jsx("span",{className:Bs.dot})]})),GK=$.forwardRef(({className:t,...e},n)=>Q.jsx(ge,{component:"span",className:ns(Bs.ovalLoader,t),...e,ref:n})),pO={bars:$K,oval:GK,dots:jK},VK={loaders:pO,type:"oval"},HK=(t,{size:e,color:n})=>({root:{"--loader-size":Gn(e,"loader-size"),"--loader-color":n?Ru(n,t):void 0}}),yc=_n((t,e)=>{const n=xe("Loader",VK,t),{size:i,color:s,type:r,vars:o,className:a,style:l,classNames:d,styles:h,unstyled:c,loaders:g,variant:m,children:_,...p}=n,v=Tn({name:"Loader",props:n,classes:Bs,className:a,style:l,classNames:d,styles:h,unstyled:c,vars:o,varsResolver:HK});return _?Q.jsx(ge,{...v("root"),ref:e,...p,children:_}):Q.jsx(ge,{...v("root"),ref:e,component:g[r],variant:m,size:i,...p})});yc.defaultLoaders=pO;yc.classes=Bs;yc.displayName="@mantine/core/Loader";var jp={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const oC={orientation:"horizontal"},WK=(t,{borderWidth:e})=>({group:{"--ai-border-width":Lt(e)}}),tE=_n((t,e)=>{const n=xe("ActionIconGroup",oC,t),{className:i,style:s,classNames:r,styles:o,unstyled:a,orientation:l,vars:d,borderWidth:h,variant:c,mod:g,...m}=xe("ActionIconGroup",oC,t),_=Tn({name:"ActionIconGroup",props:n,classes:jp,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:d,varsResolver:WK,rootSelector:"group"});return Q.jsx(ge,{..._("group"),ref:e,variant:c,mod:[{"data-orientation":l},g],role:"group",...m})});tE.classes=jp;tE.displayName="@mantine/core/ActionIconGroup";const XK={},ZK=(t,{size:e,radius:n,variant:i,gradient:s,color:r,autoContrast:o})=>{const a=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:s,variant:i||"filled",autoContrast:o});return{root:{"--ai-size":Gn(e,"ai-size"),"--ai-radius":n===void 0?void 0:ol(n),"--ai-bg":r||i?a.background:void 0,"--ai-hover":r||i?a.hover:void 0,"--ai-hover-color":r||i?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":r||i?a.border:void 0}}},vc=ll((t,e)=>{const n=xe("ActionIcon",XK,t),{className:i,unstyled:s,variant:r,classNames:o,styles:a,style:l,loading:d,loaderProps:h,size:c,color:g,radius:m,__staticSelector:_,gradient:p,vars:v,children:x,disabled:b,"data-disabled":E,autoContrast:S,mod:A,...T}=n,P=Tn({name:["ActionIcon",_],props:n,className:i,style:l,classes:jp,classNames:o,styles:a,unstyled:s,vars:v,varsResolver:ZK});return Q.jsxs($p,{...P("root",{active:!b&&!d&&!E}),...T,unstyled:s,variant:r,size:c,disabled:b||d,ref:e,mod:[{loading:d,disabled:b||E},A],children:[Q.jsx(ju,{mounted:!!d,transition:"slide-down",duration:150,children:k=>Q.jsx(ge,{component:"span",...P("loader",{style:k}),"aria-hidden":!0,children:Q.jsx(yc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...h})})}),Q.jsx(ge,{component:"span",mod:{loading:d},...P("icon"),children:x})]})});vc.classes=jp;vc.displayName="@mantine/core/ActionIcon";vc.Group=tE;const _O=$.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},i)=>Q.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:i,...n,children:Q.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));_O.displayName="@mantine/core/CloseIcon";var yO={root:"m_86a44da5","root--subtle":"m_220c80f2"};const YK={variant:"subtle"},qK=(t,{size:e,radius:n,iconSize:i})=>({root:{"--cb-size":Gn(e,"cb-size"),"--cb-radius":n===void 0?void 0:ol(n),"--cb-icon-size":Lt(i)}}),eE=ll((t,e)=>{const n=xe("CloseButton",YK,t),{iconSize:i,children:s,vars:r,radius:o,className:a,classNames:l,style:d,styles:h,unstyled:c,"data-disabled":g,disabled:m,variant:_,icon:p,mod:v,...x}=n,b=Tn({name:"CloseButton",props:n,className:a,style:d,classes:yO,classNames:l,styles:h,unstyled:c,vars:r,varsResolver:qK});return Q.jsxs($p,{ref:e,...x,unstyled:c,variant:_,disabled:m,mod:[{disabled:m||g},v],...b("root",{variant:_,active:!m&&!g}),children:[p||Q.jsx(_O,{}),s]})});eE.classes=yO;eE.displayName="@mantine/core/CloseButton";var vO={root:"m_9814e45f"};const JK={zIndex:pc("modal")},KK=(t,{gradient:e,color:n,backgroundOpacity:i,blur:s,radius:r,zIndex:o})=>({root:{"--overlay-bg":e||(n!==void 0||i!==void 0)&&sr(n||"#000",i??.6)||void 0,"--overlay-filter":s?`blur(${Lt(s)})`:void 0,"--overlay-radius":r===void 0?void 0:ol(r),"--overlay-z-index":o==null?void 0:o.toString()}}),Zh=ll((t,e)=>{const n=xe("Overlay",JK,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,fixed:d,center:h,children:c,radius:g,zIndex:m,gradient:_,blur:p,color:v,backgroundOpacity:x,mod:b,...E}=n,S=Tn({name:"Overlay",props:n,classes:vO,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:KK});return Q.jsx(ge,{ref:e,...S("root"),mod:[{center:h,fixed:d},b],...E,children:c})});Zh.classes=vO;Zh.displayName="@mantine/core/Overlay";const[QK,io]=$1("ModalBase component was not found in tree");function tQ({opened:t,transitionDuration:e}){const[n,i]=$.useState(t),s=$.useRef(),o=KF()?0:e;return $.useEffect(()=>(t?(i(!0),window.clearTimeout(s.current)):o===0?i(!1):s.current=window.setTimeout(()=>i(!1),o),()=>window.clearTimeout(s.current)),[t,o]),n}function eQ({id:t,transitionProps:e,opened:n,trapFocus:i,closeOnEscape:s,onClose:r,returnFocus:o}){const a=j1(t),[l,d]=$.useState(!1),[h,c]=$.useState(!1),g=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,m=tQ({opened:n,transitionDuration:g});return _J("keydown",_=>{var p;_.key==="Escape"&&s&&n&&((p=_.target)==null?void 0:p.getAttribute("data-mantine-stop-propagation"))!=="true"&&r()},{capture:!0}),aJ({opened:n,shouldReturnFocus:i&&o}),{_id:a,titleMounted:l,bodyMounted:h,shouldLockScroll:m,setTitleMounted:d,setBodyMounted:c}}const nQ=$.forwardRef(({keepMounted:t,opened:e,onClose:n,id:i,transitionProps:s,trapFocus:r,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:d,portalProps:h,lockScroll:c,children:g,zIndex:m,shadow:_,padding:p,__vars:v,unstyled:x,removeScrollProps:b,...E},S)=>{const{_id:A,titleMounted:T,bodyMounted:P,shouldLockScroll:k,setTitleMounted:I,setBodyMounted:R}=eQ({id:i,transitionProps:s,opened:e,trapFocus:r,closeOnEscape:o,onClose:n,returnFocus:a}),{key:M,...z}=b||{};return Q.jsx(mO,{...h,withinPortal:d,children:Q.jsx(QK,{value:{opened:e,onClose:n,closeOnClickOutside:l,transitionProps:{...s,keepMounted:t},getTitleId:()=>`${A}-title`,getBodyId:()=>`${A}-body`,titleMounted:T,bodyMounted:P,setTitleMounted:I,setBodyMounted:R,trapFocus:r,closeOnEscape:o,zIndex:m,unstyled:x},children:Q.jsx($F,{enabled:k&&c,...z,children:Q.jsx(ge,{ref:S,...E,__vars:{...v,"--mb-z-index":(m||pc("modal")).toString(),"--mb-shadow":VF(_),"--mb-padding":nJ(p)},children:g})},M)})})});function iQ(){const t=io();return $.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var Fu={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const xO=$.forwardRef(({className:t,...e},n)=>{const i=iQ(),s=io();return Q.jsx(ge,{ref:n,...e,id:i,className:ns({[Fu.body]:!s.unstyled},t)})});xO.displayName="@mantine/core/ModalBaseBody";const bO=$.forwardRef(({className:t,onClick:e,...n},i)=>{const s=io();return Q.jsx(eE,{ref:i,...n,onClick:r=>{s.onClose(),e==null||e(r)},className:ns({[Fu.close]:!s.unstyled},t),unstyled:s.unstyled})});bO.displayName="@mantine/core/ModalBaseCloseButton";const sQ=$.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:i,style:s,...r},o)=>{const a=io();return Q.jsx(ju,{mounted:a.opened,transition:"pop",...a.transitionProps,...t,children:l=>Q.jsx("div",{...n,className:ns({[Fu.inner]:!a.unstyled},n.className),children:Q.jsx(Q1,{active:a.opened&&a.trapFocus,innerRef:o,children:Q.jsx(K1,{...r,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[s,l],className:ns({[Fu.content]:!a.unstyled},e),unstyled:a.unstyled,children:r.children})})})})}),EO=$.forwardRef(({className:t,...e},n)=>{const i=io();return Q.jsx(ge,{component:"header",ref:n,className:ns({[Fu.header]:!i.unstyled},t),...e})});EO.displayName="@mantine/core/ModalBaseHeader";const rQ={duration:200,timingFunction:"ease",transition:"fade"};function oQ(t){const e=io();return{...rQ,...e.transitionProps,...t}}const SO=$.forwardRef(({onClick:t,transitionProps:e,style:n,...i},s)=>{const r=io(),o=oQ(e);return Q.jsx(ju,{mounted:r.opened,...o,transition:"fade",children:a=>Q.jsx(Zh,{ref:s,fixed:!0,style:[n,a],zIndex:r.zIndex,unstyled:r.unstyled,onClick:l=>{t==null||t(l),r.closeOnClickOutside&&r.onClose()},...i})})});SO.displayName="@mantine/core/ModalBaseOverlay";function aQ(){const t=io();return $.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const wO=$.forwardRef(({className:t,...e},n)=>{const i=aQ(),s=io();return Q.jsx(ge,{component:"h2",ref:n,className:ns({[Fu.title]:!s.unstyled},t),...e,id:i})});wO.displayName="@mantine/core/ModalBaseTitle";function lQ({children:t}){return Q.jsx(Q.Fragment,{children:t})}const[uQ,xc]=tJ({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Ts={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const aC={},dQ=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Vr(e)} - ${Lt(2)})`}}),Gp=_n((t,e)=>{const n=xe("InputDescription",aC,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,size:d,__staticSelector:h,__inheritStyles:c=!0,variant:g,...m}=xe("InputDescription",aC,n),_=xc(),p=Tn({name:["InputWrapper",h],props:n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:dQ}),v=c&&(_==null?void 0:_.getStyles)||p;return Q.jsx(ge,{component:"p",ref:e,variant:g,size:d,...v("description",_!=null&&_.getStyles?{className:s,style:r}:void 0),...m})});Gp.classes=Ts;Gp.displayName="@mantine/core/InputDescription";const hQ={},cQ=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Vr(e)} - ${Lt(2)})`}}),Vp=_n((t,e)=>{const n=xe("InputError",hQ,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,size:d,__staticSelector:h,__inheritStyles:c=!0,variant:g,...m}=n,_=Tn({name:["InputWrapper",h],props:n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:cQ}),p=xc(),v=c&&(p==null?void 0:p.getStyles)||_;return Q.jsx(ge,{component:"p",ref:e,variant:g,size:d,...v("error",p!=null&&p.getStyles?{className:s,style:r}:void 0),...m})});Vp.classes=Ts;Vp.displayName="@mantine/core/InputError";const lC={labelElement:"label"},gQ=(t,{size:e})=>({label:{"--input-label-size":Vr(e),"--input-asterisk-color":void 0}}),Hp=_n((t,e)=>{const n=xe("InputLabel",lC,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,labelElement:d,size:h,required:c,htmlFor:g,onMouseDown:m,children:_,__staticSelector:p,variant:v,mod:x,...b}=xe("InputLabel",lC,n),E=Tn({name:["InputWrapper",p],props:n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:gQ}),S=xc(),A=(S==null?void 0:S.getStyles)||E;return Q.jsxs(ge,{...A("label",S!=null&&S.getStyles?{className:s,style:r}:void 0),component:d,variant:v,size:h,ref:e,htmlFor:d==="label"?g:void 0,mod:[{required:c},x],onMouseDown:T=>{m==null||m(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...b,children:[_,c&&Q.jsx("span",{...A("required"),"aria-hidden":!0,children:" *"})]})});Hp.classes=Ts;Hp.displayName="@mantine/core/InputLabel";const uC={},nE=_n((t,e)=>{const n=xe("InputPlaceholder",uC,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,__staticSelector:d,variant:h,error:c,mod:g,...m}=xe("InputPlaceholder",uC,n),_=Tn({name:["InputPlaceholder",d],props:n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,rootSelector:"placeholder"});return Q.jsx(ge,{..._("placeholder"),mod:[{error:!!c},g],component:"span",variant:h,ref:e,...m})});nE.classes=Ts;nE.displayName="@mantine/core/InputPlaceholder";function fQ(t,{hasDescription:e,hasError:n}){const i=t.findIndex(l=>l==="input"),s=t.slice(0,i),r=t.slice(i+1),o=e&&s.includes("description")||n&&s.includes("error");return{offsetBottom:e&&r.includes("description")||n&&r.includes("error"),offsetTop:o}}const mQ={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},pQ=(t,{size:e})=>({label:{"--input-label-size":Vr(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Vr(e)} - ${Lt(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Vr(e)} - ${Lt(2)})`}}),iE=_n((t,e)=>{const n=xe("InputWrapper",mQ,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,size:d,variant:h,__staticSelector:c,inputContainer:g,inputWrapperOrder:m,label:_,error:p,description:v,labelProps:x,descriptionProps:b,errorProps:E,labelElement:S,children:A,withAsterisk:T,id:P,required:k,__stylesApiProps:I,mod:R,...M}=n,z=Tn({name:["InputWrapper",c],props:I||n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:pQ}),j={size:d,variant:h,__staticSelector:c},X=j1(P),O=typeof T=="boolean"?T:k,N=(E==null?void 0:E.id)||`${X}-error`,W=(b==null?void 0:b.id)||`${X}-description`,U=X,K=!!p&&typeof p!="boolean",Z=!!v,rt=`${K?N:""} ${Z?W:""}`,vt=rt.trim().length>0?rt.trim():void 0,St=(x==null?void 0:x.id)||`${X}-label`,ut=_&&Q.jsx(Hp,{labelElement:S,id:St,htmlFor:U,required:O,...j,...x,children:_},"label"),_t=Z&&Q.jsx(Gp,{...b,...j,size:(b==null?void 0:b.size)||j.size,id:(b==null?void 0:b.id)||W,children:v},"description"),Rt=Q.jsx($.Fragment,{children:g(A)},"input"),Gt=K&&$.createElement(Vp,{...E,...j,size:(E==null?void 0:E.size)||j.size,key:"error",id:(E==null?void 0:E.id)||N},p),Yt=m.map(Et=>{switch(Et){case"label":return ut;case"input":return Rt;case"description":return _t;case"error":return Gt;default:return null}});return Q.jsx(uQ,{value:{getStyles:z,describedBy:vt,inputId:U,labelId:St,...fQ(m,{hasDescription:Z,hasError:K})},children:Q.jsx(ge,{ref:e,variant:h,size:d,mod:[{error:!!p},R],...z("root"),...M,children:Yt})})});iE.classes=Ts;iE.displayName="@mantine/core/InputWrapper";const _Q={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},yQ=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Gn(e.size,"input-height"),"--input-fz":Vr(e.size),"--input-radius":e.radius===void 0?void 0:ol(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Lt(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Lt(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Gn(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Ws=ll((t,e)=>{const n=xe("Input",_Q,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,required:l,__staticSelector:d,__stylesApiProps:h,size:c,wrapperProps:g,error:m,disabled:_,leftSection:p,leftSectionProps:v,leftSectionWidth:x,rightSection:b,rightSectionProps:E,rightSectionWidth:S,rightSectionPointerEvents:A,leftSectionPointerEvents:T,variant:P,vars:k,pointer:I,multiline:R,radius:M,id:z,withAria:j,withErrorStyles:X,mod:O,inputSize:N,...W}=n,{styleProps:U,rest:K}=Y1(W),Z=xc(),rt={offsetBottom:Z==null?void 0:Z.offsetBottom,offsetTop:Z==null?void 0:Z.offsetTop},vt=Tn({name:["Input",d],props:h||n,classes:Ts,className:s,style:r,classNames:i,styles:o,unstyled:a,stylesCtx:rt,rootSelector:"wrapper",vars:k,varsResolver:yQ}),St=j?{required:l,disabled:_,"aria-invalid":!!m,"aria-describedby":Z==null?void 0:Z.describedBy,id:(Z==null?void 0:Z.inputId)||z}:{};return Q.jsxs(ge,{...vt("wrapper"),...U,...g,mod:[{error:!!m&&X,pointer:I,disabled:_,multiline:R,"data-with-right-section":!!b,"data-with-left-section":!!p},O],variant:P,size:c,children:[p&&Q.jsx("div",{...v,"data-position":"left",...vt("section",{className:v==null?void 0:v.className,style:v==null?void 0:v.style}),children:p}),Q.jsx(ge,{component:"input",...K,...St,ref:e,required:l,mod:{disabled:_,error:!!m&&X},variant:P,__size:N,...vt("input")}),b&&Q.jsx("div",{...E,"data-position":"right",...vt("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),children:b})]})});Ws.classes=Ts;Ws.Wrapper=iE;Ws.Label=Hp;Ws.Error=Vp;Ws.Description=Gp;Ws.Placeholder=nE;Ws.displayName="@mantine/core/Input";var AO={root:"m_b6d8b162"};function vQ(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const xQ={inherit:!1},bQ=(t,{variant:e,lineClamp:n,gradient:i,size:s,color:r})=>({root:{"--text-fz":Vr(s),"--text-lh":iJ(s),"--text-gradient":e==="gradient"?_x(i,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":r?Ru(r,t):void 0}}),Om=ll((t,e)=>{const n=xe("Text",xQ,t),{lineClamp:i,truncate:s,inline:r,inherit:o,gradient:a,span:l,__staticSelector:d,vars:h,className:c,style:g,classNames:m,styles:_,unstyled:p,variant:v,mod:x,size:b,...E}=n,S=Tn({name:["Text",d],props:n,classes:AO,className:c,style:g,classNames:m,styles:_,unstyled:p,vars:h,varsResolver:bQ});return Q.jsx(ge,{...S("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:v,mod:[{"data-truncate":vQ(s),"data-line-clamp":typeof i=="number","data-inline":r,"data-inherit":o},x],size:b,...E})});Om.classes=AO;Om.displayName="@mantine/core/Text";var TO={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const EQ=TO,CO=$.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:n,classNames:i,styles:s,unstyled:r,children:o,label:a,description:l,id:d,disabled:h,error:c,size:g,labelPosition:m="left",bodyElement:_="div",labelElement:p="label",variant:v,style:x,vars:b,mod:E,...S},A)=>{const T=Tn({name:t,props:e,className:n,style:x,classes:TO,classNames:i,styles:s,unstyled:r});return Q.jsx(ge,{...T("root"),ref:A,__vars:{"--label-fz":Vr(g),"--label-lh":Gn(g,"label-lh")},mod:[{"label-position":m},E],variant:v,size:g,...S,children:Q.jsxs(ge,{component:_,htmlFor:_==="label"?d:void 0,...T("body"),children:[o,Q.jsxs("div",{...T("labelWrapper"),"data-disabled":h||void 0,children:[a&&Q.jsx(ge,{component:p,htmlFor:p==="label"?d:void 0,...T("label"),"data-disabled":h||void 0,children:a}),l&&Q.jsx(Ws.Description,{size:g,__inheritStyles:!1,...T("description"),children:l}),c&&typeof c!="boolean"&&Q.jsx(Ws.Error,{size:g,__inheritStyles:!1,...T("error"),children:c})]})]})})});CO.displayName="@mantine/core/InlineInput";function SQ({children:t,role:e}){const n=xc();return n?Q.jsx("div",{role:e,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:t}):Q.jsx(Q.Fragment,{children:t})}const[wQ,Gu]=$1("Drawer component was not found in tree");var so={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const AQ={},Wp=_n((t,e)=>{const n=xe("DrawerBody",AQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,...l}=n,d=Gu();return Q.jsx(xO,{ref:e,...d.getStyles("body",{classNames:i,style:r,styles:o,className:s}),...l})});Wp.classes=so;Wp.displayName="@mantine/core/DrawerBody";const TQ={},Xp=_n((t,e)=>{const n=xe("DrawerCloseButton",TQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,...l}=n,d=Gu();return Q.jsx(bO,{ref:e,...d.getStyles("close",{classNames:i,style:r,styles:o,className:s}),...l})});Xp.classes=so;Xp.displayName="@mantine/core/DrawerCloseButton";const CQ={},Zp=_n((t,e)=>{const n=xe("DrawerContent",CQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,children:l,radius:d,...h}=n,c=Gu(),g=c.scrollAreaComponent||lQ;return Q.jsx(sQ,{...c.getStyles("content",{className:s,style:r,styles:o,classNames:i}),innerProps:c.getStyles("inner",{className:s,style:r,styles:o,classNames:i}),ref:e,...h,radius:d||c.radius||0,children:Q.jsx(g,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:l})})});Zp.classes=so;Zp.displayName="@mantine/core/DrawerContent";const LQ={},Yp=_n((t,e)=>{const n=xe("DrawerHeader",LQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,...l}=n,d=Gu();return Q.jsx(EO,{ref:e,...d.getStyles("header",{classNames:i,style:r,styles:o,className:s}),...l})});Yp.classes=so;Yp.displayName="@mantine/core/DrawerHeader";const PQ={},qp=_n((t,e)=>{const n=xe("DrawerOverlay",PQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,...l}=n,d=Gu();return Q.jsx(SO,{ref:e,...d.getStyles("overlay",{classNames:i,style:r,styles:o,className:s}),...l})});qp.classes=so;qp.displayName="@mantine/core/DrawerOverlay";function kQ(t){switch(t){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function IQ(t){if(t==="top"||t==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const MQ={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},NQ={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},RQ={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:pc("modal"),position:"left"},FQ=(t,{position:e,size:n,offset:i})=>({root:{"--drawer-size":Gn(n,"drawer-size"),"--drawer-flex":IQ(e),"--drawer-height":e==="left"||e==="right"?void 0:"var(--drawer-size)","--drawer-align":kQ(e),"--drawer-justify":e==="right"?"flex-end":void 0,"--drawer-offset":Lt(i)}}),Jp=_n((t,e)=>{const n=xe("DrawerRoot",RQ,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,scrollAreaComponent:d,position:h,transitionProps:c,radius:g,...m}=n,{dir:_}=uO(),p=Tn({name:"Drawer",classes:so,props:n,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:FQ}),v=(_==="rtl"?NQ:MQ)[h];return Q.jsx(wQ,{value:{scrollAreaComponent:d,getStyles:p,radius:g},children:Q.jsx(nQ,{ref:e,...p("root"),transitionProps:{transition:v,...c},unstyled:a,...m})})});Jp.classes=so;Jp.displayName="@mantine/core/DrawerRoot";const OQ={},Kp=_n((t,e)=>{const n=xe("DrawerTitle",OQ,t),{classNames:i,className:s,style:r,styles:o,vars:a,...l}=n,d=Gu();return Q.jsx(wO,{ref:e,...d.getStyles("title",{classNames:i,style:r,styles:o,className:s}),...l})});Kp.classes=so;Kp.displayName="@mantine/core/DrawerTitle";const DQ={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:pc("modal"),withOverlay:!0,withCloseButton:!0},vr=_n((t,e)=>{const{title:n,withOverlay:i,overlayProps:s,withCloseButton:r,closeButtonProps:o,children:a,...l}=xe("Drawer",DQ,t),d=!!n||r;return Q.jsxs(Jp,{ref:e,...l,children:[i&&Q.jsx(qp,{...s}),Q.jsxs(Zp,{children:[d&&Q.jsxs(Yp,{children:[n&&Q.jsx(Kp,{children:n}),r&&Q.jsx(Xp,{...o})]}),Q.jsx(Wp,{children:a})]})]})});vr.classes=so;vr.displayName="@mantine/core/Drawer";vr.Root=Jp;vr.Overlay=qp;vr.Content=Zp;vr.Body=Wp;vr.Header=Yp;vr.Title=Kp;vr.CloseButton=Xp;var LO={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const dC={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:pc("overlay")},zQ=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),sE=_n((t,e)=>{const n=xe("LoadingOverlay",dC,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,transitionProps:d,loaderProps:h,overlayProps:c,visible:g,zIndex:m,..._}=n,p=la(),v=Tn({name:"LoadingOverlay",classes:LO,props:n,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:zQ}),x={...dC.overlayProps,...c};return Q.jsx(ju,{transition:"fade",...d,mounted:!!g,children:b=>Q.jsxs(ge,{...v("root",{style:b}),ref:e,..._,children:[Q.jsx(yc,{...v("loader"),unstyled:a,...h}),Q.jsx(Zh,{...x,...v("overlay"),darkHidden:!0,unstyled:a,color:(c==null?void 0:c.color)||p.white}),Q.jsx(Zh,{...x,...v("overlay"),lightHidden:!0,unstyled:a,color:(c==null?void 0:c.color)||p.colors.dark[5]})]})})});sE.classes=LO;sE.displayName="@mantine/core/LoadingOverlay";const[BQ,Qp]=$1("SliderProvider was not found in tree"),PO=$.forwardRef(({size:t,disabled:e,variant:n,color:i,thumbSize:s,radius:r,...o},a)=>{const{getStyles:l}=Qp();return Q.jsx(ge,{tabIndex:-1,variant:n,size:t,ref:a,...l("root"),...o})});PO.displayName="@mantine/core/SliderRoot";const kO=$.forwardRef(({max:t,min:e,value:n,position:i,label:s,dragging:r,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:d,thumbLabel:h,onFocus:c,onBlur:g,showLabelOnHover:m,isHovered:_,children:p=null,disabled:v},x)=>{const{getStyles:b}=Qp(),[E,S]=$.useState(!1),A=d||r||E||m&&_;return Q.jsxs(ge,{tabIndex:0,role:"slider","aria-label":h,"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,ref:x,__vars:{"--slider-thumb-offset":`${i}%`},...b("thumb",{focusable:!0}),mod:{dragging:r,disabled:v},onFocus:()=>{S(!0),typeof c=="function"&&c()},onBlur:()=>{S(!1),typeof g=="function"&&g()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[p,Q.jsx(ju,{mounted:s!=null&&!!A,transition:"fade",duration:0,...l,children:T=>Q.jsx("div",{...b("label",{style:T}),children:s})})]})});kO.displayName="@mantine/core/SliderThumb";function IO({value:t,min:e,max:n}){const i=(t-e)/(n-e)*100;return Math.min(Math.max(i,0),100)}function UQ({mark:t,offset:e,value:n,inverted:i=!1}){return i?typeof e=="number"&&t.value<=e||t.value>=n:typeof e=="number"?t.value>=e&&t.value<=n:t.value<=n}function MO({marks:t,min:e,max:n,disabled:i,value:s,offset:r,inverted:o}){const{getStyles:a}=Qp();if(!t)return null;const l=t.map((d,h)=>$.createElement(ge,{...a("markWrapper"),__vars:{"--mark-offset":`${IO({value:d.value,min:e,max:n})}%`},key:h},Q.jsx(ge,{...a("mark"),mod:{filled:UQ({mark:d,value:s,offset:r,inverted:o}),disabled:i}}),d.label&&Q.jsx("div",{...a("markLabel"),children:d.label})));return Q.jsx("div",{children:l})}MO.displayName="@mantine/core/SliderMarks";function NO({filled:t,children:e,offset:n,disabled:i,marksOffset:s,inverted:r,containerProps:o,...a}){const{getStyles:l}=Qp();return Q.jsx(Q.Fragment,{children:Q.jsx(ge,{...l("trackContainer"),mod:{disabled:i},...o,children:Q.jsxs(ge,{...l("track"),mod:{inverted:r,disabled:i},children:[Q.jsx(ge,{mod:{inverted:r,disabled:i},__vars:{"--slider-bar-width":`calc(${t}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),e,Q.jsx(MO,{...a,offset:s,disabled:i,inverted:r})]})})})}NO.displayName="@mantine/core/SliderTrack";function $Q({value:t,containerWidth:e,min:n,max:i,step:s,precision:r}){const a=(e?Math.min(Math.max(t,0),e)/e:t)*(i-n),l=(a!==0?Math.round(a/s)*s:0)+n,d=Math.max(l,n);return r!==void 0?Number(d.toFixed(r)):d}function Yg(t,e){return parseFloat(t.toFixed(e))}function jQ(t){if(!t)return 0;const e=t.toString().split(".");return e.length>1?e[1].length:0}var RO={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const GQ={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:t=>t},VQ=(t,{size:e,color:n,thumbSize:i,radius:s})=>({root:{"--slider-size":Gn(e,"slider-size"),"--slider-color":n?Ru(n,t):void 0,"--slider-radius":s===void 0?void 0:ol(s),"--slider-thumb-size":i!==void 0?Lt(i):"calc(var(--slider-size) * 2)"}}),Dm=_n((t,e)=>{const n=xe("Slider",GQ,t),{classNames:i,styles:s,value:r,onChange:o,onChangeEnd:a,size:l,min:d,max:h,step:c,precision:g,defaultValue:m,name:_,marks:p,label:v,labelTransitionProps:x,labelAlwaysOn:b,thumbLabel:E,showLabelOnHover:S,thumbChildren:A,disabled:T,unstyled:P,scale:k,inverted:I,className:R,style:M,vars:z,hiddenInputProps:j,...X}=n,O=Tn({name:"Slider",props:n,classes:RO,classNames:i,className:R,styles:s,style:M,vars:z,varsResolver:VQ,unstyled:P}),{dir:N}=uO(),[W,U]=$.useState(!1),[K,Z]=G1({value:typeof r=="number"?ch(r,d,h):r,defaultValue:typeof m=="number"?ch(m,d,h):m,finalValue:ch(0,d,h),onChange:o}),rt=$.useRef(K),vt=$.useRef(),St=$.useRef(),ut=IO({value:K,min:d,max:h}),_t=k(K),Rt=typeof v=="function"?v(_t):v,Gt=g??jQ(c),Yt=$.useCallback(({x:Xt})=>{if(!T){const se=$Q({value:Xt,min:d,max:h,step:c,precision:Gt});Z(se),rt.current=se}},[T,d,h,c,Gt,Z]),{ref:Et,active:Tt}=vJ(Yt,{onScrubEnd:()=>a==null?void 0:a(rt.current)},N),re=Xt=>{var se,de,q,ht,bt,xt;if(!T)switch(Xt.key){case"ArrowUp":{Xt.preventDefault(),(se=St.current)==null||se.focus();const ct=Yg(Math.min(Math.max(K+c,d),h),Gt);Z(ct),a==null||a(ct);break}case"ArrowRight":{Xt.preventDefault(),(de=St.current)==null||de.focus();const ct=Yg(Math.min(Math.max(N==="rtl"?K-c:K+c,d),h),Gt);Z(ct),a==null||a(ct);break}case"ArrowDown":{Xt.preventDefault(),(q=St.current)==null||q.focus();const ct=Yg(Math.min(Math.max(K-c,d),h),Gt);Z(ct),a==null||a(ct);break}case"ArrowLeft":{Xt.preventDefault(),(ht=St.current)==null||ht.focus();const ct=Yg(Math.min(Math.max(N==="rtl"?K+c:K-c,d),h),Gt);Z(ct),a==null||a(ct);break}case"Home":{Xt.preventDefault(),(bt=St.current)==null||bt.focus(),Z(d),a==null||a(d);break}case"End":{Xt.preventDefault(),(xt=St.current)==null||xt.focus(),Z(h),a==null||a(h);break}}};return Q.jsx(BQ,{value:{getStyles:O},children:Q.jsxs(PO,{...X,ref:JF(e,vt),onKeyDownCapture:re,onMouseDownCapture:()=>{var Xt;return(Xt=vt.current)==null?void 0:Xt.focus()},size:l,disabled:T,children:[Q.jsx(NO,{inverted:I,offset:0,filled:ut,marks:p,min:d,max:h,value:_t,disabled:T,containerProps:{ref:Et,onMouseEnter:S?()=>U(!0):void 0,onMouseLeave:S?()=>U(!1):void 0},children:Q.jsx(kO,{max:h,min:d,value:_t,position:ut,dragging:Tt,label:Rt,ref:St,labelTransitionProps:x,labelAlwaysOn:b,thumbLabel:E,showLabelOnHover:S,isHovered:W,disabled:T,children:A})}),Q.jsx("input",{type:"hidden",name:_,value:_t,...j})]})})});Dm.classes=RO;Dm.displayName="@mantine/core/Slider";const HQ={},zm=_n((t,e)=>{const{w:n,h:i,miw:s,mih:r,...o}=xe("Space",HQ,t);return Q.jsx(ge,{ref:e,...o,w:n,miw:s??n,h:i,mih:r??i})});zm.displayName="@mantine/core/Space";const FO=$.createContext(null),WQ=FO.Provider,XQ=()=>$.useContext(FO),ZQ={},rE=_n((t,e)=>{const{value:n,defaultValue:i,onChange:s,size:r,wrapperProps:o,children:a,readOnly:l,...d}=xe("SwitchGroup",ZQ,t),[h,c]=G1({value:n,defaultValue:i,finalValue:[],onChange:s}),g=m=>{const _=m.currentTarget.value;!l&&c(h.includes(_)?h.filter(p=>p!==_):[...h,_])};return Q.jsx(WQ,{value:{value:h,onChange:g,size:r},children:Q.jsx(Ws.Wrapper,{size:r,ref:e,...o,...d,labelElement:"div",__staticSelector:"SwitchGroup",children:Q.jsx(SQ,{role:"group",children:a})})})});rE.classes=Ws.Wrapper.classes;rE.displayName="@mantine/core/SwitchGroup";var OO={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const YQ={labelPosition:"right"},qQ=(t,{radius:e,color:n,size:i})=>({root:{"--switch-radius":e===void 0?void 0:ol(e),"--switch-height":Gn(i,"switch-height"),"--switch-width":Gn(i,"switch-width"),"--switch-thumb-size":Gn(i,"switch-thumb-size"),"--switch-label-font-size":Gn(i,"switch-label-font-size"),"--switch-track-label-padding":Gn(i,"switch-track-label-padding"),"--switch-color":n?Ru(n,t):void 0}}),gu=_n((t,e)=>{const n=xe("Switch",YQ,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,vars:l,color:d,label:h,offLabel:c,onLabel:g,id:m,size:_,radius:p,wrapperProps:v,thumbIcon:x,checked:b,defaultChecked:E,onChange:S,labelPosition:A,description:T,error:P,disabled:k,variant:I,rootRef:R,mod:M,...z}=n,j=XQ(),X=_||(j==null?void 0:j.size),O=Tn({name:"Switch",props:n,classes:OO,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:l,varsResolver:qQ}),{styleProps:N,rest:W}=Y1(z),U=j1(m),K=j?{checked:j.value.includes(W.value),onChange:j.onChange}:{},[Z,rt]=G1({value:K.checked??b,defaultValue:E,finalValue:!1});return Q.jsxs(CO,{...O("root"),__staticSelector:"Switch",__stylesApiProps:n,id:U,size:X,labelPosition:A,label:h,description:T,error:P,disabled:k,bodyElement:"label",labelElement:"span",classNames:i,styles:o,unstyled:a,"data-checked":K.checked||void 0,variant:I,ref:R,mod:M,...N,...v,children:[Q.jsx("input",{...W,disabled:k,checked:Z,onChange:vt=>{var St;j?(St=K.onChange)==null||St.call(K,vt):S==null||S(vt),rt(vt.currentTarget.checked)},id:U,ref:e,type:"checkbox",role:"switch",...O("input")}),Q.jsxs(ge,{"aria-hidden":"true",mod:{error:P,"label-position":A,"without-labels":!g&&!c},...O("track"),children:[Q.jsx(ge,{component:"span",mod:"reduce-motion",...O("thumb"),children:x}),Q.jsx("span",{...O("trackLabel"),children:Z?g:c})]})]})});gu.classes={...OO,...EQ};gu.displayName="@mantine/core/Switch";gu.Group=rE;const JQ=["h1","h2","h3","h4","h5","h6"];function KQ(t,e){const n=e!==void 0?e:`h${t}`;return JQ.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Lt(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var DO={root:"m_8a5d1357"};const QQ={order:1},ttt=(t,{order:e,size:n,lineClamp:i,textWrap:s})=>{const r=KQ(e,n);return{root:{"--title-fw":r.fontWeight,"--title-lh":r.lineHeight,"--title-fz":r.fontSize,"--title-line-clamp":typeof i=="number"?i.toString():void 0,"--title-text-wrap":s}}},oE=_n((t,e)=>{const n=xe("Title",QQ,t),{classNames:i,className:s,style:r,styles:o,unstyled:a,order:l,vars:d,size:h,variant:c,lineClamp:g,textWrap:m,mod:_,...p}=n,v=Tn({name:"Title",props:n,classes:DO,className:s,style:r,classNames:i,styles:o,unstyled:a,vars:d,varsResolver:ttt});return[1,2,3,4,5,6].includes(l)?Q.jsx(ge,{...v("root"),component:`h${l}`,variant:c,ref:e,mod:[{order:l,"data-line-clamp":typeof g=="number"},_],size:h,...p}):null});oE.classes=DO;oE.displayName="@mantine/core/Title";var xx={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Fz,function(n){var i="1.9.4";function s(u){var f,y,w,C;for(y=1,w=arguments.length;y<w;y++){C=arguments[y];for(f in C)u[f]=C[f]}return u}var r=Object.create||function(){function u(){}return function(f){return u.prototype=f,new u}}();function o(u,f){var y=Array.prototype.slice;if(u.bind)return u.bind.apply(u,y.call(arguments,1));var w=y.call(arguments,2);return function(){return u.apply(f,w.length?w.concat(y.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function d(u,f,y){var w,C,F,H;return H=function(){w=!1,C&&(F.apply(y,C),C=!1)},F=function(){w?C=arguments:(u.apply(y,arguments),setTimeout(H,f),w=!0)},F}function h(u,f,y){var w=f[1],C=f[0],F=w-C;return u===w&&y?u:((u-C)%F+F)%F+C}function c(){return!1}function g(u,f){if(f===!1)return u;var y=Math.pow(10,f===void 0?6:f);return Math.round(u*y)/y}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function _(u){return m(u).split(/\s+/)}function p(u,f){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?r(u.options):{});for(var y in f)u.options[y]=f[y];return u.options}function v(u,f,y){var w=[];for(var C in u)w.push(encodeURIComponent(y?C.toUpperCase():C)+"="+encodeURIComponent(u[C]));return(!f||f.indexOf("?")===-1?"?":"&")+w.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function b(u,f){return u.replace(x,function(y,w){var C=f[w];if(C===void 0)throw new Error("No value provided for variable "+y);return typeof C=="function"&&(C=C(f)),C})}var E=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function S(u,f){for(var y=0;y<u.length;y++)if(u[y]===f)return y;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var P=0;function k(u){var f=+new Date,y=Math.max(0,16-(f-P));return P=f+y,window.setTimeout(u,y)}var I=window.requestAnimationFrame||T("RequestAnimationFrame")||k,R=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function M(u,f,y){if(y&&I===k)u.call(f);else return I.call(window,o(u,f))}function z(u){u&&R.call(window,u)}var j={__proto__:null,extend:s,create:r,bind:o,get lastId(){return a},stamp:l,throttle:d,wrapNum:h,falseFn:c,formatNum:g,trim:m,splitWords:_,setOptions:p,getParamString:v,template:b,isArray:E,indexOf:S,emptyImageUrl:A,requestFn:I,cancelFn:R,requestAnimFrame:M,cancelAnimFrame:z};function X(){}X.extend=function(u){var f=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=f.__super__=this.prototype,w=r(y);w.constructor=f,f.prototype=w;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(f[C]=this[C]);return u.statics&&s(f,u.statics),u.includes&&(O(u.includes),s.apply(null,[w].concat(u.includes))),s(w,u),delete w.statics,delete w.includes,w.options&&(w.options=y.options?r(y.options):{},s(w.options,u.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,H=w._initHooks.length;F<H;F++)w._initHooks[F].call(this)}},f},X.include=function(u){var f=this.prototype.options;return s(this.prototype,u),u.options&&(this.prototype.options=f,this.mergeOptions(u.options)),this},X.mergeOptions=function(u){return s(this.prototype.options,u),this},X.addInitHook=function(u){var f=Array.prototype.slice.call(arguments,1),y=typeof u=="function"?u:function(){this[u].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function O(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=E(u)?u:[u];for(var f=0;f<u.length;f++)u[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var N={on:function(u,f,y){if(typeof u=="object")for(var w in u)this._on(w,u[w],f);else{u=_(u);for(var C=0,F=u.length;C<F;C++)this._on(u[C],f,y)}return this},off:function(u,f,y){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var w in u)this._off(w,u[w],f);else{u=_(u);for(var C=arguments.length===1,F=0,H=u.length;F<H;F++)C?this._off(u[F]):this._off(u[F],f,y)}return this},_on:function(u,f,y,w){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(u,f,y)===!1){y===this&&(y=void 0);var C={fn:f,ctx:y};w&&(C.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(C)}},_off:function(u,f,y){var w,C,F;if(this._events&&(w=this._events[u],!!w)){if(arguments.length===1){if(this._firingCount)for(C=0,F=w.length;C<F;C++)w[C].fn=c;delete this._events[u];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var H=this._listens(u,f,y);if(H!==!1){var at=w[H];this._firingCount&&(at.fn=c,this._events[u]=w=w.slice()),w.splice(H,1)}}},fire:function(u,f,y){if(!this.listens(u,y))return this;var w=s({},f,{type:u,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var C=this._events[u];if(C){this._firingCount=this._firingCount+1||1;for(var F=0,H=C.length;F<H;F++){var at=C[F],gt=at.fn;at.once&&this.off(u,gt,at.ctx),gt.call(at.ctx||this,w)}this._firingCount--}}return y&&this._propagateEvent(w),this},listens:function(u,f,y,w){typeof u!="string"&&console.warn('"string" type argument expected');var C=f;typeof f!="function"&&(w=!!f,C=void 0,y=void 0);var F=this._events&&this._events[u];if(F&&F.length&&this._listens(u,C,y)!==!1)return!0;if(w){for(var H in this._eventParents)if(this._eventParents[H].listens(u,f,y,w))return!0}return!1},_listens:function(u,f,y){if(!this._events)return!1;var w=this._events[u]||[];if(!f)return!!w.length;y===this&&(y=void 0);for(var C=0,F=w.length;C<F;C++)if(w[C].fn===f&&w[C].ctx===y)return C;return!1},once:function(u,f,y){if(typeof u=="object")for(var w in u)this._on(w,u[w],f,!0);else{u=_(u);for(var C=0,F=u.length;C<F;C++)this._on(u[C],f,y,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var f in this._eventParents)this._eventParents[f].fire(u.type,s({layer:u.target,propagatedFrom:u.target},u),!0)}};N.addEventListener=N.on,N.removeEventListener=N.clearAllEventListeners=N.off,N.addOneTimeEventListener=N.once,N.fireEvent=N.fire,N.hasEventListeners=N.listens;var W=X.extend(N);function U(u,f,y){this.x=y?Math.round(u):u,this.y=y?Math.round(f):f}var K=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(u){return this.clone()._add(Z(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(Z(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new U(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new U(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(u){u=Z(u);var f=u.x-this.x,y=u.y-this.y;return Math.sqrt(f*f+y*y)},equals:function(u){return u=Z(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=Z(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Z(u,f,y){return u instanceof U?u:E(u)?new U(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new U(u.x,u.y):new U(u,f,y)}function rt(u,f){if(u)for(var y=f?[u,f]:u,w=0,C=y.length;w<C;w++)this.extend(y[w])}rt.prototype={extend:function(u){var f,y;if(!u)return this;if(u instanceof U||typeof u[0]=="number"||"x"in u)f=y=Z(u);else if(u=vt(u),f=u.min,y=u.max,!f||!y)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=y.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(u){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var f,y;return typeof u[0]=="number"||u instanceof U?u=Z(u):u=vt(u),u instanceof rt?(f=u.min,y=u.max):f=y=u,f.x>=this.min.x&&y.x<=this.max.x&&f.y>=this.min.y&&y.y<=this.max.y},intersects:function(u){u=vt(u);var f=this.min,y=this.max,w=u.min,C=u.max,F=C.x>=f.x&&w.x<=y.x,H=C.y>=f.y&&w.y<=y.y;return F&&H},overlaps:function(u){u=vt(u);var f=this.min,y=this.max,w=u.min,C=u.max,F=C.x>f.x&&w.x<y.x,H=C.y>f.y&&w.y<y.y;return F&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var f=this.min,y=this.max,w=Math.abs(f.x-y.x)*u,C=Math.abs(f.y-y.y)*u;return vt(Z(f.x-w,f.y-C),Z(y.x+w,y.y+C))},equals:function(u){return u?(u=vt(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function vt(u,f){return!u||u instanceof rt?u:new rt(u,f)}function St(u,f){if(u)for(var y=f?[u,f]:u,w=0,C=y.length;w<C;w++)this.extend(y[w])}St.prototype={extend:function(u){var f=this._southWest,y=this._northEast,w,C;if(u instanceof _t)w=u,C=u;else if(u instanceof St){if(w=u._southWest,C=u._northEast,!w||!C)return this}else return u?this.extend(Rt(u)||ut(u)):this;return!f&&!y?(this._southWest=new _t(w.lat,w.lng),this._northEast=new _t(C.lat,C.lng)):(f.lat=Math.min(w.lat,f.lat),f.lng=Math.min(w.lng,f.lng),y.lat=Math.max(C.lat,y.lat),y.lng=Math.max(C.lng,y.lng)),this},pad:function(u){var f=this._southWest,y=this._northEast,w=Math.abs(f.lat-y.lat)*u,C=Math.abs(f.lng-y.lng)*u;return new St(new _t(f.lat-w,f.lng-C),new _t(y.lat+w,y.lng+C))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof _t||"lat"in u?u=Rt(u):u=ut(u);var f=this._southWest,y=this._northEast,w,C;return u instanceof St?(w=u.getSouthWest(),C=u.getNorthEast()):w=C=u,w.lat>=f.lat&&C.lat<=y.lat&&w.lng>=f.lng&&C.lng<=y.lng},intersects:function(u){u=ut(u);var f=this._southWest,y=this._northEast,w=u.getSouthWest(),C=u.getNorthEast(),F=C.lat>=f.lat&&w.lat<=y.lat,H=C.lng>=f.lng&&w.lng<=y.lng;return F&&H},overlaps:function(u){u=ut(u);var f=this._southWest,y=this._northEast,w=u.getSouthWest(),C=u.getNorthEast(),F=C.lat>f.lat&&w.lat<y.lat,H=C.lng>f.lng&&w.lng<y.lng;return F&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,f){return u?(u=ut(u),this._southWest.equals(u.getSouthWest(),f)&&this._northEast.equals(u.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(u,f){return u instanceof St?u:new St(u,f)}function _t(u,f,y){if(isNaN(u)||isNaN(f))throw new Error("Invalid LatLng object: ("+u+", "+f+")");this.lat=+u,this.lng=+f,y!==void 0&&(this.alt=+y)}_t.prototype={equals:function(u,f){if(!u)return!1;u=Rt(u);var y=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return y<=(f===void 0?1e-9:f)},toString:function(u){return"LatLng("+g(this.lat,u)+", "+g(this.lng,u)+")"},distanceTo:function(u){return Yt.distance(this,Rt(u))},wrap:function(){return Yt.wrapLatLng(this)},toBounds:function(u){var f=180*u/40075017,y=f/Math.cos(Math.PI/180*this.lat);return ut([this.lat-f,this.lng-y],[this.lat+f,this.lng+y])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function Rt(u,f,y){return u instanceof _t?u:E(u)&&typeof u[0]!="object"?u.length===3?new _t(u[0],u[1],u[2]):u.length===2?new _t(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new _t(u.lat,"lng"in u?u.lng:u.lon,u.alt):f===void 0?null:new _t(u,f,y)}var Gt={latLngToPoint:function(u,f){var y=this.projection.project(u),w=this.scale(f);return this.transformation._transform(y,w)},pointToLatLng:function(u,f){var y=this.scale(f),w=this.transformation.untransform(u,y);return this.projection.unproject(w)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var f=this.projection.bounds,y=this.scale(u),w=this.transformation.transform(f.min,y),C=this.transformation.transform(f.max,y);return new rt(w,C)},infinite:!1,wrapLatLng:function(u){var f=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,y=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,w=u.alt;return new _t(y,f,w)},wrapLatLngBounds:function(u){var f=u.getCenter(),y=this.wrapLatLng(f),w=f.lat-y.lat,C=f.lng-y.lng;if(w===0&&C===0)return u;var F=u.getSouthWest(),H=u.getNorthEast(),at=new _t(F.lat-w,F.lng-C),gt=new _t(H.lat-w,H.lng-C);return new St(at,gt)}},Yt=s({},Gt,{wrapLng:[-180,180],R:6371e3,distance:function(u,f){var y=Math.PI/180,w=u.lat*y,C=f.lat*y,F=Math.sin((f.lat-u.lat)*y/2),H=Math.sin((f.lng-u.lng)*y/2),at=F*F+Math.cos(w)*Math.cos(C)*H*H,gt=2*Math.atan2(Math.sqrt(at),Math.sqrt(1-at));return this.R*gt}}),Et=6378137,Tt={R:Et,MAX_LATITUDE:85.0511287798,project:function(u){var f=Math.PI/180,y=this.MAX_LATITUDE,w=Math.max(Math.min(y,u.lat),-y),C=Math.sin(w*f);return new U(this.R*u.lng*f,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(u){var f=180/Math.PI;return new _t((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*f,u.x*f/this.R)},bounds:function(){var u=Et*Math.PI;return new rt([-u,-u],[u,u])}()};function re(u,f,y,w){if(E(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=f,this._c=y,this._d=w}re.prototype={transform:function(u,f){return this._transform(u.clone(),f)},_transform:function(u,f){return f=f||1,u.x=f*(this._a*u.x+this._b),u.y=f*(this._c*u.y+this._d),u},untransform:function(u,f){return f=f||1,new U((u.x/f-this._b)/this._a,(u.y/f-this._d)/this._c)}};function Xt(u,f,y,w){return new re(u,f,y,w)}var se=s({},Yt,{code:"EPSG:3857",projection:Tt,transformation:function(){var u=.5/(Math.PI*Tt.R);return Xt(u,.5,-u,.5)}()}),de=s({},se,{code:"EPSG:900913"});function q(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ht(u,f){var y="",w,C,F,H,at,gt;for(w=0,F=u.length;w<F;w++){for(at=u[w],C=0,H=at.length;C<H;C++)gt=at[C],y+=(C?"L":"M")+gt.x+" "+gt.y;y+=f?Vt.svg?"z":"x":""}return y||"M0 0"}var bt=document.documentElement.style,xt="ActiveXObject"in window,ct=xt&&!document.addEventListener,yt="msLaunchUri"in navigator&&!("documentMode"in document),Dt=si("webkit"),Ft=si("android"),Bt=si("android 2")||si("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ne=Ft&&si("Google")&&oe<537&&!("AudioNode"in window),Fe=!!window.opera,Ve=!yt&&si("chrome"),Me=si("gecko")&&!Dt&&!Fe&&!xt,sn=!Ve&&si("safari"),Ke=si("phantom"),le="OTransition"in bt,Pe=navigator.platform.indexOf("Win")===0,De=xt&&"transition"in bt,ke="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Bt,_e="MozPerspective"in bt,hn=!window.L_DISABLE_3D&&(De||ke||_e)&&!le&&!Ke,Ne=typeof orientation<"u"||si("mobile"),Mn=Ne&&Dt,Mi=Ne&&ke,ye=!window.PointerEvent&&window.MSPointerEvent,we=!!(window.PointerEvent||ye),rn="ontouchstart"in window||!!window.TouchEvent,Nn=!window.L_NO_TOUCH&&(rn||we),yn=Ne&&Fe,Wn=Ne&&Me,Ni=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vn=function(){var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",c,f),window.removeEventListener("testPassiveEventSupport",c,f)}catch{}return u}(),On=function(){return!!document.createElement("canvas").getContext}(),Ri=!!(document.createElementNS&&q("svg").createSVGRect),Xs=!!Ri&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Oe=!Ri&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var f=u.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),Cn=navigator.platform.indexOf("Mac")===0,Ln=navigator.platform.indexOf("Linux")===0;function si(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Vt={ie:xt,ielt9:ct,edge:yt,webkit:Dt,android:Ft,android23:Bt,androidStock:ne,opera:Fe,chrome:Ve,gecko:Me,safari:sn,phantom:Ke,opera12:le,win:Pe,ie3d:De,webkit3d:ke,gecko3d:_e,any3d:hn,mobile:Ne,mobileWebkit:Mn,mobileWebkit3d:Mi,msPointer:ye,pointer:we,touch:Nn,touchNative:rn,mobileOpera:yn,mobileGecko:Wn,retina:Ni,passiveEvents:vn,canvas:On,svg:Ri,vml:Oe,inlineSvg:Xs,mac:Cn,linux:Ln},xr=Vt.msPointer?"MSPointerDown":"pointerdown",ro=Vt.msPointer?"MSPointerMove":"pointermove",xn=Vt.msPointer?"MSPointerUp":"pointerup",Zs=Vt.msPointer?"MSPointerCancel":"pointercancel",Cs={touchstart:xr,touchmove:ro,touchend:xn,touchcancel:Zs},br={touchstart:V,touchmove:B,touchend:B,touchcancel:B},Ie={},Er=!1;function oo(u,f,y){return f==="touchstart"&&G(),br[f]?(y=br[f].bind(this,y),u.addEventListener(Cs[f],y,!1),y):(console.warn("wrong event specified:",f),c)}function ao(u,f,y){if(!Cs[f]){console.warn("wrong event specified:",f);return}u.removeEventListener(Cs[f],y,!1)}function ua(u){Ie[u.pointerId]=u}function os(u){Ie[u.pointerId]&&(Ie[u.pointerId]=u)}function D(u){delete Ie[u.pointerId]}function G(){Er||(document.addEventListener(xr,ua,!0),document.addEventListener(ro,os,!0),document.addEventListener(xn,D,!0),document.addEventListener(Zs,D,!0),Er=!0)}function B(u,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var y in Ie)f.touches.push(Ie[y]);f.changedTouches=[f],u(f)}}function V(u,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Zn(f),B(u,f)}function J(u){var f={},y,w;for(w in u)y=u[w],f[w]=y&&y.bind?y.bind(u):y;return u=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var nt=200;function Y(u,f){u.addEventListener("dblclick",f);var y=0,w;function C(F){if(F.detail!==1){w=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var H=CE(F);if(!(H.some(function(gt){return gt instanceof HTMLLabelElement&&gt.attributes.for})&&!H.some(function(gt){return gt instanceof HTMLInputElement||gt instanceof HTMLSelectElement}))){var at=Date.now();at-y<=nt?(w++,w===2&&f(J(F))):w=1,y=at}}}return u.addEventListener("click",C),{dblclick:f,simDblclick:C}}function ot(u,f){u.removeEventListener("dblclick",f.dblclick),u.removeEventListener("click",f.simDblclick)}var it=Kt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),et=Kt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tt=et==="webkitTransition"||et==="OTransition"?et+"End":"transitionend";function lt(u){return typeof u=="string"?document.getElementById(u):u}function ft(u,f){var y=u.style[f]||u.currentStyle&&u.currentStyle[f];if((!y||y==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(u,null);y=w?w[f]:null}return y==="auto"?null:y}function dt(u,f,y){var w=document.createElement(u);return w.className=f||"",y&&y.appendChild(w),w}function st(u){var f=u.parentNode;f&&f.removeChild(u)}function mt(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Ct(u){var f=u.parentNode;f&&f.lastChild!==u&&f.appendChild(u)}function It(u){var f=u.parentNode;f&&f.firstChild!==u&&f.insertBefore(u,f.firstChild)}function Nt(u,f){if(u.classList!==void 0)return u.classList.contains(f);var y=Ot(u);return y.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(y)}function pt(u,f){if(u.classList!==void 0)for(var y=_(f),w=0,C=y.length;w<C;w++)u.classList.add(y[w]);else if(!Nt(u,f)){var F=Ot(u);kt(u,(F?F+" ":"")+f)}}function At(u,f){u.classList!==void 0?u.classList.remove(f):kt(u,m((" "+Ot(u)+" ").replace(" "+f+" "," ")))}function kt(u,f){u.className.baseVal===void 0?u.className=f:u.className.baseVal=f}function Ot(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function $t(u,f){"opacity"in u.style?u.style.opacity=f:"filter"in u.style&&Zt(u,f)}function Zt(u,f){var y=!1,w="DXImageTransform.Microsoft.Alpha";try{y=u.filters.item(w)}catch{if(f===1)return}f=Math.round(f*100),y?(y.Enabled=f!==100,y.Opacity=f):u.style.filter+=" progid:"+w+"(opacity="+f+")"}function Kt(u){for(var f=document.documentElement.style,y=0;y<u.length;y++)if(u[y]in f)return u[y];return!1}function Qt(u,f,y){var w=f||new U(0,0);u.style[it]=(Vt.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(y?" scale("+y+")":"")}function qt(u,f){u._leaflet_pos=f,Vt.any3d?Qt(u,f):(u.style.left=f.x+"px",u.style.top=f.y+"px")}function Ae(u){return u._leaflet_pos||new U(0,0)}var be,on,Dn;if("onselectstart"in document)be=function(){Jt(window,"selectstart",Zn)},on=function(){ie(window,"selectstart",Zn)};else{var zn=Kt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);be=function(){if(zn){var u=document.documentElement.style;Dn=u[zn],u[zn]="none"}},on=function(){zn&&(document.documentElement.style[zn]=Dn,Dn=void 0)}}function bn(){Jt(window,"dragstart",Zn)}function cn(){ie(window,"dragstart",Zn)}var Xn,ze;function Bn(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Un(),Xn=u,ze=u.style.outlineStyle,u.style.outlineStyle="none",Jt(window,"keydown",Un))}function Un(){Xn&&(Xn.style.outlineStyle=ze,Xn=void 0,ze=void 0,ie(window,"keydown",Un))}function hl(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Pn(u){var f=u.getBoundingClientRect();return{x:f.width/u.offsetWidth||1,y:f.height/u.offsetHeight||1,boundingClientRect:f}}var as={__proto__:null,TRANSFORM:it,TRANSITION:et,TRANSITION_END:tt,get:lt,getStyle:ft,create:dt,remove:st,empty:mt,toFront:Ct,toBack:It,hasClass:Nt,addClass:pt,removeClass:At,setClass:kt,getClass:Ot,setOpacity:$t,testProp:Kt,setTransform:Qt,setPosition:qt,getPosition:Ae,get disableTextSelection(){return be},get enableTextSelection(){return on},disableImageDrag:bn,enableImageDrag:cn,preventOutline:Bn,restoreOutline:Un,getSizedParentNode:hl,getScale:Pn};function Jt(u,f,y,w){if(f&&typeof f=="object")for(var C in f)Ls(u,C,f[C],y);else{f=_(f);for(var F=0,H=f.length;F<H;F++)Ls(u,f[F],y,w)}return this}var gn="_leaflet_events";function ie(u,f,y,w){if(arguments.length===1)an(u),delete u[gn];else if(f&&typeof f=="object")for(var C in f)lo(u,C,f[C],y);else if(f=_(f),arguments.length===2)an(u,function(at){return S(f,at)!==-1});else for(var F=0,H=f.length;F<H;F++)lo(u,f[F],y,w);return this}function an(u,f){for(var y in u[gn]){var w=y.split(/\d/)[0];(!f||f(w))&&lo(u,w,null,null,y)}}var Fi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ls(u,f,y,w){var C=f+l(y)+(w?"_"+l(w):"");if(u[gn]&&u[gn][C])return this;var F=function(at){return y.call(w||u,at||window.event)},H=F;!Vt.touchNative&&Vt.pointer&&f.indexOf("touch")===0?F=oo(u,f,F):Vt.touch&&f==="dblclick"?F=Y(u,F):"addEventListener"in u?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?u.addEventListener(Fi[f]||f,F,Vt.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(F=function(at){at=at||window.event,o_(u,at)&&H(at)},u.addEventListener(Fi[f],F,!1)):u.addEventListener(f,H,!1):u.attachEvent("on"+f,F),u[gn]=u[gn]||{},u[gn][C]=F}function lo(u,f,y,w,C){C=C||f+l(y)+(w?"_"+l(w):"");var F=u[gn]&&u[gn][C];if(!F)return this;!Vt.touchNative&&Vt.pointer&&f.indexOf("touch")===0?ao(u,f,F):Vt.touch&&f==="dblclick"?ot(u,F):"removeEventListener"in u?u.removeEventListener(Fi[f]||f,F,!1):u.detachEvent("on"+f,F),u[gn][C]=null}function Ys(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function cl(u){return Ls(u,"wheel",Ys),this}function uo(u){return Jt(u,"mousedown touchstart dblclick contextmenu",Ys),u._leaflet_disable_click=!0,this}function Zn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function da(u){return Zn(u),Ys(u),this}function CE(u){if(u.composedPath)return u.composedPath();for(var f=[],y=u.target;y;)f.push(y),y=y.parentNode;return f}function LE(u,f){if(!f)return new U(u.clientX,u.clientY);var y=Pn(f),w=y.boundingClientRect;return new U((u.clientX-w.left)/y.x-f.clientLeft,(u.clientY-w.top)/y.y-f.clientTop)}var UD=Vt.linux&&Vt.chrome?window.devicePixelRatio:Vt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function PE(u){return Vt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/UD:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function o_(u,f){var y=f.relatedTarget;if(!y)return!0;try{for(;y&&y!==u;)y=y.parentNode}catch{return!1}return y!==u}var $D={__proto__:null,on:Jt,off:ie,stopPropagation:Ys,disableScrollPropagation:cl,disableClickPropagation:uo,preventDefault:Zn,stop:da,getPropagationPath:CE,getMousePosition:LE,getWheelDelta:PE,isExternalTarget:o_,addListener:Jt,removeListener:ie},kE=W.extend({run:function(u,f,y,w){this.stop(),this._el=u,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=Ae(u),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(u){var f=+new Date-this._startTime,y=this._duration*1e3;f<y?this._runFrame(this._easeOut(f/y),u):(this._runFrame(1),this._complete())},_runFrame:function(u,f){var y=this._startPos.add(this._offset.multiplyBy(u));f&&y._round(),qt(this._el,y),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ve=W.extend({options:{crs:se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,f){f=p(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(Rt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=et&&Vt.any3d&&!Vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Jt(this._proxy,tt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,f,y){if(f=f===void 0?this._zoom:this._limitZoom(f),u=this._limitCenter(Rt(u),f,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=s({animate:y.animate},y.zoom),y.pan=s({animate:y.animate,duration:y.duration},y.pan));var w=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,f,y.zoom):this._tryAnimatedPan(u,y.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(u,f,y.pan&&y.pan.noMoveStart),this},setZoom:function(u,f){return this._loaded?this.setView(this.getCenter(),u,{zoom:f}):(this._zoom=u,this)},zoomIn:function(u,f){return u=u||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,f)},zoomOut:function(u,f){return u=u||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,f)},setZoomAround:function(u,f,y){var w=this.getZoomScale(f),C=this.getSize().divideBy(2),F=u instanceof U?u:this.latLngToContainerPoint(u),H=F.subtract(C).multiplyBy(1-1/w),at=this.containerPointToLatLng(C.add(H));return this.setView(at,f,{zoom:y})},_getBoundsCenterZoom:function(u,f){f=f||{},u=u.getBounds?u.getBounds():ut(u);var y=Z(f.paddingTopLeft||f.padding||[0,0]),w=Z(f.paddingBottomRight||f.padding||[0,0]),C=this.getBoundsZoom(u,!1,y.add(w));if(C=typeof f.maxZoom=="number"?Math.min(f.maxZoom,C):C,C===1/0)return{center:u.getCenter(),zoom:C};var F=w.subtract(y).divideBy(2),H=this.project(u.getSouthWest(),C),at=this.project(u.getNorthEast(),C),gt=this.unproject(H.add(at).divideBy(2).add(F),C);return{center:gt,zoom:C}},fitBounds:function(u,f){if(u=ut(u),!u.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(u,f);return this.setView(y.center,y.zoom,f)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,f){return this.setView(u,this._zoom,{pan:f})},panBy:function(u,f){if(u=Z(u).round(),f=f||{},!u.x&&!u.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kE,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){pt(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,y,f.duration||.25,f.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,f,y){if(y=y||{},y.animate===!1||!Vt.any3d)return this.setView(u,f,y);this._stop();var w=this.project(this.getCenter()),C=this.project(u),F=this.getSize(),H=this._zoom;u=Rt(u),f=f===void 0?H:f;var at=Math.max(F.x,F.y),gt=at*this.getZoomScale(H,f),Pt=C.distanceTo(w)||1,Ut=1.42,te=Ut*Ut;function fe(kn){var Mc=kn?-1:1,Pz=kn?gt:at,kz=gt*gt-at*at+Mc*te*te*Pt*Pt,Iz=2*Pz*te*Pt,__=kz/Iz,dS=Math.sqrt(__*__+1)-__,Mz=dS<1e-9?-18:Math.log(dS);return Mz}function _i(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function $n(kn){return(Math.exp(kn)+Math.exp(-kn))/2}function us(kn){return _i(kn)/$n(kn)}var Oi=fe(0);function yl(kn){return at*($n(Oi)/$n(Oi+Ut*kn))}function Az(kn){return at*($n(Oi)*us(Oi+Ut*kn)-_i(Oi))/te}function Tz(kn){return 1-Math.pow(1-kn,1.5)}var Cz=Date.now(),lS=(fe(1)-Oi)/Ut,Lz=y.duration?1e3*y.duration:1e3*lS*.8;function uS(){var kn=(Date.now()-Cz)/Lz,Mc=Tz(kn)*lS;kn<=1?(this._flyToFrame=M(uS,this),this._move(this.unproject(w.add(C.subtract(w).multiplyBy(Az(Mc)/Pt)),H),this.getScaleZoom(at/yl(Mc),H),{flyTo:!0})):this._move(u,f)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),uS.call(this),this},flyToBounds:function(u,f){var y=this._getBoundsCenterZoom(u,f);return this.flyTo(y.center,y.zoom,f)},setMaxBounds:function(u){return u=ut(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var f=this.options.minZoom;return this.options.minZoom=u,this._loaded&&f!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var f=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&f!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,f){this._enforcingBounds=!0;var y=this.getCenter(),w=this._limitCenter(y,this._zoom,ut(u));return y.equals(w)||this.panTo(w,f),this._enforcingBounds=!1,this},panInside:function(u,f){f=f||{};var y=Z(f.paddingTopLeft||f.padding||[0,0]),w=Z(f.paddingBottomRight||f.padding||[0,0]),C=this.project(this.getCenter()),F=this.project(u),H=this.getPixelBounds(),at=vt([H.min.add(y),H.max.subtract(w)]),gt=at.getSize();if(!at.contains(F)){this._enforcingBounds=!0;var Pt=F.subtract(at.getCenter()),Ut=at.extend(F).getSize().subtract(gt);C.x+=Pt.x<0?-Ut.x:Ut.x,C.y+=Pt.y<0?-Ut.y:Ut.y,this.panTo(this.unproject(C),f),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=s({animate:!1,pan:!0},u===!0?{animate:!0}:u);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),w=f.divideBy(2).round(),C=y.divideBy(2).round(),F=w.subtract(C);return!F.x&&!F.y?this:(u.animate&&u.pan?this.panBy(F):(u.pan&&this._rawPanBy(F),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=s({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=o(this._handleGeolocationResponse,this),y=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,y,u):navigator.geolocation.getCurrentPosition(f,y,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var f=u.code,y=u.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var f=u.coords.latitude,y=u.coords.longitude,w=new _t(f,y),C=w.toBounds(u.coords.accuracy*2),F=this._locateOptions;if(F.setView){var H=this.getBoundsZoom(C);this.setView(w,F.maxZoom?Math.min(H,F.maxZoom):H)}var at={latlng:w,bounds:C,timestamp:u.timestamp};for(var gt in u.coords)typeof u.coords[gt]=="number"&&(at[gt]=u.coords[gt]);this.fire("locationfound",at)}},addHandler:function(u,f){if(!f)return this;var y=this[u]=new f(this);return this._handlers.push(y),this.options[u]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)st(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,f){var y="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),w=dt("div",y,f||this._mapPane);return u&&(this._panes[u]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),f=this.unproject(u.getBottomLeft()),y=this.unproject(u.getTopRight());return new St(f,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,f,y){u=ut(u),y=Z(y||[0,0]);var w=this.getZoom()||0,C=this.getMinZoom(),F=this.getMaxZoom(),H=u.getNorthWest(),at=u.getSouthEast(),gt=this.getSize().subtract(y),Pt=vt(this.project(at,w),this.project(H,w)).getSize(),Ut=Vt.any3d?this.options.zoomSnap:1,te=gt.x/Pt.x,fe=gt.y/Pt.y,_i=f?Math.max(te,fe):Math.min(te,fe);return w=this.getScaleZoom(_i,w),Ut&&(w=Math.round(w/(Ut/100))*(Ut/100),w=f?Math.ceil(w/Ut)*Ut:Math.floor(w/Ut)*Ut),Math.max(C,Math.min(F,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,f){var y=this._getTopLeftPoint(u,f);return new rt(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,f){var y=this.options.crs;return f=f===void 0?this._zoom:f,y.scale(u)/y.scale(f)},getScaleZoom:function(u,f){var y=this.options.crs;f=f===void 0?this._zoom:f;var w=y.zoom(u*y.scale(f));return isNaN(w)?1/0:w},project:function(u,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(Rt(u),f)},unproject:function(u,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(Z(u),f)},layerPointToLatLng:function(u){var f=Z(u).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(u){var f=this.project(Rt(u))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(Rt(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ut(u))},distance:function(u,f){return this.options.crs.distance(Rt(u),Rt(f))},containerPointToLayerPoint:function(u){return Z(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return Z(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var f=this.containerPointToLayerPoint(Z(u));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Rt(u)))},mouseEventToContainerPoint:function(u){return LE(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var f=this._container=lt(u);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Jt(f,"scroll",this._onScroll,this),this._containerId=l(f)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Vt.any3d,pt(u,"leaflet-container"+(Vt.touch?" leaflet-touch":"")+(Vt.retina?" leaflet-retina":"")+(Vt.ielt9?" leaflet-oldie":"")+(Vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=ft(u,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(u.markerPane,"leaflet-zoom-hide"),pt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,f,y){qt(this._mapPane,new U(0,0));var w=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var C=this._zoom!==f;this._moveStart(C,y)._move(u,f)._moveEnd(C),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(u,f){return u&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(u,f,y,w){f===void 0&&(f=this._zoom);var C=this._zoom!==f;return this._zoom=f,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),w?y&&y.pinch&&this.fire("zoom",y):((C||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){qt(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var f=u?ie:Jt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),Vt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,f){for(var y=[],w,C=f==="mouseout"||f==="mouseover",F=u.target||u.srcElement,H=!1;F;){if(w=this._targets[l(F)],w&&(f==="click"||f==="preclick")&&this._draggableMoved(w)){H=!0;break}if(w&&w.listens(f,!0)&&(C&&!o_(F,u)||(y.push(w),C))||F===this._container)break;F=F.parentNode}return!y.length&&!H&&!C&&this.listens(f,!0)&&(y=[this]),y},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var f=u.target||u.srcElement;if(!(!this._loaded||f._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(f))){var y=u.type;y==="mousedown"&&Bn(f),this._fireDOMEvent(u,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,f,y){if(u.type==="click"){var w=s({},u);w.type="preclick",this._fireDOMEvent(w,w.type,y)}var C=this._findEventTargets(u,f);if(y){for(var F=[],H=0;H<y.length;H++)y[H].listens(f,!0)&&F.push(y[H]);C=F.concat(C)}if(C.length){f==="contextmenu"&&Zn(u);var at=C[0],gt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Pt=at.getLatLng&&(!at._radius||at._radius<=10);gt.containerPoint=Pt?this.latLngToContainerPoint(at.getLatLng()):this.mouseEventToContainerPoint(u),gt.layerPoint=this.containerPointToLayerPoint(gt.containerPoint),gt.latlng=Pt?at.getLatLng():this.layerPointToLatLng(gt.layerPoint)}for(H=0;H<C.length;H++)if(C[H].fire(f,gt,!0),gt.originalEvent._stopped||C[H].options.bubblingMouseEvents===!1&&S(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,f=this._handlers.length;u<f;u++)this._handlers[u].disable()},whenReady:function(u,f){return this._loaded?u.call(f||this,{target:this}):this.on("load",u,f),this},_getMapPanePos:function(){return Ae(this._mapPane)||new U(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,f){var y=u&&f!==void 0?this._getNewPixelOrigin(u,f):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,f){var y=this.getSize()._divideBy(2);return this.project(u,f)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,f,y){var w=this._getNewPixelOrigin(y,f);return this.project(u,f)._subtract(w)},_latLngBoundsToNewLayerBounds:function(u,f,y){var w=this._getNewPixelOrigin(y,f);return vt([this.project(u.getSouthWest(),f)._subtract(w),this.project(u.getNorthWest(),f)._subtract(w),this.project(u.getSouthEast(),f)._subtract(w),this.project(u.getNorthEast(),f)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,f,y){if(!y)return u;var w=this.project(u,f),C=this.getSize().divideBy(2),F=new rt(w.subtract(C),w.add(C)),H=this._getBoundsOffset(F,y,f);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?u:this.unproject(w.add(H),f)},_limitOffset:function(u,f){if(!f)return u;var y=this.getPixelBounds(),w=new rt(y.min.add(u),y.max.add(u));return u.add(this._getBoundsOffset(w,f))},_getBoundsOffset:function(u,f,y){var w=vt(this.project(f.getNorthEast(),y),this.project(f.getSouthWest(),y)),C=w.min.subtract(u.min),F=w.max.subtract(u.max),H=this._rebound(C.x,-F.x),at=this._rebound(C.y,-F.y);return new U(H,at)},_rebound:function(u,f){return u+f>0?Math.round(u-f)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(f))},_limitZoom:function(u){var f=this.getMinZoom(),y=this.getMaxZoom(),w=Vt.any3d?this.options.zoomSnap:1;return w&&(u=Math.round(u/w)*w),Math.max(f,Math.min(y,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,f){var y=this._getCenterOffset(u)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,f),!0)},_createAnimProxy:function(){var u=this._proxy=dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(f){var y=it,w=this._proxy.style[y];Qt(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),w===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),f=this.getZoom();Qt(this._proxy,this.project(u,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,f,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(f),C=this._getCenterOffset(u)._divideBy(1-1/w);return y.animate!==!0&&!this.getSize().contains(C)?!1:(M(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(u,f,!0)},this),!0)},_animateZoom:function(u,f,y,w){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=f,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:f,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jD(u,f){return new ve(u,f)}var Ps=X.extend({options:{position:"topright"},initialize:function(u){p(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var f=this._map;return f&&f.removeControl(this),this.options.position=u,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var f=this._container=this.onAdd(u),y=this.getPosition(),w=u._controlCorners[y];return pt(f,"leaflet-control"),y.indexOf("bottom")!==-1?w.insertBefore(f,w.firstChild):w.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),Wu=function(u){return new Ps(u)};ve.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},f="leaflet-",y=this._controlContainer=dt("div",f+"control-container",this._container);function w(C,F){var H=f+C+" "+f+F;u[C+F]=dt("div",H,y)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)st(this._controlCorners[u]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var IE=Ps.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,f,y,w){return y<w?-1:w<y?1:0}},initialize:function(u,f,y){p(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in u)this._addLayer(u[w],w);for(w in f)this._addLayer(f[w],w,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Ps.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,f){return this._addLayer(u,f),this._map?this._update():this},addOverlay:function(u,f){return this._addLayer(u,f,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var f=this._getLayer(l(u));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",f=this._container=dt("div",u),y=this.options.collapsed;f.setAttribute("aria-haspopup",!0),uo(f),cl(f);var w=this._section=dt("section",u+"-list");y&&(this._map.on("click",this.collapse,this),Jt(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=dt("a",u+"-toggle",f);C.href="#",C.title="Layers",C.setAttribute("role","button"),Jt(C,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Zn(F),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=dt("div",u+"-base",w),this._separator=dt("div",u+"-separator",w),this._overlaysList=dt("div",u+"-overlays",w),f.appendChild(w)},_getLayer:function(u){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&l(this._layers[f].layer)===u)return this._layers[f]},_addLayer:function(u,f,y){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:f,overlay:y}),this.options.sortLayers&&this._layers.sort(o(function(w,C){return this.options.sortFunction(w.layer,C.layer,w.name,C.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var u,f,y,w,C=0;for(y=0;y<this._layers.length;y++)w=this._layers[y],this._addItem(w),f=f||w.overlay,u=u||!w.overlay,C+=w.overlay?0:1;return this.options.hideSingleBase&&(u=u&&C>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=f&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var f=this._getLayer(l(u.target)),y=f.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;y&&this._map.fire(y,f)},_createRadioElement:function(u,f){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(f?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=y,w.firstChild},_addItem:function(u){var f=document.createElement("label"),y=this._map.hasLayer(u.layer),w;u.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=y):w=this._createRadioElement("leaflet-base-layers_"+l(this),y),this._layerControlInputs.push(w),w.layerId=l(u.layer),Jt(w,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+u.name;var F=document.createElement("span");f.appendChild(F),F.appendChild(w),F.appendChild(C);var H=u.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,f,y,w=[],C=[];this._handlingClick=!0;for(var F=u.length-1;F>=0;F--)f=u[F],y=this._getLayer(f.layerId).layer,f.checked?w.push(y):f.checked||C.push(y);for(F=0;F<C.length;F++)this._map.hasLayer(C[F])&&this._map.removeLayer(C[F]);for(F=0;F<w.length;F++)this._map.hasLayer(w[F])||this._map.addLayer(w[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,f,y,w=this._map.getZoom(),C=u.length-1;C>=0;C--)f=u[C],y=this._getLayer(f.layerId).layer,f.disabled=y.options.minZoom!==void 0&&w<y.options.minZoom||y.options.maxZoom!==void 0&&w>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Jt(u,"click",Zn),this.expand();var f=this;setTimeout(function(){ie(u,"click",Zn),f._preventClick=!1})}}),GD=function(u,f,y){return new IE(u,f,y)},a_=Ps.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var f="leaflet-control-zoom",y=dt("div",f+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,f+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,f+"-out",y,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,f,y,w,C){var F=dt("a",y,w);return F.innerHTML=u,F.href="#",F.title=f,F.setAttribute("role","button"),F.setAttribute("aria-label",f),uo(F),Jt(F,"click",da),Jt(F,"click",C,this),Jt(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var u=this._map,f="leaflet-disabled";At(this._zoomInButton,f),At(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(pt(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(pt(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new a_,this.addControl(this.zoomControl))});var VD=function(u){return new a_(u)},ME=Ps.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var f="leaflet-control-scale",y=dt("div",f),w=this.options;return this._addScales(w,f+"-line",y),u.on(w.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),y},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,f,y){u.metric&&(this._mScale=dt("div",f,y)),u.imperial&&(this._iScale=dt("div",f,y))},_update:function(){var u=this._map,f=u.getSize().y/2,y=u.distance(u.containerPointToLatLng([0,f]),u.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(y)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var f=this._getRoundNum(u),y=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,y,f/u)},_updateImperial:function(u){var f=u*3.2808399,y,w,C;f>5280?(y=f/5280,w=this._getRoundNum(y),this._updateScale(this._iScale,w+" mi",w/y)):(C=this._getRoundNum(f),this._updateScale(this._iScale,C+" ft",C/f))},_updateScale:function(u,f,y){u.style.width=Math.round(this.options.maxWidth*y)+"px",u.innerHTML=f},_getRoundNum:function(u){var f=Math.pow(10,(Math.floor(u)+"").length-1),y=u/f;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,f*y}}),HD=function(u){return new ME(u)},WD='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',l_=Ps.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Vt.inlineSvg?WD+" ":"")+"Leaflet</a>"},initialize:function(u){p(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=dt("div","leaflet-control-attribution"),uo(this._container);for(var f in u._layers)u._layers[f].getAttribution&&this.addAttribution(u._layers[f].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var f in this._attributions)this._attributions[f]&&u.push(f);var y=[];this.options.prefix&&y.push(this.options.prefix),u.length&&y.push(u.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new l_().addTo(this)});var XD=function(u){return new l_(u)};Ps.Layers=IE,Ps.Zoom=a_,Ps.Scale=ME,Ps.Attribution=l_,Wu.layers=GD,Wu.zoom=VD,Wu.scale=HD,Wu.attribution=XD;var qs=X.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});qs.addTo=function(u,f){return u.addHandler(f,this),this};var ZD={Events:N},NE=Vt.touch?"touchstart mousedown":"mousedown",ho=W.extend({options:{clickTolerance:3},initialize:function(u,f,y,w){p(this,w),this._element=u,this._dragStartTarget=f||u,this._preventOutline=y},enable:function(){this._enabled||(Jt(this._dragStartTarget,NE,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ho._dragging===this&&this.finishDrag(!0),ie(this._dragStartTarget,NE,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Nt(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ho._dragging===this&&this.finishDrag();return}if(!(ho._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ho._dragging=this,this._preventOutline&&Bn(this._element),bn(),be(),!this._moving)){this.fire("down");var f=u.touches?u.touches[0]:u,y=hl(this._element);this._startPoint=new U(f.clientX,f.clientY),this._startPos=Ae(this._element),this._parentScale=Pn(y);var w=u.type==="mousedown";Jt(document,w?"mousemove":"touchmove",this._onMove,this),Jt(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var f=u.touches&&u.touches.length===1?u.touches[0]:u,y=new U(f.clientX,f.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,Zn(u),this._moved||(this.fire("dragstart"),this._moved=!0,pt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),qt(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ie(document,"mousemove touchmove",this._onMove,this),ie(document,"mouseup touchend touchcancel",this._onUp,this),cn(),on();var f=this._moved&&this._moving;this._moving=!1,ho._dragging=!1,f&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function RE(u,f,y){var w,C=[1,4,2,8],F,H,at,gt,Pt,Ut,te,fe;for(F=0,Ut=u.length;F<Ut;F++)u[F]._code=ha(u[F],f);for(at=0;at<4;at++){for(te=C[at],w=[],F=0,Ut=u.length,H=Ut-1;F<Ut;H=F++)gt=u[F],Pt=u[H],gt._code&te?Pt._code&te||(fe=bc(Pt,gt,te,f,y),fe._code=ha(fe,f),w.push(fe)):(Pt._code&te&&(fe=bc(Pt,gt,te,f,y),fe._code=ha(fe,f),w.push(fe)),w.push(gt));u=w}return u}function FE(u,f){var y,w,C,F,H,at,gt,Pt,Ut;if(!u||u.length===0)throw new Error("latlngs not passed");ls(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var te=Rt([0,0]),fe=ut(u),_i=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());_i<1700&&(te=u_(u));var $n=u.length,us=[];for(y=0;y<$n;y++){var Oi=Rt(u[y]);us.push(f.project(Rt([Oi.lat-te.lat,Oi.lng-te.lng])))}for(at=gt=Pt=0,y=0,w=$n-1;y<$n;w=y++)C=us[y],F=us[w],H=C.y*F.x-F.y*C.x,gt+=(C.x+F.x)*H,Pt+=(C.y+F.y)*H,at+=H*3;at===0?Ut=us[0]:Ut=[gt/at,Pt/at];var yl=f.unproject(Z(Ut));return Rt([yl.lat+te.lat,yl.lng+te.lng])}function u_(u){for(var f=0,y=0,w=0,C=0;C<u.length;C++){var F=Rt(u[C]);f+=F.lat,y+=F.lng,w++}return Rt([f/w,y/w])}var YD={__proto__:null,clipPolygon:RE,polygonCenter:FE,centroid:u_};function OE(u,f){if(!f||!u.length)return u.slice();var y=f*f;return u=KD(u,y),u=JD(u,y),u}function DE(u,f,y){return Math.sqrt(Xu(u,f,y,!0))}function qD(u,f,y){return Xu(u,f,y)}function JD(u,f){var y=u.length,w=typeof Uint8Array<"u"?Uint8Array:Array,C=new w(y);C[0]=C[y-1]=1,d_(u,C,f,0,y-1);var F,H=[];for(F=0;F<y;F++)C[F]&&H.push(u[F]);return H}function d_(u,f,y,w,C){var F=0,H,at,gt;for(at=w+1;at<=C-1;at++)gt=Xu(u[at],u[w],u[C],!0),gt>F&&(H=at,F=gt);F>y&&(f[H]=1,d_(u,f,y,w,H),d_(u,f,y,H,C))}function KD(u,f){for(var y=[u[0]],w=1,C=0,F=u.length;w<F;w++)QD(u[w],u[C])>f&&(y.push(u[w]),C=w);return C<F-1&&y.push(u[F-1]),y}var zE;function BE(u,f,y,w,C){var F=w?zE:ha(u,y),H=ha(f,y),at,gt,Pt;for(zE=H;;){if(!(F|H))return[u,f];if(F&H)return!1;at=F||H,gt=bc(u,f,at,y,C),Pt=ha(gt,y),at===F?(u=gt,F=Pt):(f=gt,H=Pt)}}function bc(u,f,y,w,C){var F=f.x-u.x,H=f.y-u.y,at=w.min,gt=w.max,Pt,Ut;return y&8?(Pt=u.x+F*(gt.y-u.y)/H,Ut=gt.y):y&4?(Pt=u.x+F*(at.y-u.y)/H,Ut=at.y):y&2?(Pt=gt.x,Ut=u.y+H*(gt.x-u.x)/F):y&1&&(Pt=at.x,Ut=u.y+H*(at.x-u.x)/F),new U(Pt,Ut,C)}function ha(u,f){var y=0;return u.x<f.min.x?y|=1:u.x>f.max.x&&(y|=2),u.y<f.min.y?y|=4:u.y>f.max.y&&(y|=8),y}function QD(u,f){var y=f.x-u.x,w=f.y-u.y;return y*y+w*w}function Xu(u,f,y,w){var C=f.x,F=f.y,H=y.x-C,at=y.y-F,gt=H*H+at*at,Pt;return gt>0&&(Pt=((u.x-C)*H+(u.y-F)*at)/gt,Pt>1?(C=y.x,F=y.y):Pt>0&&(C+=H*Pt,F+=at*Pt)),H=u.x-C,at=u.y-F,w?H*H+at*at:new U(C,F)}function ls(u){return!E(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function UE(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ls(u)}function $E(u,f){var y,w,C,F,H,at,gt,Pt;if(!u||u.length===0)throw new Error("latlngs not passed");ls(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Ut=Rt([0,0]),te=ut(u),fe=te.getNorthWest().distanceTo(te.getSouthWest())*te.getNorthEast().distanceTo(te.getNorthWest());fe<1700&&(Ut=u_(u));var _i=u.length,$n=[];for(y=0;y<_i;y++){var us=Rt(u[y]);$n.push(f.project(Rt([us.lat-Ut.lat,us.lng-Ut.lng])))}for(y=0,w=0;y<_i-1;y++)w+=$n[y].distanceTo($n[y+1])/2;if(w===0)Pt=$n[0];else for(y=0,F=0;y<_i-1;y++)if(H=$n[y],at=$n[y+1],C=H.distanceTo(at),F+=C,F>w){gt=(F-w)/C,Pt=[at.x-gt*(at.x-H.x),at.y-gt*(at.y-H.y)];break}var Oi=f.unproject(Z(Pt));return Rt([Oi.lat+Ut.lat,Oi.lng+Ut.lng])}var tz={__proto__:null,simplify:OE,pointToSegmentDistance:DE,closestPointOnSegment:qD,clipSegment:BE,_getEdgeIntersection:bc,_getBitCode:ha,_sqClosestPointOnSegment:Xu,isFlat:ls,_flat:UE,polylineCenter:$E},h_={project:function(u){return new U(u.lng,u.lat)},unproject:function(u){return new _t(u.y,u.x)},bounds:new rt([-180,-90],[180,90])},c_={R:6378137,R_MINOR:6356752314245179e-9,bounds:new rt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var f=Math.PI/180,y=this.R,w=u.lat*f,C=this.R_MINOR/y,F=Math.sqrt(1-C*C),H=F*Math.sin(w),at=Math.tan(Math.PI/4-w/2)/Math.pow((1-H)/(1+H),F/2);return w=-y*Math.log(Math.max(at,1e-10)),new U(u.lng*f*y,w)},unproject:function(u){for(var f=180/Math.PI,y=this.R,w=this.R_MINOR/y,C=Math.sqrt(1-w*w),F=Math.exp(-u.y/y),H=Math.PI/2-2*Math.atan(F),at=0,gt=.1,Pt;at<15&&Math.abs(gt)>1e-7;at++)Pt=C*Math.sin(H),Pt=Math.pow((1-Pt)/(1+Pt),C/2),gt=Math.PI/2-2*Math.atan(F*Pt)-H,H+=gt;return new _t(H*f,u.x*f/y)}},ez={__proto__:null,LonLat:h_,Mercator:c_,SphericalMercator:Tt},nz=s({},Yt,{code:"EPSG:3395",projection:c_,transformation:function(){var u=.5/(Math.PI*c_.R);return Xt(u,.5,-u,.5)}()}),jE=s({},Yt,{code:"EPSG:4326",projection:h_,transformation:Xt(1/180,1,-1/180,.5)}),iz=s({},Gt,{projection:h_,transformation:Xt(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,f){var y=f.lng-u.lng,w=f.lat-u.lat;return Math.sqrt(y*y+w*w)},infinite:!0});Gt.Earth=Yt,Gt.EPSG3395=nz,Gt.EPSG3857=se,Gt.EPSG900913=de,Gt.EPSG4326=jE,Gt.Simple=iz;var ks=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var f=u.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var y=this.getEvents();f.on(y,this),this.once("remove",function(){f.off(y,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var f=l(u);return this._layers[f]?this:(this._layers[f]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var f=l(u);return this._layers[f]?(this._loaded&&u.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,f){for(var y in this._layers)u.call(f,this._layers[y]);return this},_addLayers:function(u){u=u?E(u)?u:[u]:[];for(var f=0,y=u.length;f<y;f++)this.addLayer(u[f])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var f=l(u);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,f=-1/0,y=this._getZoomSpan();for(var w in this._zoomBoundLayers){var C=this._zoomBoundLayers[w].options;u=C.minZoom===void 0?u:Math.min(u,C.minZoom),f=C.maxZoom===void 0?f:Math.max(f,C.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=u===1/0?void 0:u,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gl=ks.extend({initialize:function(u,f){p(this,f),this._layers={};var y,w;if(u)for(y=0,w=u.length;y<w;y++)this.addLayer(u[y])},addLayer:function(u){var f=this.getLayerId(u);return this._layers[f]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var f=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(u){var f=typeof u=="number"?u:this.getLayerId(u);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var f=Array.prototype.slice.call(arguments,1),y,w;for(y in this._layers)w=this._layers[y],w[u]&&w[u].apply(w,f);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,f){for(var y in this._layers)u.call(f,this._layers[y]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),sz=function(u,f){return new gl(u,f)},Sr=gl.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),gl.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),gl.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new St;for(var f in this._layers){var y=this._layers[f];u.extend(y.getBounds?y.getBounds():y.getLatLng())}return u}}),rz=function(u,f){return new Sr(u,f)},fl=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){p(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,f){var y=this._getIconUrl(u);if(!y){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(y,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(w,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(u,f){var y=this.options,w=y[f+"Size"];typeof w=="number"&&(w=[w,w]);var C=Z(w),F=Z(f==="shadow"&&y.shadowAnchor||y.iconAnchor||C&&C.divideBy(2,!0));u.className="leaflet-marker-"+f+" "+(y.className||""),F&&(u.style.marginLeft=-F.x+"px",u.style.marginTop=-F.y+"px"),C&&(u.style.width=C.x+"px",u.style.height=C.y+"px")},_createImg:function(u,f){return f=f||document.createElement("img"),f.src=u,f},_getIconUrl:function(u){return Vt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function oz(u){return new fl(u)}var Zu=fl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Zu.imagePath!="string"&&(Zu.imagePath=this._detectIconPath()),(this.options.imagePath||Zu.imagePath)+fl.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var f=function(y,w,C){var F=w.exec(y);return F&&F[C]};return u=f(u,/^url\((['"])?(.+)\1\)$/,2),u&&f(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=dt("div","leaflet-default-icon-path",document.body),f=ft(u,"background-image")||ft(u,"backgroundImage");if(document.body.removeChild(u),f=this._stripUrl(f),f)return f;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),GE=qs.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ho(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var f=this._marker,y=f._map,w=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,F=Ae(f._icon),H=y.getPixelBounds(),at=y.getPixelOrigin(),gt=vt(H.min._subtract(at).add(C),H.max._subtract(at).subtract(C));if(!gt.contains(F)){var Pt=Z((Math.max(gt.max.x,F.x)-gt.max.x)/(H.max.x-gt.max.x)-(Math.min(gt.min.x,F.x)-gt.min.x)/(H.min.x-gt.min.x),(Math.max(gt.max.y,F.y)-gt.max.y)/(H.max.y-gt.max.y)-(Math.min(gt.min.y,F.y)-gt.min.y)/(H.min.y-gt.min.y)).multiplyBy(w);y.panBy(Pt,{animate:!1}),this._draggable._newPos._add(Pt),this._draggable._startPos._add(Pt),qt(f._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=M(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,u)))},_onDrag:function(u){var f=this._marker,y=f._shadow,w=Ae(f._icon),C=f._map.layerPointToLatLng(w);y&&qt(y,w),f._latlng=C,u.latlng=C,u.oldLatLng=this._oldLatLng,f.fire("move",u).fire("drag",u)},_onDragEnd:function(u){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Ec=ks.extend({options:{icon:new Zu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,f){p(this,f),this._latlng=Rt(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var f=this._latlng;return this._latlng=Rt(u),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=u.icon.createIcon(this._icon),w=!1;y!==this._icon&&(this._icon&&this._removeIcon(),w=!0,u.title&&(y.title=u.title),y.tagName==="IMG"&&(y.alt=u.alt||"")),pt(y,f),u.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(y,"focus",this._panOnFocus,this);var C=u.icon.createShadow(this._shadow),F=!1;C!==this._shadow&&(this._removeShadow(),F=!0),C&&(pt(C,f),C.alt=""),this._shadow=C,u.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&F&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&qt(this._icon,u),this._shadow&&qt(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var f=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),GE)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new GE(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&$t(this._icon,u),this._shadow&&$t(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var f=this.options.icon.options,y=f.iconSize?Z(f.iconSize):Z(0,0),w=f.iconAnchor?Z(f.iconAnchor):Z(0,0);u.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:y.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function az(u,f){return new Ec(u,f)}var co=ks.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return p(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Sc=co.extend({options:{fill:!0,radius:10},initialize:function(u,f){p(this,f),this._latlng=Rt(u),this._radius=this.options.radius},setLatLng:function(u){var f=this._latlng;return this._latlng=Rt(u),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var f=u&&u.radius||this._radius;return co.prototype.setStyle.call(this,u),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,f=this._radiusY||u,y=this._clickTolerance(),w=[u+y,f+y];this._pxBounds=new rt(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lz(u,f){return new Sc(u,f)}var g_=Sc.extend({initialize:function(u,f,y){if(typeof f=="number"&&(f=s({},y,{radius:f})),p(this,f),this._latlng=Rt(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new St(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:co.prototype.setStyle,_project:function(){var u=this._latlng.lng,f=this._latlng.lat,y=this._map,w=y.options.crs;if(w.distance===Yt.distance){var C=Math.PI/180,F=this._mRadius/Yt.R/C,H=y.project([f+F,u]),at=y.project([f-F,u]),gt=H.add(at).divideBy(2),Pt=y.unproject(gt).lat,Ut=Math.acos((Math.cos(F*C)-Math.sin(f*C)*Math.sin(Pt*C))/(Math.cos(f*C)*Math.cos(Pt*C)))/C;(isNaN(Ut)||Ut===0)&&(Ut=F/Math.cos(Math.PI/180*f)),this._point=gt.subtract(y.getPixelOrigin()),this._radius=isNaN(Ut)?0:gt.x-y.project([Pt,u-Ut]).x,this._radiusY=gt.y-H.y}else{var te=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(te).x}this._updateBounds()}});function uz(u,f,y){return new g_(u,f,y)}var wr=co.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,f){p(this,f),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var f=1/0,y=null,w=Xu,C,F,H=0,at=this._parts.length;H<at;H++)for(var gt=this._parts[H],Pt=1,Ut=gt.length;Pt<Ut;Pt++){C=gt[Pt-1],F=gt[Pt];var te=w(u,C,F,!0);te<f&&(f=te,y=w(u,C,F))}return y&&(y.distance=Math.sqrt(f)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $E(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,f){return f=f||this._defaultShape(),u=Rt(u),f.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new St,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return ls(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var f=[],y=ls(u),w=0,C=u.length;w<C;w++)y?(f[w]=Rt(u[w]),this._bounds.extend(f[w])):f[w]=this._convertLatLngs(u[w]);return f},_project:function(){var u=new rt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),f=new U(u,u);this._rawPxBounds&&(this._pxBounds=new rt([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(u,f,y){var w=u[0]instanceof _t,C=u.length,F,H;if(w){for(H=[],F=0;F<C;F++)H[F]=this._map.latLngToLayerPoint(u[F]),y.extend(H[F]);f.push(H)}else for(F=0;F<C;F++)this._projectLatlngs(u[F],f,y)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,y,w,C,F,H,at,gt;for(y=0,C=0,F=this._rings.length;y<F;y++)for(gt=this._rings[y],w=0,H=gt.length;w<H-1;w++)at=BE(gt[w],gt[w+1],u,w,!0),at&&(f[C]=f[C]||[],f[C].push(at[0]),(at[1]!==gt[w+1]||w===H-2)&&(f[C].push(at[1]),C++))}},_simplifyPoints:function(){for(var u=this._parts,f=this.options.smoothFactor,y=0,w=u.length;y<w;y++)u[y]=OE(u[y],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,f){var y,w,C,F,H,at,gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(y=0,F=this._parts.length;y<F;y++)for(at=this._parts[y],w=0,H=at.length,C=H-1;w<H;C=w++)if(!(!f&&w===0)&&DE(u,at[C],at[w])<=gt)return!0;return!1}});function dz(u,f){return new wr(u,f)}wr._flat=UE;var ml=wr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return FE(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var f=wr.prototype._convertLatLngs.call(this,u),y=f.length;return y>=2&&f[0]instanceof _t&&f[0].equals(f[y-1])&&f.pop(),f},_setLatLngs:function(u){wr.prototype._setLatLngs.call(this,u),ls(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ls(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,f=this.options.weight,y=new U(f,f);if(u=new rt(u.min.subtract(y),u.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,C=this._rings.length,F;w<C;w++)F=RE(this._rings[w],u,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var f=!1,y,w,C,F,H,at,gt,Pt;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(F=0,gt=this._parts.length;F<gt;F++)for(y=this._parts[F],H=0,Pt=y.length,at=Pt-1;H<Pt;at=H++)w=y[H],C=y[at],w.y>u.y!=C.y>u.y&&u.x<(C.x-w.x)*(u.y-w.y)/(C.y-w.y)+w.x&&(f=!f);return f||wr.prototype._containsPoint.call(this,u,!0)}});function hz(u,f){return new ml(u,f)}var Ar=Sr.extend({initialize:function(u,f){p(this,f),this._layers={},u&&this.addData(u)},addData:function(u){var f=E(u)?u:u.features,y,w,C;if(f){for(y=0,w=f.length;y<w;y++)C=f[y],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var F=this.options;if(F.filter&&!F.filter(u))return this;var H=wc(u,F);return H?(H.feature=Cc(u),H.defaultOptions=H.options,this.resetStyle(H),F.onEachFeature&&F.onEachFeature(u,H),this.addLayer(H)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=s({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(f){this._setLayerStyle(f,u)},this)},_setLayerStyle:function(u,f){u.setStyle&&(typeof f=="function"&&(f=f(u.feature)),u.setStyle(f))}});function wc(u,f){var y=u.type==="Feature"?u.geometry:u,w=y?y.coordinates:null,C=[],F=f&&f.pointToLayer,H=f&&f.coordsToLatLng||f_,at,gt,Pt,Ut;if(!w&&!y)return null;switch(y.type){case"Point":return at=H(w),VE(F,u,at,f);case"MultiPoint":for(Pt=0,Ut=w.length;Pt<Ut;Pt++)at=H(w[Pt]),C.push(VE(F,u,at,f));return new Sr(C);case"LineString":case"MultiLineString":return gt=Ac(w,y.type==="LineString"?0:1,H),new wr(gt,f);case"Polygon":case"MultiPolygon":return gt=Ac(w,y.type==="Polygon"?1:2,H),new ml(gt,f);case"GeometryCollection":for(Pt=0,Ut=y.geometries.length;Pt<Ut;Pt++){var te=wc({geometry:y.geometries[Pt],type:"Feature",properties:u.properties},f);te&&C.push(te)}return new Sr(C);case"FeatureCollection":for(Pt=0,Ut=y.features.length;Pt<Ut;Pt++){var fe=wc(y.features[Pt],f);fe&&C.push(fe)}return new Sr(C);default:throw new Error("Invalid GeoJSON object.")}}function VE(u,f,y,w){return u?u(f,y):new Ec(y,w&&w.markersInheritOptions&&w)}function f_(u){return new _t(u[1],u[0],u[2])}function Ac(u,f,y){for(var w=[],C=0,F=u.length,H;C<F;C++)H=f?Ac(u[C],f-1,y):(y||f_)(u[C]),w.push(H);return w}function m_(u,f){return u=Rt(u),u.alt!==void 0?[g(u.lng,f),g(u.lat,f),g(u.alt,f)]:[g(u.lng,f),g(u.lat,f)]}function Tc(u,f,y,w){for(var C=[],F=0,H=u.length;F<H;F++)C.push(f?Tc(u[F],ls(u[F])?0:f-1,y,w):m_(u[F],w));return!f&&y&&C.length>0&&C.push(C[0].slice()),C}function pl(u,f){return u.feature?s({},u.feature,{geometry:f}):Cc(f)}function Cc(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var p_={toGeoJSON:function(u){return pl(this,{type:"Point",coordinates:m_(this.getLatLng(),u)})}};Ec.include(p_),g_.include(p_),Sc.include(p_),wr.include({toGeoJSON:function(u){var f=!ls(this._latlngs),y=Tc(this._latlngs,f?1:0,!1,u);return pl(this,{type:(f?"Multi":"")+"LineString",coordinates:y})}}),ml.include({toGeoJSON:function(u){var f=!ls(this._latlngs),y=f&&!ls(this._latlngs[0]),w=Tc(this._latlngs,y?2:f?1:0,!0,u);return f||(w=[w]),pl(this,{type:(y?"Multi":"")+"Polygon",coordinates:w})}}),gl.include({toMultiPoint:function(u){var f=[];return this.eachLayer(function(y){f.push(y.toGeoJSON(u).geometry.coordinates)}),pl(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(u){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(u);var y=f==="GeometryCollection",w=[];return this.eachLayer(function(C){if(C.toGeoJSON){var F=C.toGeoJSON(u);if(y)w.push(F.geometry);else{var H=Cc(F);H.type==="FeatureCollection"?w.push.apply(w,H.features):w.push(H)}}}),y?pl(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function HE(u,f){return new Ar(u,f)}var cz=HE,Lc=ks.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,f,y){this._url=u,this._bounds=ut(f),p(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Ct(this._image),this},bringToBack:function(){return this._map&&It(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ut(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",f=this._image=u?this._url:dt("img");if(pt(f,"leaflet-image-layer"),this._zoomAnimated&&pt(f,"leaflet-zoom-animated"),this.options.className&&pt(f,this.options.className),f.onselectstart=c,f.onmousemove=c,f.onload=o(this.fire,this,"load"),f.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(u){var f=this._map.getZoomScale(u.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Qt(this._image,y,f)},_reset:function(){var u=this._image,f=new rt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=f.getSize();qt(u,f.min),u.style.width=y.x+"px",u.style.height=y.y+"px"},_updateOpacity:function(){$t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),gz=function(u,f,y){return new Lc(u,f,y)},WE=Lc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",f=this._image=u?this._url:dt("video");if(pt(f,"leaflet-image-layer"),this._zoomAnimated&&pt(f,"leaflet-zoom-animated"),this.options.className&&pt(f,this.options.className),f.onselectstart=c,f.onmousemove=c,f.onloadeddata=o(this.fire,this,"load"),u){for(var y=f.getElementsByTagName("source"),w=[],C=0;C<y.length;C++)w.push(y[C].src);this._url=y.length>0?w:[f.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var H=dt("source");H.src=this._url[F],f.appendChild(H)}}});function fz(u,f,y){return new WE(u,f,y)}var XE=Lc.extend({_initImage:function(){var u=this._image=this._url;pt(u,"leaflet-image-layer"),this._zoomAnimated&&pt(u,"leaflet-zoom-animated"),this.options.className&&pt(u,this.options.className),u.onselectstart=c,u.onmousemove=c}});function mz(u,f,y){return new XE(u,f,y)}var Js=ks.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,f){u&&(u instanceof _t||E(u))?(this._latlng=Rt(u),p(this,f)):(p(this,u),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&$t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&$t(this._container,1),this.bringToFront(),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?($t(this._container,0),this._removeTimeout=setTimeout(o(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=Rt(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ct(this._container),this},bringToBack:function(){return this._map&&It(this._container),this},_prepareOpen:function(u){var f=this._source;if(!f._map)return!1;if(f instanceof Sr){f=null;var y=this._source._layers;for(var w in y)if(y[w]._map){f=y[w];break}if(!f)return!1;this._source=f}if(!u)if(f.getCenter)u=f.getCenter();else if(f.getLatLng)u=f.getLatLng();else if(f.getBounds)u=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")u.innerHTML=f;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),f=Z(this.options.offset),y=this._getAnchor();this._zoomAnimated?qt(this._container,u.add(y)):f=f.add(u).add(y);var w=this._containerBottom=-f.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=w+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(u,f,y,w){var C=f;return C instanceof u||(C=new u(w).setContent(f)),y&&C.setLatLng(y),C}}),ks.include({_initOverlay:function(u,f,y,w){var C=y;return C instanceof u?(p(C,w),C._source=this):(C=f&&!w?f:new u(w,this),C.setContent(y)),C}});var Pc=Js.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Js.prototype.openOn.call(this,u)},onAdd:function(u){Js.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof co||this._source.on("preclick",Ys))},onRemove:function(u){Js.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof co||this._source.off("preclick",Ys))},getEvents:function(){var u=Js.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",f=this._container=dt("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=dt("div",u+"-content-wrapper",f);if(this._contentNode=dt("div",u+"-content",y),uo(f),cl(this._contentNode),Jt(f,"contextmenu",Ys),this._tipContainer=dt("div",u+"-tip-container",f),this._tip=dt("div",u+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=dt("a",u+"-close-button",f);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Jt(w,"click",function(C){Zn(C),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,f=u.style;f.width="",f.whiteSpace="nowrap";var y=u.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),f.width=y+1+"px",f.whiteSpace="",f.height="";var w=u.offsetHeight,C=this.options.maxHeight,F="leaflet-popup-scrolled";C&&w>C?(f.height=C+"px",pt(u,F)):At(u,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var f=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),y=this._getAnchor();qt(this._container,f.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,f=parseInt(ft(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+f,w=this._containerWidth,C=new U(this._containerLeft,-y-this._containerBottom);C._add(Ae(this._container));var F=u.layerPointToContainerPoint(C),H=Z(this.options.autoPanPadding),at=Z(this.options.autoPanPaddingTopLeft||H),gt=Z(this.options.autoPanPaddingBottomRight||H),Pt=u.getSize(),Ut=0,te=0;F.x+w+gt.x>Pt.x&&(Ut=F.x+w-Pt.x+gt.x),F.x-Ut-at.x<0&&(Ut=F.x-at.x),F.y+y+gt.y>Pt.y&&(te=F.y+y-Pt.y+gt.y),F.y-te-at.y<0&&(te=F.y-at.y),(Ut||te)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Ut,te]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),pz=function(u,f){return new Pc(u,f)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(u,f,y){return this._initOverlay(Pc,u,f,y).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),ks.include({bindPopup:function(u,f){return this._popup=this._initOverlay(Pc,this._popup,u,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Sr||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){da(u);var f=u.layer||u.target;if(this._popup._source===f&&!(f instanceof co)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=f,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var kc=Js.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Js.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Js.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Js.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",f=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dt("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var f,y,w=this._map,C=this._container,F=w.latLngToContainerPoint(w.getCenter()),H=w.layerPointToContainerPoint(u),at=this.options.direction,gt=C.offsetWidth,Pt=C.offsetHeight,Ut=Z(this.options.offset),te=this._getAnchor();at==="top"?(f=gt/2,y=Pt):at==="bottom"?(f=gt/2,y=0):at==="center"?(f=gt/2,y=Pt/2):at==="right"?(f=0,y=Pt/2):at==="left"?(f=gt,y=Pt/2):H.x<F.x?(at="right",f=0,y=Pt/2):(at="left",f=gt+(Ut.x+te.x)*2,y=Pt/2),u=u.subtract(Z(f,y,!0)).add(Ut).add(te),At(C,"leaflet-tooltip-right"),At(C,"leaflet-tooltip-left"),At(C,"leaflet-tooltip-top"),At(C,"leaflet-tooltip-bottom"),pt(C,"leaflet-tooltip-"+at),qt(C,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&$t(this._container,u)},_animateZoom:function(u){var f=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(f)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_z=function(u,f){return new kc(u,f)};ve.include({openTooltip:function(u,f,y){return this._initOverlay(kc,u,f,y).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),ks.include({bindTooltip:function(u,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kc,this._tooltip,u,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var f=u?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[f](y),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Sr||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var f=typeof u.getElement=="function"&&u.getElement();f&&(Jt(f,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Jt(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var f=typeof u.getElement=="function"&&u.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var f=u.latlng,y,w;this._tooltip.options.sticky&&u.originalEvent&&(y=this._map.mouseEventToContainerPoint(u.originalEvent),w=this._map.containerPointToLayerPoint(y),f=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(f)}});var ZE=fl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var f=u&&u.tagName==="DIV"?u:document.createElement("div"),y=this.options;if(y.html instanceof Element?(mt(f),f.appendChild(y.html)):f.innerHTML=y.html!==!1?y.html:"",y.bgPos){var w=Z(y.bgPos);f.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function yz(u){return new ZE(u)}fl.Default=Zu;var Yu=ks.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){p(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),st(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(It(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof U?u:new U(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var f=this.getPane().children,y=-u(-1/0,1/0),w=0,C=f.length,F;w<C;w++)F=f[w].style.zIndex,f[w]!==this._container&&F&&(y=u(y,+F));isFinite(y)&&(this.options.zIndex=y+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Vt.ielt9){$t(this._container,this.options.opacity);var u=+new Date,f=!1,y=!1;for(var w in this._tiles){var C=this._tiles[w];if(!(!C.current||!C.loaded)){var F=Math.min(1,(u-C.loaded)/200);$t(C.el,F),F<1?f=!0:(C.active?y=!0:this._onOpaqueTile(C),C.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),f&&(z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,f=this.options.maxZoom;if(u!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===u?(this._levels[y].el.style.zIndex=f-Math.abs(u-y),this._onUpdateLevel(y)):(st(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var w=this._levels[u],C=this._map;return w||(w=this._levels[u]={},w.el=dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=f,w.origin=C.project(C.unproject(C.getPixelOrigin()),u).round(),w.zoom=u,this._setZoomTransform(w,C.getCenter(),C.getZoom()),c(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var u,f,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)f=this._tiles[u],f.retain=f.current;for(u in this._tiles)if(f=this._tiles[u],f.current&&!f.active){var w=f.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var f in this._tiles)this._tiles[f].coords.z===u&&this._removeTile(f)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)st(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,f,y,w){var C=Math.floor(u/2),F=Math.floor(f/2),H=y-1,at=new U(+C,+F);at.z=+H;var gt=this._tileCoordsToKey(at),Pt=this._tiles[gt];return Pt&&Pt.active?(Pt.retain=!0,!0):(Pt&&Pt.loaded&&(Pt.retain=!0),H>w?this._retainParent(C,F,H,w):!1)},_retainChildren:function(u,f,y,w){for(var C=2*u;C<2*u+2;C++)for(var F=2*f;F<2*f+2;F++){var H=new U(C,F);H.z=y+1;var at=this._tileCoordsToKey(H),gt=this._tiles[at];if(gt&&gt.active){gt.retain=!0;continue}else gt&&gt.loaded&&(gt.retain=!0);y+1<w&&this._retainChildren(C,F,y+1,w)}},_resetView:function(u){var f=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var f=this.options;return f.minNativeZoom!==void 0&&u<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<u?f.maxNativeZoom:u},_setView:function(u,f,y,w){var C=Math.round(f);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var F=this.options.updateWhenZooming&&C!==this._tileZoom;(!w||F)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(u),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(u,f)},_setZoomTransforms:function(u,f){for(var y in this._levels)this._setZoomTransform(this._levels[y],u,f)},_setZoomTransform:function(u,f,y){var w=this._map.getZoomScale(y,u.zoom),C=u.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(f,y)).round();Vt.any3d?Qt(u.el,C,w):qt(u.el,C)},_resetGrid:function(){var u=this._map,f=u.options.crs,y=this._tileSize=this.getTileSize(),w=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,f.wrapLng[0]],w).x/y.x),Math.ceil(u.project([0,f.wrapLng[1]],w).x/y.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([f.wrapLat[0],0],w).y/y.x),Math.ceil(u.project([f.wrapLat[1],0],w).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var f=this._map,y=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),w=f.getZoomScale(y,this._tileZoom),C=f.project(u,this._tileZoom).floor(),F=f.getSize().divideBy(w*2);return new rt(C.subtract(F),C.add(F))},_update:function(u){var f=this._map;if(f){var y=this._clampZoom(f.getZoom());if(u===void 0&&(u=f.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(u),C=this._pxBoundsToTileRange(w),F=C.getCenter(),H=[],at=this.options.keepBuffer,gt=new rt(C.getBottomLeft().subtract([at,-at]),C.getTopRight().add([at,-at]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pt in this._tiles){var Ut=this._tiles[Pt].coords;(Ut.z!==this._tileZoom||!gt.contains(new U(Ut.x,Ut.y)))&&(this._tiles[Pt].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(u,y);return}for(var te=C.min.y;te<=C.max.y;te++)for(var fe=C.min.x;fe<=C.max.x;fe++){var _i=new U(fe,te);if(_i.z=this._tileZoom,!!this._isValidTile(_i)){var $n=this._tiles[this._tileCoordsToKey(_i)];$n?$n.current=!0:H.push(_i)}}if(H.sort(function(Oi,yl){return Oi.distanceTo(F)-yl.distanceTo(F)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var us=document.createDocumentFragment();for(fe=0;fe<H.length;fe++)this._addTile(H[fe],us);this._level.el.appendChild(us)}}}},_isValidTile:function(u){var f=this._map.options.crs;if(!f.infinite){var y=this._globalTileRange;if(!f.wrapLng&&(u.x<y.min.x||u.x>y.max.x)||!f.wrapLat&&(u.y<y.min.y||u.y>y.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(u);return ut(this.options.bounds).overlaps(w)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var f=this._map,y=this.getTileSize(),w=u.scaleBy(y),C=w.add(y),F=f.unproject(w,u.z),H=f.unproject(C,u.z);return[F,H]},_tileCoordsToBounds:function(u){var f=this._tileCoordsToNwSe(u),y=new St(f[0],f[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var f=u.split(":"),y=new U(+f[0],+f[1]);return y.z=+f[2],y},_removeTile:function(u){var f=this._tiles[u];f&&(st(f.el),delete this._tiles[u],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){pt(u,"leaflet-tile");var f=this.getTileSize();u.style.width=f.x+"px",u.style.height=f.y+"px",u.onselectstart=c,u.onmousemove=c,Vt.ielt9&&this.options.opacity<1&&$t(u,this.options.opacity)},_addTile:function(u,f){var y=this._getTilePos(u),w=this._tileCoordsToKey(u),C=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(C),this.createTile.length<2&&M(o(this._tileReady,this,u,null,C)),qt(C,y),this._tiles[w]={el:C,coords:u,current:!0},f.appendChild(C),this.fire("tileloadstart",{tile:C,coords:u})},_tileReady:function(u,f,y){f&&this.fire("tileerror",{error:f,tile:y,coords:u});var w=this._tileCoordsToKey(u);y=this._tiles[w],y&&(y.loaded=+new Date,this._map._fadeAnimated?($t(y.el,0),z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),f||(pt(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Vt.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var f=new U(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return f.z=u.z,f},_pxBoundsToTileRange:function(u){var f=this.getTileSize();return new rt(u.min.unscaleBy(f).floor(),u.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function vz(u){return new Yu(u)}var _l=Yu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,f){this._url=u,f=p(this,f),f.detectRetina&&Vt.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,f){return this._url===u&&f===void 0&&(f=!0),this._url=u,f||this.redraw(),this},createTile:function(u,f){var y=document.createElement("img");return Jt(y,"load",o(this._tileOnLoad,this,f,y)),Jt(y,"error",o(this._tileOnError,this,f,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(u),y},getTileUrl:function(u){var f={r:Vt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-u.y;this.options.tms&&(f.y=y),f["-y"]=y}return b(this._url,s(f,this.options))},_tileOnLoad:function(u,f){Vt.ielt9?setTimeout(o(u,this,null,f),0):u(null,f)},_tileOnError:function(u,f,y){var w=this.options.errorTileUrl;w&&f.getAttribute("src")!==w&&(f.src=w),u(y,f)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,f=this.options.maxZoom,y=this.options.zoomReverse,w=this.options.zoomOffset;return y&&(u=f-u),u+w},_getSubdomain:function(u){var f=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var u,f;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(f=this._tiles[u].el,f.onload=c,f.onerror=c,!f.complete)){f.src=A;var y=this._tiles[u].coords;st(f),delete this._tiles[u],this.fire("tileabort",{tile:f,coords:y})}},_removeTile:function(u){var f=this._tiles[u];if(f)return f.el.setAttribute("src",A),Yu.prototype._removeTile.call(this,u)},_tileReady:function(u,f,y){if(!(!this._map||y&&y.getAttribute("src")===A))return Yu.prototype._tileReady.call(this,u,f,y)}});function YE(u,f){return new _l(u,f)}var qE=_l.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,f){this._url=u;var y=s({},this.defaultWmsParams);for(var w in f)w in this.options||(y[w]=f[w]);f=p(this,f);var C=f.detectRetina&&Vt.retina?2:1,F=this.getTileSize();y.width=F.x*C,y.height=F.y*C,this.wmsParams=y},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,_l.prototype.onAdd.call(this,u)},getTileUrl:function(u){var f=this._tileCoordsToNwSe(u),y=this._crs,w=vt(y.project(f[0]),y.project(f[1])),C=w.min,F=w.max,H=(this._wmsVersion>=1.3&&this._crs===jE?[C.y,C.x,F.y,F.x]:[C.x,C.y,F.x,F.y]).join(","),at=_l.prototype.getTileUrl.call(this,u);return at+v(this.wmsParams,at,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(u,f){return s(this.wmsParams,u),f||this.redraw(),this}});function xz(u,f){return new qE(u,f)}_l.WMS=qE,YE.wms=xz;var Tr=ks.extend({options:{padding:.1},initialize:function(u){p(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,f){var y=this._map.getZoomScale(f,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,f),F=w.multiplyBy(-y).add(C).subtract(this._map._getNewPixelOrigin(u,f));Vt.any3d?Qt(this._container,F,y):qt(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,f=this._map.getSize(),y=this._map.containerPointToLayerPoint(f.multiplyBy(-u)).round();this._bounds=new rt(y,y.add(f.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),JE=Tr.extend({options:{tolerance:0},getEvents:function(){var u=Tr.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Tr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Jt(u,"mousemove",this._onMouseMove,this),Jt(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Jt(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,st(this._container),ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var f in this._layers)u=this._layers[f],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Tr.prototype._update.call(this);var u=this._bounds,f=this._container,y=u.getSize(),w=Vt.retina?2:1;qt(f,u.min),f.width=w*y.x,f.height=w*y.y,f.style.width=y.x+"px",f.style.height=y.y+"px",Vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Tr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var f=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var f=u._order,y=f.next,w=f.prev;y?y.prev=w:this._drawLast=w,w?w.next=y:this._drawFirst=y,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var f=u.options.dashArray.split(/[, ]+/),y=[],w,C;for(C=0;C<f.length;C++){if(w=Number(f[C]),isNaN(w))return;y.push(w)}u.options._dashArray=y}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var f=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new rt,this._redrawBounds.extend(u._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(u._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var f=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,f=this._redrawBounds;if(this._ctx.save(),f){var y=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)u=w.layer,(!f||u._pxBounds&&u._pxBounds.intersects(f))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,f){if(this._drawing){var y,w,C,F,H=u._parts,at=H.length,gt=this._ctx;if(at){for(gt.beginPath(),y=0;y<at;y++){for(w=0,C=H[y].length;w<C;w++)F=H[y][w],gt[w?"lineTo":"moveTo"](F.x,F.y);f&&gt.closePath()}this._fillStroke(gt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var f=u._point,y=this._ctx,w=Math.max(Math.round(u._radius),1),C=(Math.max(Math.round(u._radiusY),1)||w)/w;C!==1&&(y.save(),y.scale(1,C)),y.beginPath(),y.arc(f.x,f.y/C,w,0,Math.PI*2,!1),C!==1&&y.restore(),this._fillStroke(y,u)}},_fillStroke:function(u,f){var y=f.options;y.fill&&(u.globalAlpha=y.fillOpacity,u.fillStyle=y.fillColor||y.color,u.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(u.setLineDash&&u.setLineDash(f.options&&f.options._dashArray||[]),u.globalAlpha=y.opacity,u.lineWidth=y.weight,u.strokeStyle=y.color,u.lineCap=y.lineCap,u.lineJoin=y.lineJoin,u.stroke())},_onClick:function(u){for(var f=this._map.mouseEventToLayerPoint(u),y,w,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(f)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(y))&&(w=y);this._fireEvent(w?[w]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,f)}},_handleMouseOut:function(u){var f=this._hoveredLayer;f&&(At(this._container,"leaflet-interactive"),this._fireEvent([f],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,f){if(!this._mouseHoverThrottled){for(var y,w,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(f)&&(w=y);w!==this._hoveredLayer&&(this._handleMouseOut(u),w&&(pt(this._container,"leaflet-interactive"),this._fireEvent([w],u,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,f,y){this._map._fireDOMEvent(f,y||f.type,u)},_bringToFront:function(u){var f=u._order;if(f){var y=f.next,w=f.prev;if(y)y.prev=w;else return;w?w.next=y:y&&(this._drawFirst=y),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(u)}},_bringToBack:function(u){var f=u._order;if(f){var y=f.next,w=f.prev;if(w)w.next=y;else return;y?y.prev=w:w&&(this._drawLast=w),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(u)}}});function KE(u){return Vt.canvas?new JE(u):null}var qu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bz={_initContainer:function(){this._container=dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Tr.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var f=u._container=qu("shape");pt(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",u._path=qu("path"),f.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var f=u._container;this._container.appendChild(f),u.options.interactive&&u.addInteractiveTarget(f)},_removePath:function(u){var f=u._container;st(f),u.removeInteractiveTarget(f),delete this._layers[l(u)]},_updateStyle:function(u){var f=u._stroke,y=u._fill,w=u.options,C=u._container;C.stroked=!!w.stroke,C.filled=!!w.fill,w.stroke?(f||(f=u._stroke=qu("stroke")),C.appendChild(f),f.weight=w.weight+"px",f.color=w.color,f.opacity=w.opacity,w.dashArray?f.dashStyle=E(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=w.lineCap.replace("butt","flat"),f.joinstyle=w.lineJoin):f&&(C.removeChild(f),u._stroke=null),w.fill?(y||(y=u._fill=qu("fill")),C.appendChild(y),y.color=w.fillColor||w.color,y.opacity=w.fillOpacity):y&&(C.removeChild(y),u._fill=null)},_updateCircle:function(u){var f=u._point.round(),y=Math.round(u._radius),w=Math.round(u._radiusY||y);this._setPath(u,u._empty()?"M0 0":"AL "+f.x+","+f.y+" "+y+","+w+" 0,"+65535*360)},_setPath:function(u,f){u._path.v=f},_bringToFront:function(u){Ct(u._container)},_bringToBack:function(u){It(u._container)}},Ic=Vt.vml?qu:q,Ju=Tr.extend({_initContainer:function(){this._container=Ic("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ic("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Tr.prototype._update.call(this);var u=this._bounds,f=u.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,y.setAttribute("width",f.x),y.setAttribute("height",f.y)),qt(y,u.min),y.setAttribute("viewBox",[u.min.x,u.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(u){var f=u._path=Ic("path");u.options.className&&pt(f,u.options.className),u.options.interactive&&pt(f,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){st(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var f=u._path,y=u.options;f&&(y.stroke?(f.setAttribute("stroke",y.color),f.setAttribute("stroke-opacity",y.opacity),f.setAttribute("stroke-width",y.weight),f.setAttribute("stroke-linecap",y.lineCap),f.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?f.setAttribute("stroke-dasharray",y.dashArray):f.removeAttribute("stroke-dasharray"),y.dashOffset?f.setAttribute("stroke-dashoffset",y.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),y.fill?(f.setAttribute("fill",y.fillColor||y.color),f.setAttribute("fill-opacity",y.fillOpacity),f.setAttribute("fill-rule",y.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(u,f){this._setPath(u,ht(u._parts,f))},_updateCircle:function(u){var f=u._point,y=Math.max(Math.round(u._radius),1),w=Math.max(Math.round(u._radiusY),1)||y,C="a"+y+","+w+" 0 1,0 ",F=u._empty()?"M0 0":"M"+(f.x-y)+","+f.y+C+y*2+",0 "+C+-y*2+",0 ";this._setPath(u,F)},_setPath:function(u,f){u._path.setAttribute("d",f)},_bringToFront:function(u){Ct(u._path)},_bringToBack:function(u){It(u._path)}});Vt.vml&&Ju.include(bz);function QE(u){return Vt.svg||Vt.vml?new Ju(u):null}ve.include({getRenderer:function(u){var f=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var f=this._paneRenderers[u];return f===void 0&&(f=this._createRenderer({pane:u}),this._paneRenderers[u]=f),f},_createRenderer:function(u){return this.options.preferCanvas&&KE(u)||QE(u)}});var tS=ml.extend({initialize:function(u,f){ml.prototype.initialize.call(this,this._boundsToLatLngs(u),f)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ut(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Ez(u,f){return new tS(u,f)}Ju.create=Ic,Ju.pointsToPath=ht,Ar.geometryToLayer=wc,Ar.coordsToLatLng=f_,Ar.coordsToLatLngs=Ac,Ar.latLngToCoords=m_,Ar.latLngsToCoords=Tc,Ar.getFeature=pl,Ar.asFeature=Cc,ve.mergeOptions({boxZoom:!0});var eS=qs.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),be(),bn(),this._startPoint=this._map.mouseEventToContainerPoint(u),Jt(document,{contextmenu:da,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=dt("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var f=new rt(this._point,this._startPoint),y=f.getSize();qt(this._box,f.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(st(this._box),At(this._container,"leaflet-crosshair")),on(),cn(),ie(document,{contextmenu:da,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var f=new St(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",eS),ve.mergeOptions({doubleClickZoom:!0});var nS=qs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var f=this._map,y=f.getZoom(),w=f.options.zoomDelta,C=u.originalEvent.shiftKey?y-w:y+w;f.options.doubleClickZoom==="center"?f.setZoom(C):f.setZoomAround(u.containerPoint,C)}});ve.addInitHook("addHandler","doubleClickZoom",nS),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var iS=qs.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ho(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=ut(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var f=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(f),this._prunePositions(f)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,f){return u-(u-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;u.x<f.min.x&&(u.x=this._viscousLimit(u.x,f.min.x)),u.y<f.min.y&&(u.y=this._viscousLimit(u.y,f.min.y)),u.x>f.max.x&&(u.x=this._viscousLimit(u.x,f.max.x)),u.y>f.max.y&&(u.y=this._viscousLimit(u.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,f=Math.round(u/2),y=this._initialWorldOffset,w=this._draggable._newPos.x,C=(w-f+y)%u+f-y,F=(w+f+y)%u-f-y,H=Math.abs(C+y)<Math.abs(F+y)?C:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(u){var f=this._map,y=f.options,w=!y.inertia||u.noInertia||this._times.length<2;if(f.fire("dragend",u),w)f.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,H=y.easeLinearity,at=C.multiplyBy(H/F),gt=at.distanceTo([0,0]),Pt=Math.min(y.inertiaMaxSpeed,gt),Ut=at.multiplyBy(Pt/gt),te=Pt/(y.inertiaDeceleration*H),fe=Ut.multiplyBy(-te/2).round();!fe.x&&!fe.y?f.fire("moveend"):(fe=f._limitOffset(fe,f.options.maxBounds),M(function(){f.panBy(fe,{duration:te,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",iS),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sS=qs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Jt(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,f=document.documentElement,y=u.scrollTop||f.scrollTop,w=u.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(w,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var f=this._panKeys={},y=this.keyCodes,w,C;for(w=0,C=y.left.length;w<C;w++)f[y.left[w]]=[-1*u,0];for(w=0,C=y.right.length;w<C;w++)f[y.right[w]]=[u,0];for(w=0,C=y.down.length;w<C;w++)f[y.down[w]]=[0,u];for(w=0,C=y.up.length;w<C;w++)f[y.up[w]]=[0,-1*u]},_setZoomDelta:function(u){var f=this._zoomKeys={},y=this.keyCodes,w,C;for(w=0,C=y.zoomIn.length;w<C;w++)f[y.zoomIn[w]]=u;for(w=0,C=y.zoomOut.length;w<C;w++)f[y.zoomOut[w]]=-u},_addHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var f=u.keyCode,y=this._map,w;if(f in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(w=this._panKeys[f],u.shiftKey&&(w=Z(w).multiplyBy(3)),y.options.maxBounds&&(w=y._limitOffset(Z(w),y.options.maxBounds)),y.options.worldCopyJump){var C=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(w)));y.panTo(C)}else y.panBy(w)}else if(f in this._zoomKeys)y.setZoom(y.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;da(u)}}});ve.addInitHook("addHandler","keyboard",sS),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rS=qs.extend({addHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var f=PE(u),y=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var w=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),w),da(u)},_performZoom:function(){var u=this._map,f=u.getZoom(),y=this._map.options.zoomSnap||0;u._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,F=y?Math.ceil(C/y)*y:C,H=u._limitZoom(f+(this._delta>0?F:-F))-f;this._delta=0,this._startTime=null,H&&(u.options.scrollWheelZoom==="center"?u.setZoom(f+H):u.setZoomAround(this._lastMousePos,f+H))}});ve.addInitHook("addHandler","scrollWheelZoom",rS);var Sz=600;ve.mergeOptions({tapHold:Vt.touchNative&&Vt.safari&&Vt.mobile,tapTolerance:15});var oS=qs.extend({addHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var f=u.touches[0];this._startPos=this._newPos=new U(f.clientX,f.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Jt(document,"touchend",Zn),Jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),Sz),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){ie(document,"touchend",Zn),ie(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)},_onMove:function(u){var f=u.touches[0];this._newPos=new U(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,f){var y=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});y._simulated=!0,f.target.dispatchEvent(y)}});ve.addInitHook("addHandler","tapHold",oS),ve.mergeOptions({touchZoom:Vt.touch,bounceAtZoomLimits:!0});var aS=qs.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var f=this._map;if(!(!u.touches||u.touches.length!==2||f._animatingZoom||this._zooming)){var y=f.mouseEventToContainerPoint(u.touches[0]),w=f.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(y.add(w)._divideBy(2))),this._startDist=y.distanceTo(w),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),Zn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var f=this._map,y=f.mouseEventToContainerPoint(u.touches[0]),w=f.mouseEventToContainerPoint(u.touches[1]),C=y.distanceTo(w)/this._startDist;if(this._zoom=f.getScaleZoom(C,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&C<1||this._zoom>f.getMaxZoom()&&C>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var F=y._add(w)._divideBy(2)._subtract(this._centerPoint);if(C===1&&F.x===0&&F.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var H=o(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(H,this,!0),Zn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",aS),ve.BoxZoom=eS,ve.DoubleClickZoom=nS,ve.Drag=iS,ve.Keyboard=sS,ve.ScrollWheelZoom=rS,ve.TapHold=oS,ve.TouchZoom=aS,n.Bounds=rt,n.Browser=Vt,n.CRS=Gt,n.Canvas=JE,n.Circle=g_,n.CircleMarker=Sc,n.Class=X,n.Control=Ps,n.DivIcon=ZE,n.DivOverlay=Js,n.DomEvent=$D,n.DomUtil=as,n.Draggable=ho,n.Evented=W,n.FeatureGroup=Sr,n.GeoJSON=Ar,n.GridLayer=Yu,n.Handler=qs,n.Icon=fl,n.ImageOverlay=Lc,n.LatLng=_t,n.LatLngBounds=St,n.Layer=ks,n.LayerGroup=gl,n.LineUtil=tz,n.Map=ve,n.Marker=Ec,n.Mixin=ZD,n.Path=co,n.Point=U,n.PolyUtil=YD,n.Polygon=ml,n.Polyline=wr,n.Popup=Pc,n.PosAnimation=kE,n.Projection=ez,n.Rectangle=tS,n.Renderer=Tr,n.SVG=Ju,n.SVGOverlay=XE,n.TileLayer=_l,n.Tooltip=kc,n.Transformation=re,n.Util=j,n.VideoOverlay=WE,n.bind=o,n.bounds=vt,n.canvas=KE,n.circle=uz,n.circleMarker=lz,n.control=Wu,n.divIcon=yz,n.extend=s,n.featureGroup=rz,n.geoJSON=HE,n.geoJson=cz,n.gridLayer=vz,n.icon=oz,n.imageOverlay=gz,n.latLng=Rt,n.latLngBounds=ut,n.layerGroup=sz,n.map=jD,n.marker=az,n.point=Z,n.polygon=hz,n.polyline=dz,n.popup=pz,n.rectangle=Ez,n.setOptions=p,n.stamp=l,n.svg=QE,n.svgOverlay=mz,n.tileLayer=YE,n.tooltip=_z,n.transformation=Xt,n.version=i,n.videoOverlay=fz;var wz=window.L;n.noConflict=function(){return window.L=wz,this},window.L=n})})(xx,xx.exports);var zO=xx.exports;const ett=qm(zO),ntt=Rz({__proto__:null,default:ett},[zO]),BO=$.createContext(void 0),Hn=()=>{const t=$.useContext(BO);if(!t)throw new Error("useOgma must be used within an OgmaProvider");return t},hC={},itt=({options:t=hC,children:e,graph:n,onReady:i},s)=>{const[r,o]=$.useState(!1),[a,l]=$.useState(),[d,h]=$.useState(null),[c,g]=$.useState(),[m,_]=$.useState(hC);return $.useImperativeHandle(s,()=>a,[a]),$.useEffect(()=>{if(d){const p=new NF({container:d,graph:n,options:t});l(p),o(!0),i&&i(p)}},[l,d]),$.useLayoutEffect(()=>{const p=()=>a==null?void 0:a.view.forceResize();return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),$.useEffect(()=>{a&&(n&&a&&n!==c&&(g(n),a.setGraph(n)),t&&m!==t&&(_(t),a.setOptions(t)))},[n,t]),Q.jsx(BO.Provider,{value:a,children:Q.jsx("div",{style:{width:"100%",height:"100%"},ref:p=>h(p),children:r&&e})})},stt=$.forwardRef(itt),rtt=({selector:t,attributes:e},n)=>{const i=Hn(),[s,r]=$.useState();return $.useImperativeHandle(n,()=>s,[s]),$.useEffect(()=>{const o=t?i.styles.addNodeRule(t,e):i.styles.addNodeRule(e);return r(o),()=>{o.destroy(),r(void 0)}},[t,e]),null},ott=$.forwardRef(rtt),att=({selector:t,attributes:e},n)=>{const i=Hn(),[s,r]=$.useState();return $.useImperativeHandle(n,()=>s,[s]),$.useEffect(()=>{const o=t?i.styles.addEdgeRule(t,e):i.styles.addEdgeRule(e);return r(o),()=>{o.destroy(),r(void 0)}},[t,e]),null},ltt=$.forwardRef(att);function ul(t,e,n){e===t.isEnabled()&&(e?t.disable(n):t.enable(n))}function dl(t,e,n){const i=({target:d})=>{d===e&&t.onEnabled&&t.onEnabled(e)},s=({target:d})=>{d===e&&t.onDisabled&&t.onDisabled(e)},r=({target:d})=>{d===e&&t.onUpdated&&t.onUpdated(e)},o=({target:d,index:h})=>{d===e&&t.onSetIndex&&t.onSetIndex(e,h)},a=({target:d})=>{d===e&&(t.onDestroyed&&t.onDestroyed(e),n.events.off(i).off(s).off(r).off(o).off(a))};return n.events.on("transformationEnabled",i).on("transformationDisabled",s).on("transformationDestroyed",a).on("transformationSetIndex",o).on("transformationRefresh",r),()=>{n.events.off(i).off(s).off(r).off(o).off(a)}}function utt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addNodeGrouping({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.groupIdFunction,t.groupSelfLoopEdges,t.edgeGenerator,t.nodeGenerator,t.groupEdges,t.padding,t.selector,t.showContents,t.separateEdgesByDirection]),null}const dtt=$.forwardRef(utt);function htt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addEdgeGrouping({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.selector,t.generator,t.groupIdFunction,t.separateEdgesByDirection]),null}$.forwardRef(htt);function ctt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addNodeCollapsing({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.edgeGenerator,t.selector]),null}$.forwardRef(ctt);function gtt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addNeighborMerging({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.dataFunction,t.selector]),null}$.forwardRef(gtt);function ftt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addNeighborGeneration({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.edgeGenerator,t.nodeGenerator,t.neighborIdFunction,t.selector]),null}$.forwardRef(ftt);function mtt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addEdgeFilter({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.criteria]),null}$.forwardRef(mtt);function ptt(t,e){const n=Hn(),[i,s]=$.useState();return $.useImperativeHandle(e,()=>i,[i]),$.useEffect(()=>{const r=n.transformations.addNodeFilter({...t,enabled:!t.disabled});return dl(t,r,n),s(r),()=>{r.destroy(),s(void 0)}},[]),$.useEffect(()=>{i&&ul(i,!!t.disabled,t.duration)},[t.disabled]),$.useEffect(()=>{i==null||i.setOptions(t)},[t.criteria]),null}$.forwardRef(ptt);var Vu={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UO=$;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Di=Object.prototype.hasOwnProperty,_tt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cC={},gC={};function $O(t){return Di.call(gC,t)?!0:Di.call(cC,t)?!1:_tt.test(t)?gC[t]=!0:(cC[t]=!0,!1)}function ki(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ni[t]=new ki(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ni[e]=new ki(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ni[t]=new ki(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ni[t]=new ki(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ni[t]=new ki(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ni[t]=new ki(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ni[t]=new ki(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ni[t]=new ki(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ni[t]=new ki(t,5,!1,t.toLowerCase(),null,!1,!1)});var aE=/[\-:]([a-z])/g;function lE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aE,lE);ni[e]=new ki(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aE,lE);ni[e]=new ki(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aE,lE);ni[e]=new ki(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ni[t]=new ki(t,1,!1,t.toLowerCase(),null,!1,!1)});ni.xlinkHref=new ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ni[t]=new ki(t,1,!1,t.toLowerCase(),null,!0,!0)});var Tf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ytt=["Webkit","ms","Moz","O"];Object.keys(Tf).forEach(function(t){ytt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tf[e]=Tf[t]})});var vtt=/["'&<>]/;function Ti(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=vtt.exec(t);if(e){var n="",i,s=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(n+=t.substring(s,i)),s=i+1,n+=e}t=s!==i?n+t.substring(s,i):n}return t}var xtt=/([A-Z])/g,btt=/^ms-/,bx=Array.isArray;function kr(t,e){return{insertionMode:t,selectedValue:e}}function Ett(t,e,n){switch(e){case"select":return kr(1,n.value!=null?n.value:n.defaultValue);case"svg":return kr(2,null);case"math":return kr(3,null);case"foreignObject":return kr(1,null);case"table":return kr(4,null);case"thead":case"tbody":case"tfoot":return kr(5,null);case"colgroup":return kr(7,null);case"tr":return kr(6,null)}return 4<=t.insertionMode||t.insertionMode===0?kr(1,null):t}var fC=new Map;function jO(t,e,n){if(typeof n!="object")throw Error(ae(62));e=!0;for(var i in n)if(Di.call(n,i)){var s=n[i];if(s!=null&&typeof s!="boolean"&&s!==""){if(i.indexOf("--")===0){var r=Ti(i);s=Ti((""+s).trim())}else{r=i;var o=fC.get(r);o!==void 0||(o=Ti(r.replace(xtt,"-$1").toLowerCase().replace(btt,"-ms-")),fC.set(r,o)),r=o,s=typeof s=="number"?s===0||Di.call(Tf,i)?""+s:s+"px":Ti((""+s).trim())}e?(e=!1,t.push(' style="',r,":",s)):t.push(";",r,":",s)}}e||t.push('"')}function Hi(t,e,n,i){switch(n){case"style":jO(t,e,i);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=ni.hasOwnProperty(n)?ni[n]:null,e!==null){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:i&&t.push(" ",n,'=""');break;case 4:i===!0?t.push(" ",n,'=""'):i!==!1&&t.push(" ",n,'="',Ti(i),'"');break;case 5:isNaN(i)||t.push(" ",n,'="',Ti(i),'"');break;case 6:!isNaN(i)&&1<=i&&t.push(" ",n,'="',Ti(i),'"');break;default:e.sanitizeURL&&(i=""+i),t.push(" ",n,'="',Ti(i),'"')}}else if($O(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',Ti(i),'"')}}}function Cf(t,e,n){if(e!=null){if(n!=null)throw Error(ae(60));if(typeof e!="object"||!("__html"in e))throw Error(ae(61));e=e.__html,e!=null&&t.push(""+e)}}function Stt(t){var e="";return UO.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Wy(t,e,n,i){t.push(tr(n));var s=n=null,r;for(r in e)if(Di.call(e,r)){var o=e[r];if(o!=null)switch(r){case"children":n=o;break;case"dangerouslySetInnerHTML":s=o;break;default:Hi(t,i,r,o)}}return t.push(">"),Cf(t,s,n),typeof n=="string"?(t.push(Ti(n)),null):n}var wtt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,mC=new Map;function tr(t){var e=mC.get(t);if(e===void 0){if(!wtt.test(t))throw Error(ae(65,t));e="<"+t,mC.set(t,e)}return e}function Att(t,e,n,i,s){switch(e){case"select":t.push(tr("select"));var r=null,o=null;for(h in n)if(Di.call(n,h)){var a=n[h];if(a!=null)switch(h){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Hi(t,i,h,a)}}return t.push(">"),Cf(t,o,r),r;case"option":o=s.selectedValue,t.push(tr("option"));var l=a=null,d=null,h=null;for(r in n)if(Di.call(n,r)){var c=n[r];if(c!=null)switch(r){case"children":a=c;break;case"selected":d=c;break;case"dangerouslySetInnerHTML":h=c;break;case"value":l=c;default:Hi(t,i,r,c)}}if(o!=null)if(n=l!==null?""+l:Stt(a),bx(o)){for(i=0;i<o.length;i++)if(""+o[i]===n){t.push(' selected=""');break}}else""+o===n&&t.push(' selected=""');else d&&t.push(' selected=""');return t.push(">"),Cf(t,h,a),a;case"textarea":t.push(tr("textarea")),h=o=r=null;for(a in n)if(Di.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":h=l;break;case"value":r=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(ae(91));default:Hi(t,i,a,l)}if(r===null&&o!==null&&(r=o),t.push(">"),h!=null){if(r!=null)throw Error(ae(92));if(bx(h)&&1<h.length)throw Error(ae(93));r=""+h}return typeof r=="string"&&r[0]===`
`&&t.push(`
`),r!==null&&t.push(Ti(""+r)),null;case"input":t.push(tr("input")),l=h=a=r=null;for(o in n)if(Di.call(n,o)&&(d=n[o],d!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(ae(399,"input"));case"defaultChecked":l=d;break;case"defaultValue":a=d;break;case"checked":h=d;break;case"value":r=d;break;default:Hi(t,i,o,d)}return h!==null?Hi(t,i,"checked",h):l!==null&&Hi(t,i,"checked",l),r!==null?Hi(t,i,"value",r):a!==null&&Hi(t,i,"value",a),t.push("/>"),null;case"menuitem":t.push(tr("menuitem"));for(var g in n)if(Di.call(n,g)&&(r=n[g],r!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(ae(400));default:Hi(t,i,g,r)}return t.push(">"),null;case"title":t.push(tr("title")),r=null;for(c in n)if(Di.call(n,c)&&(o=n[c],o!=null))switch(c){case"children":r=o;break;case"dangerouslySetInnerHTML":throw Error(ae(434));default:Hi(t,i,c,o)}return t.push(">"),r;case"listing":case"pre":t.push(tr(e)),o=r=null;for(l in n)if(Di.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Hi(t,i,l,a)}if(t.push(">"),o!=null){if(r!=null)throw Error(ae(60));if(typeof o!="object"||!("__html"in o))throw Error(ae(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof r=="string"&&r[0]===`
`&&t.push(`
`),r;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(tr(e));for(var m in n)if(Di.call(n,m)&&(r=n[m],r!=null))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(ae(399,e));default:Hi(t,i,m,r)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Wy(t,n,e,i);case"html":return s.insertionMode===0&&t.push("<!DOCTYPE html>"),Wy(t,n,e,i);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Wy(t,n,e,i);t.push(tr(e)),o=r=null;for(d in n)if(Di.call(n,d)&&(a=n[d],a!=null))switch(d){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":jO(t,i,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:$O(d)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",d,'="',Ti(a),'"')}return t.push(">"),Cf(t,o,r),r}}function pC(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(ae(395));return t.push(n),t.push('"></template>')}function Ttt(t,e,n,i){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');default:throw Error(ae(397))}}function Ctt(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(ae(397))}}var Ltt=/[<\u2028\u2029]/g;function Xy(t){return JSON.stringify(t).replace(Ltt,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Ptt(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function _C(t,e,n,i){return n.generateStaticMarkup?(t.push(Ti(e)),!1):(e===""?t=i:(i&&t.push("<!-- -->"),t.push(Ti(e)),t=!0),t)}var gh=Object.assign,ktt=Symbol.for("react.element"),GO=Symbol.for("react.portal"),VO=Symbol.for("react.fragment"),HO=Symbol.for("react.strict_mode"),WO=Symbol.for("react.profiler"),XO=Symbol.for("react.provider"),ZO=Symbol.for("react.context"),YO=Symbol.for("react.forward_ref"),qO=Symbol.for("react.suspense"),JO=Symbol.for("react.suspense_list"),KO=Symbol.for("react.memo"),uE=Symbol.for("react.lazy"),Itt=Symbol.for("react.scope"),Mtt=Symbol.for("react.debug_trace_mode"),Ntt=Symbol.for("react.legacy_hidden"),Rtt=Symbol.for("react.default_value"),yC=Symbol.iterator;function Ex(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case VO:return"Fragment";case GO:return"Portal";case WO:return"Profiler";case HO:return"StrictMode";case qO:return"Suspense";case JO:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZO:return(t.displayName||"Context")+".Consumer";case XO:return(t._context.displayName||"Context")+".Provider";case YO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case KO:return e=t.displayName||null,e!==null?e:Ex(t.type)||"Memo";case uE:e=t._payload,t=t._init;try{return Ex(t(e))}catch{}}return null}var QO={};function vC(t,e){if(t=t.contextTypes,!t)return QO;var n={},i;for(i in t)n[i]=e[i];return n}var Ma=null;function t_(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(ae(401))}else{if(n===null)throw Error(ae(401));t_(t,n)}e.context._currentValue2=e.value}}function tD(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&tD(t)}function eD(t){var e=t.parent;e!==null&&eD(e),t.context._currentValue2=t.value}function nD(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(ae(402));t.depth===e.depth?t_(t,e):nD(t,e)}function iD(t,e){var n=e.parent;if(n===null)throw Error(ae(402));t.depth===n.depth?t_(t,n):iD(t,n),e.context._currentValue2=e.value}function Bm(t){var e=Ma;e!==t&&(e===null?eD(t):t===null?tD(e):e.depth===t.depth?t_(e,t):e.depth>t.depth?nD(e,t):iD(e,t),Ma=t)}var xC={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function bC(t,e,n,i){var s=t.state!==void 0?t.state:null;t.updater=xC,t.props=n,t.state=s;var r={queue:[],replace:!1};t._reactInternals=r;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue2:i,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,s),s=o==null?s:gh({},s,o),t.state=s),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&xC.enqueueReplaceState(t,t.state,null),r.queue!==null&&0<r.queue.length)if(e=r.queue,o=r.replace,r.queue=null,r.replace=!1,o&&e.length===1)t.state=e[0];else{for(r=o?e[0]:t.state,s=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,r,n,i):a,a!=null&&(s?(s=!1,r=gh({},r,a)):gh(r,a))}t.state=r}else r.queue=null}var Ftt={id:1,overflow:""};function Sx(t,e,n){var i=t.id;t=t.overflow;var s=32-Lf(i)-1;i&=~(1<<s),n+=1;var r=32-Lf(e)+s;if(30<r){var o=s-s%5;return r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,{id:1<<32-Lf(e)+s|n<<s|i,overflow:r+t}}return{id:1<<r|n<<s|i,overflow:t}}var Lf=Math.clz32?Math.clz32:ztt,Ott=Math.log,Dtt=Math.LN2;function ztt(t){return t>>>=0,t===0?32:31-(Ott(t)/Dtt|0)|0}function Btt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Utt=typeof Object.is=="function"?Object.is:Btt,Jr=null,dE=null,Pf=null,Be=null,jd=!1,Um=!1,Yh=0,Fo=null,e_=0;function ya(){if(Jr===null)throw Error(ae(321));return Jr}function EC(){if(0<e_)throw Error(ae(312));return{memoizedState:null,queue:null,next:null}}function hE(){return Be===null?Pf===null?(jd=!1,Pf=Be=EC()):(jd=!0,Be=Pf):Be.next===null?(jd=!1,Be=Be.next=EC()):(jd=!0,Be=Be.next),Be}function cE(){dE=Jr=null,Um=!1,Pf=null,e_=0,Be=Fo=null}function sD(t,e){return typeof e=="function"?e(t):e}function SC(t,e,n){if(Jr=ya(),Be=hE(),jd){var i=Be.queue;if(e=i.dispatch,Fo!==null&&(n=Fo.get(i),n!==void 0)){Fo.delete(i),i=Be.memoizedState;do i=t(i,n.action),n=n.next;while(n!==null);return Be.memoizedState=i,[i,e]}return[Be.memoizedState,e]}return t=t===sD?typeof e=="function"?e():e:n!==void 0?n(e):e,Be.memoizedState=t,t=Be.queue={last:null,dispatch:null},t=t.dispatch=$tt.bind(null,Jr,t),[Be.memoizedState,t]}function wC(t,e){if(Jr=ya(),Be=hE(),e=e===void 0?null:e,Be!==null){var n=Be.memoizedState;if(n!==null&&e!==null){var i=n[1];t:if(i===null)i=!1;else{for(var s=0;s<i.length&&s<e.length;s++)if(!Utt(e[s],i[s])){i=!1;break t}i=!0}if(i)return n[0]}}return t=t(),Be.memoizedState=[t,e],t}function $tt(t,e,n){if(25<=e_)throw Error(ae(301));if(t===Jr)if(Um=!0,t={action:n,next:null},Fo===null&&(Fo=new Map),n=Fo.get(e),n===void 0)Fo.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function jtt(){throw Error(ae(394))}function qg(){}var AC={readContext:function(t){return t._currentValue2},useContext:function(t){return ya(),t._currentValue2},useMemo:wC,useReducer:SC,useRef:function(t){Jr=ya(),Be=hE();var e=Be.memoizedState;return e===null?(t={current:t},Be.memoizedState=t):e},useState:function(t){return SC(sD,t)},useInsertionEffect:qg,useLayoutEffect:function(){},useCallback:function(t,e){return wC(function(){return t},e)},useImperativeHandle:qg,useEffect:qg,useDebugValue:qg,useDeferredValue:function(t){return ya(),t},useTransition:function(){return ya(),[!1,jtt]},useId:function(){var t=dE.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Lf(t)-1)).toString(32)+e;var n=kf;if(n===null)throw Error(ae(404));return e=Yh++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return ya(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(ae(407));return n()}},kf=null,Zy=UO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Gtt(t){return console.error(t),null}function Gd(){}function Vtt(t,e,n,i,s,r,o,a,l){var d=[],h=new Set;return e={destination:null,responseState:e,progressiveChunkSize:i===void 0?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:h,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:s===void 0?Gtt:s,onAllReady:Gd,onShellReady:o===void 0?Gd:o,onShellError:Gd,onFatalError:Gd},n=$m(e,0,null,n,!1,!1),n.parentFlushed=!0,t=gE(e,t,null,n,h,QO,null,Ftt),d.push(t),e}function gE(t,e,n,i,s,r,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var d=t.pingedTasks;d.push(l),d.length===1&&aD(t)},blockedBoundary:n,blockedSegment:i,abortSet:s,legacyContext:r,context:o,treeContext:a};return s.add(l),l}function $m(t,e,n,i,s,r){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:s,textEmbedded:r}}function qh(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function jm(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function TC(t,e,n,i,s){for(Jr={},dE=e,Yh=0,t=n(i,s);Um;)Um=!1,Yh=0,e_+=1,Be=null,t=n(i,s);return cE(),t}function CC(t,e,n,i){var s=n.render(),r=i.childContextTypes;if(r!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")i=o;else{n=n.getChildContext();for(var a in n)if(!(a in r))throw Error(ae(108,Ex(i)||"Unknown",a));i=gh({},o,n)}e.legacyContext=i,Yi(t,e,s),e.legacyContext=o}else Yi(t,e,s)}function LC(t,e){if(t&&t.defaultProps){e=gh({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wx(t,e,n,i,s){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){s=vC(n,e.legacyContext);var r=n.contextType;r=new n(i,typeof r=="object"&&r!==null?r._currentValue2:s),bC(r,n,i,s),CC(t,e,r,n)}else{r=vC(n,e.legacyContext),s=TC(t,e,n,i,r);var o=Yh!==0;if(typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0)bC(s,n,i,r),CC(t,e,s,n);else if(o){i=e.treeContext,e.treeContext=Sx(i,1,0);try{Yi(t,e,s)}finally{e.treeContext=i}}else Yi(t,e,s)}else if(typeof n=="string"){switch(s=e.blockedSegment,r=Att(s.chunks,n,i,t.responseState,s.formatContext),s.lastPushedText=!1,o=s.formatContext,s.formatContext=Ett(o,n,i),Ax(t,e,r),s.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push("</",n,">")}s.lastPushedText=!1}else{switch(n){case Ntt:case Mtt:case HO:case WO:case VO:Yi(t,e,i.children);return;case JO:Yi(t,e,i.children);return;case Itt:throw Error(ae(343));case qO:t:{n=e.blockedBoundary,s=e.blockedSegment,r=i.fallback,i=i.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=$m(t,s.chunks.length,a,s.formatContext,!1,!1);s.children.push(l),s.lastPushedText=!1;var d=$m(t,0,null,s.formatContext,!1,!1);d.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=d;try{if(Ax(t,e,i),t.responseState.generateStaticMarkup||d.lastPushedText&&d.textEmbedded&&d.chunks.push("<!-- -->"),d.status=1,Gm(a,d),a.pendingTasks===0)break t}catch(h){d.status=4,a.forceClientRender=!0,a.errorDigest=qh(t,h)}finally{e.blockedBoundary=n,e.blockedSegment=s}e=gE(t,r,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YO:if(i=TC(t,e,n.render,i,s),Yh!==0){n=e.treeContext,e.treeContext=Sx(n,1,0);try{Yi(t,e,i)}finally{e.treeContext=n}}else Yi(t,e,i);return;case KO:n=n.type,i=LC(n,i),wx(t,e,n,i,s);return;case XO:if(s=i.children,n=n._context,i=i.value,r=n._currentValue2,n._currentValue2=i,o=Ma,Ma=i={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:r,value:i},e.context=i,Yi(t,e,s),t=Ma,t===null)throw Error(ae(403));i=t.parentValue,t.context._currentValue2=i===Rtt?t.context._defaultValue:i,t=Ma=t.parent,e.context=t;return;case ZO:i=i.children,i=i(n._currentValue2),Yi(t,e,i);return;case uE:s=n._init,n=s(n._payload),i=LC(n,i),wx(t,e,n,i,void 0);return}throw Error(ae(130,n==null?n:typeof n,""))}}function Yi(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case ktt:wx(t,e,n.type,n.props,n.ref);return;case GO:throw Error(ae(257));case uE:var i=n._init;n=i(n._payload),Yi(t,e,n);return}if(bx(n)){PC(t,e,n);return}if(n===null||typeof n!="object"?i=null:(i=yC&&n[yC]||n["@@iterator"],i=typeof i=="function"?i:null),i&&(i=i.call(n))){if(n=i.next(),!n.done){var s=[];do s.push(n.value),n=i.next();while(!n.done);PC(t,e,s)}return}throw t=Object.prototype.toString.call(n),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(i=e.blockedSegment,i.lastPushedText=_C(e.blockedSegment.chunks,n,t.responseState,i.lastPushedText)):typeof n=="number"&&(i=e.blockedSegment,i.lastPushedText=_C(e.blockedSegment.chunks,""+n,t.responseState,i.lastPushedText))}function PC(t,e,n){for(var i=n.length,s=0;s<i;s++){var r=e.treeContext;e.treeContext=Sx(r,i,s);try{Ax(t,e,n[s])}finally{e.treeContext=r}}}function Ax(t,e,n){var i=e.blockedSegment.formatContext,s=e.legacyContext,r=e.context;try{return Yi(t,e,n)}catch(l){if(cE(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=$m(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=gE(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=i,e.legacyContext=s,e.context=r,Bm(r)}else throw e.blockedSegment.formatContext=i,e.legacyContext=s,e.context=r,Bm(r),l}}function Htt(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,oD(this,e,t)}function rD(t,e,n){var i=t.blockedBoundary;t.blockedSegment.status=3,i===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,t=n===void 0?Error(ae(432)):n,i.errorDigest=e.onError(t),i.parentFlushed&&e.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach(function(s){return rD(s,e,n)}),i.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(i=e.onAllReady,i()))}function Gm(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Gm(t,n)}else t.completedSegments.push(e)}function oD(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(ae(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Gd,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Gm(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(Htt,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Gm(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function aD(t){if(t.status!==2){var e=Ma,n=Zy.current;Zy.current=AC;var i=kf;kf=t.responseState;try{var s=t.pingedTasks,r;for(r=0;r<s.length;r++){var o=s[r],a=t,l=o.blockedSegment;if(l.status===0){Bm(o.context);try{Yi(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,oD(a,o.blockedBoundary,l)}catch(_){if(cE(),typeof _=="object"&&_!==null&&typeof _.then=="function"){var d=o.ping;_.then(d,d)}else{o.abortSet.delete(o),l.status=4;var h=o.blockedBoundary,c=_,g=qh(a,c);if(h===null?jm(a,c):(h.pendingTasks--,h.forceClientRender||(h.forceClientRender=!0,h.errorDigest=g,h.parentFlushed&&a.clientRenderedBoundaries.push(h))),a.allPendingTasks--,a.allPendingTasks===0){var m=a.onAllReady;m()}}}finally{}}}s.splice(0,r),t.destination!==null&&fE(t,t.destination)}catch(_){qh(t,_),jm(t,_)}finally{kf=i,Zy.current=n,n===AC&&Bm(e)}}}function Jg(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=i.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var s=!0;i=n.chunks;var r=0;n=n.children;for(var o=0;o<n.length;o++){for(s=n[o];r<s.index;r++)e.push(i[r]);s=n_(t,e,s)}for(;r<i.length-1;r++)e.push(i[r]);return r<i.length&&(s=e.push(i[r])),s;default:throw Error(ae(390))}}function n_(t,e,n){var i=n.boundary;if(i===null)return Jg(t,e,n);if(i.parentFlushed=!0,i.forceClientRender)return t.responseState.generateStaticMarkup||(i=i.errorDigest,e.push("<!--$!-->"),e.push("<template"),i&&(e.push(' data-dgst="'),i=Ti(i),e.push(i),e.push('"')),e.push("></template>")),Jg(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<i.pendingTasks){i.rootSegmentID=t.nextSegmentId++,0<i.completedSegments.length&&t.partialBoundaries.push(i);var s=t.responseState,r=s.nextSuspenseID++;return s=s.boundaryPrefix+r.toString(16),i=i.id=s,pC(e,t.responseState,i),Jg(t,e,n),e.push("<!--/$-->")}if(i.byteSize>t.progressiveChunkSize)return i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),pC(e,t.responseState,i.id),Jg(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=i.completedSegments,n.length!==1)throw Error(ae(391));return n_(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function kC(t,e,n){return Ttt(e,t.responseState,n.formatContext,n.id),n_(t,e,n),Ctt(e,n.formatContext)}function IC(t,e,n){for(var i=n.completedSegments,s=0;s<i.length;s++)lD(t,e,n,i[s]);if(i.length=0,t=t.responseState,i=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),i===null)throw Error(ae(395));return n=n.toString(16),e.push(i),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function lD(t,e,n,i){if(i.status===2)return!0;var s=i.id;if(s===-1){if((i.id=n.rootSegmentID)===-1)throw Error(ae(392));return kC(t,e,i)}return kC(t,e,i),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),s=s.toString(16),e.push(s),e.push('","'),e.push(t.placeholderPrefix),e.push(s),e.push('")<\/script>')}function fE(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){n_(t,e,n),t.completedRootSegment=null;var i=t.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)e.push(i[n]);n<i.length&&e.push(i[n])}var s=t.clientRenderedBoundaries,r;for(r=0;r<s.length;r++){var o=s[r];i=e;var a=t.responseState,l=o.id,d=o.errorDigest,h=o.errorMessage,c=o.errorComponentStack;if(i.push(a.startInlineScript),a.sentClientRenderFunction?i.push('$RX("'):(a.sentClientRenderFunction=!0,i.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(ae(395));if(i.push(l),i.push('"'),d||h||c){i.push(",");var g=Xy(d||"");i.push(g)}if(h||c){i.push(",");var m=Xy(h||"");i.push(m)}if(c){i.push(",");var _=Xy(c);i.push(_)}if(!i.push(")<\/script>")){t.destination=null,r++,s.splice(0,r);return}}s.splice(0,r);var p=t.completedBoundaries;for(r=0;r<p.length;r++)if(!IC(t,e,p[r])){t.destination=null,r++,p.splice(0,r);return}p.splice(0,r);var v=t.partialBoundaries;for(r=0;r<v.length;r++){var x=v[r];t:{s=t,o=e;var b=x.completedSegments;for(a=0;a<b.length;a++)if(!lD(s,o,x,b[a])){a++,b.splice(0,a);var E=!1;break t}b.splice(0,a),E=!0}if(!E){t.destination=null,r++,v.splice(0,r);return}}v.splice(0,r);var S=t.completedBoundaries;for(r=0;r<S.length;r++)if(!IC(t,e,S[r])){t.destination=null,r++,S.splice(0,r);return}S.splice(0,r)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function Wtt(t,e){try{var n=t.abortableTasks;n.forEach(function(i){return rD(i,t,e)}),n.clear(),t.destination!==null&&fE(t,t.destination)}catch(i){qh(t,i),jm(t,i)}}function Xtt(){}function uD(t,e,n,i){var s=!1,r=null,o="",a={push:function(d){return d!==null&&(o+=d),!0},destroy:function(d){s=!0,r=d}},l=!1;if(t=Vtt(t,Ptt(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Xtt,void 0,function(){l=!0}),aD(t),Wtt(t,i),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{fE(t,a)}catch(d){qh(t,d),jm(t,d)}}if(s)throw r;if(!l)throw Error(ae(426));return o}Vu.renderToNodeStream=function(){throw Error(ae(207))};Vu.renderToStaticMarkup=function(t,e){return uD(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Vu.renderToStaticNodeStream=function(){throw Error(ae(208))};Vu.renderToString=function(t,e){return uD(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Vu.version="18.3.1";var mE={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=$;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qi=null,Ji=0;function Ht(t,e){if(e.length!==0)if(512<e.length)0<Ji&&(t.enqueue(new Uint8Array(qi.buffer,0,Ji)),qi=new Uint8Array(512),Ji=0),t.enqueue(e);else{var n=qi.length-Ji;n<e.length&&(n===0?t.enqueue(qi):(qi.set(e.subarray(0,n),Ji),t.enqueue(qi),e=e.subarray(n)),qi=new Uint8Array(512),Ji=0),qi.set(e,Ji),Ji+=e.length}}function Ye(t,e){return Ht(t,e),!0}function MC(t){qi&&0<Ji&&(t.enqueue(new Uint8Array(qi.buffer,0,Ji)),qi=null,Ji=0)}var hD=new TextEncoder;function me(t){return hD.encode(t)}function zt(t){return hD.encode(t)}function cD(t,e){typeof t.error=="function"?t.error(e):t.close()}var zi=Object.prototype.hasOwnProperty,Ztt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NC={},RC={};function gD(t){return zi.call(RC,t)?!0:zi.call(NC,t)?!1:Ztt.test(t)?RC[t]=!0:(NC[t]=!0,!1)}function Ii(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ii={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ii[t]=new Ii(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ii[e]=new Ii(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ii[t]=new Ii(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ii[t]=new Ii(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ii[t]=new Ii(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ii[t]=new Ii(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ii[t]=new Ii(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ii[t]=new Ii(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ii[t]=new Ii(t,5,!1,t.toLowerCase(),null,!1,!1)});var pE=/[\-:]([a-z])/g;function _E(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pE,_E);ii[e]=new Ii(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pE,_E);ii[e]=new Ii(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pE,_E);ii[e]=new Ii(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ii[t]=new Ii(t,1,!1,t.toLowerCase(),null,!1,!1)});ii.xlinkHref=new Ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ii[t]=new Ii(t,1,!1,t.toLowerCase(),null,!0,!0)});var If={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ytt=["Webkit","ms","Moz","O"];Object.keys(If).forEach(function(t){Ytt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),If[e]=If[t]})});var qtt=/["'&<>]/;function Jn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=qtt.exec(t);if(e){var n="",i,s=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(n+=t.substring(s,i)),s=i+1,n+=e}t=s!==i?n+t.substring(s,i):n}return t}var Jtt=/([A-Z])/g,Ktt=/^ms-/,Tx=Array.isArray,Qtt=zt("<script>"),tet=zt("<\/script>"),eet=zt('<script src="'),net=zt('<script type="module" src="'),FC=zt('" async=""><\/script>'),iet=/(<\/|<)(s)(cript)/gi;function set(t,e,n,i){return""+e+(n==="s"?"\\u0073":"\\u0053")+i}function ret(t,e,n,i,s){t=t===void 0?"":t,e=e===void 0?Qtt:zt('<script nonce="'+Jn(e)+'">');var r=[];if(n!==void 0&&r.push(e,me((""+n).replace(iet,set)),tet),i!==void 0)for(n=0;n<i.length;n++)r.push(eet,me(Jn(i[n])),FC);if(s!==void 0)for(i=0;i<s.length;i++)r.push(net,me(Jn(s[i])),FC);return{bootstrapChunks:r,startInlineScript:e,placeholderPrefix:zt(t+"P:"),segmentPrefix:zt(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function er(t,e){return{insertionMode:t,selectedValue:e}}function oet(t){return er(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function aet(t,e,n){switch(e){case"select":return er(1,n.value!=null?n.value:n.defaultValue);case"svg":return er(2,null);case"math":return er(3,null);case"foreignObject":return er(1,null);case"table":return er(4,null);case"thead":case"tbody":case"tfoot":return er(5,null);case"colgroup":return er(7,null);case"tr":return er(6,null)}return 4<=t.insertionMode||t.insertionMode===0?er(1,null):t}var yE=zt("<!-- -->");function OC(t,e,n,i){return e===""?i:(i&&t.push(yE),t.push(me(Jn(e))),!0)}var DC=new Map,uet=zt(' style="'),zC=zt(":"),det=zt(";");function fD(t,e,n){if(typeof n!="object")throw Error(ce(62));e=!0;for(var i in n)if(zi.call(n,i)){var s=n[i];if(s!=null&&typeof s!="boolean"&&s!==""){if(i.indexOf("--")===0){var r=me(Jn(i));s=me(Jn((""+s).trim()))}else{r=i;var o=DC.get(r);o!==void 0||(o=zt(Jn(r.replace(Jtt,"-$1").toLowerCase().replace(Ktt,"-ms-"))),DC.set(r,o)),r=o,s=typeof s=="number"?s===0||zi.call(If,i)?me(""+s):me(s+"px"):me(Jn((""+s).trim()))}e?(e=!1,t.push(uet,r,zC,s)):t.push(det,r,zC,s)}}e||t.push(va)}var xo=zt(" "),Rl=zt('="'),va=zt('"'),BC=zt('=""');function Wi(t,e,n,i){switch(n){case"style":fD(t,e,i);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=ii.hasOwnProperty(n)?ii[n]:null,e!==null){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=me(e.attributeName),e.type){case 3:i&&t.push(xo,n,BC);break;case 4:i===!0?t.push(xo,n,BC):i!==!1&&t.push(xo,n,Rl,me(Jn(i)),va);break;case 5:isNaN(i)||t.push(xo,n,Rl,me(Jn(i)),va);break;case 6:!isNaN(i)&&1<=i&&t.push(xo,n,Rl,me(Jn(i)),va);break;default:e.sanitizeURL&&(i=""+i),t.push(xo,n,Rl,me(Jn(i)),va)}}else if(gD(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(xo,me(n),Rl,me(Jn(i)),va)}}}var bo=zt(">"),UC=zt("/>");function Mf(t,e,n){if(e!=null){if(n!=null)throw Error(ce(60));if(typeof e!="object"||!("__html"in e))throw Error(ce(61));e=e.__html,e!=null&&t.push(me(""+e))}}function het(t){var e="";return dD.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var Yy=zt(' selected=""');function qy(t,e,n,i){t.push(nr(n));var s=n=null,r;for(r in e)if(zi.call(e,r)){var o=e[r];if(o!=null)switch(r){case"children":n=o;break;case"dangerouslySetInnerHTML":s=o;break;default:Wi(t,i,r,o)}}return t.push(bo),Mf(t,s,n),typeof n=="string"?(t.push(me(Jn(n))),null):n}var Jy=zt(`
`),cet=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$C=new Map;function nr(t){var e=$C.get(t);if(e===void 0){if(!cet.test(t))throw Error(ce(65,t));e=zt("<"+t),$C.set(t,e)}return e}var get=zt("<!DOCTYPE html>");function fet(t,e,n,i,s){switch(e){case"select":t.push(nr("select"));var r=null,o=null;for(h in n)if(zi.call(n,h)){var a=n[h];if(a!=null)switch(h){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Wi(t,i,h,a)}}return t.push(bo),Mf(t,o,r),r;case"option":o=s.selectedValue,t.push(nr("option"));var l=a=null,d=null,h=null;for(r in n)if(zi.call(n,r)){var c=n[r];if(c!=null)switch(r){case"children":a=c;break;case"selected":d=c;break;case"dangerouslySetInnerHTML":h=c;break;case"value":l=c;default:Wi(t,i,r,c)}}if(o!=null)if(n=l!==null?""+l:het(a),Tx(o)){for(i=0;i<o.length;i++)if(""+o[i]===n){t.push(Yy);break}}else""+o===n&&t.push(Yy);else d&&t.push(Yy);return t.push(bo),Mf(t,h,a),a;case"textarea":t.push(nr("textarea")),h=o=r=null;for(a in n)if(zi.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":h=l;break;case"value":r=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(ce(91));default:Wi(t,i,a,l)}if(r===null&&o!==null&&(r=o),t.push(bo),h!=null){if(r!=null)throw Error(ce(92));if(Tx(h)&&1<h.length)throw Error(ce(93));r=""+h}return typeof r=="string"&&r[0]===`
`&&t.push(Jy),r!==null&&t.push(me(Jn(""+r))),null;case"input":t.push(nr("input")),l=h=a=r=null;for(o in n)if(zi.call(n,o)&&(d=n[o],d!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(ce(399,"input"));case"defaultChecked":l=d;break;case"defaultValue":a=d;break;case"checked":h=d;break;case"value":r=d;break;default:Wi(t,i,o,d)}return h!==null?Wi(t,i,"checked",h):l!==null&&Wi(t,i,"checked",l),r!==null?Wi(t,i,"value",r):a!==null&&Wi(t,i,"value",a),t.push(UC),null;case"menuitem":t.push(nr("menuitem"));for(var g in n)if(zi.call(n,g)&&(r=n[g],r!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(ce(400));default:Wi(t,i,g,r)}return t.push(bo),null;case"title":t.push(nr("title")),r=null;for(c in n)if(zi.call(n,c)&&(o=n[c],o!=null))switch(c){case"children":r=o;break;case"dangerouslySetInnerHTML":throw Error(ce(434));default:Wi(t,i,c,o)}return t.push(bo),r;case"listing":case"pre":t.push(nr(e)),o=r=null;for(l in n)if(zi.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Wi(t,i,l,a)}if(t.push(bo),o!=null){if(r!=null)throw Error(ce(60));if(typeof o!="object"||!("__html"in o))throw Error(ce(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Jy,me(n)):t.push(me(""+n)))}return typeof r=="string"&&r[0]===`
`&&t.push(Jy),r;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(nr(e));for(var m in n)if(zi.call(n,m)&&(r=n[m],r!=null))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(ce(399,e));default:Wi(t,i,m,r)}return t.push(UC),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return qy(t,n,e,i);case"html":return s.insertionMode===0&&t.push(get),qy(t,n,e,i);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return qy(t,n,e,i);t.push(nr(e)),o=r=null;for(d in n)if(zi.call(n,d)&&(a=n[d],a!=null))switch(d){case"children":r=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":fD(t,i,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:gD(d)&&typeof a!="function"&&typeof a!="symbol"&&t.push(xo,me(d),Rl,me(Jn(a)),va)}return t.push(bo),Mf(t,o,r),r}}var met=zt("</"),pet=zt(">"),_et=zt('<template id="'),yet=zt('"></template>'),vet=zt("<!--$-->"),xet=zt('<!--$?--><template id="'),bet=zt('"></template>'),Eet=zt("<!--$!-->"),wet=zt("<!--/$-->"),Aet=zt("<template"),Tet=zt('"'),Cet=zt(' data-dgst="');zt(' data-msg="');zt(' data-stck="');var Let=zt("></template>");function jC(t,e,n){if(Ht(t,xet),n===null)throw Error(ce(395));return Ht(t,n),Ye(t,bet)}var Pet=zt('<div hidden id="'),ket=zt('">'),Iet=zt("</div>"),Met=zt('<svg aria-hidden="true" style="display:none" id="'),Net=zt('">'),Ret=zt("</svg>"),Fet=zt('<math aria-hidden="true" style="display:none" id="'),Oet=zt('">'),Det=zt("</math>"),zet=zt('<table hidden id="'),Bet=zt('">'),Uet=zt("</table>"),$et=zt('<table hidden><tbody id="'),jet=zt('">'),Get=zt("</tbody></table>"),Vet=zt('<table hidden><tr id="'),Het=zt('">'),Wet=zt("</tr></table>"),Xet=zt('<table hidden><colgroup id="'),Zet=zt('">'),Yet=zt("</colgroup></table>");function qet(t,e,n,i){switch(n.insertionMode){case 0:case 1:return Ht(t,Pet),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,ket);case 2:return Ht(t,Met),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,Net);case 3:return Ht(t,Fet),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,Oet);case 4:return Ht(t,zet),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,Bet);case 5:return Ht(t,$et),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,jet);case 6:return Ht(t,Vet),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,Het);case 7:return Ht(t,Xet),Ht(t,e.segmentPrefix),Ht(t,me(i.toString(16))),Ye(t,Zet);default:throw Error(ce(397))}}function Jet(t,e){switch(e.insertionMode){case 0:case 1:return Ye(t,Iet);case 2:return Ye(t,Ret);case 3:return Ye(t,Det);case 4:return Ye(t,Uet);case 5:return Ye(t,Get);case 6:return Ye(t,Wet);case 7:return Ye(t,Yet);default:throw Error(ce(397))}}var Ket=zt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Qet=zt('$RS("'),tnt=zt('","'),ent=zt('")<\/script>'),nnt=zt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),int=zt('$RC("'),snt=zt('","'),rnt=zt('")<\/script>'),ont=zt('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),ant=zt('$RX("'),lnt=zt('"'),unt=zt(")<\/script>"),Ky=zt(","),dnt=/[<\u2028\u2029]/g;function Qy(t){return JSON.stringify(t).replace(dnt,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var fh=Object.assign,hnt=Symbol.for("react.element"),mD=Symbol.for("react.portal"),pD=Symbol.for("react.fragment"),_D=Symbol.for("react.strict_mode"),yD=Symbol.for("react.profiler"),vD=Symbol.for("react.provider"),xD=Symbol.for("react.context"),bD=Symbol.for("react.forward_ref"),ED=Symbol.for("react.suspense"),SD=Symbol.for("react.suspense_list"),wD=Symbol.for("react.memo"),vE=Symbol.for("react.lazy"),cnt=Symbol.for("react.scope"),gnt=Symbol.for("react.debug_trace_mode"),fnt=Symbol.for("react.legacy_hidden"),mnt=Symbol.for("react.default_value"),GC=Symbol.iterator;function Cx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pD:return"Fragment";case mD:return"Portal";case yD:return"Profiler";case _D:return"StrictMode";case ED:return"Suspense";case SD:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xD:return(t.displayName||"Context")+".Consumer";case vD:return(t._context.displayName||"Context")+".Provider";case bD:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wD:return e=t.displayName||null,e!==null?e:Cx(t.type)||"Memo";case vE:e=t._payload,t=t._init;try{return Cx(t(e))}catch{}}return null}var AD={};function VC(t,e){if(t=t.contextTypes,!t)return AD;var n={},i;for(i in t)n[i]=e[i];return n}var Na=null;function i_(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(ce(401))}else{if(n===null)throw Error(ce(401));i_(t,n)}e.context._currentValue=e.value}}function TD(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&TD(t)}function CD(t){var e=t.parent;e!==null&&CD(e),t.context._currentValue=t.value}function LD(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(ce(402));t.depth===e.depth?i_(t,e):LD(t,e)}function PD(t,e){var n=e.parent;if(n===null)throw Error(ce(402));t.depth===n.depth?i_(t,n):PD(t,n),e.context._currentValue=e.value}function Vm(t){var e=Na;e!==t&&(e===null?CD(t):t===null?TD(e):e.depth===t.depth?i_(e,t):e.depth>t.depth?LD(e,t):PD(e,t),Na=t)}var HC={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function WC(t,e,n,i){var s=t.state!==void 0?t.state:null;t.updater=HC,t.props=n,t.state=s;var r={queue:[],replace:!1};t._reactInternals=r;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue:i,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,s),s=o==null?s:fh({},s,o),t.state=s),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&HC.enqueueReplaceState(t,t.state,null),r.queue!==null&&0<r.queue.length)if(e=r.queue,o=r.replace,r.queue=null,r.replace=!1,o&&e.length===1)t.state=e[0];else{for(r=o?e[0]:t.state,s=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,r,n,i):a,a!=null&&(s?(s=!1,r=fh({},r,a)):fh(r,a))}t.state=r}else r.queue=null}var pnt={id:1,overflow:""};function Lx(t,e,n){var i=t.id;t=t.overflow;var s=32-Nf(i)-1;i&=~(1<<s),n+=1;var r=32-Nf(e)+s;if(30<r){var o=s-s%5;return r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,{id:1<<32-Nf(e)+s|n<<s|i,overflow:r+t}}return{id:1<<r|n<<s|i,overflow:t}}var Nf=Math.clz32?Math.clz32:vnt,_nt=Math.log,ynt=Math.LN2;function vnt(t){return t>>>=0,t===0?32:31-(_nt(t)/ynt|0)|0}function xnt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bnt=typeof Object.is=="function"?Object.is:xnt,Kr=null,xE=null,Rf=null,Ue=null,Vd=!1,Hm=!1,Jh=0,Oo=null,s_=0;function xa(){if(Kr===null)throw Error(ce(321));return Kr}function XC(){if(0<s_)throw Error(ce(312));return{memoizedState:null,queue:null,next:null}}function bE(){return Ue===null?Rf===null?(Vd=!1,Rf=Ue=XC()):(Vd=!0,Ue=Rf):Ue.next===null?(Vd=!1,Ue=Ue.next=XC()):(Vd=!0,Ue=Ue.next),Ue}function EE(){xE=Kr=null,Hm=!1,Rf=null,s_=0,Ue=Oo=null}function kD(t,e){return typeof e=="function"?e(t):e}function ZC(t,e,n){if(Kr=xa(),Ue=bE(),Vd){var i=Ue.queue;if(e=i.dispatch,Oo!==null&&(n=Oo.get(i),n!==void 0)){Oo.delete(i),i=Ue.memoizedState;do i=t(i,n.action),n=n.next;while(n!==null);return Ue.memoizedState=i,[i,e]}return[Ue.memoizedState,e]}return t=t===kD?typeof e=="function"?e():e:n!==void 0?n(e):e,Ue.memoizedState=t,t=Ue.queue={last:null,dispatch:null},t=t.dispatch=Ent.bind(null,Kr,t),[Ue.memoizedState,t]}function YC(t,e){if(Kr=xa(),Ue=bE(),e=e===void 0?null:e,Ue!==null){var n=Ue.memoizedState;if(n!==null&&e!==null){var i=n[1];t:if(i===null)i=!1;else{for(var s=0;s<i.length&&s<e.length;s++)if(!bnt(e[s],i[s])){i=!1;break t}i=!0}if(i)return n[0]}}return t=t(),Ue.memoizedState=[t,e],t}function Ent(t,e,n){if(25<=s_)throw Error(ce(301));if(t===Kr)if(Hm=!0,t={action:n,next:null},Oo===null&&(Oo=new Map),n=Oo.get(e),n===void 0)Oo.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function Snt(){throw Error(ce(394))}function Kg(){}var qC={readContext:function(t){return t._currentValue},useContext:function(t){return xa(),t._currentValue},useMemo:YC,useReducer:ZC,useRef:function(t){Kr=xa(),Ue=bE();var e=Ue.memoizedState;return e===null?(t={current:t},Ue.memoizedState=t):e},useState:function(t){return ZC(kD,t)},useInsertionEffect:Kg,useLayoutEffect:function(){},useCallback:function(t,e){return YC(function(){return t},e)},useImperativeHandle:Kg,useEffect:Kg,useDebugValue:Kg,useDeferredValue:function(t){return xa(),t},useTransition:function(){return xa(),[!1,Snt]},useId:function(){var t=xE.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Nf(t)-1)).toString(32)+e;var n=Ff;if(n===null)throw Error(ce(404));return e=Jh++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return xa(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(ce(407));return n()}},Ff=null,t0=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function wnt(t){return console.error(t),null}function Hd(){}function Ant(t,e,n,i,s,r,o,a,l){var d=[],h=new Set;return e={destination:null,responseState:e,progressiveChunkSize:i===void 0?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:h,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:s===void 0?wnt:s,onAllReady:r===void 0?Hd:r,onShellReady:o===void 0?Hd:o,onShellError:a===void 0?Hd:a,onFatalError:l===void 0?Hd:l},n=Wm(e,0,null,n,!1,!1),n.parentFlushed=!0,t=SE(e,t,null,n,h,AD,null,pnt),d.push(t),e}function SE(t,e,n,i,s,r,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var d=t.pingedTasks;d.push(l),d.length===1&&ND(t)},blockedBoundary:n,blockedSegment:i,abortSet:s,legacyContext:r,context:o,treeContext:a};return s.add(l),l}function Wm(t,e,n,i,s,r){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:s,textEmbedded:r}}function Kh(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Xm(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,cD(t.destination,e)):(t.status=1,t.fatalError=e)}function JC(t,e,n,i,s){for(Kr={},xE=e,Jh=0,t=n(i,s);Hm;)Hm=!1,Jh=0,s_+=1,Ue=null,t=n(i,s);return EE(),t}function KC(t,e,n,i){var s=n.render(),r=i.childContextTypes;if(r!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")i=o;else{n=n.getChildContext();for(var a in n)if(!(a in r))throw Error(ce(108,Cx(i)||"Unknown",a));i=fh({},o,n)}e.legacyContext=i,Ki(t,e,s),e.legacyContext=o}else Ki(t,e,s)}function QC(t,e){if(t&&t.defaultProps){e=fh({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Px(t,e,n,i,s){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){s=VC(n,e.legacyContext);var r=n.contextType;r=new n(i,typeof r=="object"&&r!==null?r._currentValue:s),WC(r,n,i,s),KC(t,e,r,n)}else{r=VC(n,e.legacyContext),s=JC(t,e,n,i,r);var o=Jh!==0;if(typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0)WC(s,n,i,r),KC(t,e,s,n);else if(o){i=e.treeContext,e.treeContext=Lx(i,1,0);try{Ki(t,e,s)}finally{e.treeContext=i}}else Ki(t,e,s)}else if(typeof n=="string"){switch(s=e.blockedSegment,r=fet(s.chunks,n,i,t.responseState,s.formatContext),s.lastPushedText=!1,o=s.formatContext,s.formatContext=aet(o,n,i),kx(t,e,r),s.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push(met,me(n),pet)}s.lastPushedText=!1}else{switch(n){case fnt:case gnt:case _D:case yD:case pD:Ki(t,e,i.children);return;case SD:Ki(t,e,i.children);return;case cnt:throw Error(ce(343));case ED:t:{n=e.blockedBoundary,s=e.blockedSegment,r=i.fallback,i=i.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Wm(t,s.chunks.length,a,s.formatContext,!1,!1);s.children.push(l),s.lastPushedText=!1;var d=Wm(t,0,null,s.formatContext,!1,!1);d.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=d;try{if(kx(t,e,i),d.lastPushedText&&d.textEmbedded&&d.chunks.push(yE),d.status=1,Zm(a,d),a.pendingTasks===0)break t}catch(h){d.status=4,a.forceClientRender=!0,a.errorDigest=Kh(t,h)}finally{e.blockedBoundary=n,e.blockedSegment=s}e=SE(t,r,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bD:if(i=JC(t,e,n.render,i,s),Jh!==0){n=e.treeContext,e.treeContext=Lx(n,1,0);try{Ki(t,e,i)}finally{e.treeContext=n}}else Ki(t,e,i);return;case wD:n=n.type,i=QC(n,i),Px(t,e,n,i,s);return;case vD:if(s=i.children,n=n._context,i=i.value,r=n._currentValue,n._currentValue=i,o=Na,Na=i={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:r,value:i},e.context=i,Ki(t,e,s),t=Na,t===null)throw Error(ce(403));i=t.parentValue,t.context._currentValue=i===mnt?t.context._defaultValue:i,t=Na=t.parent,e.context=t;return;case xD:i=i.children,i=i(n._currentValue),Ki(t,e,i);return;case vE:s=n._init,n=s(n._payload),i=QC(n,i),Px(t,e,n,i,void 0);return}throw Error(ce(130,n==null?n:typeof n,""))}}function Ki(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case hnt:Px(t,e,n.type,n.props,n.ref);return;case mD:throw Error(ce(257));case vE:var i=n._init;n=i(n._payload),Ki(t,e,n);return}if(Tx(n)){tL(t,e,n);return}if(n===null||typeof n!="object"?i=null:(i=GC&&n[GC]||n["@@iterator"],i=typeof i=="function"?i:null),i&&(i=i.call(n))){if(n=i.next(),!n.done){var s=[];do s.push(n.value),n=i.next();while(!n.done);tL(t,e,s)}return}throw t=Object.prototype.toString.call(n),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(i=e.blockedSegment,i.lastPushedText=OC(e.blockedSegment.chunks,n,t.responseState,i.lastPushedText)):typeof n=="number"&&(i=e.blockedSegment,i.lastPushedText=OC(e.blockedSegment.chunks,""+n,t.responseState,i.lastPushedText))}function tL(t,e,n){for(var i=n.length,s=0;s<i;s++){var r=e.treeContext;e.treeContext=Lx(r,i,s);try{kx(t,e,n[s])}finally{e.treeContext=r}}}function kx(t,e,n){var i=e.blockedSegment.formatContext,s=e.legacyContext,r=e.context;try{return Ki(t,e,n)}catch(l){if(EE(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=Wm(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=SE(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=i,e.legacyContext=s,e.context=r,Vm(r)}else throw e.blockedSegment.formatContext=i,e.legacyContext=s,e.context=r,Vm(r),l}}function Tnt(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,MD(this,e,t)}function ID(t,e,n){var i=t.blockedBoundary;t.blockedSegment.status=3,i===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,t=n===void 0?Error(ce(432)):n,i.errorDigest=e.onError(t),i.parentFlushed&&e.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach(function(s){return ID(s,e,n)}),i.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(i=e.onAllReady,i()))}function Zm(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Zm(t,n)}else t.completedSegments.push(e)}function MD(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(ce(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Hd,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Zm(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(Tnt,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Zm(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function ND(t){if(t.status!==2){var e=Na,n=t0.current;t0.current=qC;var i=Ff;Ff=t.responseState;try{var s=t.pingedTasks,r;for(r=0;r<s.length;r++){var o=s[r],a=t,l=o.blockedSegment;if(l.status===0){Vm(o.context);try{Ki(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(yE),o.abortSet.delete(o),l.status=1,MD(a,o.blockedBoundary,l)}catch(_){if(EE(),typeof _=="object"&&_!==null&&typeof _.then=="function"){var d=o.ping;_.then(d,d)}else{o.abortSet.delete(o),l.status=4;var h=o.blockedBoundary,c=_,g=Kh(a,c);if(h===null?Xm(a,c):(h.pendingTasks--,h.forceClientRender||(h.forceClientRender=!0,h.errorDigest=g,h.parentFlushed&&a.clientRenderedBoundaries.push(h))),a.allPendingTasks--,a.allPendingTasks===0){var m=a.onAllReady;m()}}}finally{}}}s.splice(0,r),t.destination!==null&&wE(t,t.destination)}catch(_){Kh(t,_),Xm(t,_)}finally{Ff=i,t0.current=n,n===qC&&Vm(e)}}}function Qg(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,Ht(e,_et),Ht(e,t.placeholderPrefix),t=me(i.toString(16)),Ht(e,t),Ye(e,yet);case 1:n.status=2;var s=!0;i=n.chunks;var r=0;n=n.children;for(var o=0;o<n.length;o++){for(s=n[o];r<s.index;r++)Ht(e,i[r]);s=r_(t,e,s)}for(;r<i.length-1;r++)Ht(e,i[r]);return r<i.length&&(s=Ye(e,i[r])),s;default:throw Error(ce(390))}}function r_(t,e,n){var i=n.boundary;if(i===null)return Qg(t,e,n);if(i.parentFlushed=!0,i.forceClientRender)i=i.errorDigest,Ye(e,Eet),Ht(e,Aet),i&&(Ht(e,Cet),Ht(e,me(Jn(i))),Ht(e,Tet)),Ye(e,Let),Qg(t,e,n);else if(0<i.pendingTasks){i.rootSegmentID=t.nextSegmentId++,0<i.completedSegments.length&&t.partialBoundaries.push(i);var s=t.responseState,r=s.nextSuspenseID++;s=zt(s.boundaryPrefix+r.toString(16)),i=i.id=s,jC(e,t.responseState,i),Qg(t,e,n)}else if(i.byteSize>t.progressiveChunkSize)i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),jC(e,t.responseState,i.id),Qg(t,e,n);else{if(Ye(e,vet),n=i.completedSegments,n.length!==1)throw Error(ce(391));r_(t,e,n[0])}return Ye(e,wet)}function eL(t,e,n){return qet(e,t.responseState,n.formatContext,n.id),r_(t,e,n),Jet(e,n.formatContext)}function nL(t,e,n){for(var i=n.completedSegments,s=0;s<i.length;s++)RD(t,e,n,i[s]);if(i.length=0,t=t.responseState,i=n.id,n=n.rootSegmentID,Ht(e,t.startInlineScript),t.sentCompleteBoundaryFunction?Ht(e,int):(t.sentCompleteBoundaryFunction=!0,Ht(e,nnt)),i===null)throw Error(ce(395));return n=me(n.toString(16)),Ht(e,i),Ht(e,snt),Ht(e,t.segmentPrefix),Ht(e,n),Ye(e,rnt)}function RD(t,e,n,i){if(i.status===2)return!0;var s=i.id;if(s===-1){if((i.id=n.rootSegmentID)===-1)throw Error(ce(392));return eL(t,e,i)}return eL(t,e,i),t=t.responseState,Ht(e,t.startInlineScript),t.sentCompleteSegmentFunction?Ht(e,Qet):(t.sentCompleteSegmentFunction=!0,Ht(e,Ket)),Ht(e,t.segmentPrefix),s=me(s.toString(16)),Ht(e,s),Ht(e,tnt),Ht(e,t.placeholderPrefix),Ht(e,s),Ye(e,ent)}function wE(t,e){qi=new Uint8Array(512),Ji=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){r_(t,e,n),t.completedRootSegment=null;var i=t.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)Ht(e,i[n]);n<i.length&&Ye(e,i[n])}var s=t.clientRenderedBoundaries,r;for(r=0;r<s.length;r++){var o=s[r];i=e;var a=t.responseState,l=o.id,d=o.errorDigest,h=o.errorMessage,c=o.errorComponentStack;if(Ht(i,a.startInlineScript),a.sentClientRenderFunction?Ht(i,ant):(a.sentClientRenderFunction=!0,Ht(i,ont)),l===null)throw Error(ce(395));Ht(i,l),Ht(i,lnt),(d||h||c)&&(Ht(i,Ky),Ht(i,me(Qy(d||"")))),(h||c)&&(Ht(i,Ky),Ht(i,me(Qy(h||"")))),c&&(Ht(i,Ky),Ht(i,me(Qy(c)))),Ye(i,unt)}s.splice(0,r);var g=t.completedBoundaries;for(r=0;r<g.length;r++)nL(t,e,g[r]);g.splice(0,r),MC(e),qi=new Uint8Array(512),Ji=0;var m=t.partialBoundaries;for(r=0;r<m.length;r++){var _=m[r];t:{s=t,o=e;var p=_.completedSegments;for(a=0;a<p.length;a++)if(!RD(s,o,_,p[a])){a++,p.splice(0,a);var v=!1;break t}p.splice(0,a),v=!0}if(!v){t.destination=null,r++,m.splice(0,r);return}}m.splice(0,r);var x=t.completedBoundaries;for(r=0;r<x.length;r++)nL(t,e,x[r]);x.splice(0,r)}finally{MC(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function iL(t,e){try{var n=t.abortableTasks;n.forEach(function(i){return ID(i,t,e)}),n.clear(),t.destination!==null&&wE(t,t.destination)}catch(i){Kh(t,i),Xm(t,i)}}mE.renderToReadableStream=function(t,e){return new Promise(function(n,i){var s,r,o=new Promise(function(h,c){r=h,s=c}),a=Ant(t,ret(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),oet(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,r,function(){var h=new ReadableStream({type:"bytes",pull:function(c){if(a.status===1)a.status=2,cD(c,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=c;try{wE(a,c)}catch(g){Kh(a,g),Xm(a,g)}}},cancel:function(){iL(a)}},{highWaterMark:0});h.allReady=o,n(h)},function(h){o.catch(function(){}),i(h)},s);if(e&&e.signal){var l=e.signal,d=function(){iL(a,l.reason),l.removeEventListener("abort",d)};l.addEventListener("abort",d)}ND(a)})};mE.version="18.3.1";var Hu,FD;Hu=Vu,FD=mE;Hu.version;var Ix=Hu.renderToString;Hu.renderToStaticMarkup;Hu.renderToNodeStream;Hu.renderToStaticNodeStream;FD.renderToReadableStream;function Mx(t,e,n,i){return typeof n=="string"?n:Ix(typeof n=="function"?n(t,e):i)}function Ou(t,e){return typeof t=="function"?t(e):t}const Ym=(t,e)=>`${t} ${t}--${e}`;function sL(t="&times;",e){if(t){const n=typeof t=="string"?t:Ix(t);return`<div class=${e}>${n}</div>`}return""}function Cnt(t,e,n,i){const{width:s,height:r}=i.view.getSize(),{x:o,y:a}=i.view.graphToScreenCoordinates(t);let l=e;const{width:d,height:h}=n;return e==="left"&&o-d<0?l="right":e==="right"&&o+d>s?l="left":e==="bottom"&&a+h>r?l="top":e==="top"&&a-h<0&&(l="bottom"),l==="right"||l==="left"?a+h/2>r?l="top":a-h/2<0&&(l="bottom"):o+d/2>s?l="left":o-d/2<0&&(l="right"),l}function Lnt(){}const e0={x:-9999,y:-9999},Pnt="ogma-popup--content",knt="ogma-popup--close",Int="ogma-popup--body",Mnt="ogma-popup",Nnt=({content:t,position:e,children:n,isOpen:i=!0,closeButton:s,onClose:r=Lnt,placement:o="top",popupClass:a=Mnt,closeButtonClass:l=knt,contentClass:d=Pnt,popupBodyClass:h=Int,size:c,closeOnEsc:g=!0},m)=>{const _=Hn(),[p,v]=$.useState(null);return $.useImperativeHandle(m,()=>p,[p]),$.useEffect(()=>{const x=Ou(e,_)||e0,b=Mx(_,x,t,n),E=_.layers.addOverlay({position:x||e0,element:`<div class="${Ym(a,o)}"/>
          <div class="${h}">
            ${sL(s,l)}
            <div class="${d} ">${b}</div>
          </div>
        </div>`,size:c||{width:"auto",height:"auto"},scaled:!1}),S=T=>{const P=E.element.querySelector(`.${l}`);T.target&&P.contains(T.target)&&(T.stopPropagation(),T.preventDefault(),r())},A=({code:T})=>{T===27&&r()};return g&&_.events.on("keyup",A),E.element.addEventListener("click",S),v(E),i||E.hide(),()=>{p&&(p.element.removeEventListener("click",S),_.events.off(A),p.destroy(),v(null))}},[]),$.useEffect(()=>{if(p){const x=Ou(e,_)||e0,b=Mx(_,x,t),{element:E}=p;E.className=Ym(a,o),E.querySelector(`.${h}`).innerHTML=`
      ${sL(s,l)}
      <div class="${d} ">${b}</div>`,p.setPosition(x),i?p.show():p.hide()}},[t,e,i,o]),!p||!n?null:Uu.createPortal(n,p.element.querySelector(`.${h}`))},Rnt=$.forwardRef(Nnt),Fnt=({tooltipClass:t="ogma-tooltip",placement:e="right",position:n,size:i={width:"auto",height:"auto"},children:s,content:r,visible:o=!0},a)=>{const l=Hn(),[d,h]=$.useState(),[c,g]=$.useState(),[m,_]=$.useState(""),[p,v]=$.useState(),x=$.useRef();return $.useImperativeHandle(a,()=>d,[d]),$.useEffect(()=>{const E=`<div class="${Ym(t,e)}"><div class="${t}--content" /></div>`,S=Ou(n,l);g(S);const A=l.layers.addOverlay({position:S||{x:-9999,y:-9999},element:E,scaled:!1,size:i});return h(A),()=>{A.destroy()}},[]),$.useEffect(()=>{const b=Mx(l,c,r,s);if(d){b!==m&&(d.element.firstElementChild.innerHTML=b,_(b),v({width:d.element.offsetWidth,height:d.element.offsetHeight}));const E=Ou(n,l);c!==E&&g(E),o?d.show():d.hide()}return x.current=requestAnimationFrame(()=>{d&&c&&p&&(d.element.className=Ym(t,Cnt(c,e,p,l)),d.setPosition(c))}),()=>cancelAnimationFrame(x.current)},[s,r,n,o]),null},Ont=$.forwardRef(Fnt),Dnt=({noClear:t=!1,isStatic:e=!1,render:n,index:i,visible:s},r)=>{const o=Hn(),[a,l]=$.useState(null);return $.useImperativeHandle(r,()=>a,[a]),$.useEffect(()=>{const d=o.layers.addCanvasLayer(n,{isStatic:e,noClear:t},i);return l(d),()=>{d&&(d.destroy(),l(null))}},[]),$.useEffect(()=>{a&&(i!==void 0&&isFinite(i)&&a.moveTo(i),s===a.isHidden()&&s?a.show():a.hide())},[a,i,s]),null},znt=$.forwardRef(Dnt),n0={x:-9999,y:-9999};$.forwardRef(({position:t,children:e,className:n="",size:i,scaled:s},r)=>{const o=Hn(),[a,l]=$.useState(null);return $.useImperativeHandle(r,()=>a,[a]),$.useEffect(()=>{const d=Ou(t,o)||n0,h=document.createElement("div");h.className=n;const c=o.layers.addOverlay({position:d||n0,element:h,size:i||{width:"auto",height:"auto"},scaled:s});return l(c),()=>{a&&(a.destroy(),l(null))}},[]),$.useEffect(()=>{if(a){const d=Ou(t,o)||n0;n&&(a.element.className=n),a.setPosition(d)}},[t,n]),a?Uu.createPortal(e,a.element):null});const OD=$.forwardRef(({children:t,className:e="",index:n},i)=>{const s=Hn(),[r,o]=$.useState(null);return $.useImperativeHandle(i,()=>r,[r]),$.useEffect(()=>{const a=document.createElement("div");a.className=e;const l=s.layers.addLayer(a,n);return o(l),()=>{r&&(r.destroy(),o(null))}},[]),$.useEffect(()=>{r&&(r.element.className=e)},[e]),r?Uu.createPortal(t,r.element):null});function Bnt({enabled:t=!1,...e}){const n=Hn();return $.useEffect(()=>{t?n.geo.enable(e):n.geo.disable()},[t]),null}function Unt(){const t=Hn(),e=$.useCallback(n=>{t.events.once("idle",()=>t.layouts.force({locate:!0}))},[t]);return $.useEffect(()=>(t.events.on(["addNodes","transformationEnabled","transformationDisabled"],e),()=>{t.events.off(e)}),[t]),null}function $nt({visible:t=!0}){const e=Hn(),n=$.createRef(),i=$.useCallback(s=>{s.fillStyle="rgba(157, 197, 187, 0.25)",s.beginPath(),e.getNodes().getAttributes(["x","y","radius"]).forEach(({x:r,y:o,radius:a})=>{s.moveTo(r,o),s.arc(r,o,a*6,0,2*Math.PI)}),s.fill()},[]);return $.useEffect(()=>{const s=()=>{var r;(r=n.current)==null||r.refresh()};return e.events.on(["nodesDragProgress","idle"],s),()=>{e.events.off(s)}},[]),Q.jsx(znt,{visible:t,render:i,ref:n,index:0})}var DD={exports:{}},jnt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Gnt=jnt,Vnt=Gnt;function zD(){}function BD(){}BD.resetWarningCache=zD;var Hnt=function(){function t(i,s,r,o,a,l){if(l!==Vnt){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:BD,resetWarningCache:zD};return n.PropTypes=n,n};DD.exports=Hnt();var Wnt=DD.exports;const Do=qm(Wnt);function Nx(){return Nx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nx.apply(this,arguments)}function Xnt(t,e){if(t==null)return{};var n=Znt(t,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Znt(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var AE=$.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,s=t.size,r=s===void 0?24:s,o=Xnt(t,["color","size"]);return Lo.createElement("svg",Nx({ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Lo.createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}))});AE.propTypes={color:Do.string,size:Do.oneOfType([Do.string,Do.number])};AE.displayName="GitHub";function Rx(){return Rx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rx.apply(this,arguments)}function Ynt(t,e){if(t==null)return{};var n=qnt(t,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function qnt(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var TE=$.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,s=t.size,r=s===void 0?24:s,o=Ynt(t,["color","size"]);return Lo.createElement("svg",Rx({ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Lo.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),Lo.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),Lo.createElement("line",{x1:"3",y1:"18",x2:"21",y2:"18"}))});TE.propTypes={color:Do.string,size:Do.oneOfType([Do.string,Do.number])};TE.displayName="Menu";function Jnt({toggleNodeGrouping:t,nodeGrouping:e,setNodeSize:n,setEdgeWidth:i,geoEnabled:s,setGeoEnabled:r,outlines:o,setOutlines:a}){const[l,d]=$.useState(!1),[h,c]=$.useState(5),[g,m]=$.useState(.25);return Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"control-buttons",children:!l&&Q.jsx(vc,{onClick:()=>d(!l),w:"28px",h:"28px",px:.5,title:"Show controls",variant:"outline",children:Q.jsx(TE,{})})}),Q.jsxs(vr,{opened:l,onClose:()=>d(!1),position:"right",className:"controls",children:[Q.jsx(oE,{order:2,children:"Controls"}),Q.jsx(zm,{h:"xl"}),Q.jsx("div",{className:"controls-section",children:Q.jsx(gu,{checked:e,onChange:()=>t(!e),label:"Node grouping"})}),Q.jsxs("div",{className:"controls-section",children:[Q.jsx(Om,{children:"Node size"}),Q.jsx(Dm,{value:h,max:50,min:1,step:.25,onClickCapture:_=>_.stopPropagation(),onChange:_=>{n(_),c(_)},label:"Node size"})]}),Q.jsx(zm,{}),Q.jsxs("div",{className:"controls-section",children:[Q.jsx(Om,{children:"Edge width"}),Q.jsx(Dm,{value:g,max:5,min:.05,step:.25,onClickCapture:_=>_.stopPropagation(),onChange:_=>{i(_),m(_)}})]}),Q.jsx("div",{className:"controls-section",children:Q.jsx(gu,{checked:o,onChange:()=>a(!o),label:"Node outlines"})}),Q.jsx("div",{className:"controls-section",children:Q.jsx(gu,{checked:s,onChange:()=>r(!s),label:"Geo mode"})})]})]})}const Knt=()=>{const t=Hn(),[e,n]=$.useState({x:0,y:0}),i=$.useRef(null),s=$.useCallback(r=>{requestAnimationFrame(()=>n(r))},[n]);return $.useEffect(()=>{const r=()=>{const{x:o,y:a}=t.getPointerInformation();s({x:o,y:a})};return t.events.on("mousemove",r),()=>{t.events.off(r)}},[t]),Q.jsx(OD,{className:"position-control",ref:i,children:Q.jsxs("div",{className:"position-control__container",children:[e.x,", ",e.y]})})},Qnt=({width:t=12,height:e=12,...n})=>Q.jsx("svg",{width:t,height:e,role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...n,children:Q.jsx("path",{fill:"currentColor",d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"})}),tit=()=>Q.jsxs("div",{className:"Logo",children:["Ogma + ",Q.jsx(Qnt,{width:18,height:18,className:"ReactIcon"})," React",Q.jsx(zm,{w:"md"}),Q.jsx("a",{href:"https://github.com/linkurious/ogma-react",target:"_blank",children:Q.jsx(vc,{variant:"outline",w:"28px",h:"28px",px:.5,title:"Go to code",children:Q.jsx(AE,{})})})]}),eit=({width:t=12,height:e=12})=>Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,fill:"currentColor",strokeWidth:"0",style:{overflow:"visible",color:"currentcolor"},viewBox:"0 0 512 512",children:[Q.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m400 304 48 48-48 48M400 112l48 48-48 48M64 352h85.19a80 80 0 0 0 66.56-35.62L256 256"}),Q.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M64 160h85.19a80 80 0 0 1 66.56 35.62l80.5 120.76A80 80 0 0 0 362.81 352H416m0-192h-53.19a80 80 0 0 0-66.56 35.62L288 208"})]}),nit=({options:t,update:e})=>{const n=$.useCallback(()=>{e({...t,groupIdFunction:i=>i.getData("categories")[0]==="INVESTOR"?"INVESTOR":"OTHER"})},[t]);return Q.jsx(OD,{className:"grouping-controls",children:Q.jsx("button",{onClick:n,children:Q.jsx(eit,{})})})};NF.libraries.leaflet=ntt;function iit(){const[t,e]=$.useState(),[n,i]=$.useState(!0),[s,r]=$.useState(!1),[o,a]=$.useState(),l=$.createRef(),d=$.createRef(),[h,c]=$.useState(!0),[g,m]=$.useState(!1),[_,p]=$.useState(5),[v,x]=$.useState(.25),[b,E]=$.useState({groupIdFunction:M=>{const z=M.getData("categories");if(z)return z[0]==="INVESTOR"?"INVESTOR":void 0},nodeGenerator:M=>({data:{multiplier:M.size}}),disabled:!0}),[S,A]=$.useState(!1),[T,P]=$.useState({x:0,y:0}),[k,I]=$.useState(),R=$.useCallback(M=>{requestAnimationFrame(()=>P(M))},[]);return $.useEffect(()=>{i(!0),fetch("data.json").then(M=>M.json()).then(M=>{e(M),i(!1)})},[]),n?Q.jsx(sE,{zIndex:400}):Q.jsxs("div",{className:"App",children:[Q.jsx(tit,{}),Q.jsxs(stt,{ref:l,graph:t,onReady:M=>{M.events.on("click",({target:z})=>{z&&z.isNode&&(a(z),r(!0))}).on("mousemove",()=>{const z=M.getPointerInformation();R(M.view.screenToGraphCoordinates({x:z.x,y:z.y})),I(z.target)}).on("addNodes",()=>M.view.locateGraph({duration:250,padding:50}))},children:[Q.jsx(ott,{attributes:{color:"#247BA0",radius:M=>((M==null?void 0:M.getData("multiplier"))||1)*_,text:M=>M==null?void 0:M.getData("properties.name")}}),Q.jsx(ltt,{attributes:{width:v}}),Q.jsx(Unt,{}),Q.jsx(dtt,{ref:d,disabled:!h&&!g,groupIdFunction:b.groupIdFunction,nodeGenerator:b.nodeGenerator,duration:500}),Q.jsx(Rnt,{position:()=>o?o.getPosition():null,onClose:()=>r(!1),isOpen:o&&s,children:o&&Q.jsx("div",{className:"content",children:`Node ${o.getId()}:`})}),Q.jsx(Ont,{visible:!!k,placement:"top",position:T,children:Q.jsx("div",{className:"x",children:k?`${k.isNode?"Node":"Edge"} #${k.getId()}`:"nothing"})}),Q.jsx($nt,{visible:S}),Q.jsx(Bnt,{enabled:g,longitudePath:"properties.longitude",latitudePath:"properties.latitude"}),Q.jsx(Knt,{}),Q.jsx(nit,{options:b,update:M=>E(M)})]}),Q.jsx(Jnt,{toggleNodeGrouping:M=>c(M),nodeGrouping:h,setNodeSize:p,setEdgeWidth:x,outlines:S,setOutlines:A,geoEnabled:g,setGeoEnabled:m})]})}const sit=document.getElementById("root"),rit=_k(sit),oit={};rit.render(Q.jsx(Lo.StrictMode,{children:Q.jsx(sO,{theme:oit,children:Q.jsx(iit,{})})}))});export default ait();
